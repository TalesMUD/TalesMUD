var app=function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}i((function(t,n){
/*!
   * Materialize v1.0.0-rc.2 (http://materializecss.com)
   * Copyright 2014-2017 Materialize
   * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
   */
var i=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
/*! cash-dom 1.3.5, https://github.com/kenwheeler/cash @license MIT */window.cash=function(){var e,t=document,n=window,i=Array.prototype,o=i.slice,r=i.filter,s=i.push,a=function(){},c=function(e){return typeof e==typeof a&&e.call},l=function(e){return"string"==typeof e},u=/^#[\w-]*$/,h=/^\.[\w-]*$/,d=/<.+>/,f=/^\w+$/;function p(e,n){return n=n||t,h.test(e)?n.getElementsByClassName(e.slice(1)):f.test(e)?n.getElementsByTagName(e):n.querySelectorAll(e)}function v(n){if(!e){var i=(e=t.implementation.createHTMLDocument(null)).createElement("base");i.href=t.location.href,e.head.appendChild(i)}return e.body.innerHTML=n,e.body.childNodes}function m(e){"loading"!==t.readyState?e():t.addEventListener("DOMContentLoaded",e)}function _(e,i){if(!e)return this;if(e.cash&&e!==n)return e;var o,r=e,s=0;if(l(e))r=u.test(e)?t.getElementById(e.slice(1)):d.test(e)?v(e):p(e,i);else if(c(e))return m(e),this;if(!r)return this;if(r.nodeType||r===n)this[0]=r,this.length=1;else for(o=this.length=r.length;s<o;s++)this[s]=r[s];return this}function g(e,t){return new _(e,t)}var y=g.fn=g.prototype=_.prototype={cash:!0,length:0,push:s,splice:i.splice,map:i.map,init:_};function b(e,t){for(var n=e.length,i=0;i<n&&!1!==t.call(e[i],e[i],i,e);i++);}function w(e,t){var n=e&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector);return!!n&&n.call(e,t)}function C(e){return l(e)?w:e.cash?function(t){return e.is(t)}:function(e,t){return e===t}}function S(e){return g(o.call(e).filter((function(e,t,n){return n.indexOf(e)===t})))}Object.defineProperty(y,"constructor",{value:g}),g.parseHTML=v,g.noop=a,g.isFunction=c,g.isString=l,g.extend=y.extend=function(e){e=e||{};var t=o.call(arguments),n=t.length,i=1;for(1===t.length&&(e=this,i=0);i<n;i++)if(t[i])for(var r in t[i])t[i].hasOwnProperty(r)&&(e[r]=t[i][r]);return e},g.extend({merge:function(e,t){for(var n=+t.length,i=e.length,o=0;o<n;i++,o++)e[i]=t[o];return e.length=i,e},each:b,matches:w,unique:S,isArray:Array.isArray,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}});var k=g.uid="_cash"+Date.now();function E(e){return e[k]=e[k]||{}}function x(e,t,n){return E(e)[t]=n}function T(e,t){var n=E(e);return void 0===n[t]&&(n[t]=e.dataset?e.dataset[t]:g(e).attr("data-"+t)),n[t]}y.extend({data:function(e,t){if(l(e))return void 0===t?T(this[0],e):this.each((function(n){return x(n,e,t)}));for(var n in e)this.data(n,e[n]);return this},removeData:function(e){return this.each((function(t){return function(e,t){var n=E(e);n?delete n[t]:e.dataset?delete e.dataset[t]:g(e).removeAttr("data-"+name)}(t,e)}))}});var L=/\S+/g;function R(e){return l(e)&&e.match(L)}function M(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function O(e,t,n){e.classList?e.classList.add(t):n.indexOf(" "+t+" ")&&(e.className+=" "+t)}function A(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}y.extend({addClass:function(e){var t=R(e);return t?this.each((function(e){var n=" "+e.className+" ";b(t,(function(t){O(e,t,n)}))})):this},attr:function(e,t){if(e){if(l(e))return void 0===t?this[0]?this[0].getAttribute?this[0].getAttribute(e):this[0][e]:void 0:this.each((function(n){n.setAttribute?n.setAttribute(e,t):n[e]=t}));for(var n in e)this.attr(n,e[n]);return this}},hasClass:function(e){var t=!1,n=R(e);return n&&n.length&&this.each((function(e){return!(t=M(e,n[0]))})),t},prop:function(e,t){if(l(e))return void 0===t?this[0][e]:this.each((function(n){n[e]=t}));for(var n in e)this.prop(n,e[n]);return this},removeAttr:function(e){return this.each((function(t){t.removeAttribute?t.removeAttribute(e):delete t[e]}))},removeClass:function(e){if(!arguments.length)return this.attr("class","");var t=R(e);return t?this.each((function(e){b(t,(function(t){A(e,t)}))})):this},removeProp:function(e){return this.each((function(t){delete t[e]}))},toggleClass:function(e,t){if(void 0!==t)return this[t?"addClass":"removeClass"](e);var n=R(e);return n?this.each((function(e){var t=" "+e.className+" ";b(n,(function(n){M(e,n)?A(e,n):O(e,n,t)}))})):this}}),y.extend({add:function(e,t){return S(g.merge(this,g(e,t)))},each:function(e){return b(this,e),this},eq:function(e){return g(this.get(e))},filter:function(e){if(!e)return this;var t=c(e)?e:C(e);return g(r.call(this,(function(n){return t(n,e)})))},first:function(){return this.eq(0)},get:function(e){return void 0===e?o.call(this):e<0?this[e+this.length]:this[e]},index:function(e){var t=e?g(e)[0]:this[0],n=e?this:g(t).parent().children();return o.call(n).indexOf(t)},last:function(){return this.eq(-1)}});var $,D,I,P,B=(I=/(?:^\w|[A-Z]|\b\w)/g,P=/[\s-_]+/g,function(e){return e.replace(I,(function(e,t){return e[0===t?"toLowerCase":"toUpperCase"]()})).replace(P,"")}),H=($={},D=document.createElement("div").style,function(e){if(e=B(e),$[e])return $[e];var t=e.charAt(0).toUpperCase()+e.slice(1);return b((e+" "+["webkit","moz","ms","o"].join(t+" ")+t).split(" "),(function(t){if(t in D)return $[t]=e=$[e]=t,!1})),$[e]});function j(e,t){return parseInt(n.getComputedStyle(e[0],null)[t],10)||0}function W(e,t,n){var i,o=T(e,"_cashEvents"),r=o&&o[t];r&&(n?(e.removeEventListener(t,n),(i=r.indexOf(n))>=0&&r.splice(i,1)):(b(r,(function(n){e.removeEventListener(t,n)})),r=[]))}function F(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t).replace(/%20/g,"+")}function N(e){var t=e.type;if(!t)return null;switch(t.toLowerCase()){case"select-one":return function(e){var t=e.selectedIndex;return t>=0?e.options[t].value:null}(e);case"select-multiple":return function(e){var t=[];return b(e.options,(function(e){e.selected&&t.push(e.value)})),t.length?t:null}(e);case"radio":case"checkbox":return e.checked?e.value:null;default:return e.value?e.value:null}}function U(e,t,n){var i=l(t);i||!t.length?b(e,i?function(e){return e.insertAdjacentHTML(n?"afterbegin":"beforeend",t)}:function(e,i){return function(e,t,n){if(n){var i=e.childNodes[0];e.insertBefore(t,i)}else e.appendChild(t)}(e,0===i?t:t.cloneNode(!0),n)}):b(t,(function(t){return U(e,t,n)}))}g.prefixedProp=H,g.camelCase=B,y.extend({css:function(e,t){if(l(e))return e=H(e),arguments.length>1?this.each((function(n){return n.style[e]=t})):n.getComputedStyle(this[0])[e];for(var i in e)this.css(i,e[i]);return this}}),b(["Width","Height"],(function(e){var t=e.toLowerCase();y[t]=function(){return this[0].getBoundingClientRect()[t]},y["inner"+e]=function(){return this[0]["client"+e]},y["outer"+e]=function(t){return this[0]["offset"+e]+(t?j(this,"margin"+("Width"===e?"Left":"Top"))+j(this,"margin"+("Width"===e?"Right":"Bottom")):0)}})),y.extend({off:function(e,t){return this.each((function(n){return W(n,e,t)}))},on:function(e,t,n,i){var o;if(!l(e)){for(var r in e)this.on(r,t,e[r]);return this}return c(t)&&(n=t,t=null),"ready"===e?(m(n),this):(t&&(o=n,n=function(e){for(var n=e.target;!w(n,t);){if(n===this||null===n)return!1;n=n.parentNode}n&&o.call(n,e)}),this.each((function(t){var o=n;i&&(o=function(){n.apply(this,arguments),W(t,e,o)}),function(e,t,n){var i=T(e,"_cashEvents")||x(e,"_cashEvents",{});i[t]=i[t]||[],i[t].push(n),e.addEventListener(t,n)}(t,e,o)})))},one:function(e,t,n){return this.on(e,t,n,!0)},ready:m,trigger:function(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");return n.initEvent(e,!0,!1),n=this.extend(n,t),this.each((function(e){return e.dispatchEvent(n)}))}}}),y.extend({serialize:function(){var e="";return b(this[0].elements||this,(function(t){if(!t.disabled&&"FIELDSET"!==t.tagName){var n=t.name;switch(t.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var i=N(t);null!==i&&b(i,(function(t){e+=F(n,t)}));break;default:var o=N(t);null!==o&&(e+=F(n,o))}}})),e.substr(1)},val:function(e){return void 0===e?N(this[0]):this.each((function(t){return t.value=e}))}}),y.extend({after:function(e){return g(e).insertAfter(this),this},append:function(e){return U(this,e),this},appendTo:function(e){return U(g(e),this),this},before:function(e){return g(e).insertBefore(this),this},clone:function(){return g(this.map((function(e){return e.cloneNode(!0)})))},empty:function(){return this.html(""),this},html:function(e){if(void 0===e)return this[0].innerHTML;var t=e.nodeType?e[0].outerHTML:e;return this.each((function(e){return e.innerHTML=t}))},insertAfter:function(e){var t=this;return g(e).each((function(e,n){var i=e.parentNode,o=e.nextSibling;t.each((function(e){i.insertBefore(0===n?e:e.cloneNode(!0),o)}))})),this},insertBefore:function(e){var t=this;return g(e).each((function(e,n){var i=e.parentNode;t.each((function(t){i.insertBefore(0===n?t:t.cloneNode(!0),e)}))})),this},prepend:function(e){return U(this,e,!0),this},prependTo:function(e){return U(g(e),this,!0),this},remove:function(){return this.each((function(e){if(e.parentNode)return e.parentNode.removeChild(e)}))},text:function(e){return void 0===e?this[0].textContent:this.each((function(t){return t.textContent=e}))}});var q=t.documentElement;return y.extend({position:function(){var e=this[0];return{left:e.offsetLeft,top:e.offsetTop}},offset:function(){var e=this[0].getBoundingClientRect();return{top:e.top+n.pageYOffset-q.clientTop,left:e.left+n.pageXOffset-q.clientLeft}},offsetParent:function(){return g(this[0].offsetParent)}}),y.extend({children:function(e){var t=[];return this.each((function(e){s.apply(t,e.children)})),t=S(t),e?t.filter((function(t){return w(t,e)})):t},closest:function(e){return!e||this.length<1?g():this.is(e)?this.filter(e):this.parent().closest(e)},is:function(e){if(!e)return!1;var t=!1,n=C(e);return this.each((function(i){return!(t=n(i,e))})),t},find:function(e){if(!e||e.nodeType)return g(e&&this.has(e).length?e:null);var t=[];return this.each((function(n){s.apply(t,p(e,n))})),S(t)},has:function(e){var t=l(e)?function(t){return 0!==p(e,t).length}:function(t){return t.contains(e)};return this.filter(t)},next:function(){return g(this[0].nextElementSibling)},not:function(e){if(!e)return this;var t=C(e);return this.filter((function(n){return!t(n,e)}))},parent:function(){var e=[];return this.each((function(t){t&&t.parentNode&&e.push(t.parentNode)})),S(e)},parents:function(e){var n,i=[];return this.each((function(o){for(n=o;n&&n.parentNode&&n!==t.body.parentNode;)n=n.parentNode,(!e||e&&w(n,e))&&i.push(n)})),S(i)},prev:function(){return g(this[0].previousElementSibling)},siblings:function(e){var t=this.parent().children(e),n=this[0];return t.filter((function(e){return e!==n}))}}),g}();var c=function(){function e(t,n,i){a(this,e),n instanceof Element||console.error(Error(n+" is not an HTML Element"));var o=t.getInstance(n);o&&o.destroy(),this.el=n,this.$el=cash(n)}return o(e,null,[{key:"init",value:function(e,t,n){var i=null;if(t instanceof Element)i=new e(t,n);else if(t&&(t.jquery||t.cash||t instanceof NodeList)){for(var o=[],r=0;r<t.length;r++)o.push(new e(t[r],n));i=o}return i}}]),e}();!function(e){e.Package?M={}:e.M={},M.jQueryLoaded=!!e.jQuery}(window),n.nodeType||(!t.nodeType&&t.exports&&(n=t.exports=M),n.default=M),M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;document.addEventListener("keydown",(function(e){M.keyDown=!0,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!0)}),!0),document.addEventListener("keyup",(function(e){M.keyDown=!1,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!1)}),!0),document.addEventListener("focus",(function(e){M.keyDown&&document.body.classList.add("keyboard-focused")}),!0),document.addEventListener("blur",(function(e){document.body.classList.remove("keyboard-focused")}),!0),M.initializeJqueryWrapper=function(e,t,n){jQuery.fn[t]=function(i){if(e.prototype[i]){var o=Array.prototype.slice.call(arguments,1);if("get"===i.slice(0,3)){var r=this.first()[0][n];return r[i].apply(r,o)}return this.each((function(){var e=this[n];e[i].apply(e,o)}))}if("object"==typeof i||!i)return e.init(this,arguments[0]),this;jQuery.error("Method "+i+" does not exist on jQuery."+t)}},M.AutoInit=function(e){var t=e||document.body,n={Autocomplete:t.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:t.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:t.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:t.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:t.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:t.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:t.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:t.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:t.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:t.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:t.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:t.querySelectorAll("select:not(.no-autoinit)"),Sidenav:t.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:t.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:t.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:t.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:t.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:t.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var i in n){M[i].init(n[i])}},M.objectSelectorString=function(e){return((e.prop("tagName")||"")+(e.attr("id")||"")+(e.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),M.escapeHash=function(e){return e.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(e){var t=$(e),n=t.add(t.parents()),i=!1;return n.each((function(){if("fixed"===$(this).css("position"))return i=!0,!1})),i},M.checkWithinContainer=function(e,t,n){var i={top:!1,right:!1,bottom:!1,left:!1},o=e.getBoundingClientRect(),r=e===document.body?Math.max(o.bottom,window.innerHeight):o.bottom,s=e.scrollLeft,a=e.scrollTop,c=t.left-s,l=t.top-a;return(c<o.left+n||c<n)&&(i.left=!0),(c+t.width>o.right-n||c+t.width>window.innerWidth-n)&&(i.right=!0),(l<o.top+n||l<n)&&(i.top=!0),(l+t.height>r-n||l+t.height>window.innerHeight-n)&&(i.bottom=!0),i},M.checkPossibleAlignments=function(e,t,n,i){var o={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},r="visible"===getComputedStyle(t).overflow,s=t.getBoundingClientRect(),a=Math.min(s.height,window.innerHeight),c=Math.min(s.width,window.innerWidth),l=e.getBoundingClientRect(),u=t.scrollLeft,h=t.scrollTop,d=n.left-u,f=n.top-h,p=n.top+l.height-h;return o.spaceOnRight=r?window.innerWidth-(l.left+n.width):c-(d+n.width),o.spaceOnRight<0&&(o.left=!1),o.spaceOnLeft=r?l.right-n.width:d-n.width+l.width,o.spaceOnLeft<0&&(o.right=!1),o.spaceOnBottom=r?window.innerHeight-(l.top+n.height+i):a-(f+n.height+i),o.spaceOnBottom<0&&(o.top=!1),o.spaceOnTop=r?l.bottom-(n.height+i):p-(n.height-i),o.spaceOnTop<0&&(o.bottom=!1),o},M.getOverflowParent=function(e){return null==e?null:e===document.body||"visible"!==getComputedStyle(e).overflow?e:M.getOverflowParent(e.parentElement)},M.getIdFromTrigger=function(e){var t=e.getAttribute("data-target");return t||(t=(t=e.getAttribute("href"))?t.slice(1):""),t},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};
/**
   * Get time in ms
   * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
   * @type {function}
   * @return {number}
   */
var l=Date.now||function(){return(new Date).getTime()};
/**
   * Returns a function, that, when invoked, will only be triggered at most once
   * during a given window of time. Normally, the throttled function will run
   * as much as it can, without ever going more than once per `wait` duration;
   * but if you'd like to disable the execution on the leading edge, pass
   * `{leading: false}`. To disable execution on the trailing edge, ditto.
   * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
   * @param {function} func
   * @param {number} wait
   * @param {Object=} options
   * @returns {Function}
   */M.throttle=function(e,t,n){var i=void 0,o=void 0,r=void 0,s=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:l(),s=null,r=e.apply(i,o),i=o=null};return function(){var u=l();a||!1!==n.leading||(a=u);var h=t-(u-a);return i=this,o=arguments,h<=0?(clearTimeout(s),s=null,a=u,r=e.apply(i,o),i=o=null):s||!1===n.trailing||(s=setTimeout(c,h)),r}};var u={scope:{}};u.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},u.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==e&&null!=e?e:t},u.global=u.getGlobal(e),u.SYMBOL_PREFIX="jscomp_symbol_",u.initSymbol=function(){u.initSymbol=function(){},u.global.Symbol||(u.global.Symbol=u.Symbol)},u.symbolCounter_=0,u.Symbol=function(e){return u.SYMBOL_PREFIX+(e||"")+u.symbolCounter_++},u.initSymbolIterator=function(){u.initSymbol();var e=u.global.Symbol.iterator;e||(e=u.global.Symbol.iterator=u.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&u.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return u.arrayIterator(this)}}),u.initSymbolIterator=function(){}},u.arrayIterator=function(e){var t=0;return u.iteratorPrototype((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))},u.iteratorPrototype=function(e){return u.initSymbolIterator(),(e={next:e})[u.global.Symbol.iterator]=function(){return this},e},u.array=u.array||{},u.iteratorFromArray=function(e,t){u.initSymbolIterator(),e instanceof String&&(e+="");var n=0,i={next:function(){if(n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},u.polyfill=function(e,t,n,i){if(t){for(n=u.global,e=e.split("."),i=0;i<e.length-1;i++){var o=e[i];o in n||(n[o]={}),n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&u.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},u.polyfill("Array.prototype.keys",(function(e){return e||function(){return u.iteratorFromArray(this,(function(e){return e}))}}),"es6-impl","es3");var h=e;M.anime=function(){function e(e){if(!M.col(e))try{return document.querySelectorAll(e)}catch(e){}}function t(e,t){for(var n=e.length,i=2<=arguments.length?arguments[1]:void 0,o=[],r=0;r<n;r++)if(r in e){var s=e[r];t.call(i,s,r,e)&&o.push(s)}return o}function n(e){return e.reduce((function(e,t){return e.concat(M.arr(t)?n(t):t)}),[])}function i(t){return M.arr(t)?t:(M.str(t)&&(t=e(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function o(e,t){return e.some((function(e){return e===t}))}function r(e){var t,n={};for(t in e)n[t]=e[t];return n}function s(e,t){var n,i=r(e);for(n in e)i[n]=t.hasOwnProperty(n)?t[n]:e[n];return i}function a(e,t){var n,i=r(e);for(n in t)i[n]=M.und(e[n])?t[n]:e[n];return i}function c(e){if(e=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e))return e[2]}function l(e,t){return M.fnc(e)?e(t.target,t.id,t.total):e}function u(e,t){if(t in e.style)return getComputedStyle(e).getPropertyValue(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function d(e,t){return M.dom(e)&&o(R,t)?"transform":M.dom(e)&&(e.getAttribute(t)||M.svg(e)&&e[t])?"attribute":M.dom(e)&&"transform"!==t&&u(e,t)?"css":null!=e[t]?"object":void 0}function f(e,n){switch(d(e,n)){case"transform":return function(e,n){var i=function(e){return-1<e.indexOf("translate")||"perspective"===e?"px":-1<e.indexOf("rotate")||-1<e.indexOf("skew")?"deg":void 0}(n);if(i=-1<n.indexOf("scale")?1:0+i,!(e=e.style.transform))return i;for(var o=[],r=[],s=[],a=/(\w+)\((.+?)\)/g;o=a.exec(e);)r.push(o[1]),s.push(o[2]);return(e=t(s,(function(e,t){return r[t]===n}))).length?e[0]:i}(e,n);case"css":return u(e,n);case"attribute":return e.getAttribute(n)}return e[n]||0}function p(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var i=c(e)||0;switch(t=parseFloat(t),e=parseFloat(e.replace(n[0],"")),n[0][0]){case"+":return t+e+i;case"-":return t-e+i;case"*":return t*e+i}}function v(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function m(e){e=e.points;for(var t,n=0,i=0;i<e.numberOfItems;i++){var o=e.getItem(i);0<i&&(n+=v(t,o)),t=o}return n}function _(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return 2*Math.PI*e.getAttribute("r");case"rect":return 2*e.getAttribute("width")+2*e.getAttribute("height");case"line":return v({x:e.getAttribute("x1"),y:e.getAttribute("y1")},{x:e.getAttribute("x2"),y:e.getAttribute("y2")});case"polyline":return m(e);case"polygon":var t=e.points;return m(e)+v(t.getItem(t.numberOfItems-1),t.getItem(0))}}function g(e,t){function n(n){return n=void 0===n?0:n,e.el.getPointAtLength(1<=t+n?t+n:0)}var i=n(),o=n(-1),r=n(1);switch(e.property){case"x":return i.x;case"y":return i.y;case"angle":return 180*Math.atan2(r.y-o.y,r.x-o.x)/Math.PI}}function y(e,t){var n,i=/-?\d*\.?\d+/g;if(n=M.pth(e)?e.totalLength:e,M.col(n))if(M.rgb(n)){var o=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=o?"rgba("+o[1]+",1)":n}else n=M.hex(n)?function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return t+t+n+n+i+i}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+(e=parseInt(t[1],16))+","+parseInt(t[2],16)+","+(t=parseInt(t[3],16))+",1)"}(n):M.hsl(n)?function(e){function t(e,t,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e);e=parseInt(n[1])/360;var i=parseInt(n[2])/100,o=parseInt(n[3])/100;if(n=n[4]||1,0==i)o=i=e=o;else{var r=.5>o?o*(1+i):o+i-o*i,s=2*o-r;o=t(s,r,e+1/3),i=t(s,r,e),e=t(s,r,e-1/3)}return"rgba("+255*o+","+255*i+","+255*e+","+n+")"}(n):void 0;else o=(o=c(n))?n.substr(0,n.length-o.length):n,n=t&&!/\s/g.test(n)?o+t:o;return{original:n+="",numbers:n.match(i)?n.match(i).map(Number):[0],strings:M.str(e)||t?n.split(i):[]}}function b(e){return t(e=e?n(M.arr(e)?e.map(i):i(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function w(e,t){var n=r(t);if(M.arr(e)){var o=e.length;2!==o||M.obj(e[0])?M.fnc(t.duration)||(n.duration=t.duration/o):e={value:e}}return i(e).map((function(e,n){return n=n?0:t.delay,e=M.obj(e)&&!M.pth(e)?e:{value:e},M.und(e.delay)&&(e.delay=n),e})).map((function(e){return a(e,n)}))}function C(e,t){var n;return e.tweens.map((function(i){var o=(i=function(e,t){var n,i={};for(n in e){var o=l(e[n],t);M.arr(o)&&1===(o=o.map((function(e){return l(e,t)}))).length&&(o=o[0]),i[n]=o}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}(i,t)).value,r=f(t.target,e.name),s=n?n.to.original:r,a=(s=M.arr(o)?o[0]:s,p(M.arr(o)?o[1]:o,s));return r=c(a)||c(s)||c(r),i.from=y(s,r),i.to=y(a,r),i.start=n?n.end:e.offset,i.end=i.start+i.delay+i.duration,i.easing=function(e){return M.arr(e)?O.apply(this,e):A[e]}(i.easing),i.elasticity=(1e3-Math.min(Math.max(i.elasticity,1),999))/1e3,i.isPath=M.pth(o),i.isColor=M.col(i.from.original),i.isColor&&(i.round=1),n=i}))}function S(e,t,n,i){var o="delay"===e;return t.length?(o?Math.min:Math.max).apply(Math,t.map((function(t){return t[e]}))):o?i.delay:n.offset+i.delay+i.duration}function k(e){var i,o=s(T,e),r=s(L,e),c=function(e){var t=b(e);return t.map((function(e,n){return{target:e,id:n,total:t.length}}))}(e.targets),l=[],u=a(o,r);for(i in e)u.hasOwnProperty(i)||"targets"===i||l.push({name:i,offset:u.offset,tweens:w(e[i],r)});return e=function(e,i){return t(n(e.map((function(e){return i.map((function(t){var n=d(e.target,t.name);if(n){var i=C(t,e);t={type:n,property:t.name,animatable:e,tweens:i,duration:i[i.length-1].end,delay:i[0].delay}}else t=void 0;return t}))}))),(function(e){return!M.und(e)}))}(c,l),a(o,{children:[],animatables:c,animations:e,duration:S("duration",e,o,r),delay:S("delay",e,o,r)})}function E(e){function n(){return window.Promise&&new Promise((function(e){return d=e}))}function i(e){return p.reversed?p.duration-e:e}function o(e){for(var n=0,i={},o=p.animations,r=o.length;n<r;){var s=o[n],a=s.animatable,c=(l=s.tweens)[f=l.length-1];f&&(c=t(l,(function(t){return e<t.end}))[0]||c);for(var l=Math.min(Math.max(e-c.start-c.delay,0),c.duration)/c.duration,h=isNaN(l)?1:c.easing(l,c.elasticity),d=(l=c.to.strings,c.round),f=[],v=void 0,m=(v=c.to.numbers.length,0);m<v;m++){var _=void 0,y=(_=c.to.numbers[m],c.from.numbers[m]);_=c.isPath?g(c.value,h*_):y+h*(_-y),d&&(c.isColor&&2<m||(_=Math.round(_*d)/d)),f.push(_)}if(c=l.length)for(v=l[0],h=0;h<c;h++)d=l[h+1],m=f[h],isNaN(m)||(v=d?v+(m+d):v+(m+" "));else v=f[0];$[s.type](a.target,s.property,v,i,a.id),s.currentValue=v,n++}if(n=Object.keys(i).length)for(o=0;o<n;o++)x||(x=u(document.body,"transform")?"transform":"-webkit-transform"),p.animatables[o].target.style[x]=i[o].join(" ");p.currentTime=e,p.progress=e/p.duration*100}function r(e){p[e]&&p[e](p)}function s(){p.remaining&&!0!==p.remaining&&p.remaining--}function a(e){var t=p.duration,a=p.offset,u=a+p.delay,v=p.currentTime,m=p.reversed,_=i(e);if(p.children.length){var g=p.children,y=g.length;if(_>=p.currentTime)for(var b=0;b<y;b++)g[b].seek(_);else for(;y--;)g[y].seek(_)}(_>=u||!t)&&(p.began||(p.began=!0,r("begin")),r("run")),_>a&&_<t?o(_):(_<=a&&0!==v&&(o(0),m&&s()),(_>=t&&v!==t||!t)&&(o(t),m||s())),r("update"),e>=t&&(p.remaining?(l=c,"alternate"===p.direction&&(p.reversed=!p.reversed)):(p.pause(),p.completed||(p.completed=!0,r("complete"),"Promise"in window&&(d(),f=n()))),h=0)}e=void 0===e?{}:e;var c,l,h=0,d=null,f=n(),p=k(e);return p.reset=function(){var e=p.direction,t=p.loop;for(p.currentTime=0,p.progress=0,p.paused=!0,p.began=!1,p.completed=!1,p.reversed="reverse"===e,p.remaining="alternate"===e&&1===t?2:t,o(0),e=p.children.length;e--;)p.children[e].reset()},p.tick=function(e){c=e,l||(l=c),a((h+c-l)*E.speed)},p.seek=function(e){a(i(e))},p.pause=function(){var e=D.indexOf(p);-1<e&&D.splice(e,1),p.paused=!0},p.play=function(){p.paused&&(p.paused=!1,l=0,h=i(p.currentTime),D.push(p),I||P())},p.reverse=function(){p.reversed=!p.reversed,l=0,h=i(p.currentTime)},p.restart=function(){p.pause(),p.reset(),p.play()},p.finished=f,p.reset(),p.autoplay&&p.play(),p}var x,T={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},L={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},R="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),M={arr:function(e){return Array.isArray(e)},obj:function(e){return-1<Object.prototype.toString.call(e).indexOf("Object")},pth:function(e){return M.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},dom:function(e){return e.nodeType||M.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return M.hex(e)||M.rgb(e)||M.hsl(e)}},O=function(){function e(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}return function(t,n,i,o){if(0<=t&&1>=t&&0<=i&&1>=i){var r=new Float32Array(11);if(t!==n||i!==o)for(var s=0;11>s;++s)r[s]=e(.1*s,t,i);return function(s){if(t===n&&i===o)return s;if(0===s)return 0;if(1===s)return 1;for(var a=0,c=1;10!==c&&r[c]<=s;++c)a+=.1;--c,c=a+(s-r[c])/(r[c+1]-r[c])*.1;var l=3*(1-3*i+3*t)*c*c+2*(3*i-6*t)*c+3*t;if(.001<=l){for(a=0;4>a&&0!=(l=3*(1-3*i+3*t)*c*c+2*(3*i-6*t)*c+3*t);++a){var u=e(c,t,i)-s;c-=u/l}s=c}else if(0===l)s=c;else{c=a,a+=.1;var h=0;do{0<(l=e(u=c+(a-c)/2,t,i)-s)?a=u:c=u}while(1e-7<Math.abs(l)&&10>++h);s=u}return e(s,n,o)}}}}(),A=function(){function e(e,t){return 0===e||1===e?e:-Math.pow(2,10*(e-1))*Math.sin(2*(e-1-t/(2*Math.PI)*Math.asin(1))*Math.PI/t)}var t,n="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),i={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],e],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(t,n){return 1-e(1-t,n)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(t,n){return.5>t?e(2*t,n)/2:1-e(-2*t+2,n)/2}]},o={linear:O(.25,.25,.75,.75)},r={};for(t in i)r.type=t,i[r.type].forEach(function(e){return function(t,i){o["ease"+e.type+n[i]]=M.fnc(t)?t:O.apply(h,t)}}(r)),r={type:r.type};return o}(),$={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,o){i[o]||(i[o]=[]),i[o].push(t+"("+n+")")}},D=[],I=0,P=function(){function e(){I=requestAnimationFrame(t)}function t(t){var n=D.length;if(n){for(var i=0;i<n;)D[i]&&D[i].tick(t),i++;e()}else cancelAnimationFrame(I),I=0}return e}();return E.version="2.2.0",E.speed=1,E.running=D,E.remove=function(e){e=b(e);for(var t=D.length;t--;)for(var n=D[t],i=n.animations,r=i.length;r--;)o(e,i[r].animatable.target)&&(i.splice(r,1),i.length||n.pause())},E.getValue=f,E.path=function(t,n){var i=M.str(t)?e(t)[0]:t,o=n||100;return function(e){return{el:i,property:e,totalLength:_(i)*(o/100)}}},E.setDashoffset=function(e){var t=_(e);return e.setAttribute("stroke-dasharray",t),t},E.bezier=O,E.easings=A,E.timeline=function(e){var t=E(e);return t.pause(),t.duration=0,t.add=function(n){return t.children.forEach((function(e){e.began=!0,e.completed=!0})),i(n).forEach((function(n){var i=a(n,s(L,e||{}));i.targets=i.targets||e.targets,n=t.duration;var o=i.offset;i.autoplay=!1,i.direction=t.direction,i.offset=M.und(o)?n:p(o,n),t.began=!0,t.completed=!0,t.seek(i.offset),(i=E(i)).began=!0,i.completed=!0,i.duration>n&&(t.duration=i.duration),t.children.push(i)})),t.seek(0),t.reset(),t.autoplay&&t.restart(),t},t},E.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},E}(),function(e,t){var n={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},l=function(c){function l(t,n){a(this,l);var i=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));i.el.M_Collapsible=i,i.options=e.extend({},l.defaults,n),i.$headers=i.$el.children("li").children(".collapsible-header"),i.$headers.attr("tabindex",0),i._setupEventHandlers();var o=i.$el.children("li.active").children(".collapsible-body");return i.options.accordion?o.first().css("display","block"):o.css("display","block"),i}return s(l,c),o(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each((function(t){t.addEventListener("keydown",e._handleCollapsibleKeydownBound)}))}},{key:"_removeEventHandlers",value:function(){var e=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each((function(t){t.removeEventListener("keydown",e._handleCollapsibleKeydownBound)}))}},{key:"_handleCollapsibleClick",value:function(t){var n=e(t.target).closest(".collapsible-header");if(t.target&&n.length){var i=n.closest(".collapsible");if(i[0]===this.el){var o=n.closest("li"),r=i.children("li"),s=o[0].classList.contains("active"),a=r.index(o);s?this.close(a):this.open(a)}}}},{key:"_handleCollapsibleKeydown",value:function(e){13===e.keyCode&&this._handleCollapsibleClickBound(e)}},{key:"_animateIn",value:function(e){var n=this,i=this.$el.children("li").eq(e);if(i.length){var o=i.children(".collapsible-body");t.remove(o[0]),o.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var r=o.css("padding-top"),s=o.css("padding-bottom"),a=o[0].scrollHeight;o.css({paddingTop:0,paddingBottom:0}),t({targets:o[0],height:a,paddingTop:r,paddingBottom:s,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(e){o.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),"function"==typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,i[0])}})}}},{key:"_animateOut",value:function(e){var n=this,i=this.$el.children("li").eq(e);if(i.length){var o=i.children(".collapsible-body");t.remove(o[0]),o.css("overflow","hidden"),t({targets:o[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){o.css({height:"",overflow:"",padding:"",display:""}),"function"==typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,i[0])}})}}},{key:"open",value:function(t){var n=this,i=this.$el.children("li").eq(t);if(i.length&&!i[0].classList.contains("active")){if("function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,i[0]),this.options.accordion){var o=this.$el.children("li");this.$el.children("li.active").each((function(t){var i=o.index(e(t));n.close(i)}))}i[0].classList.add("active"),this._animateIn(t)}}},{key:"close",value:function(e){var t=this.$el.children("li").eq(e);t.length&&t[0].classList.contains("active")&&("function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,t[0]),t[0].classList.remove("active"),this._animateOut(e))}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Collapsible}},{key:"defaults",get:function(){return n}}]),l}(c);M.Collapsible=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"collapsible","M_Collapsible")}(cash,M.anime),function(e,t){var n={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},l=function(c){function l(t,n){a(this,l);var i=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Dropdown=i,l._dropdowns.push(i),i.id=M.getIdFromTrigger(t),i.dropdownEl=document.getElementById(i.id),i.$dropdownEl=e(i.dropdownEl),i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.isScrollable=!1,i.isTouchMoving=!1,i.focusedIndex=-1,i.filterQuery=[],i.options.container?e(i.options.container).append(i.dropdownEl):i.$el.after(i.dropdownEl),i._makeDropdownFocusable(),i._resetFilterQueryBound=i._resetFilterQuery.bind(i),i._handleDocumentClickBound=i._handleDocumentClick.bind(i),i._handleDocumentTouchmoveBound=i._handleDocumentTouchmove.bind(i),i._handleDropdownClickBound=i._handleDropdownClick.bind(i),i._handleDropdownKeydownBound=i._handleDropdownKeydown.bind(i),i._handleTriggerKeydownBound=i._handleTriggerKeydown.bind(i),i._setupEventHandlers(),i}return s(l,c),o(l,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),l._dropdowns.splice(l._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(e){e.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(t){var n=t.toElement||t.relatedTarget,i=!!e(n).closest(".dropdown-content").length,o=!1,r=e(n).closest(".dropdown-trigger");r.length&&r[0].M_Dropdown&&r[0].M_Dropdown.isOpen&&(o=!0),o||i||this.close()}},{key:"_handleDocumentClick",value:function(t){var n=this,i=e(t.target);this.options.closeOnClick&&i.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout((function(){n.close()}),0):!i.closest(".dropdown-trigger").length&&i.closest(".dropdown-content").length||setTimeout((function(){n.close()}),0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(e){e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ENTER||this.isOpen||(e.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(t){e(t.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(t){if("function"==typeof this.options.onItemClick){var n=e(t.target).closest("li")[0];this.options.onItemClick.call(this,n)}}},{key:"_handleDropdownKeydown",value:function(t){if(t.which===M.keys.TAB)t.preventDefault(),this.close();else if(t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||!this.isOpen)if(t.which===M.keys.ENTER&&this.isOpen){var n=this.dropdownEl.children[this.focusedIndex],i=e(n).find("a, button").first();i.length?i[0].click():n.click()}else t.which===M.keys.ESC&&this.isOpen&&(t.preventDefault(),this.close());else{t.preventDefault();var o=t.which===M.keys.ARROW_DOWN?1:-1,r=this.focusedIndex,s=!1;do{if(r+=o,this.dropdownEl.children[r]&&-1!==this.dropdownEl.children[r].tabIndex){s=!0;break}}while(r<this.dropdownEl.children.length&&r>=0);s&&(this.focusedIndex=r,this._focusFocusedItem())}var a=String.fromCharCode(t.which).toLowerCase();if(a&&-1===[9,13,27,38,40].indexOf(t.which)){this.filterQuery.push(a);var c=this.filterQuery.join(""),l=e(this.dropdownEl).find("li").filter((function(t){return 0===e(t).text().toLowerCase().indexOf(c)}))[0];l&&(this.focusedIndex=e(l).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,e(this.dropdownEl).children().each((function(e){e.getAttribute("tabindex")||e.setAttribute("tabindex",0)}))}},{key:"_focusFocusedItem",value:function(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var e=this.el.getBoundingClientRect(),t=this.dropdownEl.getBoundingClientRect(),n=t.height,i=t.width,o=e.left-t.left,r=e.top-t.top,s={left:o,top:r,height:n,width:i},a=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,c=M.checkPossibleAlignments(this.el,a,s,this.options.coverTrigger?0:e.height),l="top",u=this.options.alignment;if(r+=this.options.coverTrigger?0:e.height,this.isScrollable=!1,c.top||(c.bottom?l="bottom":(this.isScrollable=!0,c.spaceOnTop>c.spaceOnBottom?(l="bottom",n+=c.spaceOnTop,r-=c.spaceOnTop):n+=c.spaceOnBottom)),!c[u]){var h="left"===u?"right":"left";c[h]?u=h:c.spaceOnLeft>c.spaceOnRight?(u="right",i+=c.spaceOnLeft,o-=c.spaceOnLeft):(u="left",i+=c.spaceOnRight)}return"bottom"===l&&(r=r-t.height+(this.options.coverTrigger?e.height:0)),"right"===u&&(o=o-t.width+e.width),{x:o,y:r,verticalAlignment:l,horizontalAlignment:u,height:n,width:i}}},{key:"_animateIn",value:function(){var e=this;t.remove(this.dropdownEl),t({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(t){if(e.options.autoFocus&&e.dropdownEl.focus(),"function"==typeof e.options.onOpenEnd){var n=t.animatables[0].target;e.options.onOpenEnd.call(n,e.el)}}})}},{key:"_animateOut",value:function(){var e=this;t.remove(this.dropdownEl),t({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(t){if(e._resetDropdownStyles(),"function"==typeof e.options.onCloseEnd){t.animatables[0].target;e.options.onCloseEnd.call(e,e.el)}}})}},{key:"_placeDropdown",value:function(){var e=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=e+"px";var t=this._getDropdownPosition();this.dropdownEl.style.left=t.x+"px",this.dropdownEl.style.top=t.y+"px",this.dropdownEl.style.height=t.height+"px",this.dropdownEl.style.width=t.width+"px",this.dropdownEl.style.transformOrigin=("left"===t.horizontalAlignment?"0":"100%")+" "+("top"===t.verticalAlignment?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Dropdown}},{key:"defaults",get:function(){return n}}]),l}(c);l._dropdowns=[],window.M.Dropdown=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"dropdown","M_Dropdown")}(cash,M.anime),function(e,t){var n={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},l=function(c){function l(t,n){a(this,l);var i=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Modal=i,i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.id=i.$el.attr("id"),i._openingTrigger=void 0,i.$overlay=e('<div class="modal-overlay"></div>'),i.el.tabIndex=0,i._nthModalOpened=0,l._count++,i._setupEventHandlers(),i}return s(l,c),o(l,[{key:"destroy",value:function(){l._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),1===l._count&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){0===l._count&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(t){var n=e(t.target).closest(".modal-trigger");if(n.length){var i=M.getIdFromTrigger(n[0]),o=document.getElementById(i).M_Modal;o&&o.open(n),t.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(t){e(t.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(e){27===e.keyCode&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(e){this.el.contains(e.target)||this._nthModalOpened!==l._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var n=this;e.extend(this.el.style,{display:"block",opacity:0}),e.extend(this.$overlay[0].style,{display:"block",opacity:0}),t({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var i={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){"function"==typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,n.el,n._openingTrigger)}};this.el.classList.contains("bottom-sheet")?(e.extend(i,{bottom:0,opacity:1}),t(i)):(e.extend(i,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),t(i))}},{key:"_animateOut",value:function(){var n=this;t({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var i={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){n.el.style.display="none",n.$overlay.remove(),"function"==typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,n.el)}};this.el.classList.contains("bottom-sheet")?(e.extend(i,{bottom:"-100%",opacity:0}),t(i)):(e.extend(i,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),t(i))}},{key:"open",value:function(e){if(!this.isOpen)return this.isOpen=!0,l._modalsOpen++,this._nthModalOpened=l._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*l._modalsOpen,this.el.style.zIndex=1e3+2*l._modalsOpen+1,this._openingTrigger=e?e[0]:void 0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),t.remove(this.el),t.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,l._modalsOpen--,this._nthModalOpened=0,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),0===l._modalsOpen&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),t.remove(this.el),t.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Modal}},{key:"defaults",get:function(){return n}}]),l}(c);l._modalsOpen=0,l._count=0,M.Modal=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"modal","M_Modal")}(cash,M.anime),function(e,t){var n={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},l=function(c){function l(t,n){a(this,l);var i=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Materialbox=i,i.options=e.extend({},l.defaults,n),i.overlayActive=!1,i.doneAnimating=!0,i.placeholder=e("<div></div>").addClass("material-placeholder"),i.originalWidth=0,i.originalHeight=0,i.originInlineStyles=i.$el.attr("style"),i.caption=i.el.getAttribute("data-caption")||"",i.$el.before(i.placeholder),i.placeholder.append(i.$el),i._setupEventHandlers(),i}return s(l,c),o(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,e(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(e){!1===this.doneAnimating||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(e){27===e.keyCode&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=e();for(var t=this.placeholder[0].parentNode;null!==t&&!e(t).is(document);){var n=e(t);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),void 0===this.ancestorsChanged?this.ancestorsChanged=n:this.ancestorsChanged=this.ancestorsChanged.add(n)),t=t.parentNode}}},{key:"_animateImageIn",value:function(){var e=this,n={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){e.doneAnimating=!0,"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),"none"!==this.maxWidth&&(n.maxWidth=this.newWidth),"none"!==this.maxHeight&&(n.maxHeight=this.newHeight),t(n)}},{key:"_animateImageOut",value:function(){var e=this,n={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.placeholder.css({height:"",width:"",position:"",top:"",left:""}),e.attrWidth&&e.$el.attr("width",e.attrWidth),e.attrHeight&&e.$el.attr("height",e.attrHeight),e.$el.removeAttr("style"),e.originInlineStyles&&e.$el.attr("style",e.originInlineStyles),e.$el.removeClass("active"),e.doneAnimating=!0,e.ancestorsChanged.length&&e.ancestorsChanged.css("overflow",""),"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}};t(n)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var n=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=e('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",(function(){n.doneAnimating&&n.close()})),this.$el.before(this.$overlay);var i=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*i.left+"px",top:-1*i.top+"px"}),t.remove(this.el),t.remove(this.$overlay[0]),t({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),""!==this.caption&&(this.$photocaption&&t.remove(this.$photoCaption[0]),this.$photoCaption=e('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),e("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),t({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var o=0,r=this.originalWidth/this.windowWidth,s=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,r>s?(o=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*o):(o=this.originalWidth/this.originalHeight,this.newWidth=.9*this.windowHeight*o,this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var e=this;this._updateVars(),this.doneAnimating=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),t.remove(this.el),t.remove(this.$overlay[0]),""!==this.caption&&t.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),t({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.overlayActive=!1,e.$overlay.remove()}}),this._animateImageOut(),""!==this.caption&&t({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.$photoCaption.remove()}})}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Materialbox}},{key:"defaults",get:function(){return n}}]),l}(c);M.Materialbox=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"materialbox","M_Materialbox")}(cash,M.anime),function(e){var t={responsiveThreshold:0},n=function(n){function c(t,n){a(this,c);var i=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,n));return i.el.M_Parallax=i,i.options=e.extend({},c.defaults,n),i._enabled=window.innerWidth>i.options.responsiveThreshold,i.$img=i.$el.find("img").first(),i.$img.each((function(){this.complete&&e(this).trigger("load")})),i._updateParallax(),i._setupEventHandlers(),i._setupStyles(),c._parallaxes.push(i),i}return s(c,n),o(c,[{key:"destroy",value:function(){c._parallaxes.splice(c._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),0===c._parallaxes.length&&(c._handleScrollThrottled=M.throttle(c._handleScroll,5),window.addEventListener("scroll",c._handleScrollThrottled),c._handleWindowResizeThrottled=M.throttle(c._handleWindowResize,5),window.addEventListener("resize",c._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),0===c._parallaxes.length&&(window.removeEventListener("scroll",c._handleScrollThrottled),window.removeEventListener("resize",c._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var e=this.$el.height()>0?this.el.parentNode.offsetHeight:500,t=this.$img[0].offsetHeight-e,n=this.$el.offset().top+e,i=this.$el.offset().top,o=M.getDocumentScrollTop(),r=window.innerHeight,s=t*((o+r-i)/(e+r));this._enabled?n>o&&i<o+r&&(this.$img[0].style.transform="translate3D(-50%, "+s+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(e,t){return i(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Parallax}},{key:"_handleScroll",value:function(){for(var e=0;e<c._parallaxes.length;e++){var t=c._parallaxes[e];t._updateParallax.call(t)}}},{key:"_handleWindowResize",value:function(){for(var e=0;e<c._parallaxes.length;e++){var t=c._parallaxes[e];t._enabled=window.innerWidth>t.options.responsiveThreshold}}},{key:"defaults",get:function(){return t}}]),c}(c);n._parallaxes=[],M.Parallax=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"parallax","M_Parallax")}(cash),function(e,t){var n={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},l=function(c){function l(t,n){a(this,l);var i=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Tabs=i,i.options=e.extend({},l.defaults,n),i.$tabLinks=i.$el.children("li.tab").children("a"),i.index=0,i._setupActiveTabLink(),i.options.swipeable?i._setupSwipeableTabs():i._setupNormalTabs(),i._setTabsAndTabWidth(),i._createIndicator(),i._setupEventHandlers(),i}return s(l,c),o(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),0!==this.tabWidth&&0!==this.tabsWidth&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(t){var n=this,i=e(t.target).closest("li.tab"),o=e(t.target).closest("a");if(o.length&&o.parent().hasClass("tab"))if(i.hasClass("disabled"))t.preventDefault();else if(!o.attr("target")){this.$activeTabLink.removeClass("active");var r=this.$content;this.$activeTabLink=o,this.$content=e(M.escapeHash(o[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var s=this.index;this.index=Math.max(this.$tabLinks.index(o),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,(function(){"function"==typeof n.options.onShow&&n.options.onShow.call(n,n.$content[0])})):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),"function"==typeof this.options.onShow&&this.options.onShow.call(this,this.$content[0]),r.length&&!r.is(this.$content)&&(r[0].style.display="none",r.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(s),t.preventDefault()}}},{key:"_createIndicator",value:function(){var e=this,t=document.createElement("li");t.classList.add("indicator"),this.el.appendChild(t),this._indicator=t,setTimeout((function(){e._indicator.style.left=e._calcLeftPos(e.$activeTabLink)+"px",e._indicator.style.right=e._calcRightPos(e.$activeTabLink)+"px"}),0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=e(this.$tabLinks.filter('[href="'+location.hash+'"]')),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=e(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var t=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var n=e();this.$tabLinks.each((function(t){var i=e(M.escapeHash(t.hash));i.addClass("carousel-item"),n=n.add(i)}));var i=e('<div class="tabs-content carousel carousel-slider"></div>');n.first().before(i),i.append(n),n[0].style.display="";var o=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(i[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(n){var i=t.index;t.index=e(n).index(),t.$activeTabLink.removeClass("active"),t.$activeTabLink=t.$tabLinks.eq(t.index),t.$activeTabLink.addClass("active"),t._animateIndicator(i),"function"==typeof t.options.onShow&&t.options.onShow.call(t,t.$content[0])}}),this._tabsCarousel.set(o)}},{key:"_teardownSwipeableTabs",value:function(){var e=this._tabsCarousel.$el;this._tabsCarousel.destroy(),e.after(e.children()),e.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each((function(t){if(t.hash){var n=e(M.escapeHash(t.hash));n.length&&(n[0].style.display="none")}}))}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each((function(t){if(t.hash){var n=e(M.escapeHash(t.hash));n.length&&(n[0].style.display="")}}))}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(e){return Math.ceil(this.tabsWidth-e.position().left-e[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(e){return Math.floor(e.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(e){var n=0,i=0;this.index-e>=0?n=90:i=90;var o={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:n},right:{value:this._calcRightPos(this.$activeTabLink),delay:i},duration:this.options.duration,easing:"easeOutQuad"};t.remove(this._indicator),t(o)}},{key:"select",value:function(e){var t=this.$tabLinks.filter('[href="#'+e+'"]');t.length&&t.trigger("click")}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tabs}},{key:"defaults",get:function(){return n}}]),l}(c);window.M.Tabs=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"tabs","M_Tabs")}(cash,M.anime),function(e,t){var n={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},l=function(c){function l(t,n){a(this,l);var i=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Tooltip=i,i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.isHovered=!1,i.isFocused=!1,i._appendTooltipEl(),i._setupEventHandlers(),i}return s(l,c),o(l,[{key:"destroy",value:function(){e(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var e=document.createElement("div");e.classList.add("material-tooltip"),this.tooltipEl=e;var t=document.createElement("div");t.classList.add("tooltip-content"),t.innerHTML=this.options.html,e.appendChild(t),document.body.appendChild(e)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(t){this.isOpen||(t=void 0===t||void 0,this.isOpen=!0,this.options=e.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(t))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var e=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout((function(){e.isHovered||e.isFocused||e._animateOut()}),this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(e){var t=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout((function(){(t.isHovered||t.isFocused||e)&&t._animateIn()}),this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var t,n=this.el,i=this.tooltipEl,o=n.offsetHeight,r=n.offsetWidth,s=i.offsetHeight,a=i.offsetWidth,c=this.options.margin,l=void 0,u=void 0;this.xMovement=0,this.yMovement=0,l=n.getBoundingClientRect().top+M.getDocumentScrollTop(),u=n.getBoundingClientRect().left+M.getDocumentScrollLeft(),"top"===this.options.position?(l+=-s-c,u+=r/2-a/2,this.yMovement=-this.options.transitionMovement):"right"===this.options.position?(l+=o/2-s/2,u+=r+c,this.xMovement=this.options.transitionMovement):"left"===this.options.position?(l+=o/2-s/2,u+=-a-c,this.xMovement=-this.options.transitionMovement):(l+=o+c,u+=r/2-a/2,this.yMovement=this.options.transitionMovement),t=this._repositionWithinScreen(u,l,a,s),e(i).css({top:t.y+"px",left:t.x+"px"})}},{key:"_repositionWithinScreen",value:function(e,t,n,i){var o=M.getDocumentScrollLeft(),r=M.getDocumentScrollTop(),s=e-o,a=t-r,c={left:s,top:a,width:n,height:i},l=this.options.margin+this.options.transitionMovement,u=M.checkWithinContainer(document.body,c,l);return u.left?s=l:u.right&&(s-=s+n-window.innerWidth),u.top?a=l:u.bottom&&(a-=a+i-window.innerHeight),{x:s+o,y:a+r}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var e={},t=this.el.getAttribute("data-tooltip"),n=this.el.getAttribute("data-position");return t&&(e.html=t),n&&(e.position=n),e}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tooltip}},{key:"defaults",get:function(){return n}}]),l}(c);M.Tooltip=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"tooltip","M_Tooltip")}(cash,M.anime),function(e){var t=t||{},n=document.querySelectorAll.bind(document);function i(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}var o={duration:750,show:function(e,t){if(2===e.button)return!1;var n=t||this,r=document.createElement("div");r.className="waves-ripple",n.appendChild(r);var s,a,c,l,u,h=(l={top:0,left:0},u=(s=n)&&s.ownerDocument,a=u.documentElement,void 0!==s.getBoundingClientRect&&(l=s.getBoundingClientRect()),c=function(e){return null!==(t=e)&&t===t.window?e:9===e.nodeType&&e.defaultView;var t}(u),{top:l.top+c.pageYOffset-a.clientTop,left:l.left+c.pageXOffset-a.clientLeft}),d=e.pageY-h.top,f=e.pageX-h.left,p="scale("+n.clientWidth/100*10+")";"touches"in e&&(d=e.touches[0].pageY-h.top,f=e.touches[0].pageX-h.left),r.setAttribute("data-hold",Date.now()),r.setAttribute("data-scale",p),r.setAttribute("data-x",f),r.setAttribute("data-y",d);var v={top:d+"px",left:f+"px"};r.className=r.className+" waves-notransition",r.setAttribute("style",i(v)),r.className=r.className.replace("waves-notransition",""),v["-webkit-transform"]=p,v["-moz-transform"]=p,v["-ms-transform"]=p,v["-o-transform"]=p,v.transform=p,v.opacity="1",v["-webkit-transition-duration"]=o.duration+"ms",v["-moz-transition-duration"]=o.duration+"ms",v["-o-transition-duration"]=o.duration+"ms",v["transition-duration"]=o.duration+"ms",v["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",v["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",v["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",v["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",r.setAttribute("style",i(v))},hide:function(e){r.touchup(e);var t=this,n=(t.clientWidth,null),s=t.getElementsByClassName("waves-ripple");if(!(s.length>0))return!1;var a=(n=s[s.length-1]).getAttribute("data-x"),c=n.getAttribute("data-y"),l=n.getAttribute("data-scale"),u=350-(Date.now()-Number(n.getAttribute("data-hold")));u<0&&(u=0),setTimeout((function(){var e={top:c+"px",left:a+"px",opacity:"0","-webkit-transition-duration":o.duration+"ms","-moz-transition-duration":o.duration+"ms","-o-transition-duration":o.duration+"ms","transition-duration":o.duration+"ms","-webkit-transform":l,"-moz-transform":l,"-ms-transform":l,"-o-transform":l,transform:l};n.setAttribute("style",i(e)),setTimeout((function(){try{t.removeChild(n)}catch(e){return!1}}),o.duration)}),u)},wrapInput:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var o=document.createElement("i");o.className=n.className+" waves-input-wrapper";var r=n.getAttribute("style");r||(r=""),o.setAttribute("style",r),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(o,n),o.appendChild(n)}}}},r={touches:0,allowEvent:function(e){var t=!0;return"touchstart"===e.type?r.touches+=1:"touchend"===e.type||"touchcancel"===e.type?setTimeout((function(){r.touches>0&&(r.touches-=1)}),500):"mousedown"===e.type&&r.touches>0&&(t=!1),t},touchup:function(e){r.allowEvent(e)}};function s(t){var n=function(e){if(!1===r.allowEvent(e))return null;for(var t=null,n=e.target||e.srcElement;null!==n.parentNode;){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf("waves-effect")){t=n;break}n=n.parentNode}return t}(t);null!==n&&(o.show(t,n),"ontouchstart"in e&&(n.addEventListener("touchend",o.hide,!1),n.addEventListener("touchcancel",o.hide,!1)),n.addEventListener("mouseup",o.hide,!1),n.addEventListener("mouseleave",o.hide,!1),n.addEventListener("dragend",o.hide,!1))}t.displayEffect=function(t){"duration"in(t=t||{})&&(o.duration=t.duration),o.wrapInput(n(".waves-effect")),"ontouchstart"in e&&document.body.addEventListener("touchstart",s,!1),document.body.addEventListener("mousedown",s,!1)},t.attach=function(t){"input"===t.tagName.toLowerCase()&&(o.wrapInput([t]),t=t.parentNode),"ontouchstart"in e&&t.addEventListener("touchstart",s,!1),t.addEventListener("mousedown",s,!1)},e.Waves=t,document.addEventListener("DOMContentLoaded",(function(){t.displayEffect()}),!1)}(window),function(e,t){var n={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},i=function(){function i(t){a(this,i),this.options=e.extend({},i.defaults,t),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,0===i._toasts.length&&i._createContainer(),i._toasts.push(this);var n=this._createToast();n.M_Toast=this,this.el=n,this.$el=e(n),this._animateIn(),this._setTimer()}return o(i,[{key:"_createToast",value:function(){var t=document.createElement("div");return t.classList.add("toast"),this.options.classes.length&&e(t).addClass(this.options.classes),("object"==typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"==typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"==typeof this.message.nodeName)?t.appendChild(this.message):this.message.jquery?e(t).append(this.message[0]):t.innerHTML=this.message,i._container.appendChild(t),t}},{key:"_animateIn",value:function(){t({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var e=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval((function(){e.panning||(e.timeRemaining-=20),e.timeRemaining<=0&&e.dismiss()}),20))}},{key:"dismiss",value:function(){var e=this;window.clearInterval(this.counterInterval);var n=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+n+"px)",this.el.style.opacity=0),t({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){"function"==typeof e.options.completeCallback&&e.options.completeCallback(),e.$el.remove(),i._toasts.splice(i._toasts.indexOf(e),1),0===i._toasts.length&&i._removeContainer()}})}}],[{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Toast}},{key:"_createContainer",value:function(){var e=document.createElement("div");e.setAttribute("id","toast-container"),e.addEventListener("touchstart",i._onDragStart),e.addEventListener("touchmove",i._onDragMove),e.addEventListener("touchend",i._onDragEnd),e.addEventListener("mousedown",i._onDragStart),document.addEventListener("mousemove",i._onDragMove),document.addEventListener("mouseup",i._onDragEnd),document.body.appendChild(e),i._container=e}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",i._onDragMove),document.removeEventListener("mouseup",i._onDragEnd),e(i._container).remove(),i._container=null}},{key:"_onDragStart",value:function(t){if(t.target&&e(t.target).closest(".toast").length){var n=e(t.target).closest(".toast")[0].M_Toast;n.panning=!0,i._draggedToast=n,n.el.classList.add("panning"),n.el.style.transition="",n.startingXPos=i._xPos(t),n.time=Date.now(),n.xPos=i._xPos(t)}}},{key:"_onDragMove",value:function(e){if(i._draggedToast){e.preventDefault();var t=i._draggedToast;t.deltaX=Math.abs(t.xPos-i._xPos(e)),t.xPos=i._xPos(e),t.velocityX=t.deltaX/(Date.now()-t.time),t.time=Date.now();var n=t.xPos-t.startingXPos,o=t.el.offsetWidth*t.options.activationPercent;t.el.style.transform="translateX("+n+"px)",t.el.style.opacity=1-Math.abs(n/o)}}},{key:"_onDragEnd",value:function(){if(i._draggedToast){var e=i._draggedToast;e.panning=!1,e.el.classList.remove("panning");var t=e.xPos-e.startingXPos,n=e.el.offsetWidth*e.options.activationPercent;Math.abs(t)>n||e.velocityX>1?(e.wasSwiped=!0,e.dismiss()):(e.el.style.transition="transform .2s, opacity .2s",e.el.style.transform="",e.el.style.opacity=""),i._draggedToast=null}}},{key:"_xPos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}},{key:"dismissAll",value:function(){for(var e in i._toasts)i._toasts[e].dismiss()}},{key:"defaults",get:function(){return n}}]),i}();i._toasts=[],i._container=null,i._draggedToast=null,M.Toast=i,M.toast=function(e){return new i(e)}}(cash,M.anime),function(e,t){var n={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},l=function(c){function l(t,n){a(this,l);var i=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Sidenav=i,i.id=i.$el.attr("id"),i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.isFixed=i.el.classList.contains("sidenav-fixed"),i.isDragged=!1,i.lastWindowWidth=window.innerWidth,i.lastWindowHeight=window.innerHeight,i._createOverlay(),i._createDragTarget(),i._setupEventHandlers(),i._setupClasses(),i._setupFixed(),l._sidenavs.push(i),i}return s(l,c),o(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var e=l._sidenavs.indexOf(this);e>=0&&l._sidenavs.splice(e,1)}},{key:"_createOverlay",value:function(){var e=document.createElement("div");this._closeBound=this.close.bind(this),e.classList.add("sidenav-overlay"),e.addEventListener("click",this._closeBound),document.body.appendChild(e),this._overlay=e}},{key:"_setupEventHandlers",value:function(){0===l._sidenavs.length&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){1===l._sidenavs.length&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(t){var n=e(t.target).closest(".sidenav-trigger");if(t.target&&n.length){var i=M.getIdFromTrigger(n[0]),o=document.getElementById(i).M_Sidenav;o&&o.open(n),t.preventDefault()}}},{key:"_startDrag",value:function(e){var n=e.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=n,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,t.remove(this.el),t.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(e){var t=e.targetTouches[0].clientX,n=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-t),this._xPos=t,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==n&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(e){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(e),this._dragMoveUpdate(e);var t=this._xPos-this._startingXpos,n=t>0?"right":"left";t=Math.min(this._width,Math.abs(t)),this.options.edge===n&&(t=0);var i=t,o="translateX(-100%)";"right"===this.options.edge&&(o="translateX(100%)",i=-i),this.percentOpen=Math.min(1,t/this._width),this.el.style.transform=o+" translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(this.percentOpen>.2?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(e){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(e),this._dragMoveUpdate(e);var t=this._xPos-this._startingXpos,n=t>0?"right":"left";t=Math.min(this._width,Math.abs(t)),this.options.edge!==n&&(t=0);var i=-t;"right"===this.options.edge&&(i=-i),this.percentOpen=Math.min(1,1-t/this._width),this.el.style.transform="translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(this.percentOpen>.8?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(t){e(t.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(window.innerWidth>992?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){"right"===this.options.edge&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&window.innerWidth>992}},{key:"_createDragTarget",value:function(){var e=document.createElement("div");e.classList.add("drag-target"),document.body.appendChild(e),this.dragTarget=e}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){!0!==this.isOpen&&(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(t.remove(this.el),t({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&1==this.percentOpen||this._animateIn()))}},{key:"close",value:function(){if(!1!==this.isOpen)if(this.isOpen=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var e="left"===this.options.edge?"-105%":"105%";this.el.style.transform="translateX("+e+")"}else this._enableBodyScrolling(),this.isDragged&&0==this.percentOpen?this._overlay.style.display="none":this._animateOut()}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var e=this,n="left"===this.options.edge?-1:1;this.isDragged&&(n="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),t.remove(this.el),t({targets:this.el,translateX:[100*n+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}})}},{key:"_animateOverlayIn",value:function(){var n=0;this.isDragged?n=this.percentOpen:e(this._overlay).css({display:"block"}),t.remove(this._overlay),t({targets:this._overlay,opacity:[n,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var e=this,n="left"===this.options.edge?-1:1,i=0;this.isDragged&&(i="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),t.remove(this.el),t({targets:this.el,translateX:[100*i+"%",105*n+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}})}},{key:"_animateOverlayOut",value:function(){var n=this;t.remove(this._overlay),t({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e(n._overlay).css("display","none")}})}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Sidenav}},{key:"defaults",get:function(){return n}}]),l}(c);l._sidenavs=[],window.M.Sidenav=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"sidenav","M_Sidenav")}(cash,M.anime),function(e,t){var n={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(e){return'a[href="#'+e+'"]'}},l=function(c){function l(t,n){a(this,l);var i=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_ScrollSpy=i,i.options=e.extend({},l.defaults,n),l._elements.push(i),l._count++,l._increment++,i.tickId=-1,i.id=l._increment,i._setupEventHandlers(),i._handleWindowScroll(),i}return s(l,c),o(l,[{key:"destroy",value:function(){l._elements.splice(l._elements.indexOf(this),1),l._elementsInView.splice(l._elementsInView.indexOf(this),1),l._visibleElements.splice(l._visibleElements.indexOf(this.$el),1),l._count--,this._removeEventHandlers(),e(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var e=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=e.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),1===l._count&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){0===l._count&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(n){for(var i=e(n.target),o=l._elements.length-1;o>=0;o--){var r=l._elements[o];if(i.is('a[href="#'+r.$el.attr("id")+'"]')){n.preventDefault();var s=r.$el.offset().top+1;t({targets:[document.documentElement,document.body],scrollTop:s-r.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){l._ticks++;for(var e=M.getDocumentScrollTop(),t=M.getDocumentScrollLeft(),n=t+window.innerWidth,i=e+window.innerHeight,o=l._findElements(e,n,i,t),r=0;r<o.length;r++){var s=o[r];s.tickId<0&&s._enter(),s.tickId=l._ticks}for(var a=0;a<l._elementsInView.length;a++){var c=l._elementsInView[a],u=c.tickId;u>=0&&u!==l._ticks&&(c._exit(),c.tickId=-1)}l._elementsInView=o}},{key:"_enter",value:function(){l._visibleElements=l._visibleElements.filter((function(e){return 0!=e.height()})),l._visibleElements[0]?(e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),l._visibleElements[0][0].M_ScrollSpy&&this.id<l._visibleElements[0][0].M_ScrollSpy.id?l._visibleElements.unshift(this.$el):l._visibleElements.push(this.$el)):l._visibleElements.push(this.$el),e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var t=this;l._visibleElements=l._visibleElements.filter((function(e){return 0!=e.height()})),l._visibleElements[0]&&(e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),l._visibleElements=l._visibleElements.filter((function(e){return e.attr("id")!=t.$el.attr("id")})),l._visibleElements[0]&&e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_ScrollSpy}},{key:"_findElements",value:function(e,t,n,i){for(var o=[],r=0;r<l._elements.length;r++){var s=l._elements[r],a=e+s.options.scrollOffset||200;if(s.$el.height()>0){var c=s.$el.offset().top,u=s.$el.offset().left,h=u+s.$el.width(),d=c+s.$el.height();!(u>t||h<i||c>n||d<a)&&o.push(s)}}return o}},{key:"defaults",get:function(){return n}}]),l}(c);l._elements=[],l._elementsInView=[],l._visibleElements=[],l._count=0,l._increment=0,l._ticks=0,M.ScrollSpy=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(e){var t={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(e,t,n){return e.indexOf(n)-t.indexOf(n)}},n=function(n){function c(t,n){a(this,c);var i=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,n));return i.el.M_Autocomplete=i,i.options=e.extend({},c.defaults,n),i.isOpen=!1,i.count=0,i.activeIndex=-1,i.oldVal,i.$inputField=i.$el.closest(".input-field"),i.$active=e(),i._mousedown=!1,i._setupDropdown(),i._setupEventHandlers(),i}return s(c,n),o(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var t=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),e(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(n){t.selectOption(e(n))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(e){"keyup"===e.type&&(c._keydown=!1),this.count=0;var t=this.el.value.toLowerCase();13!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode&&(this.oldVal===t||!M.tabPressed&&"focus"===e.type||this.open(),this.oldVal=t)}},{key:"_handleInputKeydown",value:function(t){c._keydown=!0;var n=t.keyCode,i=void 0,o=e(this.container).children("li").length;n===M.keys.ENTER&&this.activeIndex>=0?(i=e(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(i),t.preventDefault()):n!==M.keys.ARROW_UP&&n!==M.keys.ARROW_DOWN||(t.preventDefault(),n===M.keys.ARROW_UP&&this.activeIndex>0&&this.activeIndex--,n===M.keys.ARROW_DOWN&&this.activeIndex<o-1&&this.activeIndex++,this.$active.removeClass("active"),this.activeIndex>=0&&(this.$active=e(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(e){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(e){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(e){this._mousedown=!1}},{key:"_highlight",value:function(e,t){var n=t.find("img"),i=t.text().toLowerCase().indexOf(""+e.toLowerCase()),o=i+e.length-1,r=t.text().slice(0,i),s=t.text().slice(i,o+1),a=t.text().slice(o+1);t.html("<span>"+r+"<span class='highlight'>"+s+"</span>"+a+"</span>"),n.length&&t.prepend(n)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){e(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(e){var t=e.text().trim();this.el.value=t,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),"function"==typeof this.options.onAutocomplete&&this.options.onAutocomplete.call(this,t)}},{key:"_renderDropdown",value:function(t,n){var i=this;this._resetAutocomplete();var o=[];for(var r in t)if(t.hasOwnProperty(r)&&-1!==r.toLowerCase().indexOf(n)){if(this.count>=this.options.limit)break;var s={data:t[r],key:r};o.push(s),this.count++}if(this.options.sortFunction){o.sort((function(e,t){return i.options.sortFunction(e.key.toLowerCase(),t.key.toLowerCase(),n.toLowerCase())}))}for(var a=0;a<o.length;a++){var c=o[a],l=e("<li></li>");c.data?l.append('<img src="'+c.data+'" class="right circle"><span>'+c.key+"</span>"):l.append("<span>"+c.key+"</span>"),e(this.container).append(l),this._highlight(n,l)}}},{key:"open",value:function(){var e=this.el.value.toLowerCase();this._resetAutocomplete(),e.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,e)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(e){var t=this.el.value.toLowerCase();this.options.data=e,this.isOpen&&this._renderDropdown(e,t)}}],[{key:"init",value:function(e,t){return i(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Autocomplete}},{key:"defaults",get:function(){return t}}]),c}(c);n._keydown=!1,M.Autocomplete=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"autocomplete","M_Autocomplete")}(cash),function(e){M.updateTextFields=function(){e("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each((function(t,n){var i=e(this);t.value.length>0||e(t).is(":focus")||t.autofocus||null!==i.attr("placeholder")?i.siblings("label").addClass("active"):t.validity?i.siblings("label").toggleClass("active",!0===t.validity.badInput):i.siblings("label").removeClass("active")}))},M.validate_field=function(e){var t=null!==e.attr("data-length"),n=parseInt(e.attr("data-length")),i=e[0].value.length;0!==i||!1!==e[0].validity.badInput||e.is(":required")?e.hasClass("validate")&&(e.is(":valid")&&t&&i<=n||e.is(":valid")&&!t?(e.removeClass("invalid"),e.addClass("valid")):(e.removeClass("valid"),e.addClass("invalid"))):e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid"))},M.textareaAutoResize=function(t){if(t instanceof Element&&(t=e(t)),t.length){var n=e(".hiddendiv").first();n.length||(n=e('<div class="hiddendiv common"></div>'),e("body").append(n));var i=t.css("font-family"),o=t.css("font-size"),r=t.css("line-height"),s=t.css("padding-top"),a=t.css("padding-right"),c=t.css("padding-bottom"),l=t.css("padding-left");o&&n.css("font-size",o),i&&n.css("font-family",i),r&&n.css("line-height",r),s&&n.css("padding-top",s),a&&n.css("padding-right",a),c&&n.css("padding-bottom",c),l&&n.css("padding-left",l),t.data("original-height")||t.data("original-height",t.height()),"off"===t.attr("wrap")&&n.css("overflow-wrap","normal").css("white-space","pre"),n.text(t[0].value+"\n");var u=n.html().replace(/\n/g,"<br>");n.html(u),t[0].offsetWidth>0&&t[0].offsetHeight>0?n.css("width",t.width()+"px"):n.css("width",window.innerWidth/2+"px"),t.data("original-height")<=n.innerHeight()?t.css("height",n.innerHeight()+"px"):t[0].value.length<t.data("previous-length")&&t.css("height",t.data("original-height")+"px"),t.data("previous-length",t[0].value.length)}else console.error("No textarea element found")},e(document).ready((function(){var t="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";e(document).on("change",t,(function(){0===this.value.length&&null===e(this).attr("placeholder")||e(this).siblings("label").addClass("active"),M.validate_field(e(this))})),e(document).ready((function(){M.updateTextFields()})),e(document).on("reset",(function(n){var i=e(n.target);i.is("form")&&(i.find(t).removeClass("valid").removeClass("invalid"),i.find(t).each((function(t){this.value.length&&e(this).siblings("label").removeClass("active")})),setTimeout((function(){i.find("select").each((function(){this.M_FormSelect&&e(this).trigger("change")}))}),0))})),document.addEventListener("focus",(function(n){e(n.target).is(t)&&e(n.target).siblings("label, .prefix").addClass("active")}),!0),document.addEventListener("blur",(function(n){var i=e(n.target);if(i.is(t)){var o=".prefix";0===i[0].value.length&&!0!==i[0].validity.badInput&&null===i.attr("placeholder")&&(o+=", label"),i.siblings(o).removeClass("active"),M.validate_field(i)}}),!0);e(document).on("keyup","input[type=radio], input[type=checkbox]",(function(t){if(t.which===M.keys.TAB)return e(this).addClass("tabbed"),void e(this).one("blur",(function(t){e(this).removeClass("tabbed")}))}));e(".materialize-textarea").each((function(){var t=e(this);t.data("original-height",t.height()),t.data("previous-length",this.value.length),M.textareaAutoResize(t)})),e(document).on("keyup",".materialize-textarea",(function(){M.textareaAutoResize(e(this))})),e(document).on("keydown",".materialize-textarea",(function(){M.textareaAutoResize(e(this))})),e(document).on("change",'.file-field input[type="file"]',(function(){for(var t=e(this).closest(".file-field").find("input.file-path"),n=e(this)[0].files,i=[],o=0;o<n.length;o++)i.push(n[o].name);t[0].value=i.join(", "),t.trigger("change")}))}))}(cash),function(e,t){var n={indicators:!0,height:400,duration:500,interval:6e3},l=function(c){function l(n,i){a(this,l);var o=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,n,i));return o.el.M_Slider=o,o.options=e.extend({},l.defaults,i),o.$slider=o.$el.find(".slides"),o.$slides=o.$slider.children("li"),o.activeIndex=o.$slides.filter((function(t){return e(t).hasClass("active")})).first().index(),-1!=o.activeIndex&&(o.$active=o.$slides.eq(o.activeIndex)),o._setSliderHeight(),o.$slides.find(".caption").each((function(e){o._animateCaptionIn(e,0)})),o.$slides.find("img").each((function(t){var n="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";e(t).attr("src")!==n&&(e(t).css("background-image",'url("'+e(t).attr("src")+'")'),e(t).attr("src",n))})),o._setupIndicators(),o.$active?o.$active.css("display","block"):(o.$slides.first().addClass("active"),t({targets:o.$slides.first()[0],opacity:1,duration:o.options.duration,easing:"easeOutQuad"}),o.activeIndex=0,o.$active=o.$slides.eq(o.activeIndex),o.options.indicators&&o.$indicators.eq(o.activeIndex).addClass("active")),o.$active.find("img").each((function(e){t({targets:o.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:o.options.duration,easing:"easeOutQuad"})})),o._setupEventHandlers(),o.start(),o}return s(l,c),o(l,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each((function(t){t.addEventListener("click",e._handleIndicatorClickBound)}))}},{key:"_removeEventHandlers",value:function(){var e=this;this.options.indicators&&this.$indicators.each((function(t){t.removeEventListener("click",e._handleIndicatorClickBound)}))}},{key:"_handleIndicatorClick",value:function(t){var n=e(t.target).index();this.set(n)}},{key:"_handleInterval",value:function(){var e=this.$slider.find(".active").index();this.$slides.length===e+1?e=0:e+=1,this.set(e)}},{key:"_animateCaptionIn",value:function(n,i){var o={targets:n,opacity:0,duration:i,easing:"easeOutQuad"};e(n).hasClass("center-align")?o.translateY=-100:e(n).hasClass("right-align")?o.translateX=100:e(n).hasClass("left-align")&&(o.translateX=-100),t(o)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var t=this;this.options.indicators&&(this.$indicators=e('<ul class="indicators"></ul>'),this.$slides.each((function(n,i){var o=e('<li class="indicator-item"></li>');t.$indicators.append(o[0])})),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(e){var n=this;if(e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.activeIndex!=e){this.$active=this.$slides.eq(this.activeIndex);var i=this.$active.find(".caption");this.$active.removeClass("active"),t({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){n.$slides.not(".active").each((function(e){t({targets:e,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})}))}}),this._animateCaptionIn(i[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(e).addClass("active")),t({targets:this.$slides.eq(e)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),t({targets:this.$slides.eq(e).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(e).addClass("active"),this.activeIndex=e,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var e=this.activeIndex+1;e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.set(e)}},{key:"prev",value:function(){var e=this.activeIndex-1;e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.set(e)}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Slider}},{key:"defaults",get:function(){return n}}]),l}(c);M.Slider=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"slider","M_Slider")}(cash,M.anime),function(e,t){e(document).on("click",".card",(function(n){if(e(this).children(".card-reveal").length){var i=e(n.target).closest(".card");void 0===i.data("initialOverflow")&&i.data("initialOverflow",void 0===i.css("overflow")?"":i.css("overflow"));var o=e(this).find(".card-reveal");e(n.target).is(e(".card-reveal .card-title"))||e(n.target).is(e(".card-reveal .card-title i"))?t({targets:o[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(t){var n=t.animatables[0].target;e(n).css({display:"none"}),i.css("overflow",i.data("initialOverflow"))}}):(e(n.target).is(e(".card .activator"))||e(n.target).is(e(".card .activator i")))&&(i.css("overflow","hidden"),o.css({display:"block"}),t({targets:o[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}}))}(cash,M.anime),function(e){var t={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},n=function(n){function c(t,n){a(this,c);var i=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,n));return i.el.M_Chips=i,i.options=e.extend({},c.defaults,n),i.$el.addClass("chips input-field"),i.chipsData=[],i.$chips=e(),i._setupInput(),i.hasAutocomplete=Object.keys(i.options.autocompleteOptions).length>0,i.$input.attr("id")||i.$input.attr("id",M.guid()),i.options.data.length&&(i.chipsData=i.options.data,i._renderChips(i.chipsData)),i.hasAutocomplete&&i._setupAutocomplete(),i._setPlaceholder(),i._setupLabel(),i._setupEventHandlers(),i}return s(c,n),o(c,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",c._handleChipsKeydown),document.addEventListener("keyup",c._handleChipsKeyup),this.el.addEventListener("blur",c._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",c._handleChipsKeydown),document.removeEventListener("keyup",c._handleChipsKeyup),this.el.removeEventListener("blur",c._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(t){var n=e(t.target).closest(".chip"),i=e(t.target).is(".close");if(n.length){var o=n.index();i?(this.deleteChip(o),this.$input[0].focus()):this.selectChip(o)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(e){if(c._keydown=!0,13===e.keyCode){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;e.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else 8!==e.keyCode&&37!==e.keyCode||""!==this.$input[0].value||!this.chipsData.length||(e.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(t){if(t.tag){var n=document.createElement("div"),i=document.createElement("i");if(n.classList.add("chip"),n.textContent=t.tag,n.setAttribute("tabindex",0),e(i).addClass("material-icons close"),i.textContent="close",t.image){var o=document.createElement("img");o.setAttribute("src",t.image),n.insertBefore(o,n.firstChild)}return n.appendChild(i),n}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var e=0;e<this.chipsData.length;e++){var t=this._renderChip(this.chipsData[e]);this.$el.append(t),this.$chips.add(t)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var e=this;this.options.autocompleteOptions.onAutocomplete=function(t){e.addChip({tag:t}),e.$input[0].value="",e.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=e("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){void 0!==this.chipsData&&!this.chipsData.length&&this.options.placeholder?e(this.$input).prop("placeholder",this.options.placeholder):(void 0===this.chipsData||this.chipsData.length)&&this.options.secondaryPlaceholder&&e(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(e){if(e.hasOwnProperty("tag")&&""!==e.tag){for(var t=!1,n=0;n<this.chipsData.length;n++)if(this.chipsData[n].tag===e.tag){t=!0;break}return!t}return!1}},{key:"addChip",value:function(t){if(this._isValid(t)&&!(this.chipsData.length>=this.options.limit)){var n=this._renderChip(t);this.$chips.add(n),this.chipsData.push(t),e(this.$input).before(n),this._setPlaceholder(),"function"==typeof this.options.onChipAdd&&this.options.onChipAdd.call(this,this.$el,n)}}},{key:"deleteChip",value:function(t){var n=this.$chips.eq(t);this.$chips.eq(t).remove(),this.$chips=this.$chips.filter((function(t){return e(t).index()>=0})),this.chipsData.splice(t,1),this._setPlaceholder(),"function"==typeof this.options.onChipDelete&&this.options.onChipDelete.call(this,this.$el,n[0])}},{key:"selectChip",value:function(e){var t=this.$chips.eq(e);this._selectedChip=t,t[0].focus(),"function"==typeof this.options.onChipSelect&&this.options.onChipSelect.call(this,this.$el,t[0])}}],[{key:"init",value:function(e,t){return i(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Chips}},{key:"_handleChipsKeydown",value:function(t){c._keydown=!0;var n=e(t.target).closest(".chips"),i=t.target&&n.length;if(!e(t.target).is("input, textarea")&&i){var o=n[0].M_Chips;if(8===t.keyCode||46===t.keyCode){t.preventDefault();var r=o.chipsData.length;if(o._selectedChip){var s=o._selectedChip.index();o.deleteChip(s),o._selectedChip=null,r=Math.max(s-1,0)}o.chipsData.length&&o.selectChip(r)}else if(37===t.keyCode){if(o._selectedChip){var a=o._selectedChip.index()-1;if(a<0)return;o.selectChip(a)}}else if(39===t.keyCode&&o._selectedChip){var l=o._selectedChip.index()+1;l>=o.chipsData.length?o.$input[0].focus():o.selectChip(l)}}}},{key:"_handleChipsKeyup",value:function(e){c._keydown=!1}},{key:"_handleChipsBlur",value:function(t){c._keydown||(e(t.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return t}}]),c}(c);n._keydown=!1,M.Chips=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"chips","M_Chips"),e(document).ready((function(){e(document.body).on("click",".chip .close",(function(){var t=e(this).closest(".chips");t.length&&t[0].M_Chips||e(this).closest(".chip").remove()}))}))}(cash),function(e){var t={top:0,bottom:1/0,offset:0,onPositionChange:null},n=function(n){function c(t,n){a(this,c);var i=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,n));return i.el.M_Pushpin=i,i.options=e.extend({},c.defaults,n),i.originalOffset=i.el.offsetTop,c._pushpins.push(i),i._setupEventHandlers(),i._updatePosition(),i}return s(c,n),o(c,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var e=c._pushpins.indexOf(this);c._pushpins.splice(e,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",c._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",c._updateElements)}},{key:"_updatePosition",value:function(){var e=M.getDocumentScrollTop()+this.options.offset;this.options.top<=e&&this.options.bottom>=e&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pinned")),e<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-top")),e>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px","function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(e,t){return i(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Pushpin}},{key:"_updateElements",value:function(){for(var e in c._pushpins){c._pushpins[e]._updatePosition()}}},{key:"defaults",get:function(){return t}}]),c}(c);n._pushpins=[],M.Pushpin=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"pushpin","M_Pushpin")}(cash),function(e,t){var n={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};e.fn.reverse=[].reverse;var l=function(c){function l(t,n){a(this,l);var i=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_FloatingActionButton=i,i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.$anchor=i.$el.children("a").first(),i.$menu=i.$el.children("ul").first(),i.$floatingBtns=i.$el.find("ul .btn-floating"),i.$floatingBtnsReverse=i.$el.find("ul .btn-floating").reverse(),i.offsetY=0,i.offsetX=0,i.$el.addClass("direction-"+i.options.direction),"top"===i.options.direction?i.offsetY=40:"right"===i.options.direction?i.offsetX=-40:"bottom"===i.options.direction?i.offsetY=-40:i.offsetX=40,i._setupEventHandlers(),i}return s(l,c),o(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(t){e(t.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var e=this;this.$el.addClass("active");var n=0;this.$floatingBtnsReverse.each((function(i){t({targets:i,opacity:1,scale:[.4,1],translateY:[e.offsetY,0],translateX:[e.offsetX,0],duration:275,delay:n,easing:"easeInOutQuad"}),n+=40}))}},{key:"_animateOutFAB",value:function(){var e=this;this.$floatingBtnsReverse.each((function(n){t.remove(n),t({targets:n,opacity:0,scale:.4,translateY:e.offsetY,translateX:e.offsetX,duration:175,easing:"easeOutQuad",complete:function(){e.$el.removeClass("active")}})}))}},{key:"_animateInToolbar",value:function(){var t,n=this,i=window.innerWidth,o=window.innerHeight,r=this.el.getBoundingClientRect(),s=e('<div class="fab-backdrop"></div>'),a=this.$anchor.css("background-color");this.$anchor.append(s),this.offsetX=r.left-i/2+r.width/2,this.offsetY=o-r.bottom,t=i/s[0].clientWidth,this.btnBottom=r.bottom,this.btnLeft=r.left,this.btnWidth=r.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),s.css({"background-color":a}),setTimeout((function(){n.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),n.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout((function(){n.$el.css({overflow:"hidden","background-color":a}),s.css({transform:"scale("+t+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),n.$menu.children("li").children("a").css({opacity:1}),n._handleDocumentClickBound=n._handleDocumentClick.bind(n),window.addEventListener("scroll",n._handleCloseBound,!0),document.body.addEventListener("click",n._handleDocumentClickBound,!0)}),100)}),0)}},{key:"_animateOutToolbar",value:function(){var e=this,t=window.innerWidth,n=window.innerHeight,i=this.$el.find(".fab-backdrop"),o=this.$anchor.css("background-color");this.offsetX=this.btnLeft-t/2+this.btnWidth/2,this.offsetY=n-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),i.css({transform:"scale(0)","background-color":o}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout((function(){i.remove(),e.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-e.offsetX+"px,0,0)"}),e.$anchor.css({overflow:"",transform:"translate3d(0,"+e.offsetY+"px,0)"}),setTimeout((function(){e.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),e.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})}),20)}),200)}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FloatingActionButton}},{key:"defaults",get:function(){return n}}]),l}(c);M.FloatingActionButton=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(e){var t={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"‹",nextMonth:"›",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},n=function(n){function c(t,n){a(this,c);var i=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,n));i.el.M_Datepicker=i,i.options=e.extend({},c.defaults,n),n&&n.hasOwnProperty("i18n")&&"object"==typeof n.i18n&&(i.options.i18n=e.extend({},c.defaults.i18n,n.i18n)),i.options.minDate&&i.options.minDate.setHours(0,0,0,0),i.options.maxDate&&i.options.maxDate.setHours(0,0,0,0),i.id=M.guid(),i._setupVariables(),i._insertHTMLIntoDOM(),i._setupModal(),i._setupEventHandlers(),i.options.defaultDate||(i.options.defaultDate=new Date(Date.parse(i.el.value)));var o=i.options.defaultDate;return c._isDate(o)?i.options.setDefaultDate?(i.setDate(o,!0),i.setInputValue()):i.gotoDate(o):i.gotoDate(new Date),i.isOpen=!1,i}return s(c,n),o(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),e(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var e=this.calendarEl.querySelector(".orig-select-year");e&&M.FormSelect.getInstance(e).destroy();var t=this.calendarEl.querySelector(".orig-select-month");t&&M.FormSelect.getInstance(t).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(e(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){e.isOpen=!1}})}},{key:"toString",value:function(e){var t=this;return e=e||this.options.format,c._isDate(this.date)?e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map((function(e){return t.formats[e]?t.formats[e]():e})).join(""):""}},{key:"setDate",value:function(e,t){if(!e)return this.date=null,this._renderDateDisplay(),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),c._isDate(e)){var n=this.options.minDate,i=this.options.maxDate;c._isDate(n)&&e<n?e=n:c._isDate(i)&&e>i&&(e=i),this.date=new Date(e.getTime()),this._renderDateDisplay(),c._setToStartOfDay(this.date),this.gotoDate(this.date),t||"function"!=typeof this.options.onSelect||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var e=c._isDate(this.date)?this.date:new Date,t=this.options.i18n,n=t.weekdaysShort[e.getDay()],i=t.monthsShort[e.getMonth()],o=e.getDate();this.yearTextEl.innerHTML=e.getFullYear(),this.dateTextEl.innerHTML=n+", "+i+" "+o}},{key:"gotoDate",value:function(e){var t=!0;if(c._isDate(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=e.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),t=o<n.getTime()||i.getTime()<o}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(e,t,n){var i=this.options,o=new Date,r=c._getDaysInMonth(e,t),s=new Date(e,t,1).getDay(),a=[],l=[];c._setToStartOfDay(o),i.firstDay>0&&(s-=i.firstDay)<0&&(s+=7);for(var u=0===t?11:t-1,h=11===t?0:t+1,d=0===t?e-1:e,f=11===t?e+1:e,p=c._getDaysInMonth(d,u),v=r+s,m=v;m>7;)m-=7;v+=7-m;for(var _=!1,g=0,y=0;g<v;g++){var b=new Date(e,t,g-s+1),w=!!c._isDate(this.date)&&c._compareDates(b,this.date),C=c._compareDates(b,o),S=-1!==i.events.indexOf(b.toDateString()),k=g<s||g>=r+s,E=g-s+1,x=t,T=e,L=i.startRange&&c._compareDates(i.startRange,b),R=i.endRange&&c._compareDates(i.endRange,b),M=i.startRange&&i.endRange&&i.startRange<b&&b<i.endRange;k&&(g<s?(E=p+E,x=u,T=d):(E-=r,x=h,T=f));var O={day:E,month:x,year:T,hasEvent:S,isSelected:w,isToday:C,isDisabled:i.minDate&&b<i.minDate||i.maxDate&&b>i.maxDate||i.disableWeekends&&c._isWeekend(b)||i.disableDayFn&&i.disableDayFn(b),isEmpty:k,isStartRange:L,isEndRange:R,isInRange:M,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths};l.push(this.renderDay(O)),7==++y&&(a.push(this.renderRow(l,i.isRTL,_)),l=[],y=0,_=!1)}return this.renderTable(i,a,n)}},{key:"renderDay",value:function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="datepicker-day-button" type="button" data-year="'+e.year+'" data-month="'+e.month+'" data-day="'+e.day+'">'+e.day+"</button></td>"}},{key:"renderRow",value:function(e,t,n){return'<tr class="datepicker-row'+(n?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"}},{key:"renderTable",value:function(e,t,n){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+n+'">'+this.renderHead(e)+this.renderBody(t)+"</table></div>"}},{key:"renderHead",value:function(e){var t=void 0,n=[];for(t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+this.renderDayName(e,t)+'">'+this.renderDayName(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"}},{key:"renderBody",value:function(e){return"<tbody>"+e.join("")+"</tbody>"}},{key:"renderTitle",value:function(t,n,i,o,r,s){var a,c,l=void 0,u=void 0,h=void 0,d=this.options,f=i===d.minYear,p=i===d.maxYear,v='<div id="'+s+'" class="datepicker-controls" role="heading" aria-live="assertive">',m=!0,_=!0;for(h=[],l=0;l<12;l++)h.push('<option value="'+(i===r?l-n:12+l-n)+'"'+(l===o?' selected="selected"':"")+(f&&l<d.minMonth||p&&l>d.maxMonth?'disabled="disabled"':"")+">"+d.i18n.months[l]+"</option>");for(a='<select class="datepicker-select orig-select-month" tabindex="-1">'+h.join("")+"</select>",e.isArray(d.yearRange)?(l=d.yearRange[0],u=d.yearRange[1]+1):(l=i-d.yearRange,u=1+i+d.yearRange),h=[];l<u&&l<=d.maxYear;l++)l>=d.minYear&&h.push('<option value="'+l+'" '+(l===i?'selected="selected"':"")+">"+l+"</option>");c='<select class="datepicker-select orig-select-year" tabindex="-1">'+h.join("")+"</select>";v+='<button class="month-prev'+(m?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',v+='<div class="selects-container">',d.showMonthAfterYear?v+=c+a:v+=a+c,v+="</div>",f&&(0===o||d.minMonth>=o)&&(m=!1),p&&(11===o||d.maxMonth<=o)&&(_=!1);return(v+='<button class="month-next'+(_?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(e){if(this.isOpen||e){var t,n=this.options,i=n.minYear,o=n.maxYear,r=n.minMonth,s=n.maxMonth,a="";this._y<=i&&(this._y=i,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=o&&(this._y=o,!isNaN(s)&&this._m>s&&(this._m=s)),t="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var c=0;c<1;c++)this._renderDateDisplay(),a+=this.renderTitle(this,c,this.calendars[c].year,this.calendars[c].month,this.calendars[0].year,t)+this.render(this.calendars[c].year,this.calendars[c].month,t);this.destroySelects(),this.calendarEl.innerHTML=a;var l=this.calendarEl.querySelector(".orig-select-year"),u=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(l,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(u,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),l.addEventListener("change",this._handleYearChange.bind(this)),u.addEventListener("change",this._handleMonthChange.bind(this)),"function"==typeof this.options.onDraw&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var t=this;this.$modalEl=e(c._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return t.date.getDate()},dd:function(){var e=t.date.getDate();return(e<10?"0":"")+e},ddd:function(){return t.options.i18n.weekdaysShort[t.date.getDay()]},dddd:function(){return t.options.i18n.weekdays[t.date.getDay()]},m:function(){return t.date.getMonth()+1},mm:function(){var e=t.date.getMonth()+1;return(e<10?"0":"")+e},mmm:function(){return t.options.i18n.monthsShort[t.date.getMonth()]},mmmm:function(){return t.options.i18n.months[t.date.getMonth()]},yy:function(){return(""+t.date.getFullYear()).slice(2)},yyyy:function(){return t.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(t){if(this.isOpen){var n=e(t.target);n.hasClass("is-disabled")||(!n.hasClass("datepicker-day-button")||n.hasClass("is-empty")||n.parent().hasClass("is-disabled")?n.closest(".month-prev").length?this.prevMonth():n.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(t.target.getAttribute("data-year"),t.target.getAttribute("data-month"),t.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(e){this.gotoMonth(e.target.value)}},{key:"_handleYearChange",value:function(e){this.gotoYear(e.target.value)}},{key:"gotoMonth",value:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())}},{key:"gotoYear",value:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(e){var t=void 0;e.firedBy!==this&&(t=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),c._isDate(t)&&this.setDate(t))}},{key:"renderDayName",value:function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysAbbrev[t]:e.i18n.weekdays[t]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(e,t){return i(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"_isDate",value:function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())}},{key:"_isWeekend",value:function(e){var t=e.getDay();return 0===t||6===t}},{key:"_setToStartOfDay",value:function(e){c._isDate(e)&&e.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(e,t){return[31,c._isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}},{key:"_isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"_compareDates",value:function(e,t){return e.getTime()===t.getTime()}},{key:"_setToStartOfDay",value:function(e){c._isDate(e)&&e.setHours(0,0,0,0)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Datepicker}},{key:"defaults",get:function(){return t}}]),c}(c);n._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"datepicker","M_Datepicker")}(cash),function(e){var t={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},n=function(n){function c(t,n){a(this,c);var i=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,n));return i.el.M_Timepicker=i,i.options=e.extend({},c.defaults,n),i.id=M.guid(),i._insertHTMLIntoDOM(),i._setupModal(),i._setupVariables(),i._setupEventHandlers(),i._clockSetup(),i._pickerSetup(),i}return s(c,n),o(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),e(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),e(this.spanHours).on("click",this.showView.bind(this,"hours")),e(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(e){e.preventDefault();var t=this.plate.getBoundingClientRect(),n=t.left,i=t.top;this.x0=n+this.options.dialRadius,this.y0=i+this.options.dialRadius,this.moved=!1;var o=c._Pos(e);this.dx=o.x-this.x0,this.dy=o.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(e){e.preventDefault();var t=c._Pos(e),n=t.x-this.x0,i=t.y-this.y0;this.moved=!0,this.setHand(n,i,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(t){var n=this;t.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var i=c._Pos(t),o=i.x-this.x0,r=i.y-this.y0;this.moved&&o===this.dx&&r===this.dy&&this.setHand(o,r),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(e(this.minutesView).addClass("timepicker-dial-out"),setTimeout((function(){n.done()}),this.options.duration/2)),"function"==typeof this.options.onSelect&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=e(c._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var t=document.querySelector(this.options.container);this.options.container&&t?this.$modalEl.appendTo(t):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e),e.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var t=e('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&t.css({visibility:""});var n=e('<div class="confirmation-btns"></div>');e('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(n).on("click",this.close.bind(this)),e('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(n).on("click",this.done.bind(this)),n.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=e('<div class="am-btn">AM</div>'),this.$pmBtn=e('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var e=this.options.dialRadius,t=this.options.tickRadius,n=2*e,i=c._createSVGEl("svg");i.setAttribute("class","timepicker-svg"),i.setAttribute("width",n),i.setAttribute("height",n);var o=c._createSVGEl("g");o.setAttribute("transform","translate("+e+","+e+")");var r=c._createSVGEl("circle");r.setAttribute("class","timepicker-canvas-bearing"),r.setAttribute("cx",0),r.setAttribute("cy",0),r.setAttribute("r",4);var s=c._createSVGEl("line");s.setAttribute("x1",0),s.setAttribute("y1",0);var a=c._createSVGEl("circle");a.setAttribute("class","timepicker-canvas-bg"),a.setAttribute("r",t),o.appendChild(s),o.appendChild(a),o.appendChild(r),i.appendChild(o),this._canvas.appendChild(i),this.hand=s,this.bg=a,this.bearing=r,this.g=o}},{key:"_buildHoursView",value:function(){var t=e('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var n=1;n<13;n+=1){var i=t.clone(),o=n/6*Math.PI,r=this.options.outerRadius;i.css({left:this.options.dialRadius+Math.sin(o)*r-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(o)*r-this.options.tickRadius+"px"}),i.html(0===n?"00":n),this.hoursView.appendChild(i[0])}else for(var s=0;s<24;s+=1){var a=t.clone(),c=s/6*Math.PI,l=s>0&&s<13?this.options.innerRadius:this.options.outerRadius;a.css({left:this.options.dialRadius+Math.sin(c)*l-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(c)*l-this.options.tickRadius+"px"}),a.html(0===s?"00":s),this.hoursView.appendChild(a[0])}}},{key:"_buildMinutesView",value:function(){for(var t=e('<div class="timepicker-tick"></div>'),n=0;n<60;n+=5){var i=t.clone(),o=n/30*Math.PI;i.css({left:this.options.dialRadius+Math.sin(o)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(o)*this.options.outerRadius-this.options.tickRadius+"px"}),i.html(c._addLeadingZero(n)),this.minutesView.appendChild(i[0])}}},{key:"_handleAmPmClick",value:function(t){var n=e(t.target);this.amOrPm=n.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary","AM"===this.amOrPm),this.$pmBtn.toggleClass("text-primary","PM"===this.amOrPm))}},{key:"_updateTimeFromInput",value:function(){var e=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&void 0!==e[1]&&(e[1].toUpperCase().indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",e[1]=e[1].replace("AM","").replace("PM","")),"now"===e[0]){var t=new Date(+new Date+this.options.fromNow);e=[t.getHours(),t.getMinutes()],this.options.twelveHour&&(this.amOrPm=e[0]>=12&&e[0]<24?"PM":"AM")}this.hours=+e[0]||0,this.minutes=+e[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=c._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(t,n){"minutes"===t&&e(this.hoursView).css("visibility");var i="hours"===t,o=i?this.hoursView:this.minutesView,r=i?this.minutesView:this.hoursView;this.currentView=t,e(this.spanHours).toggleClass("text-primary",i),e(this.spanMinutes).toggleClass("text-primary",!i),r.classList.add("timepicker-dial-out"),e(o).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout((function(){e(r).css("visibility","hidden")}),this.options.duration)}},{key:"resetClock",value:function(t){var n=this.currentView,i=this[n],o="hours"===n,r=i*(Math.PI/(o?6:30)),s=o&&i>0&&i<13?this.options.innerRadius:this.options.outerRadius,a=Math.sin(r)*s,c=-Math.cos(r)*s,l=this;t?(e(this.canvas).addClass("timepicker-canvas-out"),setTimeout((function(){e(l.canvas).removeClass("timepicker-canvas-out"),l.setHand(a,c)}),t)):this.setHand(a,c)}},{key:"setHand",value:function(e,t,n){var i=this,o=Math.atan2(e,-t),r="hours"===this.currentView,s=Math.PI/(r||n?6:30),a=Math.sqrt(e*e+t*t),l=r&&a<(this.options.outerRadius+this.options.innerRadius)/2,u=l?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(u=this.options.outerRadius),o<0&&(o=2*Math.PI+o);var h=Math.round(o/s);o=h*s,this.options.twelveHour?r?0===h&&(h=12):(n&&(h*=5),60===h&&(h=0)):r?(12===h&&(h=0),h=l?0===h?12:h:0===h?0:h+12):(n&&(h*=5),60===h&&(h=0)),this[this.currentView]!==h&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout((function(){i.vibrateTimer=null}),100))),this[this.currentView]=h,r?this.spanHours.innerHTML=h:this.spanMinutes.innerHTML=c._addLeadingZero(h);var d=Math.sin(o)*(u-this.options.tickRadius),f=-Math.cos(o)*(u-this.options.tickRadius),p=Math.sin(o)*u,v=-Math.cos(o)*u;this.hand.setAttribute("x2",d),this.hand.setAttribute("y2",f),this.bg.setAttribute("cx",p),this.bg.setAttribute("cy",v)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(e,t){var n=this.el.value,i=t?"":c._addLeadingZero(this.hours)+":"+c._addLeadingZero(this.minutes);this.time=i,!t&&this.options.twelveHour&&(i=i+" "+this.amOrPm),this.el.value=i,i!==n&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(e,t){return i(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"_addLeadingZero",value:function(e){return(e<10?"0":"")+e}},{key:"_createSVGEl",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},{key:"_Pos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}:{x:e.clientX,y:e.clientY}}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Timepicker}},{key:"defaults",get:function(){return t}}]),c}(c);n._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"timepicker","M_Timepicker")}(cash),function(e){var t={},n=function(n){function c(t,n){a(this,c);var i=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,n));return i.el.M_CharacterCounter=i,i.options=e.extend({},c.defaults,n),i.isInvalid=!1,i.isValidLength=!1,i._setupCounter(),i._setupEventHandlers(),i}return s(c,n),o(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),e(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){e(this.counterEl).remove()}},{key:"updateCounter",value:function(){var t=+this.$el.attr("data-length"),n=this.el.value.length;this.isValidLength=n<=t;var i=n;t&&(i+="/"+t,this._validateInput()),e(this.counterEl).html(i)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(e,t){return i(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_CharacterCounter}},{key:"defaults",get:function(){return t}}]),c}(c);M.CharacterCounter=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"characterCounter","M_CharacterCounter")}(cash),function(e){var t={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},n=function(n){function c(t,n){a(this,c);var i=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,n));return i.el.M_Carousel=i,i.options=e.extend({},c.defaults,n),i.hasMultipleSlides=i.$el.find(".carousel-item").length>1,i.showIndicators=i.options.indicators&&i.hasMultipleSlides,i.noWrap=i.options.noWrap||!i.hasMultipleSlides,i.pressed=!1,i.dragged=!1,i.offset=i.target=0,i.images=[],i.itemWidth=i.$el.find(".carousel-item").first().innerWidth(),i.itemHeight=i.$el.find(".carousel-item").first().innerHeight(),i.dim=2*i.itemWidth+i.options.padding||1,i._autoScrollBound=i._autoScroll.bind(i),i._trackBound=i._track.bind(i),i.options.fullWidth&&(i.options.dist=0,i._setCarouselHeight(),i.showIndicators&&i.$el.find(".carousel-fixed-item").addClass("with-indicators")),i.$indicators=e('<ul class="indicators"></ul>'),i.$el.find(".carousel-item").each((function(t,n){if(i.images.push(t),i.showIndicators){var o=e('<li class="indicator-item"></li>');0===n&&o[0].classList.add("active"),i.$indicators.append(o)}})),i.showIndicators&&i.$el.append(i.$indicators),i.count=i.images.length,i.options.numVisible=Math.min(i.count,i.options.numVisible),i.xform="transform",["webkit","Moz","O","ms"].every((function(e){var t=e+"Transform";return void 0===document.body.style[t]||(i.xform=t,!1)})),i._setupEventHandlers(),i._scroll(i.offset),i}return s(c,n),o(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),void 0!==window.ontouchstart&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each((function(t,n){t.addEventListener("click",e._handleIndicatorClickBound)})));var t=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=t.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var e=this;void 0!==window.ontouchstart&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each((function(t,n){t.removeEventListener("click",e._handleIndicatorClickBound)})),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(t){"mousedown"===t.type&&e(t.target).is("img")&&t.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(t),this.referenceY=this._ypos(t),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(e){var t=void 0,n=void 0,i=void 0;if(this.pressed)if(t=this._xpos(e),n=this._ypos(e),i=this.reference-t,Math.abs(this.referenceY-n)<30&&!this.verticalDragged)(i>2||i<-2)&&(this.dragged=!0,this.reference=t,this._scroll(this.offset+i));else{if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(e){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(t){if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1;if(!this.options.fullWidth){var n=e(t.target).closest(".carousel-item").index();0!==this._wrap(this.center)-n&&(t.preventDefault(),t.stopPropagation()),this._cycleTo(n)}}},{key:"_handleIndicatorClick",value:function(t){t.stopPropagation();var n=e(t.target).closest(".indicator-item");n.length&&this._cycleTo(n.index())}},{key:"_handleResize",value:function(e){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(e){var t=this,n=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),i=n.find("img").first();if(i.length)if(i[0].complete){var o=i.height();if(o>0)this.$el.css("height",o+"px");else{var r=i[0].naturalWidth,s=i[0].naturalHeight,a=this.$el.width()/r*s;this.$el.css("height",a+"px")}}else i.one("load",(function(e,n){t.$el.css("height",e.offsetHeight+"px")}));else if(!e){var c=n.height();this.$el.css("height",c+"px")}}},{key:"_xpos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}},{key:"_ypos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}},{key:"_wrap",value:function(e){return e>=this.count?e%this.count:e<0?this._wrap(this.count+e%this.count):e}},{key:"_track",value:function(){var e,t,n,i;t=(e=Date.now())-this.timestamp,this.timestamp=e,n=this.offset-this.frame,this.frame=this.offset,i=1e3*n/(1+t),this.velocity=.8*i+.2*this.velocity}},{key:"_autoScroll",value:function(){var e=void 0,t=void 0;this.amplitude&&(e=Date.now()-this.timestamp,(t=this.amplitude*Math.exp(-e/this.options.duration))>2||t<-2?(this._scroll(this.target-t),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(t){var n=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),null!=this.scrollingTimeout&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout((function(){n.$el.removeClass("scrolling")}),this.options.duration);var i,o,r,s,a=void 0,c=void 0,l=void 0,u=void 0,h=void 0,d=void 0,f=this.center,p=1/this.options.numVisible;if(this.offset="number"==typeof t?t:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),s=-(r=(o=this.offset-this.center*this.dim)<0?1:-1)*o*2/this.dim,i=this.count>>1,this.options.fullWidth?(l="translateX(0)",d=1):(l="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",l+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",d=1-p*s),this.showIndicators){var v=this.center%this.count,m=this.$indicators.find(".indicator-item.active");m.index()!==v&&(m.removeClass("active"),this.$indicators.find(".indicator-item").eq(v)[0].classList.add("active"))}if(!this.noWrap||this.center>=0&&this.center<this.count){c=this.images[this._wrap(this.center)],e(c).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),c.classList.add("active"));var _=l+" translateX("+-o/2+"px) translateX("+r*this.options.shift*s*a+"px) translateZ("+this.options.dist*s+"px)";this._updateItemStyle(c,d,0,_)}for(a=1;a<=i;++a){if(this.options.fullWidth?(u=this.options.dist,h=a===i&&o<0?1-s:1):(u=this.options.dist*(2*a+s*r),h=1-p*(2*a+s*r)),!this.noWrap||this.center+a<this.count){c=this.images[this._wrap(this.center+a)];var g=l+" translateX("+(this.options.shift+(this.dim*a-o)/2)+"px) translateZ("+u+"px)";this._updateItemStyle(c,h,-a,g)}if(this.options.fullWidth?(u=this.options.dist,h=a===i&&o>0?1-s:1):(u=this.options.dist*(2*a-s*r),h=1-p*(2*a-s*r)),!this.noWrap||this.center-a>=0){c=this.images[this._wrap(this.center-a)];var y=l+" translateX("+(-this.options.shift+(-this.dim*a-o)/2)+"px) translateZ("+u+"px)";this._updateItemStyle(c,h,-a,y)}}if(!this.noWrap||this.center>=0&&this.center<this.count){c=this.images[this._wrap(this.center)];var b=l+" translateX("+-o/2+"px) translateX("+r*this.options.shift*s+"px) translateZ("+this.options.dist*s+"px)";this._updateItemStyle(c,d,0,b)}var w=this.$el.find(".carousel-item").eq(this._wrap(this.center));f!==this.center&&"function"==typeof this.options.onCycleTo&&this.options.onCycleTo.call(this,w[0],this.dragged),"function"==typeof this.oneTimeCallback&&(this.oneTimeCallback.call(this,w[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(e,t,n,i){e.style[this.xform]=i,e.style.zIndex=n,e.style.opacity=t,e.style.visibility="visible"}},{key:"_cycleTo",value:function(e,t){var n=this.center%this.count-e;this.noWrap||(n<0?Math.abs(n+this.count)<Math.abs(n)&&(n+=this.count):n>0&&Math.abs(n-this.count)<n&&(n-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),n<0?this.target+=this.dim*Math.abs(n):n>0&&(this.target-=this.dim*n),"function"==typeof t&&(this.oneTimeCallback=t),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(e){(void 0===e||isNaN(e))&&(e=1);var t=this.center+e;if(t>=this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t)}},{key:"prev",value:function(e){(void 0===e||isNaN(e))&&(e=1);var t=this.center-e;if(t>=this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t)}},{key:"set",value:function(e,t){if((void 0===e||isNaN(e))&&(e=0),e>this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e,t)}}],[{key:"init",value:function(e,t){return i(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Carousel}},{key:"defaults",get:function(){return t}}]),c}(c);M.Carousel=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"carousel","M_Carousel")}(cash),function(e){var t={onOpen:void 0,onClose:void 0},n=function(n){function c(t,n){a(this,c);var i=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,n));return i.el.M_TapTarget=i,i.options=e.extend({},c.defaults,n),i.isOpen=!1,i.$origin=e("#"+i.$el.attr("data-target")),i._setup(),i._calculatePositioning(),i._setupEventHandlers(),i}return s(c,n),o(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var e=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=e.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(e){this.open()}},{key:"_handleOriginClick",value:function(e){this.close()}},{key:"_handleResize",value:function(e){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(t){e(t.target).closest(".tap-target-wrapper").length||(this.close(),t.preventDefault(),t.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=e(this.wrapper).find(".tap-target-wave")[0],this.originEl=e(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],e(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(e(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var t="fixed"===this.$origin.css("position");if(!t)for(var n=this.$origin.parents(),i=0;i<n.length&&!(t="fixed"==e(n[i]).css("position"));i++);var o=this.$origin.outerWidth(),r=this.$origin.outerHeight(),s=t?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,a=t?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,c=window.innerWidth,l=window.innerHeight,u=c/2,h=l/2,d=a<=u,f=a>u,p=s<=h,v=s>h,m=a>=.25*c&&a<=.75*c,_=this.$el.outerWidth(),g=this.$el.outerHeight(),y=s+r/2-g/2,b=a+o/2-_/2,w=t?"fixed":"absolute",C=m?_:_/2+o,S=g/2,k=p?g/2:0,E=d&&!m?_/2-o:0,x=o,T=v?"bottom":"top",L=2*o,R=L,O=g/2-R/2,A=_/2-L/2,$={};$.top=p?y+"px":"",$.right=f?c-b-_+"px":"",$.bottom=v?l-y-g+"px":"",$.left=d?b+"px":"",$.position=w,e(this.wrapper).css($),e(this.contentEl).css({width:C+"px",height:S+"px",top:k+"px",right:"0px",bottom:"0px",left:E+"px",padding:x+"px",verticalAlign:T}),e(this.waveEl).css({top:O+"px",left:A+"px",width:L+"px",height:R+"px"})}},{key:"open",value:function(){this.isOpen||("function"==typeof this.options.onOpen&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&("function"==typeof this.options.onClose&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(e,t){return i(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_TapTarget}},{key:"defaults",get:function(){return t}}]),c}(c);M.TapTarget=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"tapTarget","M_TapTarget")}(cash),function(e){var t={classes:"",dropdownOptions:{}},n=function(n){function c(t,n){a(this,c);var i=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,n));return i.$el.hasClass("browser-default")?r(i):(i.el.M_FormSelect=i,i.options=e.extend({},c.defaults,n),i.isMultiple=i.$el.prop("multiple"),i.el.tabIndex=-1,i._keysSelected={},i._valueDict={},i._setupDropdown(),i._setupEventHandlers(),i)}return s(c,n),o(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),e(this.dropdownOptions).find("li:not(.optgroup)").each((function(e){e.addEventListener("click",t._handleOptionClickBound)})),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var t=this;e(this.dropdownOptions).find("li:not(.optgroup)").each((function(e){e.removeEventListener("click",t._handleOptionClickBound)})),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(e){this._setValueToInput()}},{key:"_handleOptionClick",value:function(t){t.preventDefault();var n=e(t.target).closest("li")[0],i=n.id;if(!e(n).hasClass("disabled")&&!e(n).hasClass("optgroup")&&i.length){var o=!0;if(this.isMultiple){var r=e(this.dropdownOptions).find("li.disabled.selected");r.length&&(r.removeClass("selected"),r.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(r[0].id)),o=this._toggleEntryFromArray(i)}else e(this.dropdownOptions).find("li").removeClass("selected"),e(n).toggleClass("selected",o);e(this._valueDict[i].el).prop("selected")!==o&&(e(this._valueDict[i].el).prop("selected",o),this.$el.trigger("change"))}t.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var t=this;this.wrapper=document.createElement("div"),e(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(e(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),e(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each((function(n){if(e(n).is("option")){var i=void 0;i=t.isMultiple?t._appendOptionWithIcon(t.$el,n,"multiple"):t._appendOptionWithIcon(t.$el,n),t._addOptionToValueDict(n,i)}else if(e(n).is("optgroup")){var o=e(n).children("option");e(t.dropdownOptions).append(e('<li class="optgroup"><span>'+n.getAttribute("label")+"</span></li>")[0]),o.each((function(e){var n=t._appendOptionWithIcon(t.$el,e,"optgroup-option");t._addOptionToValueDict(e,n)}))}})),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),e(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&e(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var n=e('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(n[0]),!this.el.disabled){var i=e.extend({},this.options.dropdownOptions);i.onOpenEnd=function(n){var i=e(t.dropdownOptions).find(".selected").first();if(t.dropdown.isScrollable&&i.length){var o=i[0].getBoundingClientRect().top-t.dropdownOptions.getBoundingClientRect().top;o-=t.dropdownOptions.clientHeight/2,t.dropdownOptions.scrollTop=o}},this.isMultiple&&(i.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,i)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(e,t){var n=Object.keys(this._valueDict).length,i=this.dropdownOptions.id+n,o={};t.id=i,o.el=e,o.optionEl=t,this._valueDict[i]=o}},{key:"_removeDropdown",value:function(){e(this.wrapper).find(".caret").remove(),e(this.input).remove(),e(this.dropdownOptions).remove(),e(this.wrapper).before(this.$el),e(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(t,n,i){var o=n.disabled?"disabled ":"",r="optgroup-option"===i?"optgroup-option ":"",s=this.isMultiple?'<label><input type="checkbox"'+o+'"/><span>'+n.innerHTML+"</span></label>":n.innerHTML,a=e("<li></li>"),c=e("<span></span>");c.html(s),a.addClass(o+" "+r),a.append(c);var l=n.getAttribute("data-icon");if(l){var u=e('<img alt="" src="'+l+'">');a.prepend(u)}return e(this.dropdownOptions).append(a[0]),a[0]}},{key:"_toggleEntryFromArray",value:function(t){var n=!this._keysSelected.hasOwnProperty(t),i=e(this._valueDict[t].optionEl);return n?this._keysSelected[t]=!0:delete this._keysSelected[t],i.toggleClass("selected",n),i.find('input[type="checkbox"]').prop("checked",n),i.prop("selected",n),n}},{key:"_setValueToInput",value:function(){var t=[];if(this.$el.find("option").each((function(n){if(e(n).prop("selected")){var i=e(n).text();t.push(i)}})),!t.length){var n=this.$el.find("option:disabled").eq(0);n.length&&""===n[0].value&&t.push(n.text())}this.input.value=t.join(", ")}},{key:"_setSelectedStates",value:function(){for(var t in this._keysSelected={},this._valueDict){var n=this._valueDict[t],i=e(n.el).prop("selected");e(n.optionEl).find('input[type="checkbox"]').prop("checked",i),i?(this._activateOption(e(this.dropdownOptions),e(n.optionEl)),this._keysSelected[t]=!0):e(n.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(t,n){n&&(this.isMultiple||t.find("li.selected").removeClass("selected"),e(n).addClass("selected"))}},{key:"getSelectedValues",value:function(){var e=[];for(var t in this._keysSelected)e.push(this._valueDict[t].el.value);return e}}],[{key:"init",value:function(e,t){return i(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FormSelect}},{key:"defaults",get:function(){return t}}]),c}(c);M.FormSelect=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"formSelect","M_FormSelect")}(cash),function(e,t){var n={},l=function(c){function l(t,n){a(this,l);var i=r(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Range=i,i.options=e.extend({},l.defaults,n),i._mousedown=!1,i._setupThumb(),i._setupEventHandlers(),i}return s(l,c),o(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){e(this.value).html(this.$el.val()),e(this.thumb).hasClass("active")||this._showRangeBubble();var t=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",t+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(t){if(e(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),e(this.thumb).hasClass("active")||this._showRangeBubble(),"input"!==t.type){var n=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",n+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){e(this.thumb).hasClass("active")||this._showRangeBubble();var t=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",t+"px"),e(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var n=7+parseInt(this.$el.css("padding-left"))+"px";e(this.thumb).hasClass("active")&&(t.remove(this.thumb),t({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:n,duration:100})),e(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),e(this.thumb).addClass("thumb"),e(this.value).addClass("value"),e(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){e(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var n=-7+parseInt(e(this.thumb).parent().css("padding-left"))+"px";t.remove(this.thumb),t({targets:this.thumb,height:30,width:30,top:-30,marginLeft:n,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var e=this.$el.width()-15,t=parseFloat(this.$el.attr("max"))||100,n=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-n)/(t-n)*e}}],[{key:"init",value:function(e,t){return i(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Range}},{key:"defaults",get:function(){return n}}]),l}(c);M.Range=l,M.jQueryLoaded&&M.initializeJqueryWrapper(l,"range","M_Range"),l.init(e("input[type=range]"))}(cash,M.anime)}));function o(){}const r=e=>e;function s(e,t){for(const n in t)e[n]=t[n];return e}function a(e,t,n,i,o){e.__svelte_meta={loc:{file:t,line:n,column:i,char:o}}}function c(e){return e()}function l(){return Object.create(null)}function u(e){e.forEach(c)}function h(e){return"function"==typeof e}function d(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function f(e,t){if(null!=e&&"function"!=typeof e.subscribe)throw new Error(`'${t}' is not a store with a 'subscribe' method`)}function p(e,...t){if(null==e)return o;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function v(e,t,n){e.$$.on_destroy.push(p(t,n))}function m(e,t,n,i){if(e){const o=_(e,t,n,i);return e[0](o)}}function _(e,t,n,i){return e[1]&&i?s(n.ctx.slice(),e[1](i(t))):n.ctx}function g(e,t,n,i){if(e[2]&&i){const o=e[2](i(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|o[i];return e}return t.dirty|o}return t.dirty}function y(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function b(e){return null==e?"":e}function w(e,t,n=t){return e.set(n),t}function C(e){e.parentNode.removeChild(e)}function S(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function x(e){return document.createTextNode(e)}function T(){return x(" ")}function L(){return x("")}function R(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function O(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const i in t)null==t[i]?e.removeAttribute(i):"style"===i?e.style.cssText=t[i]:"__value"===i?e.value=e[i]=t[i]:n[i]&&n[i].set?e[i]=t[i]:R(e,i,t[i])}function A(e,t){(null!=t||e.value)&&(e.value=t)}function D(e,t){for(let n=0;n<e.options.length;n+=1){const i=e.options[n];if(i.__value===t)return void(i.selected=!0)}}function I(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function P(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}let B;function H(e){B=e}function j(){if(!B)throw new Error("Function called outside component initialization");return B}function W(e){j().$$.on_mount.push(e)}function F(e){j().$$.after_update.push(e)}function N(e){j().$$.on_destroy.push(e)}function U(){const e=j();return(t,n)=>{const i=e.$$.callbacks[t];if(i){const o=P(t,n);i.slice().forEach(t=>{t.call(e,o)})}}}function q(e,t){j().$$.context.set(e,t)}function z(e){return j().$$.context.get(e)}function Y(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const V=[],K=[],G=[],Z=[],X=Promise.resolve();let J=!1;function Q(e){G.push(e)}let ee=!1;const te=new Set;function ne(){if(!ee){ee=!0;do{for(let e=0;e<V.length;e+=1){const t=V[e];H(t),ie(t.$$)}for(V.length=0;K.length;)K.pop()();for(let e=0;e<G.length;e+=1){const t=G[e];te.has(t)||(te.add(t),t())}G.length=0}while(V.length);for(;Z.length;)Z.pop()();J=!1,ee=!1,te.clear()}}function ie(e){if(null!==e.fragment){e.update(),u(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Q)}}const oe=new Set;let re;function se(){re={r:0,c:[],p:re}}function ae(){re.r||u(re.c),re=re.p}function ce(e,t){e&&e.i&&(oe.delete(e),e.i(t))}function le(e,t,n,i){if(e&&e.o){if(oe.has(e))return;oe.add(e),re.c.push(()=>{oe.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}}const ue="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function he(e,t){const n={},i={},o={$$scope:1};let r=e.length;for(;r--;){const s=e[r],a=t[r];if(a){for(const e in s)e in a||(i[e]=1);for(const e in a)o[e]||(n[e]=a[e],o[e]=1);e[r]=a}else for(const e in s)o[e]=1}for(const e in i)e in n||(n[e]=void 0);return n}function de(e){return"object"==typeof e&&null!==e?e:{}}function fe(e){e&&e.c()}function pe(e,t,n){const{fragment:i,on_mount:o,on_destroy:r,after_update:s}=e.$$;i&&i.m(t,n),Q(()=>{const t=o.map(c).filter(h);r?r.push(...t):u(t),e.$$.on_mount=[]}),s.forEach(Q)}function ve(e,t){const n=e.$$;null!==n.fragment&&(u(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function me(e,t){-1===e.$$.dirty[0]&&(V.push(e),J||(J=!0,X.then(ne)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function _e(e,t,n,i,r,s,a=[-1]){const c=B;H(e);const h=t.props||{},d=e.$$={fragment:null,ctx:null,props:s,update:o,not_equal:r,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:l(),dirty:a};let f=!1;if(d.ctx=n?n(e,h,(t,n,...i)=>{const o=i.length?i[0]:n;return d.ctx&&r(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),f&&me(e,t)),n}):[],d.update(),f=!0,u(d.before_update),d.fragment=!!i&&i(d.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);d.fragment&&d.fragment.l(e),e.forEach(C)}else d.fragment&&d.fragment.c();t.intro&&ce(e.$$.fragment),pe(e,t.target,t.anchor),ne()}H(c)}function ge(e,t){document.dispatchEvent(P(e,Object.assign({version:"3.22.3"},t)))}function ye(e,t){ge("SvelteDOMInsert",{target:e,node:t}),function(e,t){e.appendChild(t)}(e,t)}function be(e,t,n){ge("SvelteDOMInsert",{target:e,node:t,anchor:n}),function(e,t,n){e.insertBefore(t,n||null)}(e,t,n)}function we(e){ge("SvelteDOMRemove",{node:e}),C(e)}function Ce(e,t,n,i,o,r){const s=!0===i?["capture"]:i?Array.from(Object.keys(i)):[];o&&s.push("preventDefault"),r&&s.push("stopPropagation"),ge("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:s});const a=function(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}(e,t,n,i);return()=>{ge("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:s}),a()}}function Se(e,t,n){R(e,t,n),null==n?ge("SvelteDOMRemoveAttribute",{node:e,attribute:t}):ge("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function ke(e,t,n){e[t]=n,ge("SvelteDOMSetProperty",{node:e,property:t,value:n})}function Ee(e,t){t=""+t,e.data!==t&&(ge("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function xe(e){if(!("string"==typeof e||e&&"object"==typeof e&&"length"in e)){let t="{#each} only iterates over array-like objects.";throw"function"==typeof Symbol&&e&&Symbol.iterator in e&&(t+=" You can use a spread to convert this iterable into an array."),new Error(t)}}function Te(e,t,n){for(const i of Object.keys(t))~n.indexOf(i)||console.warn(`<${e}> received an unexpected slot "${i}".`)}class Le extends class{$destroy(){ve(this,1),this.$destroy=o}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}{constructor(e){if(!e||!e.target&&!e.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}const Re="src/game/Sprites.svelte";function Me(e){let t,n,i;const r={c:function(){t=k("div"),n=k("div"),Se(n,"class",i=b(e[0])+" svelte-1qscu32"),a(n,Re,27,2,486),Se(t,"class","container svelte-1qscu32"),a(t,Re,26,0,460)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,[t]){1&t&&i!==(i=b(e[0])+" svelte-1qscu32")&&Se(n,"class",i)},i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:Me.name,type:"component",source:"",ctx:e}),r}function Oe(e,t,n){let{item:i="weapon"}=t;const o=["item"];Object.keys(t).forEach(e=>{~o.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Sprites> was created with unknown prop '${e}'`)});let{$$slots:r={},$$scope:s}=t;return Te("Sprites",r,[]),e.$set=e=>{"item"in e&&n(0,i=e.item)},e.$capture_state=()=>({item:i}),e.$inject_state=e=>{"item"in e&&n(0,i=e.item)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i]}class Ae extends Le{constructor(e){super(e),_e(this,e,Oe,Me,d,{item:0}),ge("SvelteRegisterComponent",{component:this,tagName:"Sprites",options:e,id:Me.name})}get item(){throw new Error("<Sprites>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set item(e){throw new Error("<Sprites>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const $e="src/Credits.svelte";function De(e){let t,n,i,r,s,c;const l={c:function(){t=k("h4"),t.textContent="Credits",n=T(),i=k("ul"),r=k("li"),s=k("a"),s.textContent="https://opengameart.org/content/32x32-fantasy-portrait-set",c=x("\n    by CobraLad"),a(t,$e,12,0,85),Se(s,"href","https://opengameart.org/content/32x32-fantasy-portrait-set"),a(s,$e,15,4,164),Se(r,"class","collection-item bg svelte-1ap35t3"),a(r,$e,14,2,128),Se(i,"class","collection"),a(i,$e,13,0,102)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),be(e,n,o),be(e,i,o),ye(i,r),ye(r,s),ye(r,c)},p:o,i:o,o:o,d:function(e){e&&we(t),e&&we(n),e&&we(i)}};return ge("SvelteRegisterBlock",{block:l,id:De.name,type:"component",source:"",ctx:e}),l}function Ie(e,t){const n=[];Object.keys(t).forEach(e=>{~n.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Credits> was created with unknown prop '${e}'`)});let{$$slots:i={},$$scope:o}=t;return Te("Credits",i,[]),[]}class Pe extends Le{constructor(e){super(e),_e(this,e,Ie,De,d,{}),ge("SvelteRegisterComponent",{component:this,tagName:"Credits",options:e,id:De.name})}}const Be=[];function He(e,t=o){let n;const i=[];function r(t){if(d(e,t)&&(e=t,n)){const t=!Be.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),Be.push(n,e)}if(t){for(let e=0;e<Be.length;e+=2)Be[e][0](Be[e+1]);Be.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(s,a=o){const c=[s,a];return i.push(c),1===i.length&&(n=t(r)||o),s(e),()=>{const e=i.indexOf(c);-1!==e&&i.splice(e,1),0===i.length&&(n(),n=null)}}}}function je(e,t,n){const i=!Array.isArray(e),r=i?[e]:e,s=t.length<2;return{subscribe:He(n,e=>{let n=!1;const a=[];let c=0,l=o;const d=()=>{if(c)return;l();const n=t(i?a[0]:a,e);s?e(n):l=h(n)?n:o},f=r.map((e,t)=>p(e,e=>{a[t]=e,c&=~(1<<t),n&&d()},()=>{c|=1<<t}));return n=!0,d(),function(){u(f),l()}}).subscribe}}const We={},Fe={};function Ne(e){return{...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}}const Ue=function(e,t){const n=[];let i=Ne(e);return{get location(){return i},listen(t){n.push(t);const o=()=>{i=Ne(e),t({location:i,action:"POP"})};return e.addEventListener("popstate",o),()=>{e.removeEventListener("popstate",o);const i=n.indexOf(t);n.splice(i,1)}},navigate(t,{state:o,replace:r=!1}={}){o={...o,key:Date.now()+""};try{r?e.history.replaceState(o,null,t):e.history.pushState(o,null,t)}catch(n){e.location[r?"replace":"assign"](t)}i=Ne(e),n.forEach(e=>e({location:i,action:"PUSH"}))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(e="/"){let t=0;const n=[{pathname:e,search:""}],i=[];return{get location(){return n[t]},addEventListener(e,t){},removeEventListener(e,t){},history:{get entries(){return n},get index(){return t},get state(){return i[t]},pushState(e,o,r){const[s,a=""]=r.split("?");t++,n.push({pathname:s,search:a}),i.push(e)},replaceState(e,o,r){const[s,a=""]=r.split("?");n[t]={pathname:s,search:a},i[t]=e}}}}()),{navigate:qe}=Ue,ze=/^:(.+)/;function Ye(e,t){return e.substr(0,t.length)===t}function Ve(e){return"*"===e[0]}function Ke(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Ge(e){return e.replace(/(^\/+|\/+$)/g,"")}function Ze(e,t){return{route:e,score:e.default?0:Ke(e.path).reduce((e,t)=>(e+=4,!function(e){return""===e}(t)?!function(e){return ze.test(e)}(t)?Ve(t)?e-=5:e+=3:e+=2:e+=1,e),0),index:t}}function Xe(e,t){let n,i;const[o]=t.split("?"),r=Ke(o),s=""===r[0],a=function(e){return e.map(Ze).sort((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index)}(e);for(let e=0,o=a.length;e<o;e++){const o=a[e].route;let c=!1;if(o.default){i={route:o,params:{},uri:t};continue}const l=Ke(o.path),u={},h=Math.max(r.length,l.length);let d=0;for(;d<h;d++){const e=l[d],t=r[d];if(void 0!==e&&Ve(e)){u["*"===e?"*":e.slice(1)]=r.slice(d).map(decodeURIComponent).join("/");break}if(void 0===t){c=!0;break}let n=ze.exec(e);if(n&&!s){const e=decodeURIComponent(t);u[n[1]]=e}else if(e!==t){c=!0;break}}if(!c){n={route:o,params:u,uri:"/"+r.slice(0,d).join("/")};break}}return n||i||null}function Je(e,t){return Xe([e],t)}function Qe(e,t){return e+(t?"?"+t:"")}function et(e,t){if(Ye(e,"/"))return e;const[n,i]=e.split("?"),[o]=t.split("?"),r=Ke(n),s=Ke(o);if(""===r[0])return Qe(o,i);if(!Ye(r[0],".")){return Qe(("/"===o?"":"/")+s.concat(r).join("/"),i)}const a=s.concat(r),c=[];return a.forEach(e=>{".."===e?c.pop():"."!==e&&c.push(e)}),Qe("/"+c.join("/"),i)}function tt(e,t){return Ge("/"===t?e:`${Ge(e)}/${Ge(t)}`)+"/"}function nt(e){return!e.defaultPrevented&&0===e.button&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function it(e){let t;const n=e[16].default,i=m(n,e,e[15],null),o={c:function(){i&&i.c()},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,n){i&&i.m(e,n),t=!0},p:function(e,[t]){i&&i.p&&32768&t&&i.p(_(n,e,e[15],null),g(n,e[15],t,null))},i:function(e){t||(ce(i,e),t=!0)},o:function(e){le(i,e),t=!1},d:function(e){i&&i.d(e)}};return ge("SvelteRegisterBlock",{block:o,id:it.name,type:"component",source:"",ctx:e}),o}function ot(e,t,n){let i,o,r,{basepath:s="/"}=t,{url:a=null}=t;const c=z(We),l=z(Fe),u=He([]);f(u,"routes"),v(e,u,e=>n(8,r=e));const h=He(null);let d=!1;const p=c||He(a?{pathname:a}:Ue.location);f(p,"location"),v(e,p,e=>n(7,o=e));const m=l?l.routerBase:He({path:s,uri:s});f(m,"base"),v(e,m,e=>n(6,i=e));const _=je([m,h],([e,t])=>{if(null===t)return e;const{path:n}=e,{route:i,uri:o}=t;return{path:i.default?n:i.path.replace(/\*.*$/,""),uri:o}});function g(e){const{path:t}=i;let{path:n}=e;if(e._path=n,e.path=tt(t,n),"undefined"==typeof window){if(d)return;const t=Je(e,o.pathname);t&&(h.set(t),d=!0)}else u.update(t=>(t.push(e),t))}function y(e){u.update(t=>{const n=t.indexOf(e);return t.splice(n,1),t})}c||(W(()=>Ue.listen(e=>{p.set(e.location)})),q(We,p)),q(Fe,{activeRoute:h,base:m,routerBase:_,registerRoute:g,unregisterRoute:y});const b=["basepath","url"];Object.keys(t).forEach(e=>{~b.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Router> was created with unknown prop '${e}'`)});let{$$slots:w={},$$scope:C}=t;return Te("Router",w,["default"]),e.$set=e=>{"basepath"in e&&n(3,s=e.basepath),"url"in e&&n(4,a=e.url),"$$scope"in e&&n(15,C=e.$$scope)},e.$capture_state=()=>({getContext:z,setContext:q,onMount:W,writable:He,derived:je,LOCATION:We,ROUTER:Fe,globalHistory:Ue,pick:Xe,match:Je,stripSlashes:Ge,combinePaths:tt,basepath:s,url:a,locationContext:c,routerContext:l,routes:u,activeRoute:h,hasActiveRoute:d,location:p,base:m,routerBase:_,registerRoute:g,unregisterRoute:y,$base:i,$location:o,$routes:r}),e.$inject_state=e=>{"basepath"in e&&n(3,s=e.basepath),"url"in e&&n(4,a=e.url),"hasActiveRoute"in e&&(d=e.hasActiveRoute)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{if(64&e.$$.dirty){const{path:e}=i;u.update(t=>(t.forEach(t=>t.path=tt(e,t._path)),t))}if(384&e.$$.dirty){const e=Xe(r,o.pathname);h.set(e)}},[u,p,m,s,a,d,i,o,r,c,l,h,_,g,y,C,w]}class rt extends Le{constructor(e){super(e),_e(this,e,ot,it,d,{basepath:3,url:4}),ge("SvelteRegisterComponent",{component:this,tagName:"Router",options:e,id:it.name})}get basepath(){throw new Error("<Router>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set basepath(e){throw new Error("<Router>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get url(){throw new Error("<Router>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set url(e){throw new Error("<Router>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const st=e=>({params:2&e,location:16&e}),at=e=>({params:e[1],location:e[4]});function ct(e){let t,n,i,o;const r=[ut,lt],s=[];function a(e,t){return null!==e[0]?0:1}t=a(e),n=s[t]=r[t](e);const c={c:function(){n.c(),i=L()},m:function(e,n){s[t].m(e,n),be(e,i,n),o=!0},p:function(e,o){let c=t;t=a(e),t===c?s[t].p(e,o):(se(),le(s[c],1,1,()=>{s[c]=null}),ae(),n=s[t],n||(n=s[t]=r[t](e),n.c()),ce(n,1),n.m(i.parentNode,i))},i:function(e){o||(ce(n),o=!0)},o:function(e){le(n),o=!1},d:function(e){s[t].d(e),e&&we(i)}};return ge("SvelteRegisterBlock",{block:c,id:ct.name,type:"if",source:"(40:0) {#if $activeRoute !== null && $activeRoute.route === route}",ctx:e}),c}function lt(e){let t;const n=e[13].default,i=m(n,e,e[12],at),o={c:function(){i&&i.c()},m:function(e,n){i&&i.m(e,n),t=!0},p:function(e,t){i&&i.p&&4114&t&&i.p(_(n,e,e[12],at),g(n,e[12],t,st))},i:function(e){t||(ce(i,e),t=!0)},o:function(e){le(i,e),t=!1},d:function(e){i&&i.d(e)}};return ge("SvelteRegisterBlock",{block:o,id:lt.name,type:"else",source:"(43:2) {:else}",ctx:e}),o}function ut(e){let t,n;const i=[{location:e[4]},e[1],e[2]];var o=e[0];function r(e){let t={};for(let e=0;e<i.length;e+=1)t=s(t,i[e]);return{props:t,$$inline:!0}}if(o)var a=new o(r());const c={c:function(){a&&fe(a.$$.fragment),t=L()},m:function(e,i){a&&pe(a,e,i),be(e,t,i),n=!0},p:function(e,n){const s=22&n?he(i,[16&n&&{location:e[4]},2&n&&de(e[1]),4&n&&de(e[2])]):{};if(o!==(o=e[0])){if(a){se();const e=a;le(e.$$.fragment,1,0,()=>{ve(e,1)}),ae()}o?(fe((a=new o(r())).$$.fragment),ce(a.$$.fragment,1),pe(a,t.parentNode,t)):a=null}else o&&a.$set(s)},i:function(e){n||(a&&ce(a.$$.fragment,e),n=!0)},o:function(e){a&&le(a.$$.fragment,e),n=!1},d:function(e){e&&we(t),a&&ve(a,e)}};return ge("SvelteRegisterBlock",{block:c,id:ut.name,type:"if",source:"(41:2) {#if component !== null}",ctx:e}),c}function ht(e){let t,n,i=null!==e[3]&&e[3].route===e[7]&&ct(e);const o={c:function(){i&&i.c(),t=L()},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){i&&i.m(e,o),be(e,t,o),n=!0},p:function(e,[n]){null!==e[3]&&e[3].route===e[7]?i?(i.p(e,n),8&n&&ce(i,1)):(i=ct(e),i.c(),ce(i,1),i.m(t.parentNode,t)):i&&(se(),le(i,1,1,()=>{i=null}),ae())},i:function(e){n||(ce(i),n=!0)},o:function(e){le(i),n=!1},d:function(e){i&&i.d(e),e&&we(t)}};return ge("SvelteRegisterBlock",{block:o,id:ht.name,type:"component",source:"",ctx:e}),o}function dt(e,t,n){let i,o,{path:r=""}=t,{component:a=null}=t;const{registerRoute:c,unregisterRoute:l,activeRoute:u}=z(Fe);f(u,"activeRoute"),v(e,u,e=>n(3,i=e));const h=z(We);f(h,"location"),v(e,h,e=>n(4,o=e));const d={path:r,default:""===r};let p={},m={};c(d),"undefined"!=typeof window&&N(()=>{l(d)});let{$$slots:_={},$$scope:g}=t;return Te("Route",_,["default"]),e.$set=e=>{n(11,t=s(s({},t),y(e))),"path"in e&&n(8,r=e.path),"component"in e&&n(0,a=e.component),"$$scope"in e&&n(12,g=e.$$scope)},e.$capture_state=()=>({getContext:z,onDestroy:N,ROUTER:Fe,LOCATION:We,path:r,component:a,registerRoute:c,unregisterRoute:l,activeRoute:u,location:h,route:d,routeParams:p,routeProps:m,$activeRoute:i,$location:o}),e.$inject_state=e=>{n(11,t=s(s({},t),e)),"path"in t&&n(8,r=e.path),"component"in t&&n(0,a=e.component),"routeParams"in t&&n(1,p=e.routeParams),"routeProps"in t&&n(2,m=e.routeProps)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{8&e.$$.dirty&&i&&i.route===d&&n(1,p=i.params);{const{path:e,component:i,...o}=t;n(2,m=o)}},t=y(t),[a,p,m,i,o,u,h,d,r,c,l,t,g,_]}class ft extends Le{constructor(e){super(e),_e(this,e,dt,ht,d,{path:8,component:0}),ge("SvelteRegisterComponent",{component:this,tagName:"Route",options:e,id:ht.name})}get path(){throw new Error("<Route>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set path(e){throw new Error("<Route>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get component(){throw new Error("<Route>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set component(e){throw new Error("<Route>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function pt(e){let t,n,i;const o=e[16].default,r=m(o,e,e[15],null);let c=[{href:e[0]},{"aria-current":e[2]},e[1]],l={};for(let e=0;e<c.length;e+=1)l=s(l,c[e]);const u={c:function(){t=k("a"),r&&r.c(),O(t,l),a(t,"node_modules/svelte-routing/src/Link.svelte",40,0,1249)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,s,a){be(o,t,s),r&&r.m(t,null),n=!0,a&&i(),i=Ce(t,"click",e[5],!1,!1,!1)},p:function(e,[n]){r&&r.p&&32768&n&&r.p(_(o,e,e[15],null),g(o,e[15],n,null)),O(t,he(c,[1&n&&{href:e[0]},4&n&&{"aria-current":e[2]},2&n&&e[1]]))},i:function(e){n||(ce(r,e),n=!0)},o:function(e){le(r,e),n=!1},d:function(e){e&&we(t),r&&r.d(e),i()}};return ge("SvelteRegisterBlock",{block:u,id:pt.name,type:"component",source:"",ctx:e}),u}function vt(e,t,n){let i,o,{to:r="#"}=t,{replace:s=!1}=t,{state:a={}}=t,{getProps:c=(()=>({}))}=t;const{base:l}=z(Fe);f(l,"base"),v(e,l,e=>n(12,i=e));const u=z(We);f(u,"location"),v(e,u,e=>n(13,o=e));const h=U();let d,p,m,_;function g(e){if(h("click",e),nt(e)){e.preventDefault();const t=o.pathname===d||s;qe(d,{state:a,replace:t})}}const y=["to","replace","state","getProps"];Object.keys(t).forEach(e=>{~y.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Link> was created with unknown prop '${e}'`)});let b,{$$slots:w={},$$scope:C}=t;return Te("Link",w,["default"]),e.$set=e=>{"to"in e&&n(6,r=e.to),"replace"in e&&n(7,s=e.replace),"state"in e&&n(8,a=e.state),"getProps"in e&&n(9,c=e.getProps),"$$scope"in e&&n(15,C=e.$$scope)},e.$capture_state=()=>({getContext:z,createEventDispatcher:U,ROUTER:Fe,LOCATION:We,navigate:qe,startsWith:Ye,resolve:et,shouldNavigate:nt,to:r,replace:s,state:a,getProps:c,base:l,location:u,dispatch:h,href:d,isPartiallyCurrent:p,isCurrent:m,props:_,onClick:g,$base:i,$location:o,ariaCurrent:b}),e.$inject_state=e=>{"to"in e&&n(6,r=e.to),"replace"in e&&n(7,s=e.replace),"state"in e&&n(8,a=e.state),"getProps"in e&&n(9,c=e.getProps),"href"in e&&n(0,d=e.href),"isPartiallyCurrent"in e&&n(10,p=e.isPartiallyCurrent),"isCurrent"in e&&n(11,m=e.isCurrent),"props"in e&&n(1,_=e.props),"ariaCurrent"in e&&n(2,b=e.ariaCurrent)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{4160&e.$$.dirty&&n(0,d="/"===r?i.uri:et(r,i.uri)),8193&e.$$.dirty&&n(10,p=Ye(o.pathname,d)),8193&e.$$.dirty&&n(11,m=d===o.pathname),2048&e.$$.dirty&&n(2,b=m?"page":void 0),11777&e.$$.dirty&&n(1,_=c({location:o,href:d,isPartiallyCurrent:p,isCurrent:m}))},[d,_,b,l,u,g,r,s,a,c,p,m,i,o,h,C,w]}class mt extends Le{constructor(e){super(e),_e(this,e,vt,pt,d,{to:6,replace:7,state:8,getProps:9}),ge("SvelteRegisterComponent",{component:this,tagName:"Link",options:e,id:pt.name})}get to(){throw new Error("<Link>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set to(e){throw new Error("<Link>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get replace(){throw new Error("<Link>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set replace(e){throw new Error("<Link>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get state(){throw new Error("<Link>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set state(e){throw new Error("<Link>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get getProps(){throw new Error("<Link>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set getProps(e){throw new Error("<Link>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const _t=e=>({matches:1&e}),gt=e=>({matches:e[0]});function yt(e){let t;const n=e[8].default,i=m(n,e,e[7],gt),o={c:function(){i&&i.c()},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,n){i&&i.m(e,n),t=!0},p:function(e,[t]){i&&i.p&&129&t&&i.p(_(n,e,e[7],gt),g(n,e[7],t,_t))},i:function(e){t||(ce(i,e),t=!0)},o:function(e){le(i,e),t=!1},d:function(e){i&&i.d(e)}};return ge("SvelteRegisterBlock",{block:o,id:yt.name,type:"component",source:"",ctx:e}),o}function bt(e,t,n){let i,o,{query:r}=t,s=!1,a=!1;function c(e){i=window.matchMedia(e),o=e=>n(0,a=e.matches),i.addListener(o),n(0,a=i.matches)}function l(){i&&o&&i.removeListener(o)}W(()=>(n(4,s=!0),()=>{l()}));const u=["query"];Object.keys(t).forEach(e=>{~u.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<MediaQuery> was created with unknown prop '${e}'`)});let{$$slots:h={},$$scope:d}=t;return Te("MediaQuery",h,["default"]),e.$set=e=>{"query"in e&&n(1,r=e.query),"$$scope"in e&&n(7,d=e.$$scope)},e.$capture_state=()=>({onMount:W,query:r,mql:i,mqlListener:o,wasMounted:s,matches:a,addNewListener:c,removeActiveListener:l}),e.$inject_state=e=>{"query"in e&&n(1,r=e.query),"mql"in e&&(i=e.mql),"mqlListener"in e&&(o=e.mqlListener),"wasMounted"in e&&n(4,s=e.wasMounted),"matches"in e&&n(0,a=e.matches)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{18&e.$$.dirty&&s&&(l(),c(r))},[a,r,i,o,s,c,l,d,h]}class wt extends Le{constructor(e){super(e),_e(this,e,bt,yt,d,{query:1}),ge("SvelteRegisterComponent",{component:this,tagName:"MediaQuery",options:e,id:yt.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[1]||"query"in n||console.warn("<MediaQuery> was created without expected prop 'query'")}get query(){throw new Error("<MediaQuery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set query(e){throw new Error("<MediaQuery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ct=e=>({matches:1&e}),St=e=>({matches:e[0]});function kt(e){let t;const n=e[8].default,i=m(n,e,e[7],St),o={c:function(){i&&i.c()},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,n){i&&i.m(e,n),t=!0},p:function(e,[t]){i&&i.p&&129&t&&i.p(_(n,e,e[7],St),g(n,e[7],t,Ct))},i:function(e){t||(ce(i,e),t=!0)},o:function(e){le(i,e),t=!1},d:function(e){i&&i.d(e)}};return ge("SvelteRegisterBlock",{block:o,id:kt.name,type:"component",source:"",ctx:e}),o}function Et(e,t,n){let i,o,{query:r}=t,s=!1,a=!1;function c(e){i=window.matchMedia(e),o=e=>n(0,a=e.matches),i.addListener(o),n(0,a=i.matches)}function l(){i&&o&&i.removeListener(o)}W(()=>(n(4,s=!0),()=>{l()}));const u=["query"];Object.keys(t).forEach(e=>{~u.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<MediaQuery> was created with unknown prop '${e}'`)});let{$$slots:h={},$$scope:d}=t;return Te("MediaQuery",h,["default"]),e.$set=e=>{"query"in e&&n(1,r=e.query),"$$scope"in e&&n(7,d=e.$$scope)},e.$capture_state=()=>({onMount:W,query:r,mql:i,mqlListener:o,wasMounted:s,matches:a,addNewListener:c,removeActiveListener:l}),e.$inject_state=e=>{"query"in e&&n(1,r=e.query),"mql"in e&&(i=e.mql),"mqlListener"in e&&(o=e.mqlListener),"wasMounted"in e&&n(4,s=e.wasMounted),"matches"in e&&n(0,a=e.matches)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{18&e.$$.dirty&&s&&(l(),c(r))},[a,r,i,o,s,c,l,d,h]}class xt extends Le{constructor(e){super(e),_e(this,e,Et,kt,d,{query:1}),ge("SvelteRegisterComponent",{component:this,tagName:"MediaQuery",options:e,id:kt.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[1]||"query"in n||console.warn("<MediaQuery> was created without expected prop 'query'")}get query(){throw new Error("<MediaQuery>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set query(e){throw new Error("<MediaQuery>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Tt(e,{delay:t=0,duration:n=400,easing:i=r}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:e=>"opacity: "+e*o}}var Lt=i((function(e,n){e.exports=function(){var n,i;function o(){return n.apply(null,arguments)}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(a(e,t))return!1;return!0}function l(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function f(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,i){return Et(e,t,n,i,!0).utc()}function v(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function m(e){if(null==e._isValid){var t=v(e),n=i.call(t.parsedDateParts,(function(e){return null!=e})),o=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(o=o&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return o;e._isValid=o}return e._isValid}function _(e){var t=p(NaN);return null!=e?f(v(t),e):v(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var g=o.momentProperties=[],y=!1;function b(e,t){var n,i,o;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=v(t)),l(t._locale)||(e._locale=t._locale),g.length>0)for(n=0;n<g.length;n++)l(o=t[i=g[n]])||(e[i]=o);return e}function w(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,o.updateOffset(this),y=!1)}function C(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function S(e){!1===o.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function k(e,t){var n=!0;return f((function(){if(null!=o.deprecationHandler&&o.deprecationHandler(null,e),n){var i,r,s,c=[];for(r=0;r<arguments.length;r++){if(i="","object"==typeof arguments[r]){for(s in i+="\n["+r+"] ",arguments[0])a(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[r];c.push(i)}S(e+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var E,x={};function T(e,t){null!=o.deprecationHandler&&o.deprecationHandler(e,t),x[e]||(S(t),x[e]=!0)}function L(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function R(e,t){var n,i=f({},e);for(n in t)a(t,n)&&(s(e[n])&&s(t[n])?(i[n]={},f(i[n],e[n]),f(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)a(e,n)&&!a(t,n)&&s(e[n])&&(i[n]=f({},i[n]));return i}function M(e){null!=e&&this.set(e)}function O(e,t,n){var i=""+Math.abs(e),o=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+i}o.suppressDeprecationWarnings=!1,o.deprecationHandler=null,E=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)a(e,t)&&n.push(t);return n};var A=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,$=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,D={},I={};function P(e,t,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),e&&(I[e]=o),t&&(I[t[0]]=function(){return O(o.apply(this,arguments),t[1],t[2])}),n&&(I[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function B(e,t){return e.isValid()?(t=H(t,e.localeData()),D[t]=D[t]||function(e){var t,n,i,o=e.match(A);for(t=0,n=o.length;t<n;t++)I[o[t]]?o[t]=I[o[t]]:o[t]=(i=o[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,r="";for(i=0;i<n;i++)r+=L(o[i])?o[i].call(t,e):o[i];return r}}(t),D[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for($.lastIndex=0;n>=0&&$.test(e);)e=e.replace($,i),$.lastIndex=0,n-=1;return e}var j={};function W(e,t){var n=e.toLowerCase();j[n]=j[n+"s"]=j[t]=e}function F(e){return"string"==typeof e?j[e]||j[e.toLowerCase()]:void 0}function N(e){var t,n,i={};for(n in e)a(e,n)&&(t=F(n))&&(i[t]=e[n]);return i}var U={};function q(e,t){U[e]=t}function z(e){return e%4==0&&e%100!=0||e%400==0}function Y(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function V(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=Y(t)),n}function K(e,t){return function(n){return null!=n?(Z(this,e,n),o.updateOffset(this,t),this):G(this,e)}}function G(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Z(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&z(e.year())&&1===e.month()&&29===e.date()?(n=V(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Ce(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var X,J=/\d/,Q=/\d\d/,ee=/\d{3}/,te=/\d{4}/,ne=/[+-]?\d{6}/,ie=/\d\d?/,oe=/\d\d\d\d?/,re=/\d\d\d\d\d\d?/,se=/\d{1,3}/,ae=/\d{1,4}/,ce=/[+-]?\d{1,6}/,le=/\d+/,ue=/[+-]?\d+/,he=/Z|[+-]\d\d:?\d\d/gi,de=/Z|[+-]\d\d(?::?\d\d)?/gi,fe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pe(e,t,n){X[e]=L(t)?t:function(e,i){return e&&n?n:t}}function ve(e,t){return a(X,e)?X[e](t._strict,t._locale):new RegExp(function(e){return me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,o){return t||n||i||o})))}(e))}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}X={};var _e,ge={};function ye(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),u(t)&&(i=function(e,n){n[t]=V(e)}),n=0;n<e.length;n++)ge[e[n]]=i}function be(e,t){ye(e,(function(e,n,i,o){i._w=i._w||{},t(e,i._w,i,o)}))}function we(e,t,n){null!=t&&a(ge,e)&&ge[e](t,n._a,n,e)}function Ce(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=function(e,t){return(e%t+t)%t}(t,12);return e+=(t-n)/12,1===n?z(e)?29:28:31-n%7%2}_e=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},P("M",["MM",2],"Mo",(function(){return this.month()+1})),P("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),P("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),W("month","M"),q("month",8),pe("M",ie),pe("MM",ie,Q),pe("MMM",(function(e,t){return t.monthsShortRegex(e)})),pe("MMMM",(function(e,t){return t.monthsRegex(e)})),ye(["M","MM"],(function(e,t){t[1]=V(e)-1})),ye(["MMM","MMMM"],(function(e,t,n,i){var o=n._locale.monthsParse(e,i,n._strict);null!=o?t[1]=o:v(n).invalidMonth=e}));var Se="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ke="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ee=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,xe=fe,Te=fe;function Le(e,t,n){var i,o,r,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(o=_e.call(this._shortMonthsParse,s))?o:null:-1!==(o=_e.call(this._longMonthsParse,s))?o:null:"MMM"===t?-1!==(o=_e.call(this._shortMonthsParse,s))||-1!==(o=_e.call(this._longMonthsParse,s))?o:null:-1!==(o=_e.call(this._longMonthsParse,s))||-1!==(o=_e.call(this._shortMonthsParse,s))?o:null}function Re(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=V(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Ce(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Me(e){return null!=e?(Re(this,e),o.updateOffset(this,!0),this):G(this,"Month")}function Oe(){function e(e,t){return t.length-e.length}var t,n,i=[],o=[],r=[];for(t=0;t<12;t++)n=p([2e3,t]),i.push(this.monthsShort(n,"")),o.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(i.sort(e),o.sort(e),r.sort(e),t=0;t<12;t++)i[t]=me(i[t]),o[t]=me(o[t]);for(t=0;t<24;t++)r[t]=me(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ae(e){return z(e)?366:365}P("Y",0,0,(function(){var e=this.year();return e<=9999?O(e,4):"+"+e})),P(0,["YY",2],0,(function(){return this.year()%100})),P(0,["YYYY",4],0,"year"),P(0,["YYYYY",5],0,"year"),P(0,["YYYYYY",6,!0],0,"year"),W("year","y"),q("year",1),pe("Y",ue),pe("YY",ie,Q),pe("YYYY",ae,te),pe("YYYYY",ce,ne),pe("YYYYYY",ce,ne),ye(["YYYYY","YYYYYY"],0),ye("YYYY",(function(e,t){t[0]=2===e.length?o.parseTwoDigitYear(e):V(e)})),ye("YY",(function(e,t){t[0]=o.parseTwoDigitYear(e)})),ye("Y",(function(e,t){t[0]=parseInt(e,10)})),o.parseTwoDigitYear=function(e){return V(e)+(V(e)>68?1900:2e3)};var $e=K("FullYear",!0);function De(e,t,n,i,o,r,s){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,i,o,r,s),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,i,o,r,s),a}function Ie(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Pe(e,t,n){var i=7+t-n;return-(7+Ie(e,0,i).getUTCDay()-t)%7+i-1}function Be(e,t,n,i,o){var r,s,a=1+7*(t-1)+(7+n-i)%7+Pe(e,i,o);return a<=0?s=Ae(r=e-1)+a:a>Ae(e)?(r=e+1,s=a-Ae(e)):(r=e,s=a),{year:r,dayOfYear:s}}function He(e,t,n){var i,o,r=Pe(e.year(),t,n),s=Math.floor((e.dayOfYear()-r-1)/7)+1;return s<1?i=s+je(o=e.year()-1,t,n):s>je(e.year(),t,n)?(i=s-je(e.year(),t,n),o=e.year()+1):(o=e.year(),i=s),{week:i,year:o}}function je(e,t,n){var i=Pe(e,t,n),o=Pe(e+1,t,n);return(Ae(e)-i+o)/7}function We(e,t){return e.slice(t,7).concat(e.slice(0,t))}P("w",["ww",2],"wo","week"),P("W",["WW",2],"Wo","isoWeek"),W("week","w"),W("isoWeek","W"),q("week",5),q("isoWeek",5),pe("w",ie),pe("ww",ie,Q),pe("W",ie),pe("WW",ie,Q),be(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=V(e)})),P("d",0,"do","day"),P("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),P("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),P("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),P("e",0,0,"weekday"),P("E",0,0,"isoWeekday"),W("day","d"),W("weekday","e"),W("isoWeekday","E"),q("day",11),q("weekday",11),q("isoWeekday",11),pe("d",ie),pe("e",ie),pe("E",ie),pe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),pe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),pe("dddd",(function(e,t){return t.weekdaysRegex(e)})),be(["dd","ddd","dddd"],(function(e,t,n,i){var o=n._locale.weekdaysParse(e,i,n._strict);null!=o?t.d=o:v(n).invalidWeekday=e})),be(["d","e","E"],(function(e,t,n,i){t[i]=V(e)}));var Fe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ne="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ue="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),qe=fe,ze=fe,Ye=fe;function Ve(e,t,n){var i,o,r,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(o=_e.call(this._weekdaysParse,s))?o:null:"ddd"===t?-1!==(o=_e.call(this._shortWeekdaysParse,s))?o:null:-1!==(o=_e.call(this._minWeekdaysParse,s))?o:null:"dddd"===t?-1!==(o=_e.call(this._weekdaysParse,s))||-1!==(o=_e.call(this._shortWeekdaysParse,s))||-1!==(o=_e.call(this._minWeekdaysParse,s))?o:null:"ddd"===t?-1!==(o=_e.call(this._shortWeekdaysParse,s))||-1!==(o=_e.call(this._weekdaysParse,s))||-1!==(o=_e.call(this._minWeekdaysParse,s))?o:null:-1!==(o=_e.call(this._minWeekdaysParse,s))||-1!==(o=_e.call(this._weekdaysParse,s))||-1!==(o=_e.call(this._shortWeekdaysParse,s))?o:null}function Ke(){function e(e,t){return t.length-e.length}var t,n,i,o,r,s=[],a=[],c=[],l=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),i=me(this.weekdaysMin(n,"")),o=me(this.weekdaysShort(n,"")),r=me(this.weekdays(n,"")),s.push(i),a.push(o),c.push(r),l.push(i),l.push(o),l.push(r);s.sort(e),a.sort(e),c.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ge(){return this.hours()%12||12}function Ze(e,t){P(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Xe(e,t){return t._meridiemParse}P("H",["HH",2],0,"hour"),P("h",["hh",2],0,Ge),P("k",["kk",2],0,(function(){return this.hours()||24})),P("hmm",0,0,(function(){return""+Ge.apply(this)+O(this.minutes(),2)})),P("hmmss",0,0,(function(){return""+Ge.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)})),P("Hmm",0,0,(function(){return""+this.hours()+O(this.minutes(),2)})),P("Hmmss",0,0,(function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)})),Ze("a",!0),Ze("A",!1),W("hour","h"),q("hour",13),pe("a",Xe),pe("A",Xe),pe("H",ie),pe("h",ie),pe("k",ie),pe("HH",ie,Q),pe("hh",ie,Q),pe("kk",ie,Q),pe("hmm",oe),pe("hmmss",re),pe("Hmm",oe),pe("Hmmss",re),ye(["H","HH"],3),ye(["k","kk"],(function(e,t,n){var i=V(e);t[3]=24===i?0:i})),ye(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ye(["h","hh"],(function(e,t,n){t[3]=V(e),v(n).bigHour=!0})),ye("hmm",(function(e,t,n){var i=e.length-2;t[3]=V(e.substr(0,i)),t[4]=V(e.substr(i)),v(n).bigHour=!0})),ye("hmmss",(function(e,t,n){var i=e.length-4,o=e.length-2;t[3]=V(e.substr(0,i)),t[4]=V(e.substr(i,2)),t[5]=V(e.substr(o)),v(n).bigHour=!0})),ye("Hmm",(function(e,t,n){var i=e.length-2;t[3]=V(e.substr(0,i)),t[4]=V(e.substr(i))})),ye("Hmmss",(function(e,t,n){var i=e.length-4,o=e.length-2;t[3]=V(e.substr(0,i)),t[4]=V(e.substr(i,2)),t[5]=V(e.substr(o))}));var Je,Qe=K("Hours",!0),et={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Se,monthsShort:ke,week:{dow:0,doy:6},weekdays:Fe,weekdaysMin:Ue,weekdaysShort:Ne,meridiemParse:/[ap]\.?m?\.?/i},tt={},nt={};function it(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function ot(e){return e?e.toLowerCase().replace("_","-"):e}function rt(n){var i=null;if(void 0===tt[n]&&e&&e.exports)try{i=Je._abbr,t(),st(i)}catch(e){tt[n]=null}return tt[n]}function st(e,t){var n;return e&&((n=l(t)?ct(e):at(e,t))?Je=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Je._abbr}function at(e,t){if(null!==t){var n,i=et;if(t.abbr=e,null!=tt[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=tt[e]._config;else if(null!=t.parentLocale)if(null!=tt[t.parentLocale])i=tt[t.parentLocale]._config;else{if(null==(n=rt(t.parentLocale)))return nt[t.parentLocale]||(nt[t.parentLocale]=[]),nt[t.parentLocale].push({name:e,config:t}),null;i=n._config}return tt[e]=new M(R(i,t)),nt[e]&&nt[e].forEach((function(e){at(e.name,e.config)})),st(e),tt[e]}return delete tt[e],null}function ct(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Je;if(!r(e)){if(t=rt(e))return t;e=[e]}return function(e){for(var t,n,i,o,r=0;r<e.length;){for(t=(o=ot(e[r]).split("-")).length,n=(n=ot(e[r+1]))?n.split("-"):null;t>0;){if(i=rt(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&it(o,n)>=t-1)break;t--}r++}return Je}(e)}function lt(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[1]<0||n[1]>11?1:n[2]<1||n[2]>Ce(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,v(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),v(e)._overflowWeeks&&-1===t&&(t=7),v(e)._overflowWeekday&&-1===t&&(t=8),v(e).overflow=t),e}var ut=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,dt=/Z|[+-]\d\d(?::?\d\d)?/,ft=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],pt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vt=/^\/?Date\((-?\d+)/i,mt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,_t={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function gt(e){var t,n,i,o,r,s,a=e._i,c=ut.exec(a)||ht.exec(a);if(c){for(v(e).iso=!0,t=0,n=ft.length;t<n;t++)if(ft[t][1].exec(c[1])){o=ft[t][0],i=!1!==ft[t][2];break}if(null==o)return void(e._isValid=!1);if(c[3]){for(t=0,n=pt.length;t<n;t++)if(pt[t][1].exec(c[3])){r=(c[2]||" ")+pt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!i&&null!=r)return void(e._isValid=!1);if(c[4]){if(!dt.exec(c[4]))return void(e._isValid=!1);s="Z"}e._f=o+(r||"")+(s||""),St(e)}else e._isValid=!1}function yt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function bt(e){var t,n,i,o,r,s,a,c,l=mt.exec(function(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}(e._i));if(l){if(n=l[4],i=l[3],o=l[2],r=l[5],s=l[6],a=l[7],c=[yt(n),ke.indexOf(i),parseInt(o,10),parseInt(r,10),parseInt(s,10)],a&&c.push(parseInt(a,10)),t=c,!function(e,t,n){return!e||Ne.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}(l[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return _t[e];if(t)return 0;var i=parseInt(n,10),o=i%100;return(i-o)/100*60+o}(l[8],l[9],l[10]),e._d=Ie.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function wt(e,t,n){return null!=e?e:null!=t?t:n}function Ct(e){var t,n,i,r,s,a=[];if(!e._d){for(i=function(e){var t=new Date(o.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,n,i,o,r,s,a,c,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,s=4,n=wt(t.GG,e._a[0],He(xt(),1,4).year),i=wt(t.W,1),((o=wt(t.E,1))<1||o>7)&&(c=!0)):(r=e._locale._week.dow,s=e._locale._week.doy,l=He(xt(),r,s),n=wt(t.gg,e._a[0],l.year),i=wt(t.w,l.week),null!=t.d?((o=t.d)<0||o>6)&&(c=!0):null!=t.e?(o=t.e+r,(t.e<0||t.e>6)&&(c=!0)):o=r),i<1||i>je(n,r,s)?v(e)._overflowWeeks=!0:null!=c?v(e)._overflowWeekday=!0:(a=Be(n,i,o,r,s),e._a[0]=a.year,e._dayOfYear=a.dayOfYear)}(e),null!=e._dayOfYear&&(s=wt(e._a[0],i[0]),(e._dayOfYear>Ae(s)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=Ie(s,0,e._dayOfYear),e._a[1]=n.getUTCMonth(),e._a[2]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=i[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?Ie:De).apply(null,a),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(v(e).weekdayMismatch=!0)}}function St(e){if(e._f!==o.ISO_8601)if(e._f!==o.RFC_2822){e._a=[],v(e).empty=!0;var t,n,i,r,s,a,c=""+e._i,l=c.length,u=0;for(i=H(e._f,e._locale).match(A)||[],t=0;t<i.length;t++)r=i[t],(n=(c.match(ve(r,e))||[])[0])&&((s=c.substr(0,c.indexOf(n))).length>0&&v(e).unusedInput.push(s),c=c.slice(c.indexOf(n)+n.length),u+=n.length),I[r]?(n?v(e).empty=!1:v(e).unusedTokens.push(r),we(r,n,e)):e._strict&&!n&&v(e).unusedTokens.push(r);v(e).charsLeftOver=l-u,c.length>0&&v(e).unusedInput.push(c),e._a[3]<=12&&!0===v(e).bigHour&&e._a[3]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),null!==(a=v(e).era)&&(e._a[0]=e._locale.erasConvertYear(a,e._a[0])),Ct(e),lt(e)}else bt(e);else gt(e)}function kt(e){var t=e._i,n=e._f;return e._locale=e._locale||ct(e._l),null===t||void 0===n&&""===t?_({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),C(t)?new w(lt(t)):(h(t)?e._d=t:r(n)?function(e){var t,n,i,o,r,s,a=!1;if(0===e._f.length)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)r=0,s=!1,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],St(t),m(t)&&(s=!0),r+=v(t).charsLeftOver,r+=10*v(t).unusedTokens.length,v(t).score=r,a?r<i&&(i=r,n=t):(null==i||r<i||s)&&(i=r,n=t,s&&(a=!0));f(e,n||t)}(e):n?St(e):function(e){var t=e._i;l(t)?e._d=new Date(o.now()):h(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=vt.exec(e._i);null===t?(gt(e),!1===e._isValid&&(delete e._isValid,bt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:o.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):r(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),Ct(e)):s(t)?function(e){if(!e._d){var t=N(e._i),n=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Ct(e)}}(e):u(t)?e._d=new Date(t):o.createFromInputFallback(e)}(e),m(e)||(e._d=null),e))}function Et(e,t,n,i,o){var a,l={};return!0!==t&&!1!==t||(i=t,t=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(s(e)&&c(e)||r(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=n,l._i=e,l._f=t,l._strict=i,(a=new w(lt(kt(l))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function xt(e,t,n,i){return Et(e,t,n,i,!1)}o.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),o.ISO_8601=function(){},o.RFC_2822=function(){};var Tt=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=xt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()})),Lt=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=xt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()}));function Rt(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return xt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var Mt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ot(e){var t=N(e),n=t.year||0,i=t.quarter||0,o=t.month||0,r=t.week||t.isoWeek||0,s=t.day||0,c=t.hour||0,l=t.minute||0,u=t.second||0,h=t.millisecond||0;this._isValid=function(e){var t,n,i=!1;for(t in e)if(a(e,t)&&(-1===_e.call(Mt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Mt.length;++n)if(e[Mt[n]]){if(i)return!1;parseFloat(e[Mt[n]])!==V(e[Mt[n]])&&(i=!0)}return!0}(t),this._milliseconds=+h+1e3*u+6e4*l+1e3*c*60*60,this._days=+s+7*r,this._months=+o+3*i+12*n,this._data={},this._locale=ct(),this._bubble()}function At(e){return e instanceof Ot}function $t(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Dt(e,t){P(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+O(~~(e/60),2)+t+O(~~e%60,2)}))}Dt("Z",":"),Dt("ZZ",""),pe("Z",de),pe("ZZ",de),ye(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Pt(de,e)}));var It=/([\+\-]|\d\d)/gi;function Pt(e,t){var n,i,o=(t||"").match(e);return null===o?null:0===(i=60*(n=((o[o.length-1]||[])+"").match(It)||["-",0,0])[1]+V(n[2]))?0:"+"===n[0]?i:-i}function Bt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(C(e)||h(e)?e.valueOf():xt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),o.updateOffset(n,!1),n):xt(e).local()}function Ht(e){return-Math.round(e._d.getTimezoneOffset())}function jt(){return!!this.isValid()&&this._isUTC&&0===this._offset}o.updateOffset=function(){};var Wt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ft=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Nt(e,t){var n,i,o,r,s,c,l=e,h=null;return At(e)?l={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(l={},t?l[t]=+e:l.milliseconds=+e):(h=Wt.exec(e))?(n="-"===h[1]?-1:1,l={y:0,d:V(h[2])*n,h:V(h[3])*n,m:V(h[4])*n,s:V(h[5])*n,ms:V($t(1e3*h[6]))*n}):(h=Ft.exec(e))?(n="-"===h[1]?-1:1,l={y:Ut(h[2],n),M:Ut(h[3],n),w:Ut(h[4],n),d:Ut(h[5],n),h:Ut(h[6],n),m:Ut(h[7],n),s:Ut(h[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(r=xt(l.from),s=xt(l.to),o=r.isValid()&&s.isValid()?(s=Bt(s,r),r.isBefore(s)?c=qt(r,s):((c=qt(s,r)).milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0},(l={}).ms=o.milliseconds,l.M=o.months),i=new Ot(l),At(e)&&a(e,"_locale")&&(i._locale=e._locale),At(e)&&a(e,"_isValid")&&(i._isValid=e._isValid),i}function Ut(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function qt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function zt(e,t){return function(n,i){var o;return null===i||isNaN(+i)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),Yt(this,Nt(n,i),e),this}}function Yt(e,t,n,i){var r=t._milliseconds,s=$t(t._days),a=$t(t._months);e.isValid()&&(i=null==i||i,a&&Re(e,G(e,"Month")+a*n),s&&Z(e,"Date",G(e,"Date")+s*n),r&&e._d.setTime(e._d.valueOf()+r*n),i&&o.updateOffset(e,s||a))}Nt.fn=Ot.prototype,Nt.invalid=function(){return Nt(NaN)};var Vt=zt(1,"add"),Kt=zt(-1,"subtract");function Gt(e){return"string"==typeof e||e instanceof String}function Zt(e){return C(e)||h(e)||Gt(e)||u(e)||function(e){var t=r(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&Gt(e)})).length),t&&n}(e)||function(e){var t,n,i=s(e)&&!c(e),o=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<r.length;t+=1)n=r[t],o=o||a(e,n);return i&&o}(e)||null==e}function Xt(e){var t,n=s(e)&&!c(e),i=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)i=i||a(e,o[t]);return n&&i}function Jt(e,t){if(e.date()<t.date())return-Jt(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function Qt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ct(e))&&(this._locale=t),this)}o.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",o.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var en=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function tn(){return this._locale}function nn(e,t){return(e%t+t)%t}function on(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-126227808e5:new Date(e,t,n).valueOf()}function rn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-126227808e5:Date.UTC(e,t,n)}function sn(e,t){return t.erasAbbrRegex(e)}function an(){var e,t,n=[],i=[],o=[],r=[],s=this.eras();for(e=0,t=s.length;e<t;++e)i.push(me(s[e].name)),n.push(me(s[e].abbr)),o.push(me(s[e].narrow)),r.push(me(s[e].name)),r.push(me(s[e].abbr)),r.push(me(s[e].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function cn(e,t){P(0,[e,e.length],0,t)}function ln(e,t,n,i,o){var r;return null==e?He(this,i,o).year:(t>(r=je(e,i,o))&&(t=r),un.call(this,e,t,n,i,o))}function un(e,t,n,i,o){var r=Be(e,t,n,i,o),s=Ie(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}P("N",0,0,"eraAbbr"),P("NN",0,0,"eraAbbr"),P("NNN",0,0,"eraAbbr"),P("NNNN",0,0,"eraName"),P("NNNNN",0,0,"eraNarrow"),P("y",["y",1],"yo","eraYear"),P("y",["yy",2],0,"eraYear"),P("y",["yyy",3],0,"eraYear"),P("y",["yyyy",4],0,"eraYear"),pe("N",sn),pe("NN",sn),pe("NNN",sn),pe("NNNN",(function(e,t){return t.erasNameRegex(e)})),pe("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ye(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,i){var o=n._locale.erasParse(e,i,n._strict);o?v(n).era=o:v(n).invalidEra=e})),pe("y",le),pe("yy",le),pe("yyy",le),pe("yyyy",le),pe("yo",(function(e,t){return t._eraYearOrdinalRegex||le})),ye(["y","yy","yyy","yyyy"],0),ye(["yo"],(function(e,t,n,i){var o;n._locale._eraYearOrdinalRegex&&(o=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[0]=n._locale.eraYearOrdinalParse(e,o):t[0]=parseInt(e,10)})),P(0,["gg",2],0,(function(){return this.weekYear()%100})),P(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),cn("gggg","weekYear"),cn("ggggg","weekYear"),cn("GGGG","isoWeekYear"),cn("GGGGG","isoWeekYear"),W("weekYear","gg"),W("isoWeekYear","GG"),q("weekYear",1),q("isoWeekYear",1),pe("G",ue),pe("g",ue),pe("GG",ie,Q),pe("gg",ie,Q),pe("GGGG",ae,te),pe("gggg",ae,te),pe("GGGGG",ce,ne),pe("ggggg",ce,ne),be(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=V(e)})),be(["gg","GG"],(function(e,t,n,i){t[i]=o.parseTwoDigitYear(e)})),P("Q",0,"Qo","quarter"),W("quarter","Q"),q("quarter",7),pe("Q",J),ye("Q",(function(e,t){t[1]=3*(V(e)-1)})),P("D",["DD",2],"Do","date"),W("date","D"),q("date",9),pe("D",ie),pe("DD",ie,Q),pe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ye(["D","DD"],2),ye("Do",(function(e,t){t[2]=V(e.match(ie)[0])}));var hn=K("Date",!0);P("DDD",["DDDD",3],"DDDo","dayOfYear"),W("dayOfYear","DDD"),q("dayOfYear",4),pe("DDD",se),pe("DDDD",ee),ye(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=V(e)})),P("m",["mm",2],0,"minute"),W("minute","m"),q("minute",14),pe("m",ie),pe("mm",ie,Q),ye(["m","mm"],4);var dn=K("Minutes",!1);P("s",["ss",2],0,"second"),W("second","s"),q("second",15),pe("s",ie),pe("ss",ie,Q),ye(["s","ss"],5);var fn,pn,vn=K("Seconds",!1);for(P("S",0,0,(function(){return~~(this.millisecond()/100)})),P(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),P(0,["SSS",3],0,"millisecond"),P(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),P(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),P(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),P(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),P(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),P(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),W("millisecond","ms"),q("millisecond",16),pe("S",se,J),pe("SS",se,Q),pe("SSS",se,ee),fn="SSSS";fn.length<=9;fn+="S")pe(fn,le);function mn(e,t){t[6]=V(1e3*("0."+e))}for(fn="S";fn.length<=9;fn+="S")ye(fn,mn);pn=K("Milliseconds",!1),P("z",0,0,"zoneAbbr"),P("zz",0,0,"zoneName");var _n=w.prototype;function gn(e){return e}_n.add=Vt,_n.calendar=function(e,t){1===arguments.length&&(Zt(arguments[0])?(e=arguments[0],t=void 0):Xt(arguments[0])&&(t=arguments[0],e=void 0));var n=e||xt(),i=Bt(n,this).startOf("day"),r=o.calendarFormat(this,i)||"sameElse",s=t&&(L(t[r])?t[r].call(this,n):t[r]);return this.format(s||this.localeData().calendar(r,this,xt(n)))},_n.clone=function(){return new w(this)},_n.diff=function(e,t,n){var i,o,r;if(!this.isValid())return NaN;if(!(i=Bt(e,this)).isValid())return NaN;switch(o=6e4*(i.utcOffset()-this.utcOffset()),t=F(t)){case"year":r=Jt(this,i)/12;break;case"month":r=Jt(this,i);break;case"quarter":r=Jt(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-o)/864e5;break;case"week":r=(this-i-o)/6048e5;break;default:r=this-i}return n?r:Y(r)},_n.endOf=function(e){var t,n;if(void 0===(e=F(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?rn:on,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-nn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-nn(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-nn(t,1e3)-1}return this._d.setTime(t),o.updateOffset(this,!0),this},_n.format=function(e){e||(e=this.isUtc()?o.defaultFormatUtc:o.defaultFormat);var t=B(this,e);return this.localeData().postformat(t)},_n.from=function(e,t){return this.isValid()&&(C(e)&&e.isValid()||xt(e).isValid())?Nt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},_n.fromNow=function(e){return this.from(xt(),e)},_n.to=function(e,t){return this.isValid()&&(C(e)&&e.isValid()||xt(e).isValid())?Nt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},_n.toNow=function(e){return this.to(xt(),e)},_n.get=function(e){return L(this[e=F(e)])?this[e]():this},_n.invalidAt=function(){return v(this).overflow},_n.isAfter=function(e,t){var n=C(e)?e:xt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=F(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},_n.isBefore=function(e,t){var n=C(e)?e:xt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=F(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},_n.isBetween=function(e,t,n,i){var o=C(e)?e:xt(e),r=C(t)?t:xt(t);return!!(this.isValid()&&o.isValid()&&r.isValid())&&(("("===(i=i||"()")[0]?this.isAfter(o,n):!this.isBefore(o,n))&&(")"===i[1]?this.isBefore(r,n):!this.isAfter(r,n)))},_n.isSame=function(e,t){var n,i=C(e)?e:xt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=F(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},_n.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},_n.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},_n.isValid=function(){return m(this)},_n.lang=en,_n.locale=Qt,_n.localeData=tn,_n.max=Lt,_n.min=Tt,_n.parsingFlags=function(){return f({},v(this))},_n.set=function(e,t){if("object"==typeof e){var n,i=function(e){var t,n=[];for(t in e)a(e,t)&&n.push({unit:t,priority:U[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=N(e));for(n=0;n<i.length;n++)this[i[n].unit](e[i[n].unit])}else if(L(this[e=F(e)]))return this[e](t);return this},_n.startOf=function(e){var t,n;if(void 0===(e=F(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?rn:on,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=nn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=nn(t,6e4);break;case"second":t=this._d.valueOf(),t-=nn(t,1e3)}return this._d.setTime(t),o.updateOffset(this,!0),this},_n.subtract=Kt,_n.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},_n.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},_n.toDate=function(){return new Date(this.valueOf())},_n.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?B(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):L(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",B(n,"Z")):B(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},_n.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i="moment",o="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=o+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(_n[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),_n.toJSON=function(){return this.isValid()?this.toISOString():null},_n.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},_n.unix=function(){return Math.floor(this.valueOf()/1e3)},_n.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},_n.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},_n.eraName=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""},_n.eraNarrow=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""},_n.eraAbbr=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""},_n.eraYear=function(){var e,t,n,i,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=r[e].since<=r[e].until?1:-1,i=this.startOf("day").valueOf(),r[e].since<=i&&i<=r[e].until||r[e].until<=i&&i<=r[e].since)return(this.year()-o(r[e].since).year())*n+r[e].offset;return this.year()},_n.year=$e,_n.isLeapYear=function(){return z(this.year())},_n.weekYear=function(e){return ln.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},_n.isoWeekYear=function(e){return ln.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},_n.quarter=_n.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},_n.month=Me,_n.daysInMonth=function(){return Ce(this.year(),this.month())},_n.week=_n.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},_n.isoWeek=_n.isoWeeks=function(e){var t=He(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},_n.weeksInYear=function(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)},_n.weeksInWeekYear=function(){var e=this.localeData()._week;return je(this.weekYear(),e.dow,e.doy)},_n.isoWeeksInYear=function(){return je(this.year(),1,4)},_n.isoWeeksInISOWeekYear=function(){return je(this.isoWeekYear(),1,4)},_n.date=hn,_n.day=_n.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},_n.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},_n.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},_n.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},_n.hour=_n.hours=Qe,_n.minute=_n.minutes=dn,_n.second=_n.seconds=vn,_n.millisecond=_n.milliseconds=pn,_n.utcOffset=function(e,t,n){var i,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Pt(de,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=Ht(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?Yt(this,Nt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,o.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Ht(this)},_n.utc=function(e){return this.utcOffset(0,e)},_n.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ht(this),"m")),this},_n.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Pt(he,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},_n.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?xt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},_n.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},_n.isLocal=function(){return!!this.isValid()&&!this._isUTC},_n.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},_n.isUtc=jt,_n.isUTC=jt,_n.zoneAbbr=function(){return this._isUTC?"UTC":""},_n.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},_n.dates=k("dates accessor is deprecated. Use date instead.",hn),_n.months=k("months accessor is deprecated. Use month instead",Me),_n.years=k("years accessor is deprecated. Use year instead",$e),_n.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),_n.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return b(t,this),(t=kt(t))._a?(e=t._isUTC?p(t._a):xt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var i,o=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0;for(i=0;i<o;i++)(n&&e[i]!==t[i]||!n&&V(e[i])!==V(t[i]))&&s++;return s+r}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var yn=M.prototype;function bn(e,t,n,i){var o=ct(),r=p().set(i,t);return o[n](r,e)}function wn(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return bn(e,t,n,"month");var i,o=[];for(i=0;i<12;i++)o[i]=bn(e,i,n,"month");return o}function Cn(e,t,n,i){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var o,r=ct(),s=e?r._week.dow:0,a=[];if(null!=n)return bn(t,(n+s)%7,i,"day");for(o=0;o<7;o++)a[o]=bn(t,(o+s)%7,i,"day");return a}yn.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return L(i)?i.call(t,n):i},yn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(A).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},yn.invalidDate=function(){return this._invalidDate},yn.ordinal=function(e){return this._ordinal.replace("%d",e)},yn.preparse=gn,yn.postformat=gn,yn.relativeTime=function(e,t,n,i){var o=this._relativeTime[n];return L(o)?o(e,t,n,i):o.replace(/%d/i,e)},yn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return L(n)?n(t):n.replace(/%s/i,t)},yn.set=function(e){var t,n;for(n in e)a(e,n)&&(L(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},yn.eras=function(e,t){var n,i,r,s=this._eras||ct("en")._eras;for(n=0,i=s.length;n<i;++n){switch(typeof s[n].since){case"string":r=o(s[n].since).startOf("day"),s[n].since=r.valueOf()}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":r=o(s[n].until).startOf("day").valueOf(),s[n].until=r.valueOf()}}return s},yn.erasParse=function(e,t,n){var i,o,r,s,a,c=this.eras();for(e=e.toUpperCase(),i=0,o=c.length;i<o;++i)if(r=c[i].name.toUpperCase(),s=c[i].abbr.toUpperCase(),a=c[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return c[i];break;case"NNNN":if(r===e)return c[i];break;case"NNNNN":if(a===e)return c[i]}else if([r,s,a].indexOf(e)>=0)return c[i]},yn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?o(e.since).year():o(e.since).year()+(t-e.offset)*n},yn.erasAbbrRegex=function(e){return a(this,"_erasAbbrRegex")||an.call(this),e?this._erasAbbrRegex:this._erasRegex},yn.erasNameRegex=function(e){return a(this,"_erasNameRegex")||an.call(this),e?this._erasNameRegex:this._erasRegex},yn.erasNarrowRegex=function(e){return a(this,"_erasNarrowRegex")||an.call(this),e?this._erasNarrowRegex:this._erasRegex},yn.months=function(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ee).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone},yn.monthsShort=function(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ee.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},yn.monthsParse=function(e,t,n){var i,o,r;if(this._monthsParseExact)return Le.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},yn.monthsRegex=function(e){return this._monthsParseExact?(a(this,"_monthsRegex")||Oe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=Te),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},yn.monthsShortRegex=function(e){return this._monthsParseExact?(a(this,"_monthsRegex")||Oe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=xe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},yn.week=function(e){return He(e,this._week.dow,this._week.doy).week},yn.firstDayOfYear=function(){return this._week.doy},yn.firstDayOfWeek=function(){return this._week.dow},yn.weekdays=function(e,t){var n=r(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?We(n,this._week.dow):e?n[e.day()]:n},yn.weekdaysMin=function(e){return!0===e?We(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},yn.weekdaysShort=function(e){return!0===e?We(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},yn.weekdaysParse=function(e,t,n){var i,o,r;if(this._weekdaysParseExact)return Ve.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(o=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},yn.weekdaysRegex=function(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=qe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},yn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ze),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},yn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ye),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},yn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},yn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},st("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===V(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),o.lang=k("moment.lang is deprecated. Use moment.locale instead.",st),o.langData=k("moment.langData is deprecated. Use moment.localeData instead.",ct);var Sn=Math.abs;function kn(e,t,n,i){var o=Nt(t,n);return e._milliseconds+=i*o._milliseconds,e._days+=i*o._days,e._months+=i*o._months,e._bubble()}function En(e){return e<0?Math.floor(e):Math.ceil(e)}function xn(e){return 4800*e/146097}function Tn(e){return 146097*e/4800}function Ln(e){return function(){return this.as(e)}}var Rn=Ln("ms"),Mn=Ln("s"),On=Ln("m"),An=Ln("h"),$n=Ln("d"),Dn=Ln("w"),In=Ln("M"),Pn=Ln("Q"),Bn=Ln("y");function Hn(e){return function(){return this.isValid()?this._data[e]:NaN}}var jn=Hn("milliseconds"),Wn=Hn("seconds"),Fn=Hn("minutes"),Nn=Hn("hours"),Un=Hn("days"),qn=Hn("months"),zn=Hn("years"),Yn=Math.round,Vn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Kn(e,t,n,i,o){return o.relativeTime(t||1,!!n,e,i)}var Gn=Math.abs;function Zn(e){return(e>0)-(e<0)||+e}function Xn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,o,r,s,a,c=Gn(this._milliseconds)/1e3,l=Gn(this._days),u=Gn(this._months),h=this.asSeconds();return h?(e=Y(c/60),t=Y(e/60),c%=60,e%=60,n=Y(u/12),u%=12,i=c?c.toFixed(3).replace(/\.?0+$/,""):"",o=h<0?"-":"",r=Zn(this._months)!==Zn(h)?"-":"",s=Zn(this._days)!==Zn(h)?"-":"",a=Zn(this._milliseconds)!==Zn(h)?"-":"",o+"P"+(n?r+n+"Y":"")+(u?r+u+"M":"")+(l?s+l+"D":"")+(t||e||c?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(c?a+i+"S":"")):"P0D"}var Jn=Ot.prototype;return Jn.isValid=function(){return this._isValid},Jn.abs=function(){var e=this._data;return this._milliseconds=Sn(this._milliseconds),this._days=Sn(this._days),this._months=Sn(this._months),e.milliseconds=Sn(e.milliseconds),e.seconds=Sn(e.seconds),e.minutes=Sn(e.minutes),e.hours=Sn(e.hours),e.months=Sn(e.months),e.years=Sn(e.years),this},Jn.add=function(e,t){return kn(this,e,t,1)},Jn.subtract=function(e,t){return kn(this,e,t,-1)},Jn.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=F(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+xn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Tn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Jn.asMilliseconds=Rn,Jn.asSeconds=Mn,Jn.asMinutes=On,Jn.asHours=An,Jn.asDays=$n,Jn.asWeeks=Dn,Jn.asMonths=In,Jn.asQuarters=Pn,Jn.asYears=Bn,Jn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*V(this._months/12):NaN},Jn._bubble=function(){var e,t,n,i,o,r=this._milliseconds,s=this._days,a=this._months,c=this._data;return r>=0&&s>=0&&a>=0||r<=0&&s<=0&&a<=0||(r+=864e5*En(Tn(a)+s),s=0,a=0),c.milliseconds=r%1e3,e=Y(r/1e3),c.seconds=e%60,t=Y(e/60),c.minutes=t%60,n=Y(t/60),c.hours=n%24,s+=Y(n/24),o=Y(xn(s)),a+=o,s-=En(Tn(o)),i=Y(a/12),a%=12,c.days=s,c.months=a,c.years=i,this},Jn.clone=function(){return Nt(this)},Jn.get=function(e){return e=F(e),this.isValid()?this[e+"s"]():NaN},Jn.milliseconds=jn,Jn.seconds=Wn,Jn.minutes=Fn,Jn.hours=Nn,Jn.days=Un,Jn.weeks=function(){return Y(this.days()/7)},Jn.months=qn,Jn.years=zn,Jn.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,o=!1,r=Vn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(o=e),"object"==typeof t&&(r=Object.assign({},Vn,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),n=this.localeData(),i=function(e,t,n,i){var o=Nt(e).abs(),r=Yn(o.as("s")),s=Yn(o.as("m")),a=Yn(o.as("h")),c=Yn(o.as("d")),l=Yn(o.as("M")),u=Yn(o.as("w")),h=Yn(o.as("y")),d=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(d=d||u<=1&&["w"]||u<n.w&&["ww",u]),(d=d||l<=1&&["M"]||l<n.M&&["MM",l]||h<=1&&["y"]||["yy",h])[2]=t,d[3]=+e>0,d[4]=i,Kn.apply(null,d)}(this,!o,r,n),o&&(i=n.pastFuture(+this,i)),n.postformat(i)},Jn.toISOString=Xn,Jn.toString=Xn,Jn.toJSON=Xn,Jn.locale=Qt,Jn.localeData=tn,Jn.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Xn),Jn.lang=en,P("X",0,0,"unix"),P("x",0,0,"valueOf"),pe("x",ue),pe("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ye("x",(function(e,t,n){n._d=new Date(V(e))})),
//! moment.js
o.version="2.26.0",n=xt,o.fn=_n,o.min=function(){var e=[].slice.call(arguments,0);return Rt("isBefore",e)},o.max=function(){var e=[].slice.call(arguments,0);return Rt("isAfter",e)},o.now=function(){return Date.now?Date.now():+new Date},o.utc=p,o.unix=function(e){return xt(1e3*e)},o.months=function(e,t){return wn(e,t,"months")},o.isDate=h,o.locale=st,o.invalid=_,o.duration=Nt,o.isMoment=C,o.weekdays=function(e,t,n){return Cn(e,t,n,"weekdays")},o.parseZone=function(){return xt.apply(null,arguments).parseZone()},o.localeData=ct,o.isDuration=At,o.monthsShort=function(e,t){return wn(e,t,"monthsShort")},o.weekdaysMin=function(e,t,n){return Cn(e,t,n,"weekdaysMin")},o.defineLocale=at,o.updateLocale=function(e,t){if(null!=t){var n,i,o=et;null!=tt[e]&&null!=tt[e].parentLocale?tt[e].set(R(tt[e]._config,t)):(null!=(i=rt(e))&&(o=i._config),t=R(o,t),null==i&&(t.abbr=e),(n=new M(t)).parentLocale=tt[e],tt[e]=n),st(e)}else null!=tt[e]&&(null!=tt[e].parentLocale?(tt[e]=tt[e].parentLocale,e===st()&&st(e)):null!=tt[e]&&delete tt[e]);return tt[e]},o.locales=function(){return E(tt)},o.weekdaysShort=function(e,t,n){return Cn(e,t,n,"weekdaysShort")},o.normalizeUnits=F,o.relativeTimeRounding=function(e){return void 0===e?Yn:"function"==typeof e&&(Yn=e,!0)},o.relativeTimeThreshold=function(e,t){return void 0!==Vn[e]&&(void 0===t?Vn[e]:(Vn[e]=t,"s"===e&&(Vn.ss=t-1),!0))},o.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},o.prototype=_n,o.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},o}()}));const Rt="src/characters/CharacterTemplate.svelte";function Mt(e,t,n){const i=e.slice();return i[11]=t[n],i}function Ot(e){let t,n,i=e[3];xe(i);let o=[];for(let t=0;t<i.length;t+=1)o[t]=At(Mt(e,i,t));const r={c:function(){t=k("table"),n=k("tbody");for(let e=0;e<o.length;e+=1)o[e].c();a(n,Rt,51,8,1041),a(t,Rt,50,6,1025)},m:function(e,i){be(e,t,i),ye(t,n);for(let e=0;e<o.length;e+=1)o[e].m(n,null)},p:function(e,t){if(8&t){let r;for(i=e[3],xe(i),r=0;r<i.length;r+=1){const s=Mt(e,i,r);o[r]?o[r].p(s,t):(o[r]=At(s),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}},d:function(e){e&&we(t),S(o,e)}};return ge("SvelteRegisterBlock",{block:r,id:Ot.name,type:"if",source:"(50:4) {#if attributes}",ctx:e}),r}function At(e){let t,n,i,o,r,s,c,l=e[11].name+"",u=e[11].value+"";const h={c:function(){t=k("tr"),n=k("td"),i=x(l),o=T(),r=k("td"),s=x(u),c=T(),Se(n,"class","svelte-k4txm1"),a(n,Rt,54,14,1122),Se(r,"class","right svelte-k4txm1"),a(r,Rt,55,14,1162),a(t,Rt,53,12,1103)},m:function(e,a){be(e,t,a),ye(t,n),ye(n,i),ye(t,o),ye(t,r),ye(r,s),ye(t,c)},p:function(e,t){8&t&&l!==(l=e[11].name+"")&&Ee(i,l),8&t&&u!==(u=e[11].value+"")&&Ee(s,u)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:h,id:At.name,type:"each",source:"(53:10) {#each attributes as attribute}",ctx:e}),h}function $t(e){let t,n,i,r,s,c,l,u,h,d,f,p,v,m,_,g,y=e[3]&&Ot(e);const b={c:function(){t=k("div"),n=k("div"),i=k("img"),s=T(),c=k("span"),l=x(e[0]),u=T(),h=k("span"),d=x(e[1]),f=T(),p=k("div"),y&&y.c(),v=T(),m=k("div"),_=k("button"),_.textContent="Choose",i.src!==(r=e[5]())&&Se(i,"src",r),Se(i,"alt",""),Se(i,"class","circle img svelte-k4txm1"),a(i,Rt,42,4,833),Se(c,"class","card-title"),a(c,Rt,43,4,888),a(h,Rt,44,4,931),Se(n,"class","card-content white-text"),a(n,Rt,41,2,791),Se(p,"class","card-content"),a(p,Rt,47,2,970),Se(_,"class","btn green"),a(_,Rt,64,4,1330),Se(m,"class","card-content"),a(m,Rt,63,2,1299),Se(t,"class","card cyan darken-3 hoverable characterCard center-align svelte-k4txm1"),a(t,Rt,40,0,719)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,r,a){be(o,t,r),ye(t,n),ye(n,i),ye(n,s),ye(n,c),ye(c,l),ye(n,u),ye(n,h),ye(h,d),ye(t,f),ye(t,p),y&&y.m(p,null),ye(t,v),ye(t,m),ye(m,_),a&&g(),g=Ce(_,"click",e[10],!1,!1,!1)},p:function(e,[t]){1&t&&Ee(l,e[0]),2&t&&Ee(d,e[1]),e[3]?y?y.p(e,t):(y=Ot(e),y.c(),y.m(p,null)):y&&(y.d(1),y=null)},i:o,o:o,d:function(e){e&&we(t),y&&y.d(),g()}};return ge("SvelteRegisterBlock",{block:b,id:$t.name,type:"component",source:"",ctx:e}),b}function Dt(e,t,n){let{name:i}=t,{description:o}=t,{created:r}=t,{level:s}=t,{xp:a}=t,{templateId:c}=t,{attributes:l}=t,{callback:u}=t;function h(){return Lt(r).format("MMMM Do YYYY, h:mm:ss a")}function d(){return"img/avatars/"+(1+Math.abs(i.hashCode()%12))+"p.png"}const f=["name","description","created","level","xp","templateId","attributes","callback"];Object.keys(t).forEach(e=>{~f.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<CharacterTemplate> was created with unknown prop '${e}'`)});let{$$slots:p={},$$scope:v}=t;Te("CharacterTemplate",p,[]);return e.$set=e=>{"name"in e&&n(0,i=e.name),"description"in e&&n(1,o=e.description),"created"in e&&n(6,r=e.created),"level"in e&&n(7,s=e.level),"xp"in e&&n(8,a=e.xp),"templateId"in e&&n(2,c=e.templateId),"attributes"in e&&n(3,l=e.attributes),"callback"in e&&n(4,u=e.callback)},e.$capture_state=()=>({MediaQuery:xt,fade:Tt,moment:Lt,name:i,description:o,created:r,level:s,xp:a,templateId:c,attributes:l,callback:u,formattedDate:h,avatar:d}),e.$inject_state=e=>{"name"in e&&n(0,i=e.name),"description"in e&&n(1,o=e.description),"created"in e&&n(6,r=e.created),"level"in e&&n(7,s=e.level),"xp"in e&&n(8,a=e.xp),"templateId"in e&&n(2,c=e.templateId),"attributes"in e&&n(3,l=e.attributes),"callback"in e&&n(4,u=e.callback)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o,c,l,u,d,r,s,a,h,()=>{u(c)}]}class It extends Le{constructor(e){super(e),_e(this,e,Dt,$t,d,{name:0,description:1,created:6,level:7,xp:8,templateId:2,attributes:3,callback:4}),ge("SvelteRegisterComponent",{component:this,tagName:"CharacterTemplate",options:e,id:$t.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"name"in n||console.warn("<CharacterTemplate> was created without expected prop 'name'"),void 0!==t[1]||"description"in n||console.warn("<CharacterTemplate> was created without expected prop 'description'"),void 0!==t[6]||"created"in n||console.warn("<CharacterTemplate> was created without expected prop 'created'"),void 0!==t[7]||"level"in n||console.warn("<CharacterTemplate> was created without expected prop 'level'"),void 0!==t[8]||"xp"in n||console.warn("<CharacterTemplate> was created without expected prop 'xp'"),void 0!==t[2]||"templateId"in n||console.warn("<CharacterTemplate> was created without expected prop 'templateId'"),void 0!==t[3]||"attributes"in n||console.warn("<CharacterTemplate> was created without expected prop 'attributes'"),void 0!==t[4]||"callback"in n||console.warn("<CharacterTemplate> was created without expected prop 'callback'")}get name(){throw new Error("<CharacterTemplate>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(e){throw new Error("<CharacterTemplate>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get description(){throw new Error("<CharacterTemplate>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set description(e){throw new Error("<CharacterTemplate>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get created(){throw new Error("<CharacterTemplate>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set created(e){throw new Error("<CharacterTemplate>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get level(){throw new Error("<CharacterTemplate>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set level(e){throw new Error("<CharacterTemplate>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get xp(){throw new Error("<CharacterTemplate>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set xp(e){throw new Error("<CharacterTemplate>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get templateId(){throw new Error("<CharacterTemplate>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set templateId(e){throw new Error("<CharacterTemplate>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get attributes(){throw new Error("<CharacterTemplate>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set attributes(e){throw new Error("<CharacterTemplate>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get callback(){throw new Error("<CharacterTemplate>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set callback(e){throw new Error("<CharacterTemplate>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Pt=function(e,t){return(Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Bt(e,t){function n(){this.constructor=e}Pt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ht=function(){return(Ht=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function jt(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}function Wt(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function Ft(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}var Nt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ut(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qt(e,t){return e(t={exports:{}},t.exports),t.exports}var zt=function(e){return e&&e.Math==Math&&e},Yt=zt("object"==typeof globalThis&&globalThis)||zt("object"==typeof window&&window)||zt("object"==typeof self&&self)||zt("object"==typeof Nt&&Nt)||Function("return this")(),Vt=function(e){try{return!!e()}catch(e){return!0}},Kt=!Vt((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Gt={}.propertyIsEnumerable,Zt=Object.getOwnPropertyDescriptor,Xt={f:Zt&&!Gt.call({1:2},1)?function(e){var t=Zt(this,e);return!!t&&t.enumerable}:Gt},Jt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Qt={}.toString,en=function(e){return Qt.call(e).slice(8,-1)},tn="".split,nn=Vt((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==en(e)?tn.call(e,""):Object(e)}:Object,on=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},rn=function(e){return nn(on(e))},sn=function(e){return"object"==typeof e?null!==e:"function"==typeof e},an=function(e,t){if(!sn(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!sn(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!sn(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!sn(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},cn={}.hasOwnProperty,ln=function(e,t){return cn.call(e,t)},un=Yt.document,hn=sn(un)&&sn(un.createElement),dn=function(e){return hn?un.createElement(e):{}},fn=!Kt&&!Vt((function(){return 7!=Object.defineProperty(dn("div"),"a",{get:function(){return 7}}).a})),pn=Object.getOwnPropertyDescriptor,vn={f:Kt?pn:function(e,t){if(e=rn(e),t=an(t,!0),fn)try{return pn(e,t)}catch(e){}if(ln(e,t))return Jt(!Xt.f.call(e,t),e[t])}},mn=function(e){if(!sn(e))throw TypeError(String(e)+" is not an object");return e},_n=Object.defineProperty,gn={f:Kt?_n:function(e,t,n){if(mn(e),t=an(t,!0),mn(n),fn)try{return _n(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},yn=Kt?function(e,t,n){return gn.f(e,t,Jt(1,n))}:function(e,t,n){return e[t]=n,e},bn=function(e,t){try{yn(Yt,e,t)}catch(n){Yt[e]=t}return t},wn=Yt["__core-js_shared__"]||bn("__core-js_shared__",{}),Cn=Function.toString;"function"!=typeof wn.inspectSource&&(wn.inspectSource=function(e){return Cn.call(e)});var Sn,kn,En,xn=wn.inspectSource,Tn=Yt.WeakMap,Ln="function"==typeof Tn&&/native code/.test(xn(Tn)),Rn=qt((function(e){(e.exports=function(e,t){return wn[e]||(wn[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),Mn=0,On=Math.random(),An=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Mn+On).toString(36)},$n=Rn("keys"),Dn=function(e){return $n[e]||($n[e]=An(e))},In={},Pn=Yt.WeakMap;if(Ln){var Bn=new Pn,Hn=Bn.get,jn=Bn.has,Wn=Bn.set;Sn=function(e,t){return Wn.call(Bn,e,t),t},kn=function(e){return Hn.call(Bn,e)||{}},En=function(e){return jn.call(Bn,e)}}else{var Fn=Dn("state");In[Fn]=!0,Sn=function(e,t){return yn(e,Fn,t),t},kn=function(e){return ln(e,Fn)?e[Fn]:{}},En=function(e){return ln(e,Fn)}}var Nn,Un={set:Sn,get:kn,has:En,enforce:function(e){return En(e)?kn(e):Sn(e,{})},getterFor:function(e){return function(t){var n;if(!sn(t)||(n=kn(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},qn=qt((function(e){var t=Un.get,n=Un.enforce,i=String(String).split("String");(e.exports=function(e,t,o,r){var s=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,c=!!r&&!!r.noTargetGet;"function"==typeof o&&("string"!=typeof t||ln(o,"name")||yn(o,"name",t),n(o).source=i.join("string"==typeof t?t:"")),e!==Yt?(s?!c&&e[t]&&(a=!0):delete e[t],a?e[t]=o:yn(e,t,o)):a?e[t]=o:bn(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||xn(this)}))})),zn=Yt,Yn=function(e){return"function"==typeof e?e:void 0},Vn=function(e,t){return arguments.length<2?Yn(zn[e])||Yn(Yt[e]):zn[e]&&zn[e][t]||Yt[e]&&Yt[e][t]},Kn=Math.ceil,Gn=Math.floor,Zn=function(e){return isNaN(e=+e)?0:(e>0?Gn:Kn)(e)},Xn=Math.min,Jn=function(e){return e>0?Xn(Zn(e),9007199254740991):0},Qn=Math.max,ei=Math.min,ti=function(e){return function(t,n,i){var o,r=rn(t),s=Jn(r.length),a=function(e,t){var n=Zn(e);return n<0?Qn(n+t,0):ei(n,t)}(i,s);if(e&&n!=n){for(;s>a;)if((o=r[a++])!=o)return!0}else for(;s>a;a++)if((e||a in r)&&r[a]===n)return e||a||0;return!e&&-1}},ni={includes:ti(!0),indexOf:ti(!1)},ii=ni.indexOf,oi=function(e,t){var n,i=rn(e),o=0,r=[];for(n in i)!ln(In,n)&&ln(i,n)&&r.push(n);for(;t.length>o;)ln(i,n=t[o++])&&(~ii(r,n)||r.push(n));return r},ri=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],si=ri.concat("length","prototype"),ai={f:Object.getOwnPropertyNames||function(e){return oi(e,si)}},ci={f:Object.getOwnPropertySymbols},li=Vn("Reflect","ownKeys")||function(e){var t=ai.f(mn(e)),n=ci.f;return n?t.concat(n(e)):t},ui=function(e,t){for(var n=li(t),i=gn.f,o=vn.f,r=0;r<n.length;r++){var s=n[r];ln(e,s)||i(e,s,o(t,s))}},hi=/#|\.prototype\./,di=function(e,t){var n=pi[fi(e)];return n==mi||n!=vi&&("function"==typeof t?Vt(t):!!t)},fi=di.normalize=function(e){return String(e).replace(hi,".").toLowerCase()},pi=di.data={},vi=di.NATIVE="N",mi=di.POLYFILL="P",_i=di,gi=vn.f,yi=function(e,t){var n,i,o,r,s,a=e.target,c=e.global,l=e.stat;if(n=c?Yt:l?Yt[a]||bn(a,{}):(Yt[a]||{}).prototype)for(i in t){if(r=t[i],o=e.noTargetGet?(s=gi(n,i))&&s.value:n[i],!_i(c?i:a+(l?".":"#")+i,e.forced)&&void 0!==o){if(typeof r==typeof o)continue;ui(r,o)}(e.sham||o&&o.sham)&&yn(r,"sham",!0),qn(n,i,r,e)}},bi=!!Object.getOwnPropertySymbols&&!Vt((function(){return!String(Symbol())})),wi=bi&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ci=Rn("wks"),Si=Yt.Symbol,ki=wi?Si:Si&&Si.withoutSetter||An,Ei=function(e){return ln(Ci,e)||(bi&&ln(Si,e)?Ci[e]=Si[e]:Ci[e]=ki("Symbol."+e)),Ci[e]},xi=Ei("match"),Ti=function(e){if(function(e){var t;return sn(e)&&(void 0!==(t=e[xi])?!!t:"RegExp"==en(e))}(e))throw TypeError("The method doesn't accept regular expressions");return e},Li=Ei("match"),Ri=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Li]=!1,"/./"[e](t)}catch(e){}}return!1},Mi=vn.f,Oi="".startsWith,Ai=Math.min,$i=Ri("startsWith"),Di=!($i||(Nn=Mi(String.prototype,"startsWith"),!Nn||Nn.writable));yi({target:"String",proto:!0,forced:!Di&&!$i},{startsWith:function(e){var t=String(on(this));Ti(e);var n=Jn(Ai(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return Oi?Oi.call(t,i,n):t.slice(n,n+i.length)===i}});var Ii,Pi,Bi,Hi=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},ji=function(e,t,n){if(Hi(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}},Wi=Function.call,Fi=function(e,t,n){return ji(Wi,Yt[e].prototype[t],n)},Ni=(Fi("String","startsWith"),function(e){return function(t,n){var i,o,r=String(on(t)),s=Zn(n),a=r.length;return s<0||s>=a?e?"":void 0:(i=r.charCodeAt(s))<55296||i>56319||s+1===a||(o=r.charCodeAt(s+1))<56320||o>57343?e?r.charAt(s):i:e?r.slice(s,s+2):o-56320+(i-55296<<10)+65536}}),Ui={codeAt:Ni(!1),charAt:Ni(!0)},qi=function(e){return Object(on(e))},zi=!Vt((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Yi=Dn("IE_PROTO"),Vi=Object.prototype,Ki=zi?Object.getPrototypeOf:function(e){return e=qi(e),ln(e,Yi)?e[Yi]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Vi:null},Gi=Ei("iterator"),Zi=!1;[].keys&&("next"in(Bi=[].keys())?(Pi=Ki(Ki(Bi)))!==Object.prototype&&(Ii=Pi):Zi=!0),null==Ii&&(Ii={}),ln(Ii,Gi)||yn(Ii,Gi,(function(){return this}));var Xi,Ji={IteratorPrototype:Ii,BUGGY_SAFARI_ITERATORS:Zi},Qi=Object.keys||function(e){return oi(e,ri)},eo=Kt?Object.defineProperties:function(e,t){mn(e);for(var n,i=Qi(t),o=i.length,r=0;o>r;)gn.f(e,n=i[r++],t[n]);return e},to=Vn("document","documentElement"),no=Dn("IE_PROTO"),io=function(){},oo=function(e){return"<script>"+e+"<\/script>"},ro=function(){try{Xi=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;ro=Xi?function(e){e.write(oo("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Xi):((t=dn("iframe")).style.display="none",to.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(oo("document.F=Object")),e.close(),e.F);for(var n=ri.length;n--;)delete ro.prototype[ri[n]];return ro()};In[no]=!0;var so=Object.create||function(e,t){var n;return null!==e?(io.prototype=mn(e),n=new io,io.prototype=null,n[no]=e):n=ro(),void 0===t?n:eo(n,t)},ao=gn.f,co=Ei("toStringTag"),lo=function(e,t,n){e&&!ln(e=n?e:e.prototype,co)&&ao(e,co,{configurable:!0,value:t})},uo={},ho=Ji.IteratorPrototype,fo=function(){return this},po=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return mn(n),function(e){if(!sn(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(i),t?e.call(n,i):n.__proto__=i,n}}():void 0),vo=Ji.IteratorPrototype,mo=Ji.BUGGY_SAFARI_ITERATORS,_o=Ei("iterator"),go=function(){return this},yo=function(e,t,n,i,o,r,s){!function(e,t,n){var i=t+" Iterator";e.prototype=so(ho,{next:Jt(1,n)}),lo(e,i,!1),uo[i]=fo}(n,t,i);var a,c,l,u=function(e){if(e===o&&v)return v;if(!mo&&e in f)return f[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",d=!1,f=e.prototype,p=f[_o]||f["@@iterator"]||o&&f[o],v=!mo&&p||u(o),m="Array"==t&&f.entries||p;if(m&&(a=Ki(m.call(new e)),vo!==Object.prototype&&a.next&&(Ki(a)!==vo&&(po?po(a,vo):"function"!=typeof a[_o]&&yn(a,_o,go)),lo(a,h,!0))),"values"==o&&p&&"values"!==p.name&&(d=!0,v=function(){return p.call(this)}),f[_o]!==v&&yn(f,_o,v),uo[t]=v,o)if(c={values:u("values"),keys:r?v:u("keys"),entries:u("entries")},s)for(l in c)(mo||d||!(l in f))&&qn(f,l,c[l]);else yi({target:t,proto:!0,forced:mo||d},c);return c},bo=Ui.charAt,wo=Un.set,Co=Un.getterFor("String Iterator");yo(String,"String",(function(e){wo(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=Co(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=bo(n,i),t.index+=e.length,{value:e,done:!1})}));var So=function(e,t,n,i){try{return i?t(mn(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&mn(o.call(e)),t}},ko=Ei("iterator"),Eo=Array.prototype,xo=function(e){return void 0!==e&&(uo.Array===e||Eo[ko]===e)},To=function(e,t,n){var i=an(t);i in e?gn.f(e,i,Jt(0,n)):e[i]=n},Lo={};Lo[Ei("toStringTag")]="z";var Ro="[object z]"===String(Lo),Mo=Ei("toStringTag"),Oo="Arguments"==en(function(){return arguments}()),Ao=Ro?en:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Mo))?n:Oo?en(t):"Object"==(i=en(t))&&"function"==typeof t.callee?"Arguments":i},$o=Ei("iterator"),Do=function(e){if(null!=e)return e[$o]||e["@@iterator"]||uo[Ao(e)]},Io=Ei("iterator"),Po=!1;try{var Bo=0,Ho={next:function(){return{done:!!Bo++}},return:function(){Po=!0}};Ho[Io]=function(){return this},Array.from(Ho,(function(){throw 2}))}catch(Pt){}var jo=function(e,t){if(!t&&!Po)return!1;var n=!1;try{var i={};i[Io]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n},Wo=!jo((function(e){Array.from(e)}));yi({target:"Array",stat:!0,forced:Wo},{from:function(e){var t,n,i,o,r,s,a=qi(e),c="function"==typeof this?this:Array,l=arguments.length,u=l>1?arguments[1]:void 0,h=void 0!==u,d=Do(a),f=0;if(h&&(u=ji(u,l>2?arguments[2]:void 0,2)),null==d||c==Array&&xo(d))for(n=new c(t=Jn(a.length));t>f;f++)s=h?u(a[f],f):a[f],To(n,f,s);else for(r=(o=d.call(a)).next,n=new c;!(i=r.call(o)).done;f++)s=h?So(o,u,[i.value,f],!0):i.value,To(n,f,s);return n.length=f,n}}),zn.Array.from;var Fo,No="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Uo=gn.f,qo=Yt.Int8Array,zo=qo&&qo.prototype,Yo=Yt.Uint8ClampedArray,Vo=Yo&&Yo.prototype,Ko=qo&&Ki(qo),Go=zo&&Ki(zo),Zo=Object.prototype,Xo=Zo.isPrototypeOf,Jo=Ei("toStringTag"),Qo=An("TYPED_ARRAY_TAG"),er=No&&!!po&&"Opera"!==Ao(Yt.opera),tr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Fo in tr)Yt[Fo]||(er=!1);if((!er||"function"!=typeof Ko||Ko===Function.prototype)&&(Ko=function(){throw TypeError("Incorrect invocation")},er))for(Fo in tr)Yt[Fo]&&po(Yt[Fo],Ko);if((!er||!Go||Go===Zo)&&(Go=Ko.prototype,er))for(Fo in tr)Yt[Fo]&&po(Yt[Fo].prototype,Go);if(er&&Ki(Vo)!==Go&&po(Vo,Go),Kt&&!ln(Go,Jo))for(Fo in Uo(Go,Jo,{get:function(){return sn(this)?this[Qo]:void 0}}),tr)Yt[Fo]&&yn(Yt[Fo],Qo,Fo);var nr=Ei("species"),ir=function(e){if(function(e){return sn(e)&&ln(tr,Ao(e))}(e))return e;throw TypeError("Target is not a typed array")},or=function(e){if(po){if(Xo.call(Ko,e))return e}else for(var t in tr)if(ln(tr,Fo)){var n=Yt[t];if(n&&(e===n||Xo.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},rr=[].slice;!function(e,t,n){if(Kt){if(n)for(var i in tr){var o=Yt[i];o&&ln(o.prototype,e)&&delete o.prototype[e]}Go[e]&&!n||qn(Go,e,n?t:er&&zo[e]||t)}}("slice",(function(e,t){for(var n=rr.call(ir(this),e,t),i=function(e,t){var n,i=mn(e).constructor;return void 0===i||null==(n=mn(i)[nr])?t:Hi(n)}(this,this.constructor),o=0,r=n.length,s=new(or(i))(r);r>o;)s[o]=n[o++];return s}),Vt((function(){new Int8Array(1).slice()})));var sr=Ei("unscopables"),ar=Array.prototype;null==ar[sr]&&gn.f(ar,sr,{configurable:!0,value:so(null)});var cr=function(e){ar[sr][e]=!0},lr=Object.defineProperty,ur={},hr=function(e){throw e},dr=ni.includes,fr=function(e,t){if(ln(ur,e))return ur[e];t||(t={});var n=[][e],i=!!ln(t,"ACCESSORS")&&t.ACCESSORS,o=ln(t,0)?t[0]:hr,r=ln(t,1)?t[1]:void 0;return ur[e]=!!n&&!Vt((function(){if(i&&!Kt)return!0;var e={length:-1};i?lr(e,1,{enumerable:!0,get:hr}):e[1]=1,n.call(e,o,r)}))}("indexOf",{ACCESSORS:!0,1:0});yi({target:"Array",proto:!0,forced:!fr},{includes:function(e){return dr(this,e,arguments.length>1?arguments[1]:void 0)}}),cr("includes"),Fi("Array","includes"),yi({target:"String",proto:!0,forced:!Ri("includes")},{includes:function(e){return!!~String(on(this)).indexOf(Ti(e),arguments.length>1?arguments[1]:void 0)}}),Fi("String","includes");var pr=!Vt((function(){return Object.isExtensible(Object.preventExtensions({}))})),vr=qt((function(e){var t=gn.f,n=An("meta"),i=0,o=Object.isExtensible||function(){return!0},r=function(e){t(e,n,{value:{objectID:"O"+ ++i,weakData:{}}})},s=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!sn(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!ln(e,n)){if(!o(e))return"F";if(!t)return"E";r(e)}return e[n].objectID},getWeakData:function(e,t){if(!ln(e,n)){if(!o(e))return!0;if(!t)return!1;r(e)}return e[n].weakData},onFreeze:function(e){return pr&&s.REQUIRED&&o(e)&&!ln(e,n)&&r(e),e}};In[n]=!0})),mr=(vr.REQUIRED,vr.fastKey,vr.getWeakData,vr.onFreeze,qt((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,i,o,r){var s,a,c,l,u,h,d,f=ji(n,i,o?2:1);if(r)s=e;else{if("function"!=typeof(a=Do(e)))throw TypeError("Target is not iterable");if(xo(a)){for(c=0,l=Jn(e.length);l>c;c++)if((u=o?f(mn(d=e[c])[0],d[1]):f(e[c]))&&u instanceof t)return u;return new t(!1)}s=a.call(e)}for(h=s.next;!(d=h.call(s)).done;)if("object"==typeof(u=So(s,f,d.value,o))&&u&&u instanceof t)return u;return new t(!1)}).stop=function(e){return new t(!0,e)}}))),_r=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},gr=function(e,t,n){for(var i in t)qn(e,i,t[i],n);return e},yr=Ei("species"),br=gn.f,wr=vr.fastKey,Cr=Un.set,Sr=Un.getterFor,kr=(function(e,t,n){var i=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),r=i?"set":"add",s=Yt.Set,a=s&&s.prototype,c=s,l={},u=function(e){var t=a[e];qn(a,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!sn(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!sn(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!sn(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(_i(e,"function"!=typeof s||!(o||a.forEach&&!Vt((function(){(new s).entries().next()})))))c=n.getConstructor(t,e,i,r),vr.REQUIRED=!0;else if(_i(e,!0)){var h=new c,d=h[r](o?{}:-0,1)!=h,f=Vt((function(){h.has(1)})),p=jo((function(e){new s(e)})),v=!o&&Vt((function(){for(var e=new s,t=5;t--;)e[r](t,t);return!e.has(-0)}));p||((c=t((function(t,n){_r(t,c,e);var o=function(e,t,n){var i,o;return po&&"function"==typeof(i=t.constructor)&&i!==n&&sn(o=i.prototype)&&o!==n.prototype&&po(e,o),e}(new s,t,c);return null!=n&&mr(n,o[r],o,i),o}))).prototype=a,a.constructor=c),(f||v)&&(u("delete"),u("has"),i&&u("get")),(v||d)&&u(r),o&&a.clear&&delete a.clear}l.Set=c,yi({global:!0,forced:c!=s},l),lo(c,e),o||n.setStrong(c,e,i)}("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,n,i){var o=e((function(e,r){_r(e,o,t),Cr(e,{type:t,index:so(null),first:void 0,last:void 0,size:0}),Kt||(e.size=0),null!=r&&mr(r,e[i],e,n)})),r=Sr(t),s=function(e,t,n){var i,o,s=r(e),c=a(e,t);return c?c.value=n:(s.last=c={index:o=wr(t,!0),key:t,value:n,previous:i=s.last,next:void 0,removed:!1},s.first||(s.first=c),i&&(i.next=c),Kt?s.size++:e.size++,"F"!==o&&(s.index[o]=c)),e},a=function(e,t){var n,i=r(e),o=wr(t);if("F"!==o)return i.index[o];for(n=i.first;n;n=n.next)if(n.key==t)return n};return gr(o.prototype,{clear:function(){for(var e=r(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Kt?e.size=0:this.size=0},delete:function(e){var t=r(this),n=a(this,e);if(n){var i=n.next,o=n.previous;delete t.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),t.first==n&&(t.first=i),t.last==n&&(t.last=o),Kt?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=r(this),i=ji(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!a(this,e)}}),gr(o.prototype,n?{get:function(e){var t=a(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Kt&&br(o.prototype,"size",{get:function(){return r(this).size}}),o},setStrong:function(e,t,n){var i=t+" Iterator",o=Sr(t),r=Sr(i);yo(e,t,(function(e,t){Cr(this,{type:i,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=r(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(e){var t=Vn(e),n=gn.f;Kt&&t&&!t[yr]&&n(t,yr,{configurable:!0,get:function(){return this}})}(t)}}),Ro?{}.toString:function(){return"[object "+Ao(this)+"]"});Ro||qn(Object.prototype,"toString",kr,{unsafe:!0});var Er={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},xr=Un.set,Tr=Un.getterFor("Array Iterator"),Lr=yo(Array,"Array",(function(e,t){xr(this,{type:"Array Iterator",target:rn(e),index:0,kind:t})}),(function(){var e=Tr(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");uo.Arguments=uo.Array,cr("keys"),cr("values"),cr("entries");var Rr=Ei("iterator"),Mr=Ei("toStringTag"),Or=Lr.values;for(var Ar in Er){var $r=Yt[Ar],Dr=$r&&$r.prototype;if(Dr){if(Dr[Rr]!==Or)try{yn(Dr,Rr,Or)}catch(Pt){Dr[Rr]=Or}if(Dr[Mr]||yn(Dr,Mr,Ar),Er[Ar])for(var Ir in Lr)if(Dr[Ir]!==Lr[Ir])try{yn(Dr,Ir,Lr[Ir])}catch(Pt){Dr[Ir]=Lr[Ir]}}}function Pr(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}zn.Set;var Br=setTimeout;function Hr(e){return Boolean(e&&void 0!==e.length)}function jr(){}function Wr(e){if(!(this instanceof Wr))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Yr(e,this)}function Fr(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,Wr._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void Ur(t.promise,e)}Nr(t.promise,i)}else(1===e._state?Nr:Ur)(t.promise,e._value)}))):e._deferreds.push(t)}function Nr(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof Wr)return e._state=3,e._value=t,void qr(e);if("function"==typeof n)return void Yr((i=n,o=t,function(){i.apply(o,arguments)}),e)}e._state=1,e._value=t,qr(e)}catch(t){Ur(e,t)}var i,o}function Ur(e,t){e._state=2,e._value=t,qr(e)}function qr(e){2===e._state&&0===e._deferreds.length&&Wr._immediateFn((function(){e._handled||Wr._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)Fr(e,e._deferreds[t]);e._deferreds=null}function zr(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function Yr(e,t){var n=!1;try{e((function(e){n||(n=!0,Nr(t,e))}),(function(e){n||(n=!0,Ur(t,e))}))}catch(e){if(n)return;n=!0,Ur(t,e)}}Wr.prototype.catch=function(e){return this.then(null,e)},Wr.prototype.then=function(e,t){var n=new this.constructor(jr);return Fr(this,new zr(e,t,n)),n},Wr.prototype.finally=Pr,Wr.all=function(e){return new Wr((function(t,n){if(!Hr(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var o=i.length;function r(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(t){r(e,t)}),n)}i[e]=s,0==--o&&t(i)}catch(e){n(e)}}for(var s=0;s<i.length;s++)r(s,i[s])}))},Wr.resolve=function(e){return e&&"object"==typeof e&&e.constructor===Wr?e:new Wr((function(t){t(e)}))},Wr.reject=function(e){return new Wr((function(t,n){n(e)}))},Wr.race=function(e){return new Wr((function(t,n){if(!Hr(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,o=e.length;i<o;i++)Wr.resolve(e[i]).then(t,n)}))},Wr._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){Br(e,0)},Wr._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var Vr=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in Vr?Vr.Promise.prototype.finally||(Vr.Promise.prototype.finally=Pr):Vr.Promise=Wr,function(e){function t(){}function n(e,t){if(e=void 0===e?"utf-8":e,t=void 0===t?{fatal:!1}:t,-1==i.indexOf(e.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+e+"') is invalid.");if(t.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}if(e.TextEncoder&&e.TextDecoder)return!1;var i=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");t=0;for(var n=e.length,i=0,o=Math.max(32,n+(n>>1)+7),r=new Uint8Array(o>>3<<3);t<n;){var s=e.charCodeAt(t++);if(55296<=s&&56319>=s){if(t<n){var a=e.charCodeAt(t);56320==(64512&a)&&(++t,s=((1023&s)<<10)+(1023&a)+65536)}if(55296<=s&&56319>=s)continue}if(i+4>r.length&&(o+=8,o=(o*=1+t/e.length*2)>>3<<3,(a=new Uint8Array(o)).set(r),r=a),0==(4294967168&s))r[i++]=s;else{if(0==(4294965248&s))r[i++]=s>>6&31|192;else if(0==(4294901760&s))r[i++]=s>>12&15|224,r[i++]=s>>6&63|128;else{if(0!=(4292870144&s))continue;r[i++]=s>>18&7|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128}r[i++]=63&s|128}}return r.slice?r.slice(0,i):r.subarray(0,i)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1}),n.prototype.decode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");e.buffer instanceof ArrayBuffer&&(e=e.buffer),e=new Uint8Array(e),t=0;for(var n=[],i=[];;){var o=t<e.length;if(!o||65536&t){if(i.push(String.fromCharCode.apply(null,n)),!o)return i.join("");n=[],e=e.subarray(t),t=0}if(0===(o=e[t++]))n.push(0);else if(0==(128&o))n.push(o);else if(192==(224&o)){var r=63&e[t++];n.push((31&o)<<6|r)}else if(224==(240&o)){r=63&e[t++];var s=63&e[t++];n.push((31&o)<<12|r<<6|s)}else 240==(248&o)&&(65535<(o=(7&o)<<18|(r=63&e[t++])<<12|(s=63&e[t++])<<6|63&e[t++])&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o))}},e.TextEncoder=t,e.TextDecoder=n}("undefined"!=typeof window?window:Nt),function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}var a=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],i=0,o=n.length;i<o;i++)if(n[i]===t)return void n.splice(i,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var n=function(n){setTimeout((function(){return n.call(t,e)}))},i=this.listeners[e.type],o=0,r=i.length;o<r;o++)n(i[o]);return!e.defaultPrevented}}}]),t}(),c=function(t){function c(){var t;return e(this,c),(t=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?r(e):t}(this,i(c).call(this))).listeners||a.call(r(t)),Object.defineProperty(r(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(r(t),"onabort",{value:null,writable:!0,configurable:!0}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,t),n(c,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),s(i(c.prototype),"dispatchEvent",this).call(this,e)}}]),c}(a),l=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new c,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",c.prototype[Symbol.toStringTag]="AbortSignal"),function(e){(function(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController})(e)&&(e.AbortController=l,e.AbortSignal=c)}("undefined"!=typeof self?self:Nt)}();var Kr=qt((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.locked=new Map,this.addToLocked=function(t,n){var i=e.locked.get(t);void 0===i?void 0===n?e.locked.set(t,[]):e.locked.set(t,[n]):void 0!==n&&(i.unshift(n),e.locked.set(t,i))},this.isLocked=function(t){return e.locked.has(t)},this.lock=function(t){return new Promise((function(n,i){e.isLocked(t)?e.addToLocked(t,n):(e.addToLocked(t),n())}))},this.unlock=function(t){var n=e.locked.get(t);if(void 0!==n&&0!==n.length){var i=n.pop();e.locked.set(t,n),void 0!==i&&setTimeout(i,0)}else e.locked.delete(t)}}return e.getInstance=function(){return void 0===e.instance&&(e.instance=new e),e.instance},e}();t.default=function(){return n.getInstance()}}));Ut(Kr);var Gr=Ut(qt((function(e,t){var n=Nt&&Nt.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((i=i.apply(e,t||[])).next())}))},i=Nt&&Nt.__generator||function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function o(e){return new Promise((function(t){return setTimeout(t,e)}))}function r(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){this.acquiredIatSet=new Set,this.id=Date.now().toString()+r(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),void 0===e.waiters&&(e.waiters=[])}return e.prototype.acquireLock=function(t,s){return void 0===s&&(s=5e3),n(this,void 0,void 0,(function(){var n,a,c,l,u,h;return i(this,(function(i){switch(i.label){case 0:n=Date.now()+r(4),a=Date.now()+s,c="browser-tabs-lock-key-"+t,l=window.localStorage,i.label=1;case 1:return Date.now()<a?[4,o(30)]:[3,8];case 2:return i.sent(),null!==l.getItem(c)?[3,5]:(u=this.id+"-"+t+"-"+n,[4,o(Math.floor(25*Math.random()))]);case 3:return i.sent(),l.setItem(c,JSON.stringify({id:this.id,iat:n,timeoutKey:u,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,o(30)];case 4:return i.sent(),null!==(h=l.getItem(c))&&(h=JSON.parse(h)).id===this.id&&h.iat===n?(this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(c,n),[2,!0]):[3,7];case 5:return e.lockCorrector(),[4,this.waitForSomethingToChange(a)];case 6:i.sent(),i.label=7;case 7:return n=Date.now()+r(4),[3,1];case 8:return[2,!1]}}))}))},e.prototype.refreshLockWhileAcquired=function(e,t){return n(this,void 0,void 0,(function(){var o=this;return i(this,(function(r){return setTimeout((function(){return n(o,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return[4,Kr.default().lock(t)];case 1:return i.sent(),this.acquiredIatSet.has(t)?(n=window.localStorage,null===(o=n.getItem(e))?(Kr.default().unlock(t),[2]):((o=JSON.parse(o)).timeRefreshed=Date.now(),n.setItem(e,JSON.stringify(o)),Kr.default().unlock(t),this.refreshLockWhileAcquired(e,t),[2])):(Kr.default().unlock(t),[2])}}))}))}),1e3),[2]}))}))},e.prototype.waitForSomethingToChange=function(t){return n(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){var i=!1,o=Date.now(),r=!1;function s(){if(r||(window.removeEventListener("storage",s),e.removeFromWaiting(s),clearTimeout(a),r=!0),!i){i=!0;var t=50-(Date.now()-o);t>0?setTimeout(n,t):n()}}window.addEventListener("storage",s),e.addToWaiting(s);var a=setTimeout(s,Math.max(0,t-Date.now()))}))];case 1:return n.sent(),[2]}}))}))},e.addToWaiting=function(t){this.removeFromWaiting(t),void 0!==e.waiters&&e.waiters.push(t)},e.removeFromWaiting=function(t){void 0!==e.waiters&&(e.waiters=e.waiters.filter((function(e){return e!==t})))},e.notifyWaiters=function(){void 0!==e.waiters&&e.waiters.slice().forEach((function(e){return e()}))},e.prototype.releaseLock=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.releaseLock__private__(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.releaseLock__private__=function(t){return n(this,void 0,void 0,(function(){var n,o,r;return i(this,(function(i){switch(i.label){case 0:return n=window.localStorage,o="browser-tabs-lock-key-"+t,null===(r=n.getItem(o))?[2]:(r=JSON.parse(r)).id!==this.id?[3,2]:[4,Kr.default().lock(r.iat)];case 1:i.sent(),this.acquiredIatSet.delete(r.iat),n.removeItem(o),Kr.default().unlock(r.iat),e.notifyWaiters(),i.label=2;case 2:return[2]}}))}))},e.lockCorrector=function(){for(var t=Date.now()-5e3,n=window.localStorage,i=Object.keys(n),o=!1,r=0;r<i.length;r++){var s=i[r];if(s.includes("browser-tabs-lock-key")){var a=n.getItem(s);null!==a&&(void 0===(a=JSON.parse(a)).timeRefreshed&&a.timeAcquired<t||void 0!==a.timeRefreshed&&a.timeRefreshed<t)&&(n.removeItem(s),o=!0)}}o&&e.notifyWaiters()},e.waiters=void 0,e}();t.default=s}))),Zr={timeoutInSeconds:60},Xr={error:"timeout",error_description:"Timeout"},Jr=function(e,t){var n,i,o,r=t.popup;if(r?r.location.href=e:(n=e,i=window.screenX+(window.innerWidth-400)/2,o=window.screenY+(window.innerHeight-600)/2,r=window.open(n,"auth0:authorize:popup","left="+i+",top="+o+",width=400,height=600,resizable,scrollbars=yes,status=1")),!r)throw new Error("Could not open popup");return new Promise((function(e,n){var i=setTimeout((function(){n(Ht(Ht({},Xr),{popup:r}))}),1e3*(t.timeoutInSeconds||60));window.addEventListener("message",(function(t){if(t.data&&"authorization_response"===t.data.type){if(clearTimeout(i),r.close(),t.data.response.error)return n(t.data.response);e(t.data.response)}}))}))},Qr=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",t="";return Array.from(ls().getRandomValues(new Uint8Array(43))).forEach((function(n){return t+=e[n%e.length]})),t},es=function(e){return btoa(e)},ts=function(e){return Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},ns=function(e){return Wt(void 0,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:return t=us().digest({name:"SHA-256"},(new TextEncoder).encode(e)),window.msCrypto?[2,new Promise((function(e,n){t.oncomplete=function(t){e(t.target.result)},t.onerror=function(e){n(e.error)},t.onabort=function(){n("The digest operation was aborted")}}))]:[4,t];case 1:return[2,n.sent()]}}))}))},is=function(e){return function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(e.replace(/_/g,"/").replace(/-/g,"+"))},os=function(e){var t=new Uint8Array(e);return function(e){var t={"+":"-","/":"_","=":""};return e.replace(/[\+\/=]/g,(function(e){return t[e]}))}(window.btoa(String.fromCharCode.apply(String,Array.from(t))))},rs=function(e,t,n,i){return Wt(void 0,void 0,void 0,(function(){var o,r;return Ft(this,(function(s){switch(s.label){case 0:return i?(delete t.signal,[2,(l=Ht({url:e,timeout:n},t),u=i,new Promise((function(e,t){var n=new MessageChannel;n.port1.onmessage=function(n){n.data.error?t(new Error(n.data.error)):e(n.data)},u.postMessage(l,[n.port2])})))]):[3,1];case 1:return[4,(a=e,c=t,c=c||{},new Promise((function(e,t){var n=new XMLHttpRequest,i=[],o=[],r={},s=function(){return{ok:2==(n.status/100|0),statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(JSON.parse(n.responseText))},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:s,headers:{keys:function(){return i},entries:function(){return o},get:function(e){return r[e.toLowerCase()]},has:function(e){return e.toLowerCase()in r}}}};for(var l in n.open(c.method||"get",a,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){i.push(t=t.toLowerCase()),o.push([t,n]),r[t]=r[t]?r[t]+","+n:n})),e(s())},n.onerror=t,n.withCredentials="include"==c.credentials,c.headers)n.setRequestHeader(l,c.headers[l]);n.send(c.body||null)})))];case 2:return o=s.sent(),r={ok:o.ok},[4,o.json()];case 3:return[2,(r.json=s.sent(),r)]}var a,c,l,u}))}))},ss=function(e,t,n,i){void 0===i&&(i=1e4);var o=new AbortController,r=o.signal,s=Ht(Ht({},t),{signal:r});return Promise.race([rs(e,s,i,n),new Promise((function(e,t){setTimeout((function(){o.abort(),t(new Error("Timeout when executing 'fetch'"))}),i)}))])},as=function(e,t,n,i){return Wt(void 0,void 0,void 0,(function(){var o,r,s,a,c,l,u,h,d,f;return Ft(this,(function(p){switch(p.label){case 0:s=0,p.label=1;case 1:if(!(s<3))return[3,6];p.label=2;case 2:return p.trys.push([2,4,,5]),[4,ss(e,n,i,t)];case 3:return r=p.sent(),o=null,[3,6];case 4:return a=p.sent(),o=a,[3,5];case 5:return s++,[3,1];case 6:if(o)throw o;if(c=r.json,l=c.error,u=c.error_description,h=jt(c,["error","error_description"]),!r.ok)throw d=u||"HTTP error. Unable to fetch "+e,(f=new Error(d)).error=l||"request_error",f.error_description=d,f;return[2,h]}}))}))},cs=function(e,t){return Wt(void 0,void 0,void 0,(function(){var n=e.baseUrl,i=e.timeout,o=jt(e,["baseUrl","timeout"]);return Ft(this,(function(e){switch(e.label){case 0:return[4,as(n+"/oauth/token",i,{method:"POST",body:JSON.stringify(Ht({redirect_uri:window.location.origin},o)),headers:{"Content-type":"application/json"}},t)];case 1:return[2,e.sent()]}}))}))},ls=function(){return window.crypto||window.msCrypto},us=function(){var e=ls();return e.subtle||e.webkitSubtle},hs=function(e){return Array.from(new Set(e))},ds=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return hs(e.join(" ").trim().split(/\s+/)).join(" ")},fs=function(e){return"@@auth0spajs@@::"+e.client_id+"::"+e.audience+"::"+e.scope},ps=function(e){var t=Math.floor(Date.now()/1e3)+e.expires_in;return{body:e,expiresAt:Math.min(t,e.decodedToken.claims.exp)-60}},vs=function(){function e(){}return e.prototype.save=function(e){var t=fs(e),n=ps(e);window.localStorage.setItem(t,JSON.stringify(n))},e.prototype.get=function(e){var t=fs(e),n=this.readJson(t),i=Math.floor(Date.now()/1e3);if(n){if(!(n.expiresAt<i))return n.body;if(n.body.refresh_token){var o=this.stripData(n);return this.writeJson(t,o),o.body}localStorage.removeItem(t)}},e.prototype.clear=function(){for(var e=localStorage.length-1;e>=0;e--)localStorage.key(e).startsWith("@@auth0spajs@@")&&localStorage.removeItem(localStorage.key(e))},e.prototype.readJson=function(e){var t,n=window.localStorage.getItem(e);if(n&&(t=JSON.parse(n)))return t},e.prototype.writeJson=function(e,t){localStorage.setItem(e,JSON.stringify(t))},e.prototype.stripData=function(e){return{body:{refresh_token:e.body.refresh_token},expiresAt:e.expiresAt}},e}(),ms=function(){this.enclosedCache=function(){var e={body:{},expiresAt:0};return{save:function(t){var n=fs(t),i=ps(t);e[n]=i},get:function(t){var n=fs(t),i=e[n],o=Math.floor(Date.now()/1e3);if(i)return i.expiresAt<o?i.body.refresh_token?(i.body={refresh_token:i.body.refresh_token},i.body):void delete e[n]:i.body},clear:function(){e={body:{},expiresAt:0}}}}()},_s=qt((function(e,t){var n=Nt&&Nt.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t){if(!t)return"";var n="; "+e;return!0===t?n:n+"="+t}function o(e,t,n){return encodeURIComponent(e).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(t).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(e){if("number"==typeof e.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*e.expires),e.expires=t}return i("Expires",e.expires?e.expires.toUTCString():"")+i("Domain",e.domain)+i("Path",e.path)+i("Secure",e.secure)+i("SameSite",e.sameSite)}(n)}function r(e){for(var t={},n=e?e.split("; "):[],i=/(%[\dA-F]{2})+/gi,o=0;o<n.length;o++){var r=n[o].split("="),s=r.slice(1).join("=");'"'===s.charAt(0)&&(s=s.slice(1,-1));try{t[r[0].replace(i,decodeURIComponent)]=s.replace(i,decodeURIComponent)}catch(e){}}return t}function s(){return r(document.cookie)}function a(e,t,i){document.cookie=o(e,t,n({path:"/"},i))}t.__esModule=!0,t.encode=o,t.parse=r,t.getAll=s,t.get=function(e){return s()[e]},t.set=a,t.remove=function(e,t){a(e,"",n(n({},t),{expires:-1}))}}));Ut(_s),_s.encode,_s.parse;var gs=_s.getAll,ys=_s.get,bs=_s.set,ws=_s.remove,Cs=function(e){var t=ys(e);if(void 0!==t)return JSON.parse(t)},Ss=function(e,t,n){bs(e,JSON.stringify(t),{expires:n.daysUntilExpire})},ks=function(e){ws(e)},Es=function(e){return"a0.spajs.txs."+e},xs=function(){function e(){var e=this;this.transactions={},Object.keys(gs()||{}).filter((function(e){return e.startsWith("a0.spajs.txs.")})).forEach((function(t){var n=t.replace("a0.spajs.txs.","");e.transactions[n]=Cs(t)}))}return e.prototype.create=function(e,t){this.transactions[e]=t,Ss(Es(e),t,{daysUntilExpire:1})},e.prototype.get=function(e){return this.transactions[e]},e.prototype.remove=function(e){delete this.transactions[e],ks(Es(e))},e}(),Ts=function(e){return"number"==typeof e},Ls=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],Rs=function(e){function t(n,i,o,r){void 0===r&&(r=null);var s=e.call(this,n,i)||this;return s.state=o,s.appState=r,Object.setPrototypeOf(s,t.prototype),s}return Bt(t,e),t}(function(e){function t(n,i){var o=e.call(this,i)||this;return o.error=n,o.error_description=i,Object.setPrototypeOf(o,t.prototype),o}return Bt(t,e),t}(Error));var Ms,Os=("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UKdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUKTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKClRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRApXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLApNRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULgoKU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zCmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8KdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHIsdD0xLG49YXJndW1lbnRzLmxlbmd0aDt0PG47dCsrKWZvcih2YXIgbyBpbiByPWFyZ3VtZW50c1t0XSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKGVbb109cltvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHIoZSxyKXt2YXIgdCxuLG8scyxhPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZigxJm9bMF0pdGhyb3cgb1sxXTtyZXR1cm4gb1sxXX0sdHJ5czpbXSxvcHM6W119O3JldHVybiBzPXtuZXh0OmkoMCksdGhyb3c6aSgxKSxyZXR1cm46aSgyKX0sImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmKHNbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSkscztmdW5jdGlvbiBpKHMpe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4gZnVuY3Rpb24ocyl7aWYodCl0aHJvdyBuZXcgVHlwZUVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuIik7Zm9yKDthOyl0cnl7aWYodD0xLG4mJihvPTImc1swXT9uLnJldHVybjpzWzBdP24udGhyb3d8fCgobz1uLnJldHVybikmJm8uY2FsbChuKSwwKTpuLm5leHQpJiYhKG89by5jYWxsKG4sc1sxXSkpLmRvbmUpcmV0dXJuIG87c3dpdGNoKG49MCxvJiYocz1bMiZzWzBdLG8udmFsdWVdKSxzWzBdKXtjYXNlIDA6Y2FzZSAxOm89czticmVhaztjYXNlIDQ6cmV0dXJuIGEubGFiZWwrKyx7dmFsdWU6c1sxXSxkb25lOiExfTtjYXNlIDU6YS5sYWJlbCsrLG49c1sxXSxzPVswXTtjb250aW51ZTtjYXNlIDc6cz1hLm9wcy5wb3AoKSxhLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKG89YS50cnlzLChvPW8ubGVuZ3RoPjAmJm9bby5sZW5ndGgtMV0pfHw2IT09c1swXSYmMiE9PXNbMF0pKXthPTA7Y29udGludWV9aWYoMz09PXNbMF0mJighb3x8c1sxXT5vWzBdJiZzWzFdPG9bM10pKXthLmxhYmVsPXNbMV07YnJlYWt9aWYoNj09PXNbMF0mJmEubGFiZWw8b1sxXSl7YS5sYWJlbD1vWzFdLG89czticmVha31pZihvJiZhLmxhYmVsPG9bMl0pe2EubGFiZWw9b1syXSxhLm9wcy5wdXNoKHMpO2JyZWFrfW9bMl0mJmEub3BzLnBvcCgpLGEudHJ5cy5wb3AoKTtjb250aW51ZX1zPXIuY2FsbChlLGEpfWNhdGNoKGUpe3M9WzYsZV0sbj0wfWZpbmFsbHl7dD1vPTB9aWYoNSZzWzBdKXRocm93IHNbMV07cmV0dXJue3ZhbHVlOnNbMF0/c1sxXTp2b2lkIDAsZG9uZTohMH19KFtzLGldKX19fXZhciB0O2FkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLChmdW5jdGlvbihuKXt2YXIgbyxzLGEsaSx1LGwsYyxmLHA7cmV0dXJuIGw9dm9pZCAwLGM9dm9pZCAwLHA9ZnVuY3Rpb24oKXt2YXIgbCxjLGYscCxoLHksYjtyZXR1cm4gcih0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOm89bi5kYXRhLHM9by51cmwsYT1vLnRpbWVvdXQsaT1mdW5jdGlvbihlLHIpe3ZhciB0PXt9O2Zvcih2YXIgbiBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiZyLmluZGV4T2Yobik8MCYmKHRbbl09ZVtuXSk7aWYobnVsbCE9ZSYmImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBvPTA7Zm9yKG49T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtvPG4ubGVuZ3RoO28rKylyLmluZGV4T2YobltvXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsbltvXSkmJih0W25bb11dPWVbbltvXV0pfXJldHVybiB0fShvLFsidXJsIiwidGltZW91dCJdKSx1PW4ucG9ydHNbMF0sci5sYWJlbD0xO2Nhc2UgMTppZihyLnRyeXMucHVzaChbMSw3LCw4XSksIShjPUpTT04ucGFyc2UoaS5ib2R5KSkucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09Yy5ncmFudF90eXBlKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoIlRoZSB3ZWIgd29ya2VyIGlzIG1pc3NpbmcgdGhlIHJlZnJlc2ggdG9rZW4iKTtpLmJvZHk9SlNPTi5zdHJpbmdpZnkoZShlKHt9LGMpLHtyZWZyZXNoX3Rva2VuOnR9KSl9Zj1uZXcgQWJvcnRDb250cm9sbGVyLHA9Zi5zaWduYWwsaD12b2lkIDAsci5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gci50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKHY9YSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSx2KX0pKSksZmV0Y2gocyxlKGUoe30saSkse3NpZ25hbDpwfSkpXSldO2Nhc2UgMzpyZXR1cm4gaD1yLnNlbnQoKSxbMyw1XTtjYXNlIDQ6cmV0dXJuIHk9ci5zZW50KCksdS5wb3N0TWVzc2FnZSh7ZXJyb3I6eS5tZXNzYWdlfSksWzJdO2Nhc2UgNTpyZXR1cm4gaD9bNCxoLmpzb24oKV06KGYuYWJvcnQoKSxbMl0pO2Nhc2UgNjpyZXR1cm4obD1yLnNlbnQoKSkucmVmcmVzaF90b2tlbj8odD1sLnJlZnJlc2hfdG9rZW4sZGVsZXRlIGwucmVmcmVzaF90b2tlbik6dD1udWxsLHUucG9zdE1lc3NhZ2Uoe29rOmgub2ssanNvbjpsfSksWzMsOF07Y2FzZSA3OnJldHVybiBiPXIuc2VudCgpLHUucG9zdE1lc3NhZ2Uoe29rOiExLGpzb246e2Vycm9yX2Rlc2NyaXB0aW9uOmIubWVzc2FnZX19KSxbMyw4XTtjYXNlIDg6cmV0dXJuWzJdfXZhciB2fSkpfSxuZXcoKGY9dm9pZCAwKXx8KGY9UHJvbWlzZSkpKChmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIHQoZSl7dHJ5e28ocC5uZXh0KGUpKX1jYXRjaChlKXtyKGUpfX1mdW5jdGlvbiBuKGUpe3RyeXtvKHAudGhyb3coZSkpfWNhdGNoKGUpe3IoZSl9fWZ1bmN0aW9uIG8ocil7ci5kb25lP2Uoci52YWx1ZSk6bmV3IGYoKGZ1bmN0aW9uKGUpe2Uoci52YWx1ZSl9KSkudGhlbih0LG4pfW8oKHA9cC5hcHBseShsLGN8fFtdKSkubmV4dCgpKX0pKX0pKTsKCg==",null,!1,function(e){return Ms=Ms||function(e,t,n){var i=void 0===t?null:t,o=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),o=0,r=n.length;o<r;++o)i[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),r=o.indexOf("\n",10)+1,s=o.substring(r)+(i?"//# sourceMappingURL="+i:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UKdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUKTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKClRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRApXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLApNRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULgoKU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zCmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8KdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHIsdD0xLG49YXJndW1lbnRzLmxlbmd0aDt0PG47dCsrKWZvcih2YXIgbyBpbiByPWFyZ3VtZW50c1t0XSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKGVbb109cltvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHIoZSxyKXt2YXIgdCxuLG8scyxhPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZigxJm9bMF0pdGhyb3cgb1sxXTtyZXR1cm4gb1sxXX0sdHJ5czpbXSxvcHM6W119O3JldHVybiBzPXtuZXh0OmkoMCksdGhyb3c6aSgxKSxyZXR1cm46aSgyKX0sImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmKHNbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSkscztmdW5jdGlvbiBpKHMpe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4gZnVuY3Rpb24ocyl7aWYodCl0aHJvdyBuZXcgVHlwZUVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuIik7Zm9yKDthOyl0cnl7aWYodD0xLG4mJihvPTImc1swXT9uLnJldHVybjpzWzBdP24udGhyb3d8fCgobz1uLnJldHVybikmJm8uY2FsbChuKSwwKTpuLm5leHQpJiYhKG89by5jYWxsKG4sc1sxXSkpLmRvbmUpcmV0dXJuIG87c3dpdGNoKG49MCxvJiYocz1bMiZzWzBdLG8udmFsdWVdKSxzWzBdKXtjYXNlIDA6Y2FzZSAxOm89czticmVhaztjYXNlIDQ6cmV0dXJuIGEubGFiZWwrKyx7dmFsdWU6c1sxXSxkb25lOiExfTtjYXNlIDU6YS5sYWJlbCsrLG49c1sxXSxzPVswXTtjb250aW51ZTtjYXNlIDc6cz1hLm9wcy5wb3AoKSxhLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKG89YS50cnlzLChvPW8ubGVuZ3RoPjAmJm9bby5sZW5ndGgtMV0pfHw2IT09c1swXSYmMiE9PXNbMF0pKXthPTA7Y29udGludWV9aWYoMz09PXNbMF0mJighb3x8c1sxXT5vWzBdJiZzWzFdPG9bM10pKXthLmxhYmVsPXNbMV07YnJlYWt9aWYoNj09PXNbMF0mJmEubGFiZWw8b1sxXSl7YS5sYWJlbD1vWzFdLG89czticmVha31pZihvJiZhLmxhYmVsPG9bMl0pe2EubGFiZWw9b1syXSxhLm9wcy5wdXNoKHMpO2JyZWFrfW9bMl0mJmEub3BzLnBvcCgpLGEudHJ5cy5wb3AoKTtjb250aW51ZX1zPXIuY2FsbChlLGEpfWNhdGNoKGUpe3M9WzYsZV0sbj0wfWZpbmFsbHl7dD1vPTB9aWYoNSZzWzBdKXRocm93IHNbMV07cmV0dXJue3ZhbHVlOnNbMF0/c1sxXTp2b2lkIDAsZG9uZTohMH19KFtzLGldKX19fXZhciB0O2FkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLChmdW5jdGlvbihuKXt2YXIgbyxzLGEsaSx1LGwsYyxmLHA7cmV0dXJuIGw9dm9pZCAwLGM9dm9pZCAwLHA9ZnVuY3Rpb24oKXt2YXIgbCxjLGYscCxoLHksYjtyZXR1cm4gcih0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOm89bi5kYXRhLHM9by51cmwsYT1vLnRpbWVvdXQsaT1mdW5jdGlvbihlLHIpe3ZhciB0PXt9O2Zvcih2YXIgbiBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiZyLmluZGV4T2Yobik8MCYmKHRbbl09ZVtuXSk7aWYobnVsbCE9ZSYmImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBvPTA7Zm9yKG49T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtvPG4ubGVuZ3RoO28rKylyLmluZGV4T2YobltvXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsbltvXSkmJih0W25bb11dPWVbbltvXV0pfXJldHVybiB0fShvLFsidXJsIiwidGltZW91dCJdKSx1PW4ucG9ydHNbMF0sci5sYWJlbD0xO2Nhc2UgMTppZihyLnRyeXMucHVzaChbMSw3LCw4XSksIShjPUpTT04ucGFyc2UoaS5ib2R5KSkucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09Yy5ncmFudF90eXBlKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoIlRoZSB3ZWIgd29ya2VyIGlzIG1pc3NpbmcgdGhlIHJlZnJlc2ggdG9rZW4iKTtpLmJvZHk9SlNPTi5zdHJpbmdpZnkoZShlKHt9LGMpLHtyZWZyZXNoX3Rva2VuOnR9KSl9Zj1uZXcgQWJvcnRDb250cm9sbGVyLHA9Zi5zaWduYWwsaD12b2lkIDAsci5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gci50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKHY9YSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSx2KX0pKSksZmV0Y2gocyxlKGUoe30saSkse3NpZ25hbDpwfSkpXSldO2Nhc2UgMzpyZXR1cm4gaD1yLnNlbnQoKSxbMyw1XTtjYXNlIDQ6cmV0dXJuIHk9ci5zZW50KCksdS5wb3N0TWVzc2FnZSh7ZXJyb3I6eS5tZXNzYWdlfSksWzJdO2Nhc2UgNTpyZXR1cm4gaD9bNCxoLmpzb24oKV06KGYuYWJvcnQoKSxbMl0pO2Nhc2UgNjpyZXR1cm4obD1yLnNlbnQoKSkucmVmcmVzaF90b2tlbj8odD1sLnJlZnJlc2hfdG9rZW4sZGVsZXRlIGwucmVmcmVzaF90b2tlbik6dD1udWxsLHUucG9zdE1lc3NhZ2Uoe29rOmgub2ssanNvbjpsfSksWzMsOF07Y2FzZSA3OnJldHVybiBiPXIuc2VudCgpLHUucG9zdE1lc3NhZ2Uoe29rOiExLGpzb246e2Vycm9yX2Rlc2NyaXB0aW9uOmIubWVzc2FnZX19KSxbMyw4XTtjYXNlIDg6cmV0dXJuWzJdfXZhciB2fSkpfSxuZXcoKGY9dm9pZCAwKXx8KGY9UHJvbWlzZSkpKChmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIHQoZSl7dHJ5e28ocC5uZXh0KGUpKX1jYXRjaChlKXtyKGUpfX1mdW5jdGlvbiBuKGUpe3RyeXtvKHAudGhyb3coZSkpfWNhdGNoKGUpe3IoZSl9fWZ1bmN0aW9uIG8ocil7ci5kb25lP2Uoci52YWx1ZSk6bmV3IGYoKGZ1bmN0aW9uKGUpe2Uoci52YWx1ZSl9KSkudGhlbih0LG4pfW8oKHA9cC5hcHBseShsLGN8fFtdKSkubmV4dCgpKX0pKX0pKTsKCg==",null,!1),new Worker(Ms,e)}),As=new Gr,$s={memory:function(){return(new ms).enclosedCache},localstorage:function(){return new vs}},Ds=function(e){return $s[e]},Is=function(){function e(e){var t,n;if(this.options=e,function(){if(!ls())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===us())throw new Error("\n      auth0-spa-js must run on a secure origin.\n      See https://github.com/auth0/auth0-spa-js/blob/master/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin \n      for more information.\n    ")}(),this.cacheLocation=e.cacheLocation||"memory",!Ds(this.cacheLocation))throw new Error('Invalid cache location "'+this.cacheLocation+'"');this.cache=Ds(this.cacheLocation)(),this.scope=this.options.scope,this.transactionManager=new xs,this.domainUrl="https://"+this.options.domain,this.tokenIssuer=this.options.issuer?"https://"+this.options.issuer+"/":this.domainUrl+"/",this.defaultScope=ds("openid",void 0!==(null===(n=null===(t=this.options)||void 0===t?void 0:t.advancedOptions)||void 0===n?void 0:n.defaultScope)?this.options.advancedOptions.defaultScope:"openid profile email"),this.options.useRefreshTokens&&(this.scope=ds(this.scope,"offline_access")),window.Worker&&this.options.useRefreshTokens&&"memory"===this.cacheLocation&&!/Trident.*rv:11\.0/.test(navigator.userAgent)&&(this.worker=new Os)}return e.prototype._url=function(e){var t=encodeURIComponent(btoa(JSON.stringify({name:"auth0-spa-js",version:"1.8.1"})));return""+this.domainUrl+e+"&auth0Client="+t},e.prototype._getParams=function(e,t,n,i,o){var r=this.options,s=(r.domain,r.leeway,r.useRefreshTokens,r.cacheLocation,r.advancedOptions,jt(r,["domain","leeway","useRefreshTokens","cacheLocation","advancedOptions"]));return Ht(Ht(Ht({},s),e),{scope:ds(this.defaultScope,this.scope,e.scope),response_type:"code",response_mode:"query",state:t,nonce:n,redirect_uri:o||this.options.redirect_uri,code_challenge:i,code_challenge_method:"S256"})},e.prototype._authorizeUrl=function(e){return this._url("/authorize?"+ts(e))},e.prototype._verifyIdToken=function(e,t){return function(e){if(!e.id_token)throw new Error("ID token is required but missing");var t=function(e){var t=e.split("."),n=t[0],i=t[1],o=t[2];if(3!==t.length||!n||!i||!o)throw new Error("ID token could not be decoded");var r=JSON.parse(is(i)),s={__raw:e},a={};return Object.keys(r).forEach((function(e){s[e]=r[e],Ls.includes(e)||(a[e]=r[e])})),{encoded:{header:n,payload:i,signature:o},header:JSON.parse(is(n)),claims:s,user:a}}(e.id_token);if(!t.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(t.claims.iss!==e.iss)throw new Error('Issuer (iss) claim mismatch in the ID token; expected "'+e.iss+'", found "'+t.claims.iss+'"');if(!t.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==t.header.alg)throw new Error('Signature algorithm of "'+t.header.alg+'" is not supported. Expected the ID token to be signed with "RS256".');if(!t.claims.aud||"string"!=typeof t.claims.aud&&!Array.isArray(t.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e.aud))throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+e.aud+'" but was not one of "'+t.claims.aud.join(", ")+'"');if(t.claims.aud.length>1){if(!t.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(t.claims.azp!==e.aud)throw new Error('Authorized Party (azp) claim mismatch in the ID token; expected "'+e.aud+'", found "'+t.claims.azp+'"')}}else if(t.claims.aud!==e.aud)throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+e.aud+'" but found "'+t.claims.aud+'"');if(e.nonce){if(!t.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(t.claims.nonce!==e.nonce)throw new Error('Nonce (nonce) claim mismatch in the ID token; expected "'+e.nonce+'", found "'+t.claims.nonce+'"')}if(e.max_age&&!Ts(t.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(!Ts(t.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!Ts(t.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");var n=e.leeway||60,i=new Date,o=new Date(0),r=new Date(0),s=new Date(0);if(s.setUTCSeconds((parseInt(t.claims.auth_time)+e.max_age)/1e3+n),o.setUTCSeconds(t.claims.exp+n),r.setUTCSeconds(t.claims.nbf-n),i>o)throw new Error("Expiration Time (exp) claim error in the ID token; current time ("+i+") is after expiration time ("+o+")");if(Ts(t.claims.nbf)&&i<r)throw new Error("Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Currrent time ("+i+") is before "+r);if(Ts(t.claims.auth_time)&&i>s)throw new Error("Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Currrent time ("+i+") is after last auth at "+s);return t}({iss:this.tokenIssuer,aud:this.options.client_id,id_token:e,nonce:t,leeway:this.options.leeway,max_age:this._parseNumber(this.options.max_age)})},e.prototype._parseNumber=function(e){return"string"!=typeof e?e:parseInt(e,10)||void 0},e.prototype.buildAuthorizeUrl=function(e){return void 0===e&&(e={}),Wt(this,void 0,void 0,(function(){var t,n,i,o,r,s,a,c,l,u,h;return Ft(this,(function(d){switch(d.label){case 0:return t=e.redirect_uri,n=e.appState,i=jt(e,["redirect_uri","appState"]),o=es(Qr()),r=es(Qr()),s=Qr(),[4,ns(s)];case 1:return a=d.sent(),c=os(a),l=e.fragment?"#"+e.fragment:"",u=this._getParams(i,o,r,c,t),h=this._authorizeUrl(u),this.transactionManager.create(o,{nonce:r,code_verifier:s,appState:n,scope:u.scope,audience:u.audience||"default",redirect_uri:u.redirect_uri}),[2,h+l]}}))}))},e.prototype.loginWithPopup=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Wt(this,void 0,void 0,(function(){var n,i,o,r,s,a,c,l,u,h,d,f;return Ft(this,(function(p){switch(p.label){case 0:return n=jt(e,[]),i=es(Qr()),o=es(Qr()),r=Qr(),[4,ns(r)];case 1:return s=p.sent(),a=os(s),c=this._getParams(n,i,o,a,this.options.redirect_uri||window.location.origin),l=this._authorizeUrl(Ht(Ht({},c),{response_mode:"web_message"})),[4,Jr(l,Ht(Ht({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}))];case 2:if(u=p.sent(),i!==u.state)throw new Error("Invalid state");return[4,cs({baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:r,code:u.code,grant_type:"authorization_code",redirect_uri:c.redirect_uri},this.worker)];case 3:return h=p.sent(),d=this._verifyIdToken(h.id_token,o),f=Ht(Ht({},h),{decodedToken:d,scope:c.scope,audience:c.audience||"default",client_id:this.options.client_id}),this.cache.save(f),Ss("auth0.is.authenticated",!0,{daysUntilExpire:1}),[2]}}))}))},e.prototype.getUser=function(e){return void 0===e&&(e={audience:this.options.audience||"default",scope:this.scope||this.defaultScope}),Wt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){return e.scope=ds(this.defaultScope,e.scope),[2,(t=this.cache.get(Ht({client_id:this.options.client_id},e)))&&t.decodedToken&&t.decodedToken.user]}))}))},e.prototype.getIdTokenClaims=function(e){return void 0===e&&(e={audience:this.options.audience||"default",scope:this.scope||this.defaultScope}),Wt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){return e.scope=ds(this.defaultScope,this.scope,e.scope),[2,(t=this.cache.get(Ht({client_id:this.options.client_id},e)))&&t.decodedToken&&t.decodedToken.claims]}))}))},e.prototype.loginWithRedirect=function(e){return void 0===e&&(e={}),Wt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:return[4,this.buildAuthorizeUrl(e)];case 1:return t=n.sent(),window.location.assign(t),[2]}}))}))},e.prototype.handleRedirectCallback=function(e){return void 0===e&&(e=window.location.href),Wt(this,void 0,void 0,(function(){var t,n,i,o,r,s,a,c,l,u,h;return Ft(this,(function(d){switch(d.label){case 0:if(0===(t=e.split("?").slice(1)).length)throw new Error("There are no query params available for parsing.");if(n=function(e){e.indexOf("#")>-1&&(e=e.substr(0,e.indexOf("#")));var t=e.split("&"),n={};return t.forEach((function(e){var t=e.split("="),i=t[0],o=t[1];n[i]=decodeURIComponent(o)})),Ht(Ht({},n),{expires_in:parseInt(n.expires_in)})}(t.join("")),i=n.state,o=n.code,r=n.error,s=n.error_description,!(a=this.transactionManager.get(i)))throw new Error("Invalid state");if(r)throw this.transactionManager.remove(i),new Rs(r,s,i,a.appState);return this.transactionManager.remove(i),c={baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:a.code_verifier,grant_type:"authorization_code",code:o},void 0!==a.redirect_uri&&(c.redirect_uri=a.redirect_uri),[4,cs(c,this.worker)];case 1:return l=d.sent(),u=this._verifyIdToken(l.id_token,a.nonce),h=Ht(Ht({},l),{decodedToken:u,audience:a.audience,scope:a.scope,client_id:this.options.client_id}),this.cache.save(h),Ss("auth0.is.authenticated",!0,{daysUntilExpire:1}),[2,{appState:a.appState}]}}))}))},e.prototype.getTokenSilently=function(e){return void 0===e&&(e={}),Wt(this,void 0,void 0,(function(){var t,n,i,o,r,s;return Ft(this,(function(a){switch(a.label){case 0:t=Ht({audience:this.options.audience,scope:ds(this.defaultScope,this.scope,e.scope),ignoreCache:!1},e),n=t.ignoreCache,i=jt(t,["ignoreCache"]),a.label=1;case 1:return a.trys.push([1,7,8,10]),!n&&(o=this.cache.get({scope:i.scope,audience:i.audience||"default",client_id:this.options.client_id}))&&o.access_token?[2,o.access_token]:[4,As.acquireLock("auth0.lock.getTokenSilently",5e3)];case 2:return a.sent(),!this.options.useRefreshTokens||e.audience?[3,4]:[4,this._getTokenUsingRefreshToken(i)];case 3:return s=a.sent(),[3,6];case 4:return[4,this._getTokenFromIFrame(i)];case 5:s=a.sent(),a.label=6;case 6:return r=s,this.cache.save(Ht({client_id:this.options.client_id},r)),Ss("auth0.is.authenticated",!0,{daysUntilExpire:1}),[2,r.access_token];case 7:throw a.sent();case 8:return[4,As.releaseLock("auth0.lock.getTokenSilently")];case 9:return a.sent(),[7];case 10:return[2]}}))}))},e.prototype.getTokenWithPopup=function(e,t){return void 0===e&&(e={audience:this.options.audience,scope:this.scope||this.defaultScope}),void 0===t&&(t=Zr),Wt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return e.scope=ds(this.defaultScope,this.scope,e.scope),[4,this.loginWithPopup(e,t)];case 1:return n.sent(),[2,this.cache.get({scope:e.scope,audience:e.audience||"default",client_id:this.options.client_id}).access_token]}}))}))},e.prototype.isAuthenticated=function(){return Wt(this,void 0,void 0,(function(){return Ft(this,(function(e){switch(e.label){case 0:return[4,this.getUser()];case 1:return[2,!!e.sent()]}}))}))},e.prototype.logout=function(e){void 0===e&&(e={}),null!==e.client_id?e.client_id=e.client_id||this.options.client_id:delete e.client_id;var t=e.federated,n=e.localOnly,i=jt(e,["federated","localOnly"]);if(n&&t)throw new Error("It is invalid to set both the `federated` and `localOnly` options to `true`");if(this.cache.clear(),ks("auth0.is.authenticated"),!n){var o=t?"&federated":"",r=this._url("/v2/logout?"+ts(i));window.location.assign(""+r+o)}},e.prototype._getTokenFromIFrame=function(e){return Wt(this,void 0,void 0,(function(){var t,n,i,o,r,s,a,c,l,u,h;return Ft(this,(function(d){switch(d.label){case 0:return t=es(Qr()),n=es(Qr()),i=Qr(),[4,ns(i)];case 1:return o=d.sent(),r=os(o),s=this._getParams(e,t,n,r,e.redirect_uri||this.options.redirect_uri||window.location.origin),a=this._authorizeUrl(Ht(Ht({},s),{prompt:"none",response_mode:"web_message"})),c=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,[4,(f=a,p=this.domainUrl,v=c,void 0===v&&(v=60),new Promise((function(e,t){var n=window.document.createElement("iframe");n.setAttribute("width","0"),n.setAttribute("height","0"),n.style.display="none";var i=function(){window.document.body.contains(n)&&window.document.body.removeChild(n)},o=setTimeout((function(){t(Xr),i()}),1e3*v),r=function(n){if(n.origin==p&&n.data&&"authorization_response"===n.data.type){var s=n.source;s&&s.close(),n.data.response.error?t(n.data.response):e(n.data.response),clearTimeout(o),window.removeEventListener("message",r,!1),setTimeout(i,2e3)}};window.addEventListener("message",r,!1),window.document.body.appendChild(n),n.setAttribute("src",f)})))];case 2:if(l=d.sent(),t!==l.state)throw new Error("Invalid state");return[4,cs({baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:i,code:l.code,grant_type:"authorization_code",redirect_uri:s.redirect_uri},this.worker)];case 3:return u=d.sent(),h=this._verifyIdToken(u.id_token,n),[2,Ht(Ht({},u),{decodedToken:h,scope:s.scope,audience:s.audience||"default"})]}var f,p,v}))}))},e.prototype._getTokenUsingRefreshToken=function(e){return Wt(this,void 0,void 0,(function(){var t,n,i,o,r;return Ft(this,(function(s){switch(s.label){case 0:return e.scope=ds(this.defaultScope,this.scope,e.scope),(t=this.cache.get({scope:e.scope,audience:e.audience||"default",client_id:this.options.client_id}))&&t.refresh_token||this.worker?[3,2]:[4,this._getTokenFromIFrame(e)];case 1:return[2,s.sent()];case 2:n=e.redirect_uri||this.options.redirect_uri||window.location.origin,s.label=3;case 3:return s.trys.push([3,5,,8]),[4,cs({baseUrl:this.domainUrl,client_id:this.options.client_id,grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:n},this.worker)];case 4:return i=s.sent(),[3,8];case 5:return"The web worker is missing the refresh token"!==(o=s.sent()).message?[3,7]:[4,this._getTokenFromIFrame(e)];case 6:return[2,s.sent()];case 7:throw o;case 8:return r=this._verifyIdToken(i.id_token),[2,Ht(Ht({},i),{decodedToken:r,scope:e.scope,audience:e.audience||"default"})]}}))}))},e}();const Ps=He(!0),Bs=He(!1),Hs=He(""),js=He({}),Ws=He(null),Fs={};function Ns(e){let t=null,n=void 0;W(async()=>{t=await function(e){return Wt(this,void 0,void 0,(function(){var t,n;return Ft(this,(function(i){switch(i.label){case 0:if("memory"===(t=new Is(e)).cacheLocation&&!Cs("auth0.is.authenticated"))return[2,t];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.getTokenSilently()];case 2:return i.sent(),[3,4];case 3:if("login_required"!==(n=i.sent()).error)throw n;return[3,4];case 4:return[2,t]}}))}))}(e);const i=new URLSearchParams(window.location.search);i.has("error")&&Ws.set(new Error(i.get("error_description"))),i.has("code")&&(await t.handleRedirectCallback(),window.history.replaceState({},document.title,"/"),Ws.set(null));const o=await t.isAuthenticated();if(Bs.set(o),o){js.set(await t.getUser());const i=await t.getTokenSilently(e.audience);console.log("GET TOKEN SILENTLY "+i),Hs.set(i),n=setInterval(async()=>{Hs.set(await t.getTokenSilently(e.audience))},36e6)}return Ps.set(!1),()=>{n&&clearInterval(n)}});const i={isLoading:Ps,isAuthenticated:Bs,authToken:Hs,authError:Ws,login:async e=>{await t.loginWithRedirect({redirect_uri:e||window.location.origin,prompt:"login"})},logout:async()=>{t.logout({returnTo:window.location.origin})},userInfo:js};return q(Fs,i),i}function Us(){return z(Fs)}var qs=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}},zs=Object.prototype.toString;function Ys(e){return"[object Array]"===zs.call(e)}function Vs(e){return void 0===e}function Ks(e){return null!==e&&"object"==typeof e}function Gs(e){return"[object Function]"===zs.call(e)}function Zs(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Ys(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var Xs={isArray:Ys,isArrayBuffer:function(e){return"[object ArrayBuffer]"===zs.call(e)},isBuffer:function(e){return null!==e&&!Vs(e)&&null!==e.constructor&&!Vs(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Ks,isUndefined:Vs,isDate:function(e){return"[object Date]"===zs.call(e)},isFile:function(e){return"[object File]"===zs.call(e)},isBlob:function(e){return"[object Blob]"===zs.call(e)},isFunction:Gs,isStream:function(e){return Ks(e)&&Gs(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Zs,merge:function e(){var t={};function n(n,i){"object"==typeof t[i]&&"object"==typeof n?t[i]=e(t[i],n):t[i]=n}for(var i=0,o=arguments.length;i<o;i++)Zs(arguments[i],n);return t},deepMerge:function e(){var t={};function n(n,i){"object"==typeof t[i]&&"object"==typeof n?t[i]=e(t[i],n):t[i]="object"==typeof n?e({},n):n}for(var i=0,o=arguments.length;i<o;i++)Zs(arguments[i],n);return t},extend:function(e,t,n){return Zs(t,(function(t,i){e[i]=n&&"function"==typeof t?qs(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function Js(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Qs=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(Xs.isURLSearchParams(t))i=t.toString();else{var o=[];Xs.forEach(t,(function(e,t){null!=e&&(Xs.isArray(e)?t+="[]":e=[e],Xs.forEach(e,(function(e){Xs.isDate(e)?e=e.toISOString():Xs.isObject(e)&&(e=JSON.stringify(e)),o.push(Js(t)+"="+Js(e))})))})),i=o.join("&")}if(i){var r=e.indexOf("#");-1!==r&&(e=e.slice(0,r)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e};function ea(){this.handlers=[]}ea.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},ea.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},ea.prototype.forEach=function(e){Xs.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var ta=ea,na=function(e,t,n){return Xs.forEach(n,(function(n){e=n(e,t)})),e},ia=function(e){return!(!e||!e.__CANCEL__)},oa=function(e,t){Xs.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))},ra=function(e,t,n,i,o){return function(e,t,n,i,o){return e.config=t,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,i,o)},sa=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],aa=Xs.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=Xs.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},ca=Xs.isStandardBrowserEnv()?{write:function(e,t,n,i,o,r){var s=[];s.push(e+"="+encodeURIComponent(t)),Xs.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Xs.isString(i)&&s.push("path="+i),Xs.isString(o)&&s.push("domain="+o),!0===r&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},la=function(e){return new Promise((function(t,n){var i=e.data,o=e.headers;Xs.isFormData(i)&&delete o["Content-Type"];var r=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password||"";o.Authorization="Basic "+btoa(s+":"+a)}var c,l,u=(c=e.baseURL,l=e.url,c&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(l)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(c,l):l);if(r.open(e.method.toUpperCase(),Qs(u,e.params,e.paramsSerializer),!0),r.timeout=e.timeout,r.onreadystatechange=function(){if(r&&4===r.readyState&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in r?function(e){var t,n,i,o={};return e?(Xs.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=Xs.trim(e.substr(0,i)).toLowerCase(),n=Xs.trim(e.substr(i+1)),t){if(o[t]&&sa.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}(r.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?r.response:r.responseText,status:r.status,statusText:r.statusText,headers:i,config:e,request:r};!function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(ra("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,o),r=null}},r.onabort=function(){r&&(n(ra("Request aborted",e,"ECONNABORTED",r)),r=null)},r.onerror=function(){n(ra("Network Error",e,null,r)),r=null},r.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(ra(t,e,"ECONNABORTED",r)),r=null},Xs.isStandardBrowserEnv()){var h=ca,d=(e.withCredentials||aa(u))&&e.xsrfCookieName?h.read(e.xsrfCookieName):void 0;d&&(o[e.xsrfHeaderName]=d)}if("setRequestHeader"in r&&Xs.forEach(o,(function(e,t){void 0===i&&"content-type"===t.toLowerCase()?delete o[t]:r.setRequestHeader(t,e)})),Xs.isUndefined(e.withCredentials)||(r.withCredentials=!!e.withCredentials),e.responseType)try{r.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&r.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&r.upload&&r.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){r&&(r.abort(),n(e),r=null)})),void 0===i&&(i=null),r.send(i)}))},ua={"Content-Type":"application/x-www-form-urlencoded"};function ha(e,t){!Xs.isUndefined(e)&&Xs.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var da,fa={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(da=la),da),transformRequest:[function(e,t){return oa(t,"Accept"),oa(t,"Content-Type"),Xs.isFormData(e)||Xs.isArrayBuffer(e)||Xs.isBuffer(e)||Xs.isStream(e)||Xs.isFile(e)||Xs.isBlob(e)?e:Xs.isArrayBufferView(e)?e.buffer:Xs.isURLSearchParams(e)?(ha(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Xs.isObject(e)?(ha(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};fa.headers={common:{Accept:"application/json, text/plain, */*"}},Xs.forEach(["delete","get","head"],(function(e){fa.headers[e]={}})),Xs.forEach(["post","put","patch"],(function(e){fa.headers[e]=Xs.merge(ua)}));var pa=fa;function va(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var ma=function(e){return va(e),e.headers=e.headers||{},e.data=na(e.data,e.headers,e.transformRequest),e.headers=Xs.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Xs.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||pa.adapter)(e).then((function(t){return va(e),t.data=na(t.data,t.headers,e.transformResponse),t}),(function(t){return ia(t)||(va(e),t&&t.response&&(t.response.data=na(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},_a=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],r=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];Xs.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),Xs.forEach(o,(function(i){Xs.isObject(t[i])?n[i]=Xs.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:Xs.isObject(e[i])?n[i]=Xs.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),Xs.forEach(r,(function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])}));var s=i.concat(o).concat(r),a=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return Xs.forEach(a,(function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])})),n};function ga(e){this.defaults=e,this.interceptors={request:new ta,response:new ta}}ga.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=_a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[ma,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},ga.prototype.getUri=function(e){return e=_a(this.defaults,e),Qs(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Xs.forEach(["delete","get","head","options"],(function(e){ga.prototype[e]=function(t,n){return this.request(Xs.merge(n||{},{method:e,url:t}))}})),Xs.forEach(["post","put","patch"],(function(e){ga.prototype[e]=function(t,n,i){return this.request(Xs.merge(i||{},{method:e,url:t,data:n}))}}));var ya=ga;function ba(e){this.message=e}ba.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ba.prototype.__CANCEL__=!0;var wa=ba;function Ca(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new wa(e),t(n.reason))}))}Ca.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Ca.source=function(){var e;return{token:new Ca((function(t){e=t})),cancel:e}};var Sa=Ca;function ka(e){var t=new ya(e),n=qs(ya.prototype.request,t);return Xs.extend(n,ya.prototype,t),Xs.extend(n,t),n}var Ea=ka(pa);Ea.Axios=ya,Ea.create=function(e){return ka(_a(Ea.defaults,e))},Ea.Cancel=wa,Ea.CancelToken=Sa,Ea.isCancel=ia,Ea.all=function(e){return Promise.all(e)},Ea.spread=function(e){return function(t){return e.apply(null,t)}};var xa=Ea,Ta=Ea;xa.default=Ta;var La=xa;function Ra(e,t){const n=setInterval(e,t);N(()=>{clearInterval(n)})}function Ma(e,t,n,i){La.post("/api/newcharacter",t,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}function Oa(e,t,n){La.get("/api/characters",{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>t(e.data)).catch(e=>n(e))}function Aa(e,t){La.get("/api/templates/characters",{mode:"no-cors",credentials:"same-origin"}).then(t=>e(t.data)).catch(e=>t(e))}const{console:$a}=ue,Da="src/characters/CharacterCreator.svelte";function Ia(e,t,n){const i=e.slice();return i[23]=t[n],i}function Pa(e){let t,n,i,o,r=e[2];xe(r);let s=[];for(let t=0;t<r.length;t+=1)s[t]=Ba(Ia(e,r,t));const c=e=>le(s[e],1,1,()=>{s[e]=null}),l={c:function(){t=k("p"),t.textContent="Select a template which fits you most, you can change starting\n        attributes as well",n=T(),i=k("div");for(let e=0;e<s.length;e+=1)s[e].c();a(t,Da,89,6,1905),Se(i,"class","row"),a(i,Da,93,6,2024)},m:function(e,r){be(e,t,r),be(e,n,r),be(e,i,r);for(let e=0;e<s.length;e+=1)s[e].m(i,null);o=!0},p:function(e,t){if(12&t){let n;for(r=e[2],xe(r),n=0;n<r.length;n+=1){const o=Ia(e,r,n);s[n]?(s[n].p(o,t),ce(s[n],1)):(s[n]=Ba(o),s[n].c(),ce(s[n],1),s[n].m(i,null))}for(se(),n=r.length;n<s.length;n+=1)c(n);ae()}},i:function(e){if(!o){for(let e=0;e<r.length;e+=1)ce(s[e]);o=!0}},o:function(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)le(s[e]);o=!1},d:function(e){e&&we(t),e&&we(n),e&&we(i),S(s,e)}};return ge("SvelteRegisterBlock",{block:l,id:Pa.name,type:"if",source:"(89:4) {#if !$store.templateSelected}",ctx:e}),l}function Ba(e){let t,n,i;function o(...t){return e[20](e[23],...t)}const r=new It({props:{name:e[23].name,description:e[23].description,created:e[23].created,attributes:e[23].attributes,templateId:e[23].templateId,callback:o},$$inline:!0}),s={c:function(){t=k("div"),fe(r.$$.fragment),n=T(),Se(t,"class","col s4"),a(t,Da,95,10,2092)},m:function(e,o){be(e,t,o),pe(r,t,null),ye(t,n),i=!0},p:function(t,n){e=t;const i={};4&n&&(i.name=e[23].name),4&n&&(i.description=e[23].description),4&n&&(i.created=e[23].created),4&n&&(i.attributes=e[23].attributes),4&n&&(i.templateId=e[23].templateId),4&n&&(i.callback=o),r.$set(i)},i:function(e){i||(ce(r.$$.fragment,e),i=!0)},o:function(e){le(r.$$.fragment,e),i=!1},d:function(e){e&&we(t),ve(r)}};return ge("SvelteRegisterBlock",{block:s,id:Ba.name,type:"each",source:"(95:8) {#each $templates as character}",ctx:e}),s}function Ha(e){let t,n;const i=new It({props:{name:e[1].name,description:e[1].description,created:e[1].character.created,attributes:e[1].character.attributes},$$inline:!0}),o={c:function(){t=k("div"),fe(i.$$.fragment),Se(t,"class","col s4"),a(t,Da,120,8,2914)},m:function(e,o){be(e,t,o),pe(i,t,null),n=!0},p:function(e,t){const n={};2&t&&(n.name=e[1].name),2&t&&(n.description=e[1].description),2&t&&(n.created=e[1].character.created),2&t&&(n.attributes=e[1].character.attributes),i.$set(n)},i:function(e){n||(ce(i.$$.fragment,e),n=!0)},o:function(e){le(i.$$.fragment,e),n=!1},d:function(e){e&&we(t),ve(i)}};return ge("SvelteRegisterBlock",{block:o,id:Ha.name,type:"if",source:"(120:6) {#if $store.templateSelected}",ctx:e}),o}function ja(e){let t,n,i,o,r,s,c,l,h,d,f,p,v,m,_,g,y,b,w,C,S,E,x,L,R=!e[1].templateSelected&&Pa(e),M=e[1].templateSelected&&Ha(e);const O={c:function(){t=k("div"),n=k("div"),i=k("h4"),i.textContent="Create new Character",o=T(),R&&R.c(),r=T(),s=k("div"),M&&M.c(),c=T(),l=k("div"),h=k("div"),d=k("input"),f=T(),p=k("label"),p.textContent="Name",v=T(),m=k("div"),_=k("input"),g=T(),y=k("label"),y.textContent="Description",b=T(),w=k("div"),C=k("button"),C.textContent="Cancel",S=T(),E=k("button"),E.textContent="Create",a(i,Da,86,4,1833),Se(d,"id","name"),Se(d,"type","text"),Se(d,"class","validate svelte-zc7mv9"),a(d,Da,132,10,3260),Se(p,"for","name"),Se(p,"class","active"),a(p,Da,138,10,3404),Se(h,"class","input-field"),a(h,Da,131,8,3224),Se(_,"id","description"),Se(_,"type","text"),Se(_,"class","svelte-zc7mv9"),a(_,Da,142,10,3510),Se(y,"for","description"),Se(y,"class","active"),a(y,Da,147,10,3639),Se(m,"class","input-field"),a(m,Da,141,8,3474),Se(l,"class","col s8"),a(l,Da,129,6,3194),Se(s,"class","row"),a(s,Da,118,4,2852),Se(n,"class","modal-content"),a(n,Da,85,2,1801),Se(C,"href","#!"),Se(C,"class","modal-close waves-effect waves-red btn"),a(C,Da,153,4,3780),Se(E,"href","#!"),Se(E,"class","modal-close waves-effect waves-green btn"),a(E,Da,159,4,3900),Se(w,"class","modal-footer"),a(w,Da,152,2,3749),Se(t,"id","modal1"),Se(t,"class","modal svelte-zc7mv9"),a(t,Da,84,0,1767)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,k,T){be(a,t,k),ye(t,n),ye(n,i),ye(n,o),R&&R.m(n,null),ye(n,r),ye(n,s),M&&M.m(s,null),ye(s,c),ye(s,l),ye(l,h),ye(h,d),A(d,e[1].name),ye(h,f),ye(h,p),ye(l,v),ye(l,m),ye(m,_),A(_,e[1].description),ye(m,g),ye(m,y),ye(t,b),ye(t,w),ye(w,C),ye(w,S),ye(w,E),x=!0,T&&u(L),L=[Ce(d,"input",e[21]),Ce(_,"input",e[22]),Ce(E,"click",e[9],!1,!1,!1)]},p:function(e,[t]){e[1].templateSelected?R&&(se(),le(R,1,1,()=>{R=null}),ae()):R?(R.p(e,t),2&t&&ce(R,1)):(R=Pa(e),R.c(),ce(R,1),R.m(n,r)),e[1].templateSelected?M?(M.p(e,t),2&t&&ce(M,1)):(M=Ha(e),M.c(),ce(M,1),M.m(s,c)):M&&(se(),le(M,1,1,()=>{M=null}),ae()),2&t&&d.value!==e[1].name&&A(d,e[1].name),2&t&&_.value!==e[1].description&&A(_,e[1].description)},i:function(e){x||(ce(R),ce(M),x=!0)},o:function(e){le(R),le(M),x=!1},d:function(e){e&&we(t),R&&R.d(),M&&M.d(),u(L)}};return ge("SvelteRegisterBlock",{block:O,id:ja.name,type:"component",source:"",ctx:e}),O}function Wa(e,t,n){let i,o,r,s,a,c,l,u=[],h=[];const d=He({templateSelected:!1,selectedTemplate:0,character:{},name:"unnamed",description:"Describe your new character"});f(d,"store"),v(e,d,e=>n(1,c=e));const{isLoading:p,isAuthenticated:m,login:_,logout:g,authToken:y,authError:b,userInfo:w}=Us();f(p,"isLoading"),v(e,p,e=>n(11,i=e)),f(m,"isAuthenticated"),v(e,m,e=>n(12,o=e)),f(y,"authToken"),v(e,y,e=>n(15,a=e)),f(b,"authError"),v(e,b,e=>n(13,r=e)),f(w,"userInfo"),v(e,w,e=>n(14,s=e));const C=()=>{const e={name:c.name,description:c.description,templateId:c.selectedTemplate};Ma(a,e,e=>console.log("Created character "+e.id),e=>console.log(e))};W(async()=>{document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".modal");M.Modal.init(e,{})})),Aa(e=>{S.set(e)},e=>{console.log(e)})});const S=He([]);f(S,"templates"),v(e,S,e=>n(2,l=e));const k=[];Object.keys(t).forEach(e=>{~k.indexOf(e)||"$$"===e.slice(0,2)||$a.warn(`<CharacterCreator> was created with unknown prop '${e}'`)});let{$$slots:E={},$$scope:x}=t;Te("CharacterCreator",E,[]);let T;return e.$capture_state=()=>({CharacterTemplate:It,onMount:W,writable:He,createAuth:Ns,getAuth:Us,axios:La,onInterval:Ra,getCharacterTemplates:Aa,createNewCharacter:Ma,data:u,topTen:h,store:d,isLoading:p,isAuthenticated:m,login:_,logout:g,authToken:y,authError:b,userInfo:w,create:C,templates:S,state:T,$isLoading:i,$isAuthenticated:o,$authError:r,$userInfo:s,$authToken:a,$store:c,$templates:l}),e.$inject_state=e=>{"data"in e&&(u=e.data),"topTen"in e&&(h=e.topTen),"state"in e&&n(0,T=e.state)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{63488&e.$$.dirty&&n(0,T={isLoading:i,isAuthenticated:o,authError:r,userInfo:s?s.name:null,authToken:a.slice(0,20)})},[T,c,l,d,p,m,y,b,w,C,S,i,o,r,s,a,u,h,_,g,(e,t)=>{d.update(n=>(n.templateSelected=!0,n.selectedTemplate=t,n.character=e,n.name=e.name,n.description=e.description,n))},function(){c.name=this.value,d.set(c)},function(){c.description=this.value,d.set(c)}]}class Fa extends Le{constructor(e){super(e),_e(this,e,Wa,ja,d,{}),ge("SvelteRegisterComponent",{component:this,tagName:"CharacterCreator",options:e,id:ja.name})}}var Na=n(i((function(e,t){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=33)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0;var i=function(){function e(){this._listeners=[],this._disposed=!1}return Object.defineProperty(e.prototype,"event",{get:function(){var e=this;return this._event||(this._event=function(t){return e._listeners.push(t),{dispose:function(){if(!e._disposed)for(var n=0;n<e._listeners.length;n++)if(e._listeners[n]===t)return void e._listeners.splice(n,1)}}}),this._event},enumerable:!1,configurable:!0}),e.prototype.fire=function(e,t){for(var n=[],i=0;i<this._listeners.length;i++)n.push(this._listeners[i]);for(i=0;i<n.length;i++)n[i].call(void 0,e,t)},e.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},e}();t.EventEmitter=i,t.forwardEvent=function(e,t){return e((function(e){return t.fire(e)}))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IUnicodeService=t.IOptionsService=t.ILogService=t.IInstantiationService=t.IDirtyRowService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;var i=n(14);t.IBufferService=i.createDecorator("BufferService"),t.ICoreMouseService=i.createDecorator("CoreMouseService"),t.ICoreService=i.createDecorator("CoreService"),t.ICharsetService=i.createDecorator("CharsetService"),t.IDirtyRowService=i.createDecorator("DirtyRowService"),t.IInstantiationService=i.createDecorator("InstantiationService"),t.ILogService=i.createDecorator("LogService"),t.IOptionsService=i.createDecorator("OptionsService"),t.IUnicodeService=i.createDecorator("UnicodeService")},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.Disposable=void 0;var i=function(){function e(){this._disposables=[],this._isDisposed=!1}return e.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach((function(e){return e.dispose()})),this._disposables.length=0},e.prototype.register=function(e){return this._disposables.push(e),e},e.prototype.unregister=function(e){var t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)},e}();function o(e){e.forEach((function(e){return e.dispose()})),e.length=0}t.Disposable=i,t.disposeArray=o,t.getDisposeArrayDisposable=function(e){return{dispose:function(){return o(e)}}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=256,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;var r=n(8),s=n(3),a=n(6),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=0,t.fg=0,t.bg=0,t.extended=new a.ExtendedAttrs,t.combinedData="",t}return o(t,e),t.fromCharData=function(e){var n=new t;return n.setFromCharData(e),n},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?r.stringFromCodePoint(2097151&this.content):""},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;var t=!1;if(e[s.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){var n=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){var i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(n-55296)+i-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(a.AttributeData);t.CellData=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ISoundService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;var i=n(14);t.ICharSizeService=i.createDecorator("CharSizeService"),t.ICoreBrowserService=i.createDecorator("CoreBrowserService"),t.IMouseService=i.createDecorator("MouseService"),t.IRenderService=i.createDecorator("RenderService"),t.ISelectionService=i.createDecorator("SelectionService"),t.ISoundService=i.createDecorator("SoundService")},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;var i=function(){function e(){this.fg=0,this.bg=0,this.extended=new o}return e.toColorRGB=function(e){return[e>>>16&255,e>>>8&255,255&e]},e.fromColorRGB=function(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},e.prototype.clone=function(){var t=new e;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t},e.prototype.isInverse=function(){return 67108864&this.fg},e.prototype.isBold=function(){return 134217728&this.fg},e.prototype.isUnderline=function(){return 268435456&this.fg},e.prototype.isBlink=function(){return 536870912&this.fg},e.prototype.isInvisible=function(){return 1073741824&this.fg},e.prototype.isItalic=function(){return 67108864&this.bg},e.prototype.isDim=function(){return 134217728&this.bg},e.prototype.getFgColorMode=function(){return 50331648&this.fg},e.prototype.getBgColorMode=function(){return 50331648&this.bg},e.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},e.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},e.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},e.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},e.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},e.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},e.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},e.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},e.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},e.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},e.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},e.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},e.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},e.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},e.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},e.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},e.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},e}();t.AttributeData=i;var o=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=-1),this.underlineStyle=e,this.underlineColor=t}return e.prototype.clone=function(){return new e(this.underlineStyle,this.underlineColor)},e.prototype.isEmpty=function(){return 0===this.underlineStyle},e}();t.ExtendedAttrs=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,n,i){e.addEventListener(t,n,i);var o=!1;return{dispose:function(){o||(o=!0,e.removeEventListener(t,n,i))}}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length);for(var i="",o=t;o<n;++o){var r=e[o];r>65535?(r-=65536,i+=String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):i+=String.fromCharCode(r)}return i};var i=function(){function e(){this._interim=0}return e.prototype.clear=function(){this._interim=0},e.prototype.decode=function(e,t){var n=e.length;if(!n)return 0;var i=0,o=0;this._interim&&(56320<=(a=e.charCodeAt(o++))&&a<=57343?t[i++]=1024*(this._interim-55296)+a-56320+65536:(t[i++]=this._interim,t[i++]=a),this._interim=0);for(var r=o;r<n;++r){var s=e.charCodeAt(r);if(55296<=s&&s<=56319){if(++r>=n)return this._interim=s,i;var a;56320<=(a=e.charCodeAt(r))&&a<=57343?t[i++]=1024*(s-55296)+a-56320+65536:(t[i++]=s,t[i++]=a)}else t[i++]=s}return i},e}();t.StringToUtf32=i;var o=function(){function e(){this.interim=new Uint8Array(3)}return e.prototype.clear=function(){this.interim.fill(0)},e.prototype.decode=function(e,t){var n=e.length;if(!n)return 0;var i,o,r,s,a=0,c=0,l=0;if(this.interim[0]){var u=!1,h=this.interim[0];h&=192==(224&h)?31:224==(240&h)?15:7;for(var d=0,f=void 0;(f=63&this.interim[++d])&&d<4;)h<<=6,h|=f;for(var p=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,v=p-d;l<v;){if(l>=n)return 0;if(128!=(192&(f=e[l++]))){l--,u=!0;break}this.interim[d++]=f,h<<=6,h|=63&f}u||(2===p?h<128?l--:t[a++]=h:3===p?h<2048||h>=55296&&h<=57343||(t[a++]=h):h<65536||h>1114111||(t[a++]=h)),this.interim.fill(0)}for(var m=n-4,_=l;_<n;){for(;!(!(_<m)||128&(i=e[_])||128&(o=e[_+1])||128&(r=e[_+2])||128&(s=e[_+3]));)t[a++]=i,t[a++]=o,t[a++]=r,t[a++]=s,_+=4;if((i=e[_++])<128)t[a++]=i;else if(192==(224&i)){if(_>=n)return this.interim[0]=i,a;if(128!=(192&(o=e[_++]))){_--;continue}if((c=(31&i)<<6|63&o)<128){_--;continue}t[a++]=c}else if(224==(240&i)){if(_>=n)return this.interim[0]=i,a;if(128!=(192&(o=e[_++]))){_--;continue}if(_>=n)return this.interim[0]=i,this.interim[1]=o,a;if(128!=(192&(r=e[_++]))){_--;continue}if((c=(15&i)<<12|(63&o)<<6|63&r)<2048||c>=55296&&c<=57343)continue;t[a++]=c}else if(240==(248&i)){if(_>=n)return this.interim[0]=i,a;if(128!=(192&(o=e[_++]))){_--;continue}if(_>=n)return this.interim[0]=i,this.interim[1]=o,a;if(128!=(192&(r=e[_++]))){_--;continue}if(_>=n)return this.interim[0]=i,this.interim[1]=o,this.interim[2]=r,a;if(128!=(192&(s=e[_++]))){_--;continue}if((c=(7&i)<<18|(63&o)<<12|(63&r)<<6|63&s)<65536||c>1114111)continue;t[a++]=c}}return a},e}();t.Utf8ToUtf32=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR_ATLAS_CELL_SPACING=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0,t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.CHAR_ATLAS_CELL_SPACING=1},function(e,t,n){var i,o,r,s;function a(e){var t=e.toString(16);return t.length<2?"0"+t:t}function c(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=void 0,function(e){e.toCss=function(e,t,n,i){return void 0!==i?"#"+a(e)+a(t)+a(n)+a(i):"#"+a(e)+a(t)+a(n)},e.toRgba=function(e,t,n,i){return void 0===i&&(i=255),(e<<24|t<<16|n<<8|i)>>>0}}(i=t.channels||(t.channels={})),(o=t.color||(t.color={})).blend=function(e,t){var n=(255&t.rgba)/255;if(1===n)return{css:t.css,rgba:t.rgba};var o=t.rgba>>24&255,r=t.rgba>>16&255,s=t.rgba>>8&255,a=e.rgba>>24&255,c=e.rgba>>16&255,l=e.rgba>>8&255,u=a+Math.round((o-a)*n),h=c+Math.round((r-c)*n),d=l+Math.round((s-l)*n);return{css:i.toCss(u,h,d),rgba:i.toRgba(u,h,d)}},o.ensureContrastRatio=function(e,t,n){var i=s.ensureContrastRatio(e.rgba,t.rgba,n);if(i)return s.toColor(i>>24&255,i>>16&255,i>>8&255)},o.opaque=function(e){var t=(255|e.rgba)>>>0,n=s.toChannels(t),o=n[0],r=n[1],a=n[2];return{css:i.toCss(o,r,a),rgba:t}},(t.css||(t.css={})).toColor=function(e){return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0}},function(e){function t(e,t,n){var i=e/255,o=t/255,r=n/255;return.2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(r=t.rgb||(t.rgb={})),function(e){function t(e,t,n){for(var i=e>>24&255,o=e>>16&255,s=e>>8&255,a=t>>24&255,l=t>>16&255,u=t>>8&255,h=c(r.relativeLuminance2(a,u,l),r.relativeLuminance2(i,o,s));h<n&&(a>0||l>0||u>0);)a-=Math.max(0,Math.ceil(.1*a)),l-=Math.max(0,Math.ceil(.1*l)),u-=Math.max(0,Math.ceil(.1*u)),h=c(r.relativeLuminance2(a,u,l),r.relativeLuminance2(i,o,s));return(a<<24|l<<16|u<<8|255)>>>0}function n(e,t,n){for(var i=e>>24&255,o=e>>16&255,s=e>>8&255,a=t>>24&255,l=t>>16&255,u=t>>8&255,h=c(r.relativeLuminance2(a,u,l),r.relativeLuminance2(i,o,s));h<n&&(a<255||l<255||u<255);)a=Math.min(255,a+Math.ceil(.1*(255-a))),l=Math.min(255,l+Math.ceil(.1*(255-l))),u=Math.min(255,u+Math.ceil(.1*(255-u))),h=c(r.relativeLuminance2(a,u,l),r.relativeLuminance2(i,o,s));return(a<<24|l<<16|u<<8|255)>>>0}e.ensureContrastRatio=function(e,i,o){var s=r.relativeLuminance(e>>8),a=r.relativeLuminance(i>>8);if(c(s,a)<o)return a<s?t(e,i,o):n(e,i,o)},e.reduceLuminance=t,e.increaseLuminance=n,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,n){return{css:i.toCss(e,t,n),rgba:i.toRgba(e,t,n)}}}(s=t.rgba||(t.rgba={})),t.toPaddedHex=a,t.contrastRatio=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.isSafari=t.isFirefox=void 0;var i="undefined"==typeof navigator,o=i?"node":navigator.userAgent,r=i?"node":navigator.platform;function s(e,t){return e.indexOf(t)>=0}t.isFirefox=!!~o.indexOf("Firefox"),t.isSafari=/^((?!chrome|android).)*safari/i.test(o),t.isMac=s(["Macintosh","MacIntel","MacPPC","Mac68K"],r),t.isIpad="iPad"===r,t.isIphone="iPhone"===r,t.isWindows=s(["Windows","Win16","Win32","WinCE"],r),t.isLinux=r.indexOf("Linux")>=0},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.C1=t.C0=void 0,function(e){e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="",e.BS="\b",e.HT="\t",e.LF="\n",e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""}(t.C0||(t.C0={})),function(e){e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""}(t.C1||(t.C1={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;var i=n(3),o=n(9),r=n(24),s=n(6),a=n(27),c=n(10),l=function(){function e(e,t,n,i,o,r,s,a){this._container=e,this._alpha=i,this._colors=o,this._rendererId=r,this._bufferService=s,this._optionsService=a,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+t+"-layer"),this._canvas.style.zIndex=n.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return e.prototype.dispose=function(){var e,t;null===(e=this._canvas.parentElement)||void 0===e||e.removeChild(this._canvas),null===(t=this._charAtlas)||void 0===t||t.dispose()},e.prototype._initCanvas=function(){this._ctx=a.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},e.prototype.onOptionsChanged=function(){},e.prototype.onBlur=function(){},e.prototype.onFocus=function(){},e.prototype.onCursorMove=function(){},e.prototype.onGridChanged=function(e,t){},e.prototype.onSelectionChanged=function(e,t,n){},e.prototype.setColors=function(e){this._refreshCharAtlas(e)},e.prototype._setTransparency=function(e){if(e!==this._alpha){var t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},e.prototype._refreshCharAtlas=function(e){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=r.acquireCharAtlas(this._optionsService.options,this._rendererId,e,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},e.prototype.resize=function(e){this._scaledCellWidth=e.scaledCellWidth,this._scaledCellHeight=e.scaledCellHeight,this._scaledCharWidth=e.scaledCharWidth,this._scaledCharHeight=e.scaledCharHeight,this._scaledCharLeft=e.scaledCharLeft,this._scaledCharTop=e.scaledCharTop,this._canvas.width=e.scaledCanvasWidth,this._canvas.height=e.scaledCanvasHeight,this._canvas.style.width=e.canvasWidth+"px",this._canvas.style.height=e.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},e.prototype._fillCells=function(e,t,n,i){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,n*this._scaledCellWidth,i*this._scaledCellHeight)},e.prototype._fillBottomLineAtCells=function(e,t,n){void 0===n&&(n=1),this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,n*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillLeftLineAtCell=function(e,t,n){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio*n,this._scaledCellHeight)},e.prototype._strokeRectAtCell=function(e,t,n,i){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(e*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,n*this._scaledCellWidth-window.devicePixelRatio,i*this._scaledCellHeight-window.devicePixelRatio)},e.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},e.prototype._clearCells=function(e,t,n,i){this._alpha?this._ctx.clearRect(e*this._scaledCellWidth,t*this._scaledCellHeight,n*this._scaledCellWidth,i*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,n*this._scaledCellWidth,i*this._scaledCellHeight))},e.prototype._fillCharTrueColor=function(e,t,n){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="middle",this._clipRow(n),this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},e.prototype._drawChars=function(e,t,n){var r,s,a=this._getContrastColor(e);a||e.isFgRGB()||e.isBgRGB()?this._drawUncachedChars(e,t,n,a):(e.isInverse()?(r=e.isBgDefault()?o.INVERTED_DEFAULT_COLOR:e.getBgColor(),s=e.isFgDefault()?o.INVERTED_DEFAULT_COLOR:e.getFgColor()):(s=e.isBgDefault()?i.DEFAULT_COLOR:e.getBgColor(),r=e.isFgDefault()?i.DEFAULT_COLOR:e.getFgColor()),r+=this._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&r<8?8:0,this._currentGlyphIdentifier.chars=e.getChars()||i.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=e.getCode()||i.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=s,this._currentGlyphIdentifier.fg=r,this._currentGlyphIdentifier.bold=!!e.isBold(),this._currentGlyphIdentifier.dim=!!e.isDim(),this._currentGlyphIdentifier.italic=!!e.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(e,t,n))},e.prototype._drawUncachedChars=function(e,t,n,i){if(this._ctx.save(),this._ctx.font=this._getFont(!!e.isBold(),!!e.isItalic()),this._ctx.textBaseline="middle",e.isInverse())if(i)this._ctx.fillStyle=i.css;else if(e.isBgDefault())this._ctx.fillStyle=c.color.opaque(this._colors.background).css;else if(e.isBgRGB())this._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var r=e.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&r<8&&(r+=8),this._ctx.fillStyle=this._colors.ansi[r].css}else if(i)this._ctx.fillStyle=i.css;else if(e.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(e.isFgRGB())this._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var a=e.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&a<8&&(a+=8),this._ctx.fillStyle=this._colors.ansi[a].css}this._clipRow(n),e.isDim()&&(this._ctx.globalAlpha=o.DIM_OPACITY),this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},e.prototype._clipRow=function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},e.prototype._getFont=function(e,t){return(t?"italic":"")+" "+(e?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},e.prototype._getContrastColor=function(e){if(1!==this._optionsService.options.minimumContrastRatio){var t=this._colors.contrastCache.getColor(e.bg,e.fg);if(void 0!==t)return t||void 0;var n=e.getFgColor(),i=e.getFgColorMode(),o=e.getBgColor(),r=e.getBgColorMode(),s=!!e.isInverse(),a=!!e.isInverse();if(s){var l=n;n=o,o=l;var u=i;i=r,r=u}var h=this._resolveBackgroundRgba(r,o,s),d=this._resolveForegroundRgba(i,n,s,a),f=c.rgba.ensureContrastRatio(h,d,this._optionsService.options.minimumContrastRatio);if(f){var p={css:c.channels.toCss(f>>24&255,f>>16&255,f>>8&255),rgba:f};return this._colors.contrastCache.setColor(e.bg,e.fg,p),p}this._colors.contrastCache.setColor(e.bg,e.fg,null)}},e.prototype._resolveBackgroundRgba=function(e,t,n){switch(e){case 16777216:case 33554432:return this._colors.ansi[t].rgba;case 50331648:return t<<8;case 0:default:return n?this._colors.foreground.rgba:this._colors.background.rgba}},e.prototype._resolveForegroundRgba=function(e,t,n,i){switch(e){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&i&&t<8&&(t+=8),this._colors.ansi[t].rgba;case 50331648:return t<<8;case 0:default:return n?this._colors.background.rgba:this._colors.foreground.rgba}},e}();t.BaseRenderLayer=l},function(e,t,n){function i(e,t,n){t.di$target===t?t.di$dependencies.push({id:e,index:n}):(t.di$dependencies=[{id:e,index:n}],t.di$target=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0,t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e.di$dependencies||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);var n=function(e,t,o){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(n,e,o)};return n.toString=function(){return e},t.serviceRegistry.set(e,n),n}},function(e,t,n){function i(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=e.length),n>=e.length)return e;n=(e.length+n)%e.length,i=i>=e.length?e.length:(e.length+i)%e.length;for(var o=n;o<i;++o)e[o]=t;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.fillFallback=t.fill=void 0,t.fill=function(e,t,n,o){return e.fill?e.fill(t,n,o):i(e,t,n,o)},t.fillFallback=i,t.concat=function(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;var i=n(8),o=n(3),r=n(4),s=n(6);t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);var a=function(){function e(e,t,n){void 0===n&&(n=!1),this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);for(var i=t||r.CellData.fromCharData([0,o.NULL_CELL_CHAR,o.NULL_CELL_WIDTH,o.NULL_CELL_CODE]),s=0;s<e;++s)this.setCell(s,i);this.length=e}return e.prototype.get=function(e){var t=this._data[3*e+0],n=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:n?i.stringFromCodePoint(n):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):n]},e.prototype.set=function(e,t){this._data[3*e+1]=t[o.CHAR_DATA_ATTR_INDEX],t[o.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[o.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[o.CHAR_DATA_WIDTH_INDEX]<<22},e.prototype.getWidth=function(e){return this._data[3*e+0]>>22},e.prototype.hasWidth=function(e){return 12582912&this._data[3*e+0]},e.prototype.getFg=function(e){return this._data[3*e+1]},e.prototype.getBg=function(e){return this._data[3*e+2]},e.prototype.hasContent=function(e){return 4194303&this._data[3*e+0]},e.prototype.getCodePoint=function(e){var t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t},e.prototype.isCombined=function(e){return 2097152&this._data[3*e+0]},e.prototype.getString=function(e){var t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?i.stringFromCodePoint(2097151&t):""},e.prototype.loadCell=function(e,t){var n=3*e;return t.content=this._data[n+0],t.fg=this._data[n+1],t.bg=this._data[n+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t},e.prototype.setCell=function(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg},e.prototype.setCellFromCodePoint=function(e,t,n,i,o,r){268435456&o&&(this._extendedAttrs[e]=r),this._data[3*e+0]=t|n<<22,this._data[3*e+1]=i,this._data[3*e+2]=o},e.prototype.addCodepointToCell=function(e,t){var n=this._data[3*e+0];2097152&n?this._combined[e]+=i.stringFromCodePoint(t):(2097151&n?(this._combined[e]=i.stringFromCodePoint(2097151&n)+i.stringFromCodePoint(t),n&=-2097152,n|=2097152):n=t|1<<22,this._data[3*e+0]=n)},e.prototype.insertCells=function(e,t,n,i){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),t<this.length-e){for(var o=new r.CellData,a=this.length-e-t-1;a>=0;--a)this.setCell(e+t+a,this.loadCell(e+a,o));for(a=0;a<t;++a)this.setCell(e+a,n)}else for(a=e;a<this.length;++a)this.setCell(a,n);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs)},e.prototype.deleteCells=function(e,t,n,i){if(e%=this.length,t<this.length-e){for(var o=new r.CellData,a=0;a<this.length-e-t;++a)this.setCell(e+a,this.loadCell(e+t+a,o));for(a=this.length-t;a<this.length;++a)this.setCell(a,n)}else for(a=e;a<this.length;++a)this.setCell(a,n);e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs)},e.prototype.replaceCells=function(e,t,n,i){for(e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs);e<t&&e<this.length;)this.setCell(e++,n)},e.prototype.resize=function(e,t){if(e!==this.length){if(e>this.length){var n=new Uint32Array(3*e);this.length&&(3*e<this._data.length?n.set(this._data.subarray(0,3*e)):n.set(this._data)),this._data=n;for(var i=this.length;i<e;++i)this.setCell(i,t)}else if(e){(n=new Uint32Array(3*e)).set(this._data.subarray(0,3*e)),this._data=n;var o=Object.keys(this._combined);for(i=0;i<o.length;i++){var r=parseInt(o[i],10);r>=e&&delete this._combined[r]}}else this._data=new Uint32Array(0),this._combined={};this.length=e}},e.prototype.fill=function(e){this._combined={},this._extendedAttrs={};for(var t=0;t<this.length;++t)this.setCell(t,e)},e.prototype.copyFrom=function(e){for(var t in this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={},e._combined)this._combined[t]=e._combined[t];for(var t in this._extendedAttrs={},e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped},e.prototype.clone=function(){var t=new e(0);for(var n in t._data=new Uint32Array(this._data),t.length=this.length,this._combined)t._combined[n]=this._combined[n];for(var n in this._extendedAttrs)t._extendedAttrs[n]=this._extendedAttrs[n];return t.isWrapped=this.isWrapped,t},e.prototype.getTrimmedLength=function(){for(var e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0},e.prototype.copyCellsFrom=function(e,t,n,i,o){var r=e._data;if(o)for(var s=i-1;s>=0;s--)for(var a=0;a<3;a++)this._data[3*(n+s)+a]=r[3*(t+s)+a];else for(s=0;s<i;s++)for(a=0;a<3;a++)this._data[3*(n+s)+a]=r[3*(t+s)+a];var c=Object.keys(e._combined);for(a=0;a<c.length;a++){var l=parseInt(c[a],10);l>=t&&(this._combined[l-t+n]=e._combined[l])}},e.prototype.translateToString=function(e,t,n){void 0===e&&(e=!1),void 0===t&&(t=0),void 0===n&&(n=this.length),e&&(n=Math.min(n,this.getTrimmedLength()));for(var r="";t<n;){var s=this._data[3*t+0],a=2097151&s;r+=2097152&s?this._combined[t]:a?i.stringFromCodePoint(a):o.WHITESPACE_CELL_CHAR,t+=s>>22||1}return r},e}();t.BufferLine=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;var r,s=n(12),a=n(19),c=n(38),l=n(2),u=n(15),h=n(8),d=n(16),f=n(0),p=n(3),v=n(4),m=n(6),_=n(21),g=n(23),y={"(":0,")":1,"*":2,"+":3,"-":1,".":2};function b(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}!function(e){e[e.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",e[e.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(r=t.WindowsOptionsReportType||(t.WindowsOptionsReportType={}));var w=function(){function e(e,t,n,i){this._bufferService=e,this._coreService=t,this._logService=n,this._optionsService=i,this._data=new Uint32Array(0)}return e.prototype.hook=function(e){this._data=new Uint32Array(0)},e.prototype.put=function(e,t,n){this._data=u.concat(this._data,e.subarray(t,n))},e.prototype.unhook=function(e){if(e){var t=h.utf32ToString(this._data);switch(this._data=new Uint32Array(0),t){case'"q':return this._coreService.triggerDataEvent(s.C0.ESC+'P1$r0"q'+s.C0.ESC+"\\");case'"p':return this._coreService.triggerDataEvent(s.C0.ESC+'P1$r61;1"p'+s.C0.ESC+"\\");case"r":var n=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";return this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+n+s.C0.ESC+"\\");case"m":return this._coreService.triggerDataEvent(s.C0.ESC+"P1$r0m"+s.C0.ESC+"\\");case" q":var i={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];return i-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+i+" q"+s.C0.ESC+"\\");default:this._logService.debug("Unknown DCS $q %s",t),this._coreService.triggerDataEvent(s.C0.ESC+"P0$r"+s.C0.ESC+"\\")}}else this._data=new Uint32Array(0)},e}(),C=function(e){function t(t,n,i,o,r,l,u,p,m){void 0===m&&(m=new c.EscapeSequenceParser);var g=e.call(this)||this;g._bufferService=t,g._charsetService=n,g._coreService=i,g._dirtyRowService=o,g._logService=r,g._optionsService=l,g._coreMouseService=u,g._unicodeService=p,g._parser=m,g._parseBuffer=new Uint32Array(4096),g._stringDecoder=new h.StringToUtf32,g._utf8Decoder=new h.Utf8ToUtf32,g._workCell=new v.CellData,g._windowTitle="",g._iconName="",g._windowTitleStack=[],g._iconNameStack=[],g._curAttrData=d.DEFAULT_ATTR_DATA.clone(),g._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone(),g._onRequestBell=new f.EventEmitter,g._onRequestRefreshRows=new f.EventEmitter,g._onRequestReset=new f.EventEmitter,g._onRequestScroll=new f.EventEmitter,g._onRequestSyncScrollBar=new f.EventEmitter,g._onRequestWindowsOptionsReport=new f.EventEmitter,g._onA11yChar=new f.EventEmitter,g._onA11yTab=new f.EventEmitter,g._onCursorMove=new f.EventEmitter,g._onLineFeed=new f.EventEmitter,g._onScroll=new f.EventEmitter,g._onTitleChange=new f.EventEmitter,g.register(g._parser),g._parser.setCsiHandlerFallback((function(e,t){g._logService.debug("Unknown CSI code: ",{identifier:g._parser.identToString(e),params:t.toArray()})})),g._parser.setEscHandlerFallback((function(e){g._logService.debug("Unknown ESC code: ",{identifier:g._parser.identToString(e)})})),g._parser.setExecuteHandlerFallback((function(e){g._logService.debug("Unknown EXECUTE code: ",{code:e})})),g._parser.setOscHandlerFallback((function(e,t,n){g._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:n})})),g._parser.setDcsHandlerFallback((function(e,t,n){"HOOK"===t&&(n=n.toArray()),g._logService.debug("Unknown DCS code: ",{identifier:g._parser.identToString(e),action:t,payload:n})})),g._parser.setPrintHandler((function(e,t,n){return g.print(e,t,n)})),g._parser.setCsiHandler({final:"@"},(function(e){return g.insertChars(e)})),g._parser.setCsiHandler({intermediates:" ",final:"@"},(function(e){return g.scrollLeft(e)})),g._parser.setCsiHandler({final:"A"},(function(e){return g.cursorUp(e)})),g._parser.setCsiHandler({intermediates:" ",final:"A"},(function(e){return g.scrollRight(e)})),g._parser.setCsiHandler({final:"B"},(function(e){return g.cursorDown(e)})),g._parser.setCsiHandler({final:"C"},(function(e){return g.cursorForward(e)})),g._parser.setCsiHandler({final:"D"},(function(e){return g.cursorBackward(e)})),g._parser.setCsiHandler({final:"E"},(function(e){return g.cursorNextLine(e)})),g._parser.setCsiHandler({final:"F"},(function(e){return g.cursorPrecedingLine(e)})),g._parser.setCsiHandler({final:"G"},(function(e){return g.cursorCharAbsolute(e)})),g._parser.setCsiHandler({final:"H"},(function(e){return g.cursorPosition(e)})),g._parser.setCsiHandler({final:"I"},(function(e){return g.cursorForwardTab(e)})),g._parser.setCsiHandler({final:"J"},(function(e){return g.eraseInDisplay(e)})),g._parser.setCsiHandler({prefix:"?",final:"J"},(function(e){return g.eraseInDisplay(e)})),g._parser.setCsiHandler({final:"K"},(function(e){return g.eraseInLine(e)})),g._parser.setCsiHandler({prefix:"?",final:"K"},(function(e){return g.eraseInLine(e)})),g._parser.setCsiHandler({final:"L"},(function(e){return g.insertLines(e)})),g._parser.setCsiHandler({final:"M"},(function(e){return g.deleteLines(e)})),g._parser.setCsiHandler({final:"P"},(function(e){return g.deleteChars(e)})),g._parser.setCsiHandler({final:"S"},(function(e){return g.scrollUp(e)})),g._parser.setCsiHandler({final:"T"},(function(e){return g.scrollDown(e)})),g._parser.setCsiHandler({final:"X"},(function(e){return g.eraseChars(e)})),g._parser.setCsiHandler({final:"Z"},(function(e){return g.cursorBackwardTab(e)})),g._parser.setCsiHandler({final:"`"},(function(e){return g.charPosAbsolute(e)})),g._parser.setCsiHandler({final:"a"},(function(e){return g.hPositionRelative(e)})),g._parser.setCsiHandler({final:"b"},(function(e){return g.repeatPrecedingCharacter(e)})),g._parser.setCsiHandler({final:"c"},(function(e){return g.sendDeviceAttributesPrimary(e)})),g._parser.setCsiHandler({prefix:">",final:"c"},(function(e){return g.sendDeviceAttributesSecondary(e)})),g._parser.setCsiHandler({final:"d"},(function(e){return g.linePosAbsolute(e)})),g._parser.setCsiHandler({final:"e"},(function(e){return g.vPositionRelative(e)})),g._parser.setCsiHandler({final:"f"},(function(e){return g.hVPosition(e)})),g._parser.setCsiHandler({final:"g"},(function(e){return g.tabClear(e)})),g._parser.setCsiHandler({final:"h"},(function(e){return g.setMode(e)})),g._parser.setCsiHandler({prefix:"?",final:"h"},(function(e){return g.setModePrivate(e)})),g._parser.setCsiHandler({final:"l"},(function(e){return g.resetMode(e)})),g._parser.setCsiHandler({prefix:"?",final:"l"},(function(e){return g.resetModePrivate(e)})),g._parser.setCsiHandler({final:"m"},(function(e){return g.charAttributes(e)})),g._parser.setCsiHandler({final:"n"},(function(e){return g.deviceStatus(e)})),g._parser.setCsiHandler({prefix:"?",final:"n"},(function(e){return g.deviceStatusPrivate(e)})),g._parser.setCsiHandler({intermediates:"!",final:"p"},(function(e){return g.softReset(e)})),g._parser.setCsiHandler({intermediates:" ",final:"q"},(function(e){return g.setCursorStyle(e)})),g._parser.setCsiHandler({final:"r"},(function(e){return g.setScrollRegion(e)})),g._parser.setCsiHandler({final:"s"},(function(e){return g.saveCursor(e)})),g._parser.setCsiHandler({final:"t"},(function(e){return g.windowOptions(e)})),g._parser.setCsiHandler({final:"u"},(function(e){return g.restoreCursor(e)})),g._parser.setCsiHandler({intermediates:"'",final:"}"},(function(e){return g.insertColumns(e)})),g._parser.setCsiHandler({intermediates:"'",final:"~"},(function(e){return g.deleteColumns(e)})),g._parser.setExecuteHandler(s.C0.BEL,(function(){return g.bell()})),g._parser.setExecuteHandler(s.C0.LF,(function(){return g.lineFeed()})),g._parser.setExecuteHandler(s.C0.VT,(function(){return g.lineFeed()})),g._parser.setExecuteHandler(s.C0.FF,(function(){return g.lineFeed()})),g._parser.setExecuteHandler(s.C0.CR,(function(){return g.carriageReturn()})),g._parser.setExecuteHandler(s.C0.BS,(function(){return g.backspace()})),g._parser.setExecuteHandler(s.C0.HT,(function(){return g.tab()})),g._parser.setExecuteHandler(s.C0.SO,(function(){return g.shiftOut()})),g._parser.setExecuteHandler(s.C0.SI,(function(){return g.shiftIn()})),g._parser.setExecuteHandler(s.C1.IND,(function(){return g.index()})),g._parser.setExecuteHandler(s.C1.NEL,(function(){return g.nextLine()})),g._parser.setExecuteHandler(s.C1.HTS,(function(){return g.tabSet()})),g._parser.setOscHandler(0,new _.OscHandler((function(e){g.setTitle(e),g.setIconName(e)}))),g._parser.setOscHandler(1,new _.OscHandler((function(e){return g.setIconName(e)}))),g._parser.setOscHandler(2,new _.OscHandler((function(e){return g.setTitle(e)}))),g._parser.setEscHandler({final:"7"},(function(){return g.saveCursor()})),g._parser.setEscHandler({final:"8"},(function(){return g.restoreCursor()})),g._parser.setEscHandler({final:"D"},(function(){return g.index()})),g._parser.setEscHandler({final:"E"},(function(){return g.nextLine()})),g._parser.setEscHandler({final:"H"},(function(){return g.tabSet()})),g._parser.setEscHandler({final:"M"},(function(){return g.reverseIndex()})),g._parser.setEscHandler({final:"="},(function(){return g.keypadApplicationMode()})),g._parser.setEscHandler({final:">"},(function(){return g.keypadNumericMode()})),g._parser.setEscHandler({final:"c"},(function(){return g.fullReset()})),g._parser.setEscHandler({final:"n"},(function(){return g.setgLevel(2)})),g._parser.setEscHandler({final:"o"},(function(){return g.setgLevel(3)})),g._parser.setEscHandler({final:"|"},(function(){return g.setgLevel(3)})),g._parser.setEscHandler({final:"}"},(function(){return g.setgLevel(2)})),g._parser.setEscHandler({final:"~"},(function(){return g.setgLevel(1)})),g._parser.setEscHandler({intermediates:"%",final:"@"},(function(){return g.selectDefaultCharset()})),g._parser.setEscHandler({intermediates:"%",final:"G"},(function(){return g.selectDefaultCharset()}));var y=function(e){b._parser.setEscHandler({intermediates:"(",final:e},(function(){return g.selectCharset("("+e)})),b._parser.setEscHandler({intermediates:")",final:e},(function(){return g.selectCharset(")"+e)})),b._parser.setEscHandler({intermediates:"*",final:e},(function(){return g.selectCharset("*"+e)})),b._parser.setEscHandler({intermediates:"+",final:e},(function(){return g.selectCharset("+"+e)})),b._parser.setEscHandler({intermediates:"-",final:e},(function(){return g.selectCharset("-"+e)})),b._parser.setEscHandler({intermediates:".",final:e},(function(){return g.selectCharset("."+e)})),b._parser.setEscHandler({intermediates:"/",final:e},(function(){return g.selectCharset("/"+e)}))},b=this;for(var C in a.CHARSETS)y(C);return g._parser.setEscHandler({intermediates:"#",final:"8"},(function(){return g.screenAlignmentPattern()})),g._parser.setErrorHandler((function(e){return g._logService.error("Parsing error: ",e),e})),g._parser.setDcsHandler({intermediates:"$",final:"q"},new w(g._bufferService,g._coreService,g._logService,g._optionsService)),g}return o(t,e),Object.defineProperty(t.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestScroll",{get:function(){return this._onRequestScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.parse=function(e){var t=this._bufferService.buffer,n=t.x,i=t.y;if(this._logService.debug("parsing data",e),this._parseBuffer.length<e.length&&this._parseBuffer.length<131072&&(this._parseBuffer=new Uint32Array(Math.min(e.length,131072))),this._dirtyRowService.clearRange(),e.length>131072)for(var o=0;o<e.length;o+=131072){var r=o+131072<e.length?o+131072:e.length,s="string"==typeof e?this._stringDecoder.decode(e.substring(o,r),this._parseBuffer):this._utf8Decoder.decode(e.subarray(o,r),this._parseBuffer);this._parser.parse(this._parseBuffer,s)}else s="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer),this._parser.parse(this._parseBuffer,s);(t=this._bufferService.buffer).x===n&&t.y===i||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},t.prototype.print=function(e,t,n){var i,o,r=this._bufferService.buffer,s=this._charsetService.charset,a=this._optionsService.options.screenReaderMode,c=this._bufferService.cols,l=this._coreService.decPrivateModes.wraparound,u=this._coreService.modes.insertMode,d=this._curAttrData,f=r.lines.get(r.ybase+r.y);this._dirtyRowService.markDirty(r.y),r.x&&n-t>0&&2===f.getWidth(r.x-1)&&f.setCellFromCodePoint(r.x-1,0,1,d.fg,d.bg,d.extended);for(var v=t;v<n;++v){if(i=e[v],o=this._unicodeService.wcwidth(i),i<127&&s){var m=s[String.fromCharCode(i)];m&&(i=m.charCodeAt(0))}if(a&&this._onA11yChar.fire(h.stringFromCodePoint(i)),o||!r.x){if(r.x+o-1>=c)if(l){for(;r.x<c;)f.setCellFromCodePoint(r.x++,0,1,d.fg,d.bg,d.extended);r.x=0,r.y++,r.y===r.scrollBottom+1?(r.y--,this._onRequestScroll.fire(this._eraseAttrData(),!0)):(r.y>=this._bufferService.rows&&(r.y=this._bufferService.rows-1),r.lines.get(r.ybase+r.y).isWrapped=!0),f=r.lines.get(r.ybase+r.y)}else if(r.x=c-1,2===o)continue;if(u&&(f.insertCells(r.x,o,r.getNullCell(d),d),2===f.getWidth(c-1)&&f.setCellFromCodePoint(c-1,p.NULL_CELL_CODE,p.NULL_CELL_WIDTH,d.fg,d.bg,d.extended)),f.setCellFromCodePoint(r.x++,i,o,d.fg,d.bg,d.extended),o>0)for(;--o;)f.setCellFromCodePoint(r.x++,0,0,d.fg,d.bg,d.extended)}else f.getWidth(r.x-1)?f.addCodepointToCell(r.x-1,i):f.addCodepointToCell(r.x-2,i)}n-t>0&&(f.loadCell(r.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),r.x<c&&n-t>0&&0===f.getWidth(r.x)&&!f.hasContent(r.x)&&f.setCellFromCodePoint(r.x,0,1,d.fg,d.bg,d.extended),this._dirtyRowService.markDirty(r.y)},t.prototype.addCsiHandler=function(e,t){var n=this;return"t"!==e.final||e.prefix||e.intermediates?this._parser.addCsiHandler(e,t):this._parser.addCsiHandler(e,(function(e){return!b(e.params[0],n._optionsService.options.windowOptions)||t(e)}))},t.prototype.addDcsHandler=function(e,t){return this._parser.addDcsHandler(e,new g.DcsHandler(t))},t.prototype.addEscHandler=function(e,t){return this._parser.addEscHandler(e,t)},t.prototype.addOscHandler=function(e,t){return this._parser.addOscHandler(e,new _.OscHandler(t))},t.prototype.bell=function(){this._onRequestBell.fire()},t.prototype.lineFeed=function(){var e=this._bufferService.buffer;this._dirtyRowService.markDirty(e.y),this._optionsService.options.convertEol&&(e.x=0),e.y++,e.y===e.scrollBottom+1?(e.y--,this._onRequestScroll.fire(this._eraseAttrData())):e.y>=this._bufferService.rows&&(e.y=this._bufferService.rows-1),e.x>=this._bufferService.cols&&e.x--,this._dirtyRowService.markDirty(e.y),this._onLineFeed.fire()},t.prototype.carriageReturn=function(){this._bufferService.buffer.x=0},t.prototype.backspace=function(){var e,t=this._bufferService.buffer;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),void(t.x>0&&t.x--);if(this._restrictCursor(this._bufferService.cols),t.x>0)t.x--;else if(0===t.x&&t.y>t.scrollTop&&t.y<=t.scrollBottom&&(null===(e=t.lines.get(t.ybase+t.y))||void 0===e?void 0:e.isWrapped)){t.lines.get(t.ybase+t.y).isWrapped=!1,t.y--,t.x=this._bufferService.cols-1;var n=t.lines.get(t.ybase+t.y);n.hasWidth(t.x)&&!n.hasContent(t.x)&&t.x--}this._restrictCursor()},t.prototype.tab=function(){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){var e=this._bufferService.buffer.x;this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._bufferService.buffer.x-e)}},t.prototype.shiftOut=function(){this._charsetService.setgLevel(1)},t.prototype.shiftIn=function(){this._charsetService.setgLevel(0)},t.prototype._restrictCursor=function(e){void 0===e&&(e=this._bufferService.cols-1),this._bufferService.buffer.x=Math.min(e,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._coreService.decPrivateModes.origin?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},t.prototype._setCursor=function(e,t){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._coreService.decPrivateModes.origin?(this._bufferService.buffer.x=e,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+t):(this._bufferService.buffer.x=e,this._bufferService.buffer.y=t),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},t.prototype._moveCursor=function(e,t){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+e,this._bufferService.buffer.y+t)},t.prototype.cursorUp=function(e){var t=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1))},t.prototype.cursorDown=function(e){var t=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1)},t.prototype.cursorForward=function(e){this._moveCursor(e.params[0]||1,0)},t.prototype.cursorBackward=function(e){this._moveCursor(-(e.params[0]||1),0)},t.prototype.cursorNextLine=function(e){this.cursorDown(e),this._bufferService.buffer.x=0},t.prototype.cursorPrecedingLine=function(e){this.cursorUp(e),this._bufferService.buffer.x=0},t.prototype.cursorCharAbsolute=function(e){this._setCursor((e.params[0]||1)-1,this._bufferService.buffer.y)},t.prototype.cursorPosition=function(e){this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1)},t.prototype.charPosAbsolute=function(e){this._setCursor((e.params[0]||1)-1,this._bufferService.buffer.y)},t.prototype.hPositionRelative=function(e){this._moveCursor(e.params[0]||1,0)},t.prototype.linePosAbsolute=function(e){this._setCursor(this._bufferService.buffer.x,(e.params[0]||1)-1)},t.prototype.vPositionRelative=function(e){this._moveCursor(0,e.params[0]||1)},t.prototype.hVPosition=function(e){this.cursorPosition(e)},t.prototype.tabClear=function(e){var t=e.params[0];0===t?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:3===t&&(this._bufferService.buffer.tabs={})},t.prototype.cursorForwardTab=function(e){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var t=e.params[0]||1;t--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop()},t.prototype.cursorBackwardTab=function(e){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var t=e.params[0]||1,n=this._bufferService.buffer;t--;)n.x=n.prevStop()},t.prototype._eraseInBufferLine=function(e,t,n,i){void 0===i&&(i=!1);var o=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+e);o.replaceCells(t,n,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i&&(o.isWrapped=!1)},t.prototype._resetBufferLine=function(e){var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+e);t.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData())),t.isWrapped=!1},t.prototype.eraseInDisplay=function(e){var t;switch(this._restrictCursor(),e.params[0]){case 0:for(t=this._bufferService.buffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t++,this._bufferService.buffer.x,this._bufferService.cols,0===this._bufferService.buffer.x);t<this._bufferService.rows;t++)this._resetBufferLine(t);this._dirtyRowService.markDirty(t);break;case 1:for(t=this._bufferService.buffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(t+1).isWrapped=!1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 2:for(t=this._bufferService.rows,this._dirtyRowService.markDirty(t-1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 3:var n=this._bufferService.buffer.lines.length-this._bufferService.rows;n>0&&(this._bufferService.buffer.lines.trimStart(n),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-n,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-n,0),this._onScroll.fire(0))}},t.prototype.eraseInLine=function(e){switch(this._restrictCursor(),e.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}this._dirtyRowService.markDirty(this._bufferService.buffer.y)},t.prototype.insertLines=function(e){this._restrictCursor();var t=e.params[0]||1,n=this._bufferService.buffer;if(!(n.y>n.scrollBottom||n.y<n.scrollTop)){for(var i=n.ybase+n.y,o=this._bufferService.rows-1-n.scrollBottom,r=this._bufferService.rows-1+n.ybase-o+1;t--;)n.lines.splice(r-1,1),n.lines.splice(i,0,n.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(n.y,n.scrollBottom),n.x=0}},t.prototype.deleteLines=function(e){this._restrictCursor();var t=e.params[0]||1,n=this._bufferService.buffer;if(!(n.y>n.scrollBottom||n.y<n.scrollTop)){var i,o=n.ybase+n.y;for(i=this._bufferService.rows-1-n.scrollBottom,i=this._bufferService.rows-1+n.ybase-i;t--;)n.lines.splice(o,1),n.lines.splice(i,0,n.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(n.y,n.scrollBottom),n.x=0}},t.prototype.insertChars=function(e){this._restrictCursor();var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);t&&(t.insertCells(this._bufferService.buffer.x,e.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.deleteChars=function(e){this._restrictCursor();var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);t&&(t.deleteCells(this._bufferService.buffer.x,e.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.scrollUp=function(e){for(var t=e.params[0]||1,n=this._bufferService.buffer;t--;)n.lines.splice(n.ybase+n.scrollTop,1),n.lines.splice(n.ybase+n.scrollBottom,0,n.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(n.scrollTop,n.scrollBottom)},t.prototype.scrollDown=function(e){for(var t=e.params[0]||1,n=this._bufferService.buffer;t--;)n.lines.splice(n.ybase+n.scrollBottom,1),n.lines.splice(n.ybase+n.scrollTop,0,n.getBlankLine(d.DEFAULT_ATTR_DATA));this._dirtyRowService.markRangeDirty(n.scrollTop,n.scrollBottom)},t.prototype.scrollLeft=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var n=e.params[0]||1,i=t.scrollTop;i<=t.scrollBottom;++i){var o=t.lines.get(t.ybase+i);o.deleteCells(0,n,t.getNullCell(this._eraseAttrData()),this._eraseAttrData()),o.isWrapped=!1}this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},t.prototype.scrollRight=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var n=e.params[0]||1,i=t.scrollTop;i<=t.scrollBottom;++i){var o=t.lines.get(t.ybase+i);o.insertCells(0,n,t.getNullCell(this._eraseAttrData()),this._eraseAttrData()),o.isWrapped=!1}this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},t.prototype.insertColumns=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var n=e.params[0]||1,i=t.scrollTop;i<=t.scrollBottom;++i){var o=this._bufferService.buffer.lines.get(t.ybase+i);o.insertCells(t.x,n,t.getNullCell(this._eraseAttrData()),this._eraseAttrData()),o.isWrapped=!1}this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},t.prototype.deleteColumns=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var n=e.params[0]||1,i=t.scrollTop;i<=t.scrollBottom;++i){var o=t.lines.get(t.ybase+i);o.deleteCells(t.x,n,t.getNullCell(this._eraseAttrData()),this._eraseAttrData()),o.isWrapped=!1}this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},t.prototype.eraseChars=function(e){this._restrictCursor();var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);t&&(t.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(e.params[0]||1),this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.repeatPrecedingCharacter=function(e){if(this._parser.precedingCodepoint){for(var t=e.params[0]||1,n=new Uint32Array(t),i=0;i<t;++i)n[i]=this._parser.precedingCodepoint;this.print(n,0,n.length)}},t.prototype.sendDeviceAttributesPrimary=function(e){e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(s.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(s.C0.ESC+"[?6c"))},t.prototype.sendDeviceAttributesSecondary=function(e){e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(s.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(s.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(s.C0.ESC+"[>83;40003;0c"))},t.prototype._is=function(e){return 0===(this._optionsService.options.termName+"").indexOf(e)},t.prototype.setMode=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0}},t.prototype.setModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),this._charsetService.setgCharset(1,a.DEFAULT_CHARSET),this._charsetService.setgCharset(2,a.DEFAULT_CHARSET),this._charsetService.setgCharset(3,a.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}},t.prototype.resetMode=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1}},t.prototype.resetModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}},t.prototype._updateAttrColor=function(e,t,n,i,o){return 2===t?(e|=50331648,e&=-16777216,e|=m.AttributeData.fromColorRGB([n,i,o])):5===t&&(e&=-50331904,e|=33554432|255&n),e},t.prototype._extractColor=function(e,t,n){var i=[0,0,-1,0,0,0],o=0,r=0;do{if(i[r+o]=e.params[t+r],e.hasSubParams(t+r)){var s=e.getSubParams(t+r),a=0;do{5===i[1]&&(o=1),i[r+a+1+o]=s[a]}while(++a<s.length&&a+r+1+o<i.length);break}if(5===i[1]&&r+o>=2||2===i[1]&&r+o>=5)break;i[1]&&(o=1)}while(++r+t<e.length&&r+o<i.length);for(a=2;a<i.length;++a)-1===i[a]&&(i[a]=0);switch(i[0]){case 38:n.fg=this._updateAttrColor(n.fg,i[1],i[3],i[4],i[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,i[1],i[3],i[4],i[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,i[1],i[3],i[4],i[5])}return r},t.prototype._processUnderline=function(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()},t.prototype.charAttributes=function(e){if(1===e.length&&0===e.params[0])return this._curAttrData.fg=d.DEFAULT_ATTR_DATA.fg,void(this._curAttrData.bg=d.DEFAULT_ATTR_DATA.bg);for(var t,n=e.length,i=this._curAttrData,o=0;o<n;o++)(t=e.params[o])>=30&&t<=37?(i.fg&=-50331904,i.fg|=16777216|t-30):t>=40&&t<=47?(i.bg&=-50331904,i.bg|=16777216|t-40):t>=90&&t<=97?(i.fg&=-50331904,i.fg|=16777224|t-90):t>=100&&t<=107?(i.bg&=-50331904,i.bg|=16777224|t-100):0===t?(i.fg=d.DEFAULT_ATTR_DATA.fg,i.bg=d.DEFAULT_ATTR_DATA.bg):1===t?i.fg|=134217728:3===t?i.bg|=67108864:4===t?(i.fg|=268435456,this._processUnderline(e.hasSubParams(o)?e.getSubParams(o)[0]:1,i)):5===t?i.fg|=536870912:7===t?i.fg|=67108864:8===t?i.fg|=1073741824:2===t?i.bg|=134217728:21===t?this._processUnderline(2,i):22===t?(i.fg&=-134217729,i.bg&=-134217729):23===t?i.bg&=-67108865:24===t?i.fg&=-268435457:25===t?i.fg&=-536870913:27===t?i.fg&=-67108865:28===t?i.fg&=-1073741825:39===t?(i.fg&=-67108864,i.fg|=16777215&d.DEFAULT_ATTR_DATA.fg):49===t?(i.bg&=-67108864,i.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):38===t||48===t||58===t?o+=this._extractColor(e,o,i):59===t?(i.extended=i.extended.clone(),i.extended.underlineColor=-1,i.updateExtended()):100===t?(i.fg&=-67108864,i.fg|=16777215&d.DEFAULT_ATTR_DATA.fg,i.bg&=-67108864,i.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",t)},t.prototype.deviceStatus=function(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(s.C0.ESC+"[0n");break;case 6:var t=this._bufferService.buffer.y+1,n=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+"["+t+";"+n+"R")}},t.prototype.deviceStatusPrivate=function(e){switch(e.params[0]){case 6:var t=this._bufferService.buffer.y+1,n=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+"[?"+t+";"+n+"R")}},t.prototype.softReset=function(e){this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._bufferService.buffer.savedX=0,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1},t.prototype.setCursorStyle=function(e){var t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var n=t%2==1;this._optionsService.options.cursorBlink=n},t.prototype.setScrollRegion=function(e){var t,n=e.params[0]||1;(e.length<2||(t=e.params[1])>this._bufferService.rows||0===t)&&(t=this._bufferService.rows),t>n&&(this._bufferService.buffer.scrollTop=n-1,this._bufferService.buffer.scrollBottom=t-1,this._setCursor(0,0))},t.prototype.windowOptions=function(e){if(b(e.params[0],this._optionsService.options.windowOptions)){var t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(r.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(r.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(s.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}}},t.prototype.saveCursor=function(e){this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset},t.prototype.restoreCursor=function(e){this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._charsetService.charset=this._bufferService.buffer.savedCharset),this._restrictCursor()},t.prototype.setTitle=function(e){this._windowTitle=e,this._onTitleChange.fire(e)},t.prototype.setIconName=function(e){this._iconName=e},t.prototype.nextLine=function(){this._bufferService.buffer.x=0,this.index()},t.prototype.keypadApplicationMode=function(){this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire()},t.prototype.keypadNumericMode=function(){this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire()},t.prototype.selectDefaultCharset=function(){this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,a.DEFAULT_CHARSET)},t.prototype.selectCharset=function(e){2===e.length?"/"!==e[0]&&this._charsetService.setgCharset(y[e[0]],a.CHARSETS[e[1]]||a.DEFAULT_CHARSET):this.selectDefaultCharset()},t.prototype.index=function(){this._restrictCursor();var e=this._bufferService.buffer;this._bufferService.buffer.y++,e.y===e.scrollBottom+1?(e.y--,this._onRequestScroll.fire(this._eraseAttrData())):e.y>=this._bufferService.rows&&(e.y=this._bufferService.rows-1),this._restrictCursor()},t.prototype.tabSet=function(){this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0},t.prototype.reverseIndex=function(){this._restrictCursor();var e=this._bufferService.buffer;if(e.y===e.scrollTop){var t=e.scrollBottom-e.scrollTop;e.lines.shiftElements(e.ybase+e.y,t,1),e.lines.set(e.ybase+e.y,e.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(e.scrollTop,e.scrollBottom)}else e.y--,this._restrictCursor()},t.prototype.fullReset=function(){this._parser.reset(),this._onRequestReset.fire()},t.prototype.reset=function(){this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone()},t.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},t.prototype.setgLevel=function(e){this._charsetService.setgLevel(e)},t.prototype.screenAlignmentPattern=function(){var e=new v.CellData;e.content=1<<22|"E".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg;var t=this._bufferService.buffer;this._setCursor(0,0);for(var n=0;n<this._bufferService.rows;++n){var i=t.ybase+t.y+n,o=t.lines.get(i);o&&(o.fill(e),o.isWrapped=!1)}this._dirtyRowService.markAllDirty(),this._setCursor(0,0)},t}(l.Disposable);t.InputHandler=C},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},t.CHARSETS.A={"#":"£"},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},t.CHARSETS.C=t.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},t.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},t.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},t.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},t.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},t.CHARSETS.E=t.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},t.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},t.CHARSETS.H=t.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},t.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;var i=function(){function e(e,t){if(void 0===e&&(e=32),void 0===t&&(t=32),this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return e.fromArray=function(t){var n=new e;if(!t.length)return n;for(var i=t[0]instanceof Array?1:0;i<t.length;++i){var o=t[i];if(o instanceof Array)for(var r=0;r<o.length;++r)n.addSubParam(o[r]);else n.addParam(o)}return n},e.prototype.clone=function(){var t=new e(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t},e.prototype.toArray=function(){for(var e=[],t=0;t<this.length;++t){e.push(this.params[t]);var n=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];i-n>0&&e.push(Array.prototype.slice.call(this._subParams,n,i))}return e},e.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},e.prototype.addParam=function(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>2147483647?2147483647:e}},e.prototype.addSubParam=function(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>2147483647?2147483647:e,this._subParamsIdx[this.length-1]++}},e.prototype.hasSubParams=function(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0},e.prototype.getSubParams=function(e){var t=this._subParamsIdx[e]>>8,n=255&this._subParamsIdx[e];return n-t>0?this._subParams.subarray(t,n):null},e.prototype.getSubParamsAll=function(){for(var e={},t=0;t<this.length;++t){var n=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];i-n>0&&(e[t]=this._subParams.slice(n,i))}return e},e.prototype.addDigit=function(e){var t;if(!(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var n=this._digitIsSub?this._subParams:this.params,i=n[t-1];n[t-1]=~i?Math.min(10*i+e,2147483647):e}},e}();t.Params=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;var i=n(22),o=n(8),r=function(){function e(){this._state=0,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){}}return e.prototype.addHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var n=this._handlers[e];return n.push(t),{dispose:function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},e.prototype.setHandler=function(e,t){this._handlers[e]=[t]},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},e.prototype.reset=function(){2===this._state&&this.end(!1),this._id=-1,this._state=0},e.prototype._start=function(){var e=this._handlers[this._id];if(e)for(var t=e.length-1;t>=0;t--)e[t].start();else this._handlerFb(this._id,"START")},e.prototype._put=function(e,t,n){var i=this._handlers[this._id];if(i)for(var r=i.length-1;r>=0;r--)i[r].put(e,t,n);else this._handlerFb(this._id,"PUT",o.utf32ToString(e,t,n))},e.prototype._end=function(e){var t=this._handlers[this._id];if(t){for(var n=t.length-1;n>=0&&!1===t[n].end(e);n--);for(n--;n>=0;n--)t[n].end(!1)}else this._handlerFb(this._id,"END",e)},e.prototype.start=function(){this.reset(),this._id=-1,this._state=1},e.prototype.put=function(e,t,n){if(3!==this._state){if(1===this._state)for(;t<n;){var i=e[t++];if(59===i){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&n-t>0&&this._put(e,t,n)}},e.prototype.end=function(e){0!==this._state&&(3!==this._state&&(1===this._state&&this._start(),this._end(e)),this._id=-1,this._state=0)},e}();t.OscParser=r;var s=function(){function e(e){this._handler=e,this._data="",this._hitLimit=!1}return e.prototype.start=function(){this._data="",this._hitLimit=!1},e.prototype.put=function(e,t,n){this._hitLimit||(this._data+=o.utf32ToString(e,t,n),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.end=function(e){var t;return this._hitLimit?t=!1:e&&(t=this._handler(this._data)),this._data="",this._hitLimit=!1,t},e}();t.OscHandler=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;var i=n(8),o=n(20),r=n(22),s=[],a=function(){function e(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=function(){}}return e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},e.prototype.addHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var n=this._handlers[e];return n.push(t),{dispose:function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},e.prototype.setHandler=function(e,t){this._handlers[e]=[t]},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.reset=function(){this._active.length&&this.unhook(!1),this._active=s,this._ident=0},e.prototype.hook=function(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||s,this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].hook(t);else this._handlerFb(this._ident,"HOOK",t)},e.prototype.put=function(e,t,n){if(this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].put(e,t,n);else this._handlerFb(this._ident,"PUT",i.utf32ToString(e,t,n))},e.prototype.unhook=function(e){if(this._active.length){for(var t=this._active.length-1;t>=0&&!1===this._active[t].unhook(e);t--);for(t--;t>=0;t--)this._active[t].unhook(!1)}else this._handlerFb(this._ident,"UNHOOK",e);this._active=s,this._ident=0},e}();t.DcsParser=a;var c=function(){function e(e){this._handler=e,this._data="",this._hitLimit=!1}return e.prototype.hook=function(e){this._params=e.clone(),this._data="",this._hitLimit=!1},e.prototype.put=function(e,t,n){this._hitLimit||(this._data+=i.utf32ToString(e,t,n),this._data.length>r.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.unhook=function(e){var t;return this._hitLimit?t=!1:e&&(t=this._handler(this._data,this._params?this._params:new o.Params)),this._params=void 0,this._data="",this._hitLimit=!1,t},e}();t.DcsHandler=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireCharAtlas=void 0;var i=n(25),o=n(42),r=[];t.acquireCharAtlas=function(e,t,n,s,a){for(var c=i.generateConfig(s,a,e,n),l=0;l<r.length;l++){var u=(h=r[l]).ownedBy.indexOf(t);if(u>=0){if(i.configEquals(h.config,c))return h.atlas;1===h.ownedBy.length?(h.atlas.dispose(),r.splice(l,1)):h.ownedBy.splice(u,1);break}}for(l=0;l<r.length;l++){var h=r[l];if(i.configEquals(h.config,c))return h.ownedBy.push(t),h.atlas}var d={atlas:new o.DynamicCharAtlas(document,c),config:c,ownedBy:[t]};return r.push(d),d.atlas},t.removeTerminalFromCache=function(e){for(var t=0;t<r.length;t++){var n=r[t].ownedBy.indexOf(e);if(-1!==n){1===r[t].ownedBy.length?(r[t].atlas.dispose(),r.splice(t,1)):r[t].ownedBy.splice(n,1);break}}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;var i=n(3);t.generateConfig=function(e,t,n,i){var o={foreground:i.foreground,background:i.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:i.ansi.slice(0,16)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:e,scaledCharHeight:t,fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,fontWeightBold:n.fontWeightBold,allowTransparency:n.allowTransparency,colors:o}},t.configEquals=function(e,t){for(var n=0;n<e.colors.ansi.length;n++)if(e.colors.ansi[n].rgba!==t.colors.ansi[n].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.scaledCharWidth===t.scaledCharWidth&&e.scaledCharHeight===t.scaledCharHeight&&e.colors.foreground===t.colors.foreground&&e.colors.background===t.colors.background},t.is256Color=function(e){return e<i.DEFAULT_COLOR}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorManager=t.DEFAULT_ANSI_COLORS=void 0;var i=n(10),o=n(44),r=i.css.toColor("#ffffff"),s=i.css.toColor("#000000"),a=i.css.toColor("#ffffff"),c=i.css.toColor("#000000"),l={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=function(){for(var e=[i.css.toColor("#2e3436"),i.css.toColor("#cc0000"),i.css.toColor("#4e9a06"),i.css.toColor("#c4a000"),i.css.toColor("#3465a4"),i.css.toColor("#75507b"),i.css.toColor("#06989a"),i.css.toColor("#d3d7cf"),i.css.toColor("#555753"),i.css.toColor("#ef2929"),i.css.toColor("#8ae234"),i.css.toColor("#fce94f"),i.css.toColor("#729fcf"),i.css.toColor("#ad7fa8"),i.css.toColor("#34e2e2"),i.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],n=0;n<216;n++){var o=t[n/36%6|0],r=t[n/6%6|0],s=t[n%6];e.push({css:i.channels.toCss(o,r,s),rgba:i.channels.toRgba(o,r,s)})}for(n=0;n<24;n++){var a=8+10*n;e.push({css:i.channels.toCss(a,a,a),rgba:i.channels.toRgba(a,a,a)})}return e}();var u=function(){function e(e,n){this.allowTransparency=n;var u=e.createElement("canvas");u.width=1,u.height=1;var h=u.getContext("2d");if(!h)throw new Error("Could not get rendering context");this._ctx=h,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new o.ColorContrastCache,this.colors={foreground:r,background:s,cursor:a,cursorAccent:c,selection:l,selectionOpaque:i.color.blend(s,l),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return e.prototype.onOptionsChange=function(e){"minimumContrastRatio"===e&&this._contrastCache.clear()},e.prototype.setTheme=function(e){void 0===e&&(e={}),this.colors.foreground=this._parseColor(e.foreground,r),this.colors.background=this._parseColor(e.background,s),this.colors.cursor=this._parseColor(e.cursor,a,!0),this.colors.cursorAccent=this._parseColor(e.cursorAccent,c,!0),this.colors.selection=this._parseColor(e.selection,l,!0),this.colors.selectionOpaque=i.color.blend(this.colors.background,this.colors.selection),this.colors.ansi[0]=this._parseColor(e.black,t.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(e.red,t.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(e.green,t.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(e.yellow,t.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(e.blue,t.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(e.magenta,t.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(e.cyan,t.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(e.white,t.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},e.prototype._parseColor=function(e,t,n){if(void 0===n&&(n=this.allowTransparency),void 0===e)return t;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=e,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+e+" is invalid using fallback "+t.css),t;this._ctx.fillRect(0,0,1,1);var o=this._ctx.getImageData(0,0,1,1).data;if(255!==o[3]){if(!n)return console.warn("Color: "+e+" is using transparency, but allowTransparency is false. Using fallback "+t.css+"."),t;var r=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map((function(e){return Number(e)})),s=r[0],a=r[1],c=r[2],l=r[3],u=Math.round(255*l);return{rgba:i.channels.toRgba(s,a,c,u),css:e}}return{css:this._ctx.fillStyle,rgba:i.channels.toRgba(o[0],o[1],o[2],o[3])}},e}();t.ColorManager=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e}},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerRegistry=t.JoinedCellData=void 0;var r=n(6),s=n(3),a=n(4),c=function(e){function t(t,n,i){var o=e.call(this)||this;return o.content=0,o.combinedData="",o.fg=t.fg,o.bg=t.bg,o.combinedData=n,o._width=i,o}return o(t,e),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(e){throw new Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(r.AttributeData);t.JoinedCellData=c;var l=function(){function e(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}return e.prototype.registerCharacterJoiner=function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id},e.prototype.deregisterCharacterJoiner=function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1},e.prototype.getJoinedCharacters=function(e){if(0===this._characterJoiners.length)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];for(var n=[],i=t.translateToString(!0),o=0,r=0,a=0,c=t.getFg(0),l=t.getBg(0),u=0;u<t.getTrimmedLength();u++)if(t.loadCell(u,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==c||this._workCell.bg!==l){if(u-o>1)for(var h=this._getJoinedRanges(i,a,r,t,o),d=0;d<h.length;d++)n.push(h[d]);o=u,a=r,c=this._workCell.fg,l=this._workCell.bg}r+=this._workCell.getChars().length||s.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-o>1)for(h=this._getJoinedRanges(i,a,r,t,o),d=0;d<h.length;d++)n.push(h[d]);return n},e.prototype._getJoinedRanges=function(t,n,i,o,r){for(var s=t.substring(n,i),a=this._characterJoiners[0].handler(s),c=1;c<this._characterJoiners.length;c++)for(var l=this._characterJoiners[c].handler(s),u=0;u<l.length;u++)e._mergeRanges(a,l[u]);return this._stringRangesToCellRanges(a,o,r),a},e.prototype._stringRangesToCellRanges=function(e,t,n){var i=0,o=!1,r=0,a=e[i];if(a){for(var c=n;c<this._bufferService.cols;c++){var l=t.getWidth(c),u=t.getString(c).length||s.WHITESPACE_CELL_CHAR.length;if(0!==l){if(!o&&a[0]<=r&&(a[0]=c,o=!0),a[1]<=r){if(a[1]=c,!(a=e[++i]))break;a[0]<=r?(a[0]=c,o=!0):o=!1}r+=u}}a&&(a[1]=this._bufferService.cols)}},e._mergeRanges=function(e,t){for(var n=!1,i=0;i<e.length;i++){var o=e[i];if(n){if(t[1]<=o[0])return e[i-1][1]=t[1],e;if(t[1]<=o[1])return e[i-1][1]=Math.max(t[1],o[1]),e.splice(i,1),e;e.splice(i,1),i--}else{if(t[1]<=o[0])return e.splice(i,0,t),e;if(t[1]<=o[1])return o[0]=Math.min(t[0],o[0]),e;t[0]<o[1]&&(o[0]=Math.min(t[0],o[0]),n=!0)}}return n?e[e.length-1][1]=t[1]:e.push(t),e},e}();t.CharacterJoinerRegistry=l},function(e,t,n){function i(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left,e.clientY-n.top]}Object.defineProperty(t,"__esModule",{value:!0}),t.getRawByteCoords=t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=i,t.getCoords=function(e,t,n,o,r,s,a,c){if(r){var l=i(e,t);if(l)return l[0]=Math.ceil((l[0]+(c?s/2:0))/s),l[1]=Math.ceil(l[1]/a),l[0]=Math.min(Math.max(l[0],1),n+(c?1:0)),l[1]=Math.min(Math.max(l[1],1),o),l}},t.getRawByteCoords=function(e){if(e)return{x:e[0]+32,y:e[1]+32}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0;var i=function(){function e(e){this._renderCallback=e}return e.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.refresh=function(e,t,n){var i=this;this._rowCount=n,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return i._innerRefresh()})))},e.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(e,t)}},e}();t.RenderDebouncer=i},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._currentDevicePixelRatio=window.devicePixelRatio,t}return o(t,e),t.prototype.setListener=function(e){var t=this;this._listener&&this.clearListener(),this._listener=e,this._outerListener=function(){t._listener&&(t._listener(window.devicePixelRatio,t._currentDevicePixelRatio),t._updateDpr())},this._updateDpr()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.clearListener()},t.prototype._updateDpr=function(){var e;this._outerListener&&(null===(e=this._resolutionMediaMatchList)||void 0===e||e.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},t.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},t}(n(2).Disposable);t.ScreenDprMonitor=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t,n){if(void 0===n&&(n=5),"object"!=typeof t)return t;var i=Array.isArray(t)?[]:{};for(var o in t)i[o]=n<=1?t[o]:t[o]?e(t[o],n-1):t[o];return i}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var i=n(4),o=n(34),r=n(17),s=n(0),a=n(82),c=function(){function e(e){this._core=new o.Terminal(e),this._addonManager=new a.AddonManager}return e.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new d(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unicode",{get:function(){return this._checkProposedApi(),new f(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._checkProposedApi(),new u(this._core.buffers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)},e.prototype.open=function(e){this._core.open(e)},e.prototype.attachCustomKeyEventHandler=function(e){this._core.attachCustomKeyEventHandler(e)},e.prototype.registerLinkMatcher=function(e,t,n){return this._checkProposedApi(),this._core.registerLinkMatcher(e,t,n)},e.prototype.deregisterLinkMatcher=function(e){this._checkProposedApi(),this._core.deregisterLinkMatcher(e)},e.prototype.registerLinkProvider=function(e){return this._checkProposedApi(),this._core.registerLinkProvider(e)},e.prototype.registerCharacterJoiner=function(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)},e.prototype.deregisterCharacterJoiner=function(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)},e.prototype.registerMarker=function(e){return this._checkProposedApi(),this._verifyIntegers(e),this._core.addMarker(e)},e.prototype.addMarker=function(e){return this.registerMarker(e)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(e,t,n){this._verifyIntegers(e,t,n),this._core.select(e,t,n)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(e){this._verifyIntegers(e),this._core.scrollLines(e)},e.prototype.scrollPages=function(e){this._verifyIntegers(e),this._core.scrollPages(e)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(e){this._verifyIntegers(e),this._core.scrollToLine(e)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(e,t){this._core.write(e,t)},e.prototype.writeUtf8=function(e,t){this._core.write(e,t)},e.prototype.writeln=function(e,t){this._core.write(e),this._core.write("\r\n",t)},e.prototype.paste=function(e){this._core.paste(e)},e.prototype.getOption=function(e){return this._core.optionsService.getOption(e)},e.prototype.setOption=function(e,t){this._core.optionsService.setOption(e,t)},e.prototype.refresh=function(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)},e.prototype.reset=function(){this._core.reset()},e.prototype.loadAddon=function(e){return this._addonManager.loadAddon(this,e)},Object.defineProperty(e,"strings",{get:function(){return r},enumerable:!1,configurable:!0}),e.prototype._verifyIntegers=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach((function(e){if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}))},e}();t.Terminal=c;var l=function(){function e(e,t){this._buffer=e,this.type=t}return e.prototype.init=function(e){return this._buffer=e,this},Object.defineProperty(e.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),e.prototype.getLine=function(e){var t=this._buffer.lines.get(e);if(t)return new h(t)},e.prototype.getNullCell=function(){return new i.CellData},e}(),u=function(){function e(e){var t=this;this._buffers=e,this._onBufferChange=new s.EventEmitter,this._normal=new l(this._buffers.normal,"normal"),this._alternate=new l(this._buffers.alt,"alternate"),this._buffers.onBufferActivate((function(){return t._onBufferChange.fire(t.active)}))}return Object.defineProperty(e.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){if(this._buffers.active===this._buffers.normal)return this.normal;if(this._buffers.active===this._buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal.init(this._buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate.init(this._buffers.alt)},enumerable:!1,configurable:!0}),e}(),h=function(){function e(e){this._line=e}return Object.defineProperty(e.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),e.prototype.getCell=function(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new i.CellData)},e.prototype.translateToString=function(e,t,n){return this._line.translateToString(e,t,n)},e}(),d=function(){function e(e){this._core=e}return e.prototype.registerCsiHandler=function(e,t){return this._core.addCsiHandler(e,(function(e){return t(e.toArray())}))},e.prototype.addCsiHandler=function(e,t){return this.registerCsiHandler(e,t)},e.prototype.registerDcsHandler=function(e,t){return this._core.addDcsHandler(e,(function(e,n){return t(e,n.toArray())}))},e.prototype.addDcsHandler=function(e,t){return this.registerDcsHandler(e,t)},e.prototype.registerEscHandler=function(e,t){return this._core.addEscHandler(e,t)},e.prototype.addEscHandler=function(e,t){return this.registerEscHandler(e,t)},e.prototype.registerOscHandler=function(e,t){return this._core.addOscHandler(e,t)},e.prototype.addOscHandler=function(e,t){return this.registerOscHandler(e,t)},e}(),f=function(){function e(e){this._core=e}return e.prototype.register=function(e){this._core.unicodeService.register(e)},Object.defineProperty(e.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(e){this._core.unicodeService.activeVersion=e},enumerable:!1,configurable:!0}),e}()},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var r=n(35),s=n(36),a=n(37),c=n(12),l=n(18),u=n(39),h=n(49),d=n(50),f=n(11),p=n(7),v=n(17),m=n(53),_=n(54),g=n(55),y=n(56),b=n(58),w=n(0),C=n(16),S=n(26),k=n(59),E=n(5),x=n(60),T=n(61),L=n(62),R=n(63),M=n(64),O="undefined"!=typeof window?window.document:null,A=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.browser=f,n._keyDownHandled=!1,n._onCursorMove=new w.EventEmitter,n._onKey=new w.EventEmitter,n._onRender=new w.EventEmitter,n._onSelectionChange=new w.EventEmitter,n._onTitleChange=new w.EventEmitter,n._onFocus=new w.EventEmitter,n._onBlur=new w.EventEmitter,n._onA11yCharEmitter=new w.EventEmitter,n._onA11yTabEmitter=new w.EventEmitter,n._setup(),n.linkifier=n._instantiationService.createInstance(h.Linkifier),n.linkifier2=n.register(n._instantiationService.createInstance(L.Linkifier2)),n.register(n._inputHandler.onRequestBell((function(){return n.bell()}))),n.register(n._inputHandler.onRequestRefreshRows((function(e,t){return n.refresh(e,t)}))),n.register(n._inputHandler.onRequestReset((function(){return n.reset()}))),n.register(n._inputHandler.onRequestScroll((function(e,t){return n.scroll(e,t||void 0)}))),n.register(n._inputHandler.onRequestWindowsOptionsReport((function(e){return n._reportWindowsOptions(e)}))),n.register(w.forwardEvent(n._inputHandler.onCursorMove,n._onCursorMove)),n.register(w.forwardEvent(n._inputHandler.onTitleChange,n._onTitleChange)),n.register(w.forwardEvent(n._inputHandler.onA11yChar,n._onA11yCharEmitter)),n.register(w.forwardEvent(n._inputHandler.onA11yTab,n._onA11yTabEmitter)),n.register(n._bufferService.onResize((function(e){return n._afterResize(e.cols,e.rows)}))),n}return o(t,e),Object.defineProperty(t.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t,n,i;this._isDisposed||(e.prototype.dispose.call(this),null===(t=this._renderService)||void 0===t||t.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(i=null===(n=this.element)||void 0===n?void 0:n.parentNode)||void 0===i||i.removeChild(this.element))},t.prototype._setup=function(){e.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},t.prototype._updateOptions=function(t){var n,i,o,r;switch(e.prototype._updateOptions.call(this,t),t){case"fontFamily":case"fontSize":null===(n=this._renderService)||void 0===n||n.clear(),null===(i=this._charSizeService)||void 0===i||i.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(o=this.viewport)||void 0===o||o.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new g.AccessibilityManager(this,this._renderService)):(null===(r=this._accessibilityManager)||void 0===r||r.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},t.prototype._onTextAreaFocus=function(e){this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(c.C0.ESC+"[I"),this.updateCursorStyle(e),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},t.prototype.blur=function(){var e;return null===(e=this.textarea)||void 0===e?void 0:e.blur()},t.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(c.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},t.prototype._initGlobal=function(){var e=this;this._bindKeys(),this.register(p.addDisposableDomListener(this.element,"copy",(function(t){e.hasSelection()&&a.copyHandler(t,e._selectionService)})));var t=function(t){return a.handlePasteEvent(t,e.textarea,e._coreService)};this.register(p.addDisposableDomListener(this.textarea,"paste",t)),this.register(p.addDisposableDomListener(this.element,"paste",t)),f.isFirefox?this.register(p.addDisposableDomListener(this.element,"mousedown",(function(t){2===t.button&&a.rightClickHandler(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)}))):this.register(p.addDisposableDomListener(this.element,"contextmenu",(function(t){a.rightClickHandler(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)}))),f.isLinux&&this.register(p.addDisposableDomListener(this.element,"auxclick",(function(t){1===t.button&&a.moveTextAreaUnderMouseCursor(t,e.textarea,e.screenElement)})))},t.prototype._bindKeys=function(){var e=this;this.register(p.addDisposableDomListener(this.textarea,"keyup",(function(t){return e._keyUp(t)}),!0)),this.register(p.addDisposableDomListener(this.textarea,"keydown",(function(t){return e._keyDown(t)}),!0)),this.register(p.addDisposableDomListener(this.textarea,"keypress",(function(t){return e._keyPress(t)}),!0)),this.register(p.addDisposableDomListener(this.textarea,"compositionstart",(function(){return e._compositionHelper.compositionstart()}))),this.register(p.addDisposableDomListener(this.textarea,"compositionupdate",(function(t){return e._compositionHelper.compositionupdate(t)}))),this.register(p.addDisposableDomListener(this.textarea,"compositionend",(function(){return e._compositionHelper.compositionend()}))),this.register(this.onRender((function(){return e._compositionHelper.updateCompositionElements()}))),this.register(this.onRender((function(t){return e._queueLinkification(t.start,t.end)})))},t.prototype.open=function(e){var t=this;if(!e)throw new Error("Terminal requires a parent element.");O.body.contains(e)||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=e.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),e.appendChild(this.element);var n=O.createDocumentFragment();this._viewportElement=O.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),n.appendChild(this._viewportElement),this._viewportScrollArea=O.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=O.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=O.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),n.appendChild(this.screenElement),this.textarea=O.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(p.addDisposableDomListener(this.textarea,"focus",(function(e){return t._onTextAreaFocus(e)}))),this.register(p.addDisposableDomListener(this.textarea,"blur",(function(){return t._onTextAreaBlur()}))),this._helperContainer.appendChild(this.textarea);var i=this._instantiationService.createInstance(R.CoreBrowserService,this.textarea);this._instantiationService.setService(E.ICoreBrowserService,i),this._charSizeService=this._instantiationService.createInstance(x.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._compositionView=O.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(r.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(n),this._theme=this.options.theme||this._theme,this._colorManager=new S.ColorManager(O,this.options.allowTransparency),this.register(this.optionsService.onOptionChange((function(e){return t._colorManager.onOptionsChange(e)}))),this._colorManager.setTheme(this._theme);var o=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,o,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange((function(e){return t._onRender.fire(e)}))),this.onResize((function(e){return t._renderService.resize(e.cols,e.rows)})),this._soundService=this._instantiationService.createInstance(m.SoundService),this._instantiationService.setService(E.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(T.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(s.Viewport,(function(e,n){return t.scrollLines(e,n)}),this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar((function(){return t.viewport.syncScrollArea()}))),this.register(this.viewport),this.register(this.onCursorMove((function(){return t._renderService.onCursorMove()}))),this.register(this.onResize((function(){return t._renderService.onResize(t.cols,t.rows)}))),this.register(this.onBlur((function(){return t._renderService.onBlur()}))),this.register(this.onFocus((function(){return t._renderService.onFocus()}))),this.register(this._renderService.onDimensionsChange((function(){return t.viewport.syncScrollArea()}))),this._selectionService=this.register(this._instantiationService.createInstance(d.SelectionService,this.element,this.screenElement)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((function(e){return t.scrollLines(e.amount,e.suppressScrollEvent)}))),this.register(this._selectionService.onSelectionChange((function(){return t._onSelectionChange.fire()}))),this.register(this._selectionService.onRequestRedraw((function(e){return t._renderService.onSelectionChanged(e.start,e.end,e.columnSelectMode)}))),this.register(this._selectionService.onLinuxMouseSelection((function(e){t.textarea.value=e,t.textarea.focus(),t.textarea.select()}))),this.register(this.onScroll((function(){t.viewport.syncScrollArea(),t._selectionService.refresh()}))),this.register(p.addDisposableDomListener(this._viewportElement,"scroll",(function(){return t._selectionService.refresh()}))),this._mouseZoneManager=this._instantiationService.createInstance(_.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll((function(){return t._mouseZoneManager.clearAll()}))),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(p.addDisposableDomListener(this.element,"mousedown",(function(e){return t._selectionService.onMouseDown(e)}))),this._coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new g.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},t.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(u.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(y.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},t.prototype._setTheme=function(e){var t,n,i;this._theme=e,null===(t=this._colorManager)||void 0===t||t.setTheme(e),null===(n=this._renderService)||void 0===n||n.setColors(this._colorManager.colors),null===(i=this.viewport)||void 0===i||i.onThemeChange(this._colorManager.colors)},t.prototype.bindMouse=function(){var e=this,t=this,n=this.element;function i(e){var n,i,o=t._mouseService.getRawByteCoords(e,t.screenElement,t.cols,t.rows);if(!o)return!1;switch(e.overrideType||e.type){case"mousemove":i=32,void 0===e.buttons?(n=3,void 0!==e.button&&(n=e.button<3?e.button:3)):n=1&e.buttons?0:4&e.buttons?1:2&e.buttons?2:3;break;case"mouseup":i=0,n=e.button<3?e.button:3;break;case"mousedown":i=1,n=e.button<3?e.button:3;break;case"wheel":0!==e.deltaY&&(i=e.deltaY<0?0:1),n=4;break;default:return!1}return!(void 0===i||void 0===n||n>4)&&t._coreMouseService.triggerMouseEvent({col:o.x-33,row:o.y-33,button:n,action:i,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey})}var o={mouseup:null,wheel:null,mousedrag:null,mousemove:null},r=function(t){return i(t),t.buttons||(e._document.removeEventListener("mouseup",o.mouseup),o.mousedrag&&e._document.removeEventListener("mousemove",o.mousedrag)),e.cancel(t)},s=function(t){return i(t),t.preventDefault(),e.cancel(t)},a=function(e){e.buttons&&i(e)},l=function(e){e.buttons||i(e)};this.register(this._coreMouseService.onProtocolChange((function(t){t?("debug"===e.optionsService.options.logLevel&&e._logService.debug("Binding to mouse events:",e._coreMouseService.explainEvents(t)),e.element.classList.add("enable-mouse-events"),e._selectionService.disable()):(e._logService.debug("Unbinding from mouse events."),e.element.classList.remove("enable-mouse-events"),e._selectionService.enable()),8&t?o.mousemove||(n.addEventListener("mousemove",l),o.mousemove=l):(n.removeEventListener("mousemove",o.mousemove),o.mousemove=null),16&t?o.wheel||(n.addEventListener("wheel",s),o.wheel=s):(n.removeEventListener("wheel",o.wheel),o.wheel=null),2&t?o.mouseup||(o.mouseup=r):(e._document.removeEventListener("mouseup",o.mouseup),o.mouseup=null),4&t?o.mousedrag||(o.mousedrag=a):(e._document.removeEventListener("mousemove",o.mousedrag),o.mousedrag=null)}))),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(p.addDisposableDomListener(n,"mousedown",(function(t){if(t.preventDefault(),e.focus(),e._coreMouseService.areMouseEventsActive&&!e._selectionService.shouldForceSelection(t))return i(t),o.mouseup&&e._document.addEventListener("mouseup",o.mouseup),o.mousedrag&&e._document.addEventListener("mousemove",o.mousedrag),e.cancel(t)}))),this.register(p.addDisposableDomListener(n,"wheel",(function(t){if(o.wheel);else if(!e.buffer.hasScrollback){var n=e.viewport.getLinesScrolled(t);if(0===n)return;for(var i=c.C0.ESC+(e._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(t.deltaY<0?"A":"B"),r="",s=0;s<Math.abs(n);s++)r+=i;e._coreService.triggerDataEvent(r,!0)}}))),this.register(p.addDisposableDomListener(n,"wheel",(function(t){if(!o.wheel)return e.viewport.onWheel(t)?void 0:e.cancel(t)}))),this.register(p.addDisposableDomListener(n,"touchstart",(function(t){if(!e._coreMouseService.areMouseEventsActive)return e.viewport.onTouchStart(t),e.cancel(t)}))),this.register(p.addDisposableDomListener(n,"touchmove",(function(t){if(!e._coreMouseService.areMouseEventsActive)return e.viewport.onTouchMove(t)?void 0:e.cancel(t)})))},t.prototype.refresh=function(e,t){var n;null===(n=this._renderService)||void 0===n||n.refreshRows(e,t)},t.prototype._queueLinkification=function(e,t){var n;null===(n=this.linkifier)||void 0===n||n.linkifyRows(e,t)},t.prototype.updateCursorStyle=function(e){this._selectionService&&this._selectionService.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},t.prototype._showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},t.prototype.scrollLines=function(t,n){e.prototype.scrollLines.call(this,t,n),this.refresh(0,this.rows-1)},t.prototype.paste=function(e){a.paste(e,this.textarea,this._coreService)},t.prototype.attachCustomKeyEventHandler=function(e){this._customKeyEventHandler=e},t.prototype.registerLinkMatcher=function(e,t,n){var i=this.linkifier.registerLinkMatcher(e,t,n);return this.refresh(0,this.rows-1),i},t.prototype.deregisterLinkMatcher=function(e){this.linkifier.deregisterLinkMatcher(e)&&this.refresh(0,this.rows-1)},t.prototype.registerLinkProvider=function(e){return this.linkifier2.registerLinkProvider(e)},t.prototype.registerCharacterJoiner=function(e){var t=this._renderService.registerCharacterJoiner(e);return this.refresh(0,this.rows-1),t},t.prototype.deregisterCharacterJoiner=function(e){this._renderService.deregisterCharacterJoiner(e)&&this.refresh(0,this.rows-1)},Object.defineProperty(t.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),t.prototype.addMarker=function(e){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)},t.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},t.prototype.select=function(e,t,n){this._selectionService.setSelection(e,t,n)},t.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},t.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},t.prototype.clearSelection=function(){var e;null===(e=this._selectionService)||void 0===e||e.clearSelection()},t.prototype.selectAll=function(){var e;null===(e=this._selectionService)||void 0===e||e.selectAll()},t.prototype.selectLines=function(e,t){var n;null===(n=this._selectionService)||void 0===n||n.selectLines(e,t)},t.prototype._keyDown=function(e){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(!this._compositionHelper.keydown(e))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var t=b.evaluateKeyboardEvent(e,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===t.type||2===t.type){var n=this.rows-1;return this.scrollLines(2===t.type?-n:n),this.cancel(e,!0)}return 1===t.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(t.cancel&&this.cancel(e,!0),!t.key||(t.key!==c.C0.ETX&&t.key!==c.C0.CR||(this.textarea.value=""),this._onKey.fire({key:t.key,domEvent:e}),this._showCursor(),this._coreService.triggerDataEvent(t.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(e,!0)))},t.prototype._isThirdLevelShift=function(e,t){var n=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey;return"keypress"===t.type?n:n&&(!t.keyCode||t.keyCode>47)},t.prototype._keyUp=function(e){this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e))},t.prototype._keyPress=function(e){var t;if(this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this._coreService.triggerDataEvent(t,!0),0))},t.prototype.bell=function(){this._soundBell()&&this._soundService.playBellSound()},t.prototype.resize=function(t,n){t!==this.cols||n!==this.rows?e.prototype.resize.call(this,t,n):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},t.prototype._afterResize=function(e,t){var n,i;null===(n=this._charSizeService)||void 0===n||n.measure(),null===(i=this.viewport)||void 0===i||i.syncScrollArea(!0)},t.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(C.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},t.prototype.reset=function(){var t,n;this.options.rows=this.rows,this.options.cols=this.cols;var i=this._customKeyEventHandler;this._setup(),e.prototype.reset.call(this),null===(t=this._selectionService)||void 0===t||t.reset(),this._customKeyEventHandler=i,this.refresh(0,this.rows-1),null===(n=this.viewport)||void 0===n||n.syncScrollArea()},t.prototype._reportWindowsOptions=function(e){if(this._renderService)switch(e){case l.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var t=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),n=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this._coreService.triggerDataEvent(c.C0.ESC+"[4;"+n+";"+t+"t");break;case l.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var i=this._renderService.dimensions.scaledCellWidth.toFixed(0),o=this._renderService.dimensions.scaledCellHeight.toFixed(0);this._coreService.triggerDataEvent(c.C0.ESC+"[6;"+o+";"+i+"t")}},t.prototype.cancel=function(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1},t.prototype._visualBell=function(){return!1},t.prototype._soundBell=function(){return"sound"===this.options.bellStyle},t}(M.CoreTerminal);t.Terminal=A},function(e,t,n){var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;var r=n(5),s=n(1),a=function(){function e(e,t,n,i,o,r){this._textarea=e,this._compositionView=t,this._bufferService=n,this._optionsService=i,this._charSizeService=o,this._coreService=r,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0}}return e.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},e.prototype.compositionupdate=function(e){var t=this;this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout((function(){t._compositionPosition.end=t._textarea.value.length}),0)},e.prototype.compositionend=function(){this._finalizeComposition(!0)},e.prototype.keydown=function(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)},e.prototype._finalizeComposition=function(e){var t=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,this._clearTextareaPosition(),e){var n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((function(){var e;t._isSendingComposition&&(t._isSendingComposition=!1,e=t._isComposing?t._textarea.value.substring(n.start,n.end):t._textarea.value.substring(n.start),t._coreService.triggerDataEvent(e,!0))}),0)}else{this._isSendingComposition=!1;var i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}},e.prototype._handleAnyTextareaChanges=function(){var e=this,t=this._textarea.value;setTimeout((function(){if(!e._isComposing){var n=e._textarea.value.replace(t,"");n.length>0&&e._coreService.triggerDataEvent(n,!0)}}),0)},e.prototype.updateCompositionElements=function(e){var t=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var n=Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight),i=this._bufferService.buffer.y*n,o=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var r=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=i+"px",this._textarea.style.width=r.width+"px",this._textarea.style.height=r.height+"px",this._textarea.style.lineHeight=r.height+"px"}e||setTimeout((function(){return t.updateCompositionElements(!0)}),0)}},e.prototype._clearTextareaPosition=function(){this._textarea.style.left="",this._textarea.style.top=""},i([o(2,s.IBufferService),o(3,s.IOptionsService),o(4,r.ICharSizeService),o(5,s.ICoreService)],e)}();t.CompositionHelper=a},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var a=n(2),c=n(7),l=n(5),u=n(1),h=function(e){function t(t,n,i,o,r,s,a){var l=e.call(this)||this;return l._scrollLines=t,l._viewportElement=n,l._scrollArea=i,l._bufferService=o,l._optionsService=r,l._charSizeService=s,l._renderService=a,l.scrollBarWidth=0,l._currentRowHeight=0,l._lastRecordedBufferLength=0,l._lastRecordedViewportHeight=0,l._lastRecordedBufferHeight=0,l._lastTouchY=0,l._lastScrollTop=0,l._wheelPartialScroll=0,l._refreshAnimationFrame=null,l._ignoreNextScrollEvent=!1,l.scrollBarWidth=l._viewportElement.offsetWidth-l._scrollArea.offsetWidth||15,l.register(c.addDisposableDomListener(l._viewportElement,"scroll",l._onScroll.bind(l))),setTimeout((function(){return l.syncScrollArea()}),0),l}return o(t,e),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var t=this;if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame((function(){return t._innerRefresh()})))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(void 0===e&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);if(this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight){var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===t&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(e)}else this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent)if(this._ignoreNextScrollEvent)this._ignoreNextScrollEvent=!1;else{var t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(t,!0)}},t.prototype._bubbleScroll=function(e,t){var n=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&n<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var t=this._getPixelsScrolled(e);return 0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},t.prototype._getPixelsScrolled=function(e){if(0===e.deltaY)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t},t.prototype.getLinesScrolled=function(e){if(0===e.deltaY)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t},t.prototype._applyScrollModifier=function(e,t){var n=this._optionsService.options.fastScrollModifier;return"alt"===n&&t.altKey||"ctrl"===n&&t.ctrlKey||"shift"===n&&t.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},r([s(3,u.IBufferService),s(4,u.IOptionsService),s(5,l.ICharSizeService),s(6,l.IRenderService)],t)}(a.Disposable);t.Viewport=h},function(e,t,n){function i(e){return e.replace(/\r?\n/g,"\r")}function o(e,t){return t?"[200~"+e+"[201~":e}function r(e,t,n){e=o(e=i(e),n.decPrivateModes.bracketedPasteMode),n.triggerDataEvent(e,!0),t.value=""}function s(e,t,n){var i=n.getBoundingClientRect(),o=e.clientX-i.left-10,r=e.clientY-i.top-10;t.style.position="absolute",t.style.width="20px",t.style.height="20px",t.style.left=o+"px",t.style.top=r+"px",t.style.zIndex="1000",t.focus(),setTimeout((function(){t.style.position="",t.style.width="",t.style.height="",t.style.left="",t.style.top="",t.style.zIndex=""}),200)}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=i,t.bracketTextForPaste=o,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,n){e.stopPropagation(),e.clipboardData&&r(e.clipboardData.getData("text/plain"),t,n)},t.paste=r,t.moveTextAreaUnderMouseCursor=s,t.rightClickHandler=function(e,t,n,i,o){s(e,t,n),o&&!i.isClickInSelection(e)&&i.selectWordAtCursor(e),t.value=i.selectionText,t.select()}},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;var r=n(2),s=n(15),a=n(20),c=n(21),l=n(23),u=function(){function e(e){this.table=new Uint8Array(e)}return e.prototype.setDefault=function(e,t){s.fill(this.table,e<<4|t)},e.prototype.add=function(e,t,n,i){this.table[t<<8|e]=n<<4|i},e.prototype.addMany=function(e,t,n,i){for(var o=0;o<e.length;o++)this.table[t<<8|e[o]]=n<<4|i},e}();t.TransitionTable=u,t.VT500_TRANSITION_TABLE=function(){var e=new u(4095),t=Array.apply(null,Array(256)).map((function(e,t){return t})),n=function(e,n){return t.slice(e,n)},i=n(32,127),o=n(0,24);o.push(25),o.push.apply(o,n(28,32));var r,s=n(0,14);for(r in e.setDefault(1,0),e.addMany(i,0,2,0),s)e.addMany([24,26,153,154],r,3,0),e.addMany(n(128,144),r,3,0),e.addMany(n(144,152),r,3,0),e.add(156,r,0,0),e.add(27,r,11,1),e.add(157,r,4,8),e.addMany([152,158,159],r,0,7),e.add(155,r,11,3),e.add(144,r,11,9);return e.addMany(o,0,3,0),e.addMany(o,1,3,1),e.add(127,1,0,1),e.addMany(o,8,0,8),e.addMany(o,3,3,3),e.add(127,3,0,3),e.addMany(o,4,3,4),e.add(127,4,0,4),e.addMany(o,6,3,6),e.addMany(o,5,3,5),e.add(127,5,0,5),e.addMany(o,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(i,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(n(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(i,7,0,7),e.addMany(o,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(n(64,127),3,7,0),e.addMany(n(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(n(48,60),4,8,4),e.addMany(n(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(n(32,64),6,0,6),e.add(127,6,0,6),e.addMany(n(64,127),6,0,0),e.addMany(n(32,48),3,9,5),e.addMany(n(32,48),5,9,5),e.addMany(n(48,64),5,0,6),e.addMany(n(64,127),5,7,0),e.addMany(n(32,48),4,9,5),e.addMany(n(32,48),1,9,2),e.addMany(n(32,48),2,9,2),e.addMany(n(48,127),2,10,0),e.addMany(n(48,80),1,10,0),e.addMany(n(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(n(96,127),1,10,0),e.add(80,1,11,9),e.addMany(o,9,0,9),e.add(127,9,0,9),e.addMany(n(28,32),9,0,9),e.addMany(n(32,48),9,9,12),e.addMany(n(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(o,11,0,11),e.addMany(n(32,128),11,0,11),e.addMany(n(28,32),11,0,11),e.addMany(o,10,0,10),e.add(127,10,0,10),e.addMany(n(28,32),10,0,10),e.addMany(n(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(n(32,48),10,9,12),e.addMany(o,12,0,12),e.add(127,12,0,12),e.addMany(n(28,32),12,0,12),e.addMany(n(32,48),12,9,12),e.addMany(n(48,64),12,0,11),e.addMany(n(64,127),12,12,13),e.addMany(n(64,127),10,12,13),e.addMany(n(64,127),9,12,13),e.addMany(o,13,13,13),e.addMany(i,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(160,0,2,0),e.add(160,8,5,8),e.add(160,6,0,6),e.add(160,11,0,11),e.add(160,13,13,13),e}();var h=function(e){function n(n){void 0===n&&(n=t.VT500_TRANSITION_TABLE);var i=e.call(this)||this;return i._transitions=n,i.initialState=0,i.currentState=i.initialState,i._params=new a.Params,i._params.addParam(0),i._collect=0,i.precedingCodepoint=0,i._printHandlerFb=function(e,t,n){},i._executeHandlerFb=function(e){},i._csiHandlerFb=function(e,t){},i._escHandlerFb=function(e){},i._errorHandlerFb=function(e){return e},i._printHandler=i._printHandlerFb,i._executeHandlers=Object.create(null),i._csiHandlers=Object.create(null),i._escHandlers=Object.create(null),i._oscParser=new c.OscParser,i._dcsParser=new l.DcsParser,i._errorHandler=i._errorHandlerFb,i.setEscHandler({final:"\\"},(function(){})),i}return o(n,e),n.prototype._identifier=function(e,t){void 0===t&&(t=[64,126]);var n=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if((n=e.prefix.charCodeAt(0))&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var i=0;i<e.intermediates.length;++i){var o=e.intermediates.charCodeAt(i);if(32>o||o>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=o}}if(1!==e.final.length)throw new Error("final must be a single byte");var r=e.final.charCodeAt(0);if(t[0]>r||r>t[1])throw new Error("final must be in range "+t[0]+" .. "+t[1]);return(n<<=8)|r},n.prototype.identToString=function(e){for(var t=[];e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join("")},n.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},n.prototype.setPrintHandler=function(e){this._printHandler=e},n.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},n.prototype.addEscHandler=function(e,t){var n=this._identifier(e,[48,126]);void 0===this._escHandlers[n]&&(this._escHandlers[n]=[]);var i=this._escHandlers[n];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},n.prototype.setEscHandler=function(e,t){this._escHandlers[this._identifier(e,[48,126])]=[t]},n.prototype.clearEscHandler=function(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]},n.prototype.setEscHandlerFallback=function(e){this._escHandlerFb=e},n.prototype.setExecuteHandler=function(e,t){this._executeHandlers[e.charCodeAt(0)]=t},n.prototype.clearExecuteHandler=function(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]},n.prototype.setExecuteHandlerFallback=function(e){this._executeHandlerFb=e},n.prototype.addCsiHandler=function(e,t){var n=this._identifier(e);void 0===this._csiHandlers[n]&&(this._csiHandlers[n]=[]);var i=this._csiHandlers[n];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},n.prototype.setCsiHandler=function(e,t){this._csiHandlers[this._identifier(e)]=[t]},n.prototype.clearCsiHandler=function(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]},n.prototype.setCsiHandlerFallback=function(e){this._csiHandlerFb=e},n.prototype.addDcsHandler=function(e,t){return this._dcsParser.addHandler(this._identifier(e),t)},n.prototype.setDcsHandler=function(e,t){this._dcsParser.setHandler(this._identifier(e),t)},n.prototype.clearDcsHandler=function(e){this._dcsParser.clearHandler(this._identifier(e))},n.prototype.setDcsHandlerFallback=function(e){this._dcsParser.setHandlerFallback(e)},n.prototype.addOscHandler=function(e,t){return this._oscParser.addHandler(e,t)},n.prototype.setOscHandler=function(e,t){this._oscParser.setHandler(e,t)},n.prototype.clearOscHandler=function(e){this._oscParser.clearHandler(e)},n.prototype.setOscHandlerFallback=function(e){this._oscParser.setHandlerFallback(e)},n.prototype.setErrorHandler=function(e){this._errorHandler=e},n.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},n.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0},n.prototype.parse=function(e,t){for(var n=0,i=0,o=this.currentState,r=this._oscParser,s=this._dcsParser,a=this._collect,c=this._params,l=this._transitions.table,u=0;u<t;++u){switch((i=l[o<<8|((n=e[u])<160?n:160)])>>4){case 2:for(var h=u+1;;++h){if(h>=t||(n=e[h])<32||n>126&&n<160){this._printHandler(e,u,h),u=h-1;break}if(++h>=t||(n=e[h])<32||n>126&&n<160){this._printHandler(e,u,h),u=h-1;break}if(++h>=t||(n=e[h])<32||n>126&&n<160){this._printHandler(e,u,h),u=h-1;break}if(++h>=t||(n=e[h])<32||n>126&&n<160){this._printHandler(e,u,h),u=h-1;break}}break;case 3:this._executeHandlers[n]?this._executeHandlers[n]():this._executeHandlerFb(n),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:u,code:n,currentState:o,collect:a,params:c,abort:!1}).abort)return;break;case 7:for(var d=this._csiHandlers[a<<8|n],f=d?d.length-1:-1;f>=0&&!1===d[f](c);f--);f<0&&this._csiHandlerFb(a<<8|n,c),this.precedingCodepoint=0;break;case 8:do{switch(n){case 59:c.addParam(0);break;case 58:c.addSubParam(-1);break;default:c.addDigit(n-48)}}while(++u<t&&(n=e[u])>47&&n<60);u--;break;case 9:a<<=8,a|=n;break;case 10:for(var p=this._escHandlers[a<<8|n],v=p?p.length-1:-1;v>=0&&!1===p[v]();v--);v<0&&this._escHandlerFb(a<<8|n),this.precedingCodepoint=0;break;case 11:c.reset(),c.addParam(0),a=0;break;case 12:s.hook(a<<8|n,c);break;case 13:for(var m=u+1;;++m)if(m>=t||24===(n=e[m])||26===n||27===n||n>127&&n<160){s.put(e,u,m),u=m-1;break}break;case 14:s.unhook(24!==n&&26!==n),27===n&&(i|=1),c.reset(),c.addParam(0),a=0,this.precedingCodepoint=0;break;case 4:r.start();break;case 5:for(var _=u+1;;_++)if(_>=t||(n=e[_])<32||n>127&&n<=159){r.put(e,u,_),u=_-1;break}break;case 6:r.end(24!==n&&26!==n),27===n&&(i|=1),c.reset(),c.addParam(0),a=0,this.precedingCodepoint=0}o=15&i}this._collect=a,this.currentState=o},n}(r.Disposable);t.EscapeSequenceParser=h},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var a=n(40),c=n(46),l=n(47),u=n(48),h=n(28),d=n(2),f=n(5),p=n(1),v=n(24),m=n(0),_=1,g=function(e){function t(t,n,i,o,r,s,d,f,p){var v=e.call(this)||this;v._colors=t,v._screenElement=n,v._bufferService=r,v._charSizeService=s,v._optionsService=d,v._id=_++,v._onRequestRedraw=new m.EventEmitter;var g=v._optionsService.options.allowTransparency;return v._characterJoinerRegistry=new h.CharacterJoinerRegistry(v._bufferService),v._renderLayers=[new a.TextRenderLayer(v._screenElement,0,v._colors,v._characterJoinerRegistry,g,v._id,v._bufferService,d),new c.SelectionRenderLayer(v._screenElement,1,v._colors,v._id,v._bufferService,d),new u.LinkRenderLayer(v._screenElement,2,v._colors,v._id,i,o,v._bufferService,d),new l.CursorRenderLayer(v._screenElement,3,v._colors,v._id,v._onRequestRedraw,v._bufferService,d,f,p)],v.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},v._devicePixelRatio=window.devicePixelRatio,v._updateDimensions(),v.onOptionsChanged(),v}return o(t,e),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._renderLayers.forEach((function(e){return e.dispose()})),e.prototype.dispose.call(this),v.removeTerminalFromCache(this._id)},t.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},t.prototype.setColors=function(e){var t=this;this._colors=e,this._renderLayers.forEach((function(e){e.setColors(t._colors),e.reset()}))},t.prototype.onResize=function(e,t){var n=this;this._updateDimensions(),this._renderLayers.forEach((function(e){return e.resize(n.dimensions)})),this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},t.prototype.onBlur=function(){this._runOperation((function(e){return e.onBlur()}))},t.prototype.onFocus=function(){this._runOperation((function(e){return e.onFocus()}))},t.prototype.onSelectionChanged=function(e,t,n){void 0===n&&(n=!1),this._runOperation((function(i){return i.onSelectionChanged(e,t,n)}))},t.prototype.onCursorMove=function(){this._runOperation((function(e){return e.onCursorMove()}))},t.prototype.onOptionsChanged=function(){this._runOperation((function(e){return e.onOptionsChanged()}))},t.prototype.clear=function(){this._runOperation((function(e){return e.reset()}))},t.prototype._runOperation=function(e){this._renderLayers.forEach((function(t){return e(t)}))},t.prototype.renderRows=function(e,t){this._renderLayers.forEach((function(n){return n.onGridChanged(e,t)}))},t.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},t.prototype.registerCharacterJoiner=function(e){return this._characterJoinerRegistry.registerCharacterJoiner(e)},t.prototype.deregisterCharacterJoiner=function(e){return this._characterJoinerRegistry.deregisterCharacterJoiner(e)},r([s(4,p.IBufferService),s(5,f.ICharSizeService),s(6,p.IOptionsService),s(7,p.ICoreService),s(8,f.ICoreBrowserService)],t)}(d.Disposable);t.Renderer=g},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;var r=n(41),s=n(13),a=n(6),c=n(3),l=n(28),u=n(4),h=function(e){function t(t,n,i,o,s,a,c,l){var h=e.call(this,t,"text",n,s,i,a,c,l)||this;return h._characterWidth=0,h._characterFont="",h._characterOverlapCache={},h._workCell=new u.CellData,h._state=new r.GridCache,h._characterJoinerRegistry=o,h}return o(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t);var n=this._getFont(!1,!1);this._characterWidth===t.scaledCharWidth&&this._characterFont===n||(this._characterWidth=t.scaledCharWidth,this._characterFont=n,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},t.prototype.reset=function(){this._state.clear(),this._clearAll()},t.prototype._forEachCell=function(e,t,n,i){for(var o=e;o<=t;o++)for(var r=o+this._bufferService.buffer.ydisp,s=this._bufferService.buffer.lines.get(r),a=n?n.getJoinedCharacters(r):[],u=0;u<this._bufferService.cols;u++){s.loadCell(u,this._workCell);var h=this._workCell,d=!1,f=u;if(0!==h.getWidth()){if(a.length>0&&u===a[0][0]){d=!0;var p=a.shift();h=new l.JoinedCellData(this._workCell,s.translateToString(!0,p[0],p[1]),p[1]-p[0]),f=p[1]-1}!d&&this._isOverlapping(h)&&f<s.length-1&&s.getCodePoint(f+1)===c.NULL_CELL_CODE&&(h.content&=-12582913,h.content|=2<<22),i(h,u,o),u=f}}},t.prototype._drawBackground=function(e,t){var n=this,i=this._ctx,o=this._bufferService.cols,r=0,s=0,c=null;i.save(),this._forEachCell(e,t,null,(function(e,t,l){var u=null;e.isInverse()?u=e.isFgDefault()?n._colors.foreground.css:e.isFgRGB()?"rgb("+a.AttributeData.toColorRGB(e.getFgColor()).join(",")+")":n._colors.ansi[e.getFgColor()].css:e.isBgRGB()?u="rgb("+a.AttributeData.toColorRGB(e.getBgColor()).join(",")+")":e.isBgPalette()&&(u=n._colors.ansi[e.getBgColor()].css),null===c&&(r=t,s=l),l!==s?(i.fillStyle=c||"",n._fillCells(r,s,o-r,1),r=t,s=l):c!==u&&(i.fillStyle=c||"",n._fillCells(r,s,t-r,1),r=t,s=l),c=u})),null!==c&&(i.fillStyle=c,this._fillCells(r,s,o-r,1)),i.restore()},t.prototype._drawForeground=function(e,t){var n=this;this._forEachCell(e,t,this._characterJoinerRegistry,(function(e,t,i){if(!e.isInvisible()&&(n._drawChars(e,t,i),e.isUnderline())){if(n._ctx.save(),e.isInverse())if(e.isBgDefault())n._ctx.fillStyle=n._colors.background.css;else if(e.isBgRGB())n._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var o=e.getBgColor();n._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&o<8&&(o+=8),n._ctx.fillStyle=n._colors.ansi[o].css}else if(e.isFgDefault())n._ctx.fillStyle=n._colors.foreground.css;else if(e.isFgRGB())n._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var r=e.getFgColor();n._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&r<8&&(r+=8),n._ctx.fillStyle=n._colors.ansi[r].css}n._fillBottomLineAtCells(t,i,e.getWidth()),n._ctx.restore()}}))},t.prototype.onGridChanged=function(e,t){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,t-e+1),this._drawBackground(e,t),this._drawForeground(e,t))},t.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},t.prototype._isOverlapping=function(e){if(1!==e.getWidth())return!1;if(e.getCode()<256)return!1;var t=e.getChars();if(this._characterOverlapCache.hasOwnProperty(t))return this._characterOverlapCache[t];this._ctx.save(),this._ctx.font=this._characterFont;var n=Math.floor(this._ctx.measureText(t).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[t]=n,n},t}(s.BaseRenderLayer);t.TextRenderLayer=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0;var i=function(){function e(){this.cache=[]}return e.prototype.resize=function(e,t){for(var n=0;n<e;n++){this.cache.length<=n&&this.cache.push([]);for(var i=this.cache[n].length;i<t;i++)this.cache[n].push(void 0);this.cache[n].length=t}this.cache.length=e},e.prototype.clear=function(){for(var e=0;e<this.cache.length;e++)for(var t=0;t<this.cache[e].length;t++)this.cache[e][t]=void 0},e}();t.GridCache=i},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.NoneCharAtlas=t.DynamicCharAtlas=t.getGlyphCacheKey=void 0;var r=n(9),s=n(43),a=n(26),c=n(45),l=n(11),u=n(27),h=n(10),d={css:"rgba(0, 0, 0, 0)",rgba:0};function f(e){return e.code<<21|e.bg<<12|e.fg<<3|(e.bold?0:4)+(e.dim?0:2)+(e.italic?0:1)}t.getGlyphCacheKey=f;var p=function(e){function t(t,n){var i=e.call(this)||this;i._config=n,i._drawToCacheCount=0,i._glyphsWaitingOnBitmap=[],i._bitmapCommitTimeout=null,i._bitmap=null,i._cacheCanvas=t.createElement("canvas"),i._cacheCanvas.width=1024,i._cacheCanvas.height=1024,i._cacheCtx=u.throwIfFalsy(i._cacheCanvas.getContext("2d",{alpha:!0}));var o=t.createElement("canvas");o.width=i._config.scaledCharWidth,o.height=i._config.scaledCharHeight,i._tmpCtx=u.throwIfFalsy(o.getContext("2d",{alpha:i._config.allowTransparency})),i._width=Math.floor(1024/i._config.scaledCharWidth),i._height=Math.floor(1024/i._config.scaledCharHeight);var r=i._width*i._height;return i._cacheMap=new c.LRUMap(r),i._cacheMap.prealloc(r),i}return o(t,e),t.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},t.prototype.beginFrame=function(){this._drawToCacheCount=0},t.prototype.draw=function(e,t,n,i){if(32===t.code)return!0;if(!this._canCache(t))return!1;var o=f(t),r=this._cacheMap.get(o);if(null!=r)return this._drawFromCache(e,r,n,i),!0;if(this._drawToCacheCount<100){var s;s=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var a=this._drawToCache(t,s);return this._cacheMap.set(o,a),this._drawFromCache(e,a,n,i),!0}return!1},t.prototype._canCache=function(e){return e.code<256},t.prototype._toCoordinateX=function(e){return e%this._width*this._config.scaledCharWidth},t.prototype._toCoordinateY=function(e){return Math.floor(e/this._width)*this._config.scaledCharHeight},t.prototype._drawFromCache=function(e,t,n,i){if(!t.isEmpty){var o=this._toCoordinateX(t.index),r=this._toCoordinateY(t.index);e.drawImage(t.inBitmap?this._bitmap:this._cacheCanvas,o,r,this._config.scaledCharWidth,this._config.scaledCharHeight,n,i,this._config.scaledCharWidth,this._config.scaledCharHeight)}},t.prototype._getColorFromAnsiIndex=function(e){return e<this._config.colors.ansi.length?this._config.colors.ansi[e]:a.DEFAULT_ANSI_COLORS[e]},t.prototype._getBackgroundColor=function(e){return this._config.allowTransparency?d:e.bg===r.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:e.bg<256?this._getColorFromAnsiIndex(e.bg):this._config.colors.background},t.prototype._getForegroundColor=function(e){return e.fg===r.INVERTED_DEFAULT_COLOR?h.color.opaque(this._config.colors.background):e.fg<256?this._getColorFromAnsiIndex(e.fg):this._config.colors.foreground},t.prototype._drawToCache=function(e,t){this._drawToCacheCount++,this._tmpCtx.save();var n=this._getBackgroundColor(e);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=n.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var i=e.bold?this._config.fontWeightBold:this._config.fontWeight,o=e.italic?"italic":"";this._tmpCtx.font=o+" "+i+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="middle",this._tmpCtx.fillStyle=this._getForegroundColor(e).css,e.dim&&(this._tmpCtx.globalAlpha=r.DIM_OPACITY),this._tmpCtx.fillText(e.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore();var s=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),a=!1;this._config.allowTransparency||(a=function(e,t){for(var n=!0,i=t.rgba>>>24,o=t.rgba>>>16&255,r=t.rgba>>>8&255,s=0;s<e.data.length;s+=4)e.data[s]===i&&e.data[s+1]===o&&e.data[s+2]===r?e.data[s+3]=0:n=!1;return n}(s,n));var c=this._toCoordinateX(t),l=this._toCoordinateY(t);this._cacheCtx.putImageData(s,c,l);var u={index:t,isEmpty:a,inBitmap:!1};return this._addGlyphToBitmap(u),u},t.prototype._addGlyphToBitmap=function(e){var t=this;!("createImageBitmap"in window)||l.isFirefox||l.isSafari||(this._glyphsWaitingOnBitmap.push(e),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout((function(){return t._generateBitmap()}),100)))},t.prototype._generateBitmap=function(){var e=this,t=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then((function(n){e._bitmap=n;for(var i=0;i<t.length;i++)t[i].inBitmap=!0})),this._bitmapCommitTimeout=null},t}(s.BaseCharAtlas);t.DynamicCharAtlas=p;var v=function(e){function t(t,n){return e.call(this)||this}return o(t,e),t.prototype.draw=function(e,t,n,i){return!1},t}(s.BaseCharAtlas);t.NoneCharAtlas=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCharAtlas=void 0;var i=function(){function e(){this._didWarmUp=!1}return e.prototype.dispose=function(){},e.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},e.prototype._doWarmUp=function(){},e.prototype.beginFrame=function(){},e}();t.BaseCharAtlas=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;var i=function(){function e(){this._color={},this._rgba={}}return e.prototype.clear=function(){this._color={},this._rgba={}},e.prototype.setCss=function(e,t,n){this._rgba[e]||(this._rgba[e]={}),this._rgba[e][t]=n},e.prototype.getCss=function(e,t){return this._rgba[e]?this._rgba[e][t]:void 0},e.prototype.setColor=function(e,t,n){this._color[e]||(this._color[e]={}),this._color[e][t]=n},e.prototype.getColor=function(e,t){return this._color[e]?this._color[e][t]:void 0},e}();t.ColorContrastCache=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LRUMap=void 0;var i=function(){function e(e){this.capacity=e,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return e.prototype._unlinkNode=function(e){var t=e.prev,n=e.next;e===this._head&&(this._head=n),e===this._tail&&(this._tail=t),null!==t&&(t.next=n),null!==n&&(n.prev=t)},e.prototype._appendNode=function(e){var t=this._tail;null!==t&&(t.next=e),e.prev=t,e.next=null,this._tail=e,null===this._head&&(this._head=e)},e.prototype.prealloc=function(e){for(var t=this._nodePool,n=0;n<e;n++)t.push({prev:null,next:null,key:null,value:null})},e.prototype.get=function(e){var t=this._map[e];return void 0!==t?(this._unlinkNode(t),this._appendNode(t),t.value):null},e.prototype.peekValue=function(e){var t=this._map[e];return void 0!==t?t.value:null},e.prototype.peek=function(){var e=this._head;return null===e?null:e.value},e.prototype.set=function(e,t){var n=this._map[e];if(void 0!==n)n=this._map[e],this._unlinkNode(n),n.value=t;else if(this.size>=this.capacity)n=this._head,this._unlinkNode(n),delete this._map[n.key],n.key=e,n.value=t,this._map[e]=n;else{var i=this._nodePool;i.length>0?((n=i.pop()).key=e,n.value=t):n={prev:null,next:null,key:e,value:t},this._map[e]=n,this.size++}this._appendNode(n)},e}();t.LRUMap=i},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0;var r=function(e){function t(t,n,i,o,r,s){var a=e.call(this,t,"selection",n,!0,i,o,r,s)||this;return a._clearState(),a}return o(t,e),t.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._clearState()},t.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},t.prototype.onSelectionChanged=function(e,t,n){if(this._didStateChange(e,t,n,this._bufferService.buffer.ydisp))if(this._clearAll(),e&&t){var i=e[1]-this._bufferService.buffer.ydisp,o=t[1]-this._bufferService.buffer.ydisp,r=Math.max(i,0),s=Math.min(o,this._bufferService.rows-1);if(!(r>=this._bufferService.rows||s<0)){if(this._ctx.fillStyle=this._colors.selection.css,n){var a=e[0],c=t[0]-a,l=s-r+1;this._fillCells(a,r,c,l)}else{a=i===r?e[0]:0;var u=r===s?t[0]:this._bufferService.cols;this._fillCells(a,r,u-a,1);var h=Math.max(s-r-1,0);if(this._fillCells(0,r+1,this._bufferService.cols,h),r!==s){var d=o===s?t[0]:this._bufferService.cols;this._fillCells(0,s,d,1)}}this._state.start=[e[0],e[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=n,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},t.prototype._didStateChange=function(e,t,n,i){return!this._areCoordinatesEqual(e,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||n!==this._state.columnSelectMode||i!==this._state.ydisp},t.prototype._areCoordinatesEqual=function(e,t){return!(!e||!t)&&e[0]===t[0]&&e[1]===t[1]},t}(n(13).BaseRenderLayer);t.SelectionRenderLayer=r},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;var r=n(13),s=n(4),a=function(e){function t(t,n,i,o,r,a,c,l,u){var h=e.call(this,t,"cursor",n,!0,i,o,a,c)||this;return h._onRequestRedraw=r,h._coreService=l,h._coreBrowserService=u,h._cell=new s.CellData,h._state={x:0,y:0,isFocused:!1,style:"",width:0},h._cursorRenderers={bar:h._renderBarCursor.bind(h),block:h._renderBlockCursor.bind(h),underline:h._renderUnderlineCursor.bind(h)},h}return o(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},t.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var e,t=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new c(this._coreBrowserService.isFocused,(function(){t._render(!0)}))):(null===(e=this._cursorBlinkStateManager)||void 0===e||e.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype.onGridChanged=function(e,t){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(e){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,n=t-this._bufferService.buffer.ydisp;if(n<0||n>=this._bufferService.rows)this._clearCursor();else{var i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(t).loadCell(i,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var o=this._optionsService.options.cursorStyle;return o&&"block"!==o?this._cursorRenderers[o](i,n,this._cell):this._renderBlurCursor(i,n,this._cell),this._ctx.restore(),this._state.x=i,this._state.y=n,this._state.isFocused=!1,this._state.style=o,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===i&&this._state.y===n&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](i,n,this._cell),this._ctx.restore(),this._state.x=i,this._state.y=n,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(e,t,n){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(e,t,this._optionsService.options.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(e,t,n){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(e,t,n.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(n,e,t),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(e,t,n){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(e,t),this._ctx.restore()},t.prototype._renderBlurCursor=function(e,t,n){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(e,t,n.getWidth(),1),this._ctx.restore()},t}(r.BaseRenderLayer);t.CursorRenderLayer=a;var c=function(){function e(e,t){this._renderCallback=t,this.isCursorVisible=!0,e&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0}))))},e.prototype._restartInterval=function(e){var t=this;void 0===e&&(e=600),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout((function(){if(t._animationTimeRestarted){var e=600-(Date.now()-t._animationTimeRestarted);if(t._animationTimeRestarted=void 0,e>0)return void t._restartInterval(e)}t.isCursorVisible=!1,t._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=void 0})),t._blinkInterval=window.setInterval((function(){if(t._animationTimeRestarted){var e=600-(Date.now()-t._animationTimeRestarted);return t._animationTimeRestarted=void 0,void t._restartInterval(e)}t.isCursorVisible=!t.isCursorVisible,t._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=void 0}))}),600)}),e)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;var r=n(13),s=n(9),a=n(25),c=function(e){function t(t,n,i,o,r,s,a,c){var l=e.call(this,t,"link",n,!0,i,o,a,c)||this;return r.onShowLinkUnderline((function(e){return l._onShowLinkUnderline(e)})),r.onHideLinkUnderline((function(e){return l._onHideLinkUnderline(e)})),s.onShowLinkUnderline((function(e){return l._onShowLinkUnderline(e)})),s.onHideLinkUnderline((function(e){return l._onHideLinkUnderline(e)})),l}return o(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(e.fg===s.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&a.is256Color(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},t}(r.BaseRenderLayer);t.LinkRenderLayer=c},function(e,t,n){var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZone=t.Linkifier=void 0;var r=n(0),s=n(1),a=function(){function e(e,t,n){this._bufferService=e,this._logService=t,this._unicodeService=n,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new r.EventEmitter,this._onHideLinkUnderline=new r.EventEmitter,this._onLinkTooltip=new r.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(e.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),e.prototype.attachToDom=function(e,t){this._element=e,this._mouseZoneManager=t},e.prototype.linkifyRows=function(t,n){var i=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=t,this._rowsToLinkify.end=n):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,t),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,n)),this._mouseZoneManager.clearAll(t,n),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout((function(){return i._linkifyRows()}),e._timeBeforeLatency))},e.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var e=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var t=e.ydisp+this._rowsToLinkify.start;if(!(t>=e.lines.length)){for(var n=e.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,i=Math.ceil(2e3/this._bufferService.cols),o=this._bufferService.buffer.iterator(!1,t,n,i,i);o.hasNext();)for(var r=o.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(r.range.first,r.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},e.prototype.registerLinkMatcher=function(e,t,n){if(void 0===n&&(n={}),!t)throw new Error("handler must be defined");var i={id:this._nextLinkMatcherId++,regex:e,handler:t,matchIndex:n.matchIndex,validationCallback:n.validationCallback,hoverTooltipCallback:n.tooltipCallback,hoverLeaveCallback:n.leaveCallback,willLinkActivate:n.willLinkActivate,priority:n.priority||0};return this._addLinkMatcherToList(i),i.id},e.prototype._addLinkMatcherToList=function(e){if(0!==this._linkMatchers.length){for(var t=this._linkMatchers.length-1;t>=0;t--)if(e.priority<=this._linkMatchers[t].priority)return void this._linkMatchers.splice(t+1,0,e);this._linkMatchers.splice(0,0,e)}else this._linkMatchers.push(e)},e.prototype.deregisterLinkMatcher=function(e){for(var t=0;t<this._linkMatchers.length;t++)if(this._linkMatchers[t].id===e)return this._linkMatchers.splice(t,1),!0;return!1},e.prototype._doLinkifyRow=function(e,t,n){for(var i,o=this,r=new RegExp(n.regex.source,(n.regex.flags||"")+"g"),s=-1,a=function(){var a=i["number"!=typeof n.matchIndex?0:n.matchIndex];if(!a)return c._logService.debug("match found without corresponding matchIndex",i,n),"break";if(s=t.indexOf(a,s+1),r.lastIndex=s+a.length,s<0)return"break";var l=c._bufferService.buffer.stringIndexToBufferIndex(e,s);if(l[0]<0)return"break";var u=c._bufferService.buffer.lines.get(l[0]);if(!u)return"break";var h=u.getFg(l[1]),d=h?h>>9&511:void 0;n.validationCallback?n.validationCallback(a,(function(e){o._rowsTimeoutId||e&&o._addLink(l[1],l[0]-o._bufferService.buffer.ydisp,a,n,d)})):c._addLink(l[1],l[0]-c._bufferService.buffer.ydisp,a,n,d)},c=this;null!==(i=r.exec(t))&&"break"!==a(););},e.prototype._addLink=function(e,t,n,i,o){var r=this;if(this._mouseZoneManager&&this._element){var s=this._unicodeService.getStringCellWidth(n),a=e%this._bufferService.cols,l=t+Math.floor(e/this._bufferService.cols),u=(a+s)%this._bufferService.cols,h=l+Math.floor((a+s)/this._bufferService.cols);0===u&&(u=this._bufferService.cols,h--),this._mouseZoneManager.add(new c(a+1,l+1,u+1,h+1,(function(e){if(i.handler)return i.handler(e,n);var t=window.open();t?(t.opener=null,t.location.href=n):console.warn("Opening link blocked as opener could not be cleared")}),(function(){r._onShowLinkUnderline.fire(r._createLinkHoverEvent(a,l,u,h,o)),r._element.classList.add("xterm-cursor-pointer")}),(function(e){r._onLinkTooltip.fire(r._createLinkHoverEvent(a,l,u,h,o)),i.hoverTooltipCallback&&i.hoverTooltipCallback(e,n,{start:{x:a,y:l},end:{x:u,y:h}})}),(function(){r._onHideLinkUnderline.fire(r._createLinkHoverEvent(a,l,u,h,o)),r._element.classList.remove("xterm-cursor-pointer"),i.hoverLeaveCallback&&i.hoverLeaveCallback()}),(function(e){return!i.willLinkActivate||i.willLinkActivate(e,n)})))}},e.prototype._createLinkHoverEvent=function(e,t,n,i,o){return{x1:e,y1:t,x2:n,y2:i,cols:this._bufferService.cols,fg:o}},e._timeBeforeLatency=200,e=i([o(0,s.IBufferService),o(1,s.ILogService),o(2,s.IUnicodeService)],e)}();t.Linkifier=a;var c=function(e,t,n,i,o,r,s,a,c){this.x1=e,this.y1=t,this.x2=n,this.y2=i,this.clickCallback=o,this.hoverCallback=r,this.tooltipCallback=s,this.leaveCallback=a,this.willLinkActivate=c};t.MouseZone=c},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;var a=n(11),c=n(51),l=n(4),u=n(0),h=n(5),d=n(1),f=n(29),p=n(52),v=n(2),m=String.fromCharCode(160),_=new RegExp(m,"g"),g=function(e){function t(t,n,i,o,r,s,a){var h=e.call(this)||this;return h._element=t,h._screenElement=n,h._bufferService=i,h._coreService=o,h._mouseService=r,h._optionsService=s,h._renderService=a,h._dragScrollAmount=0,h._enabled=!0,h._workCell=new l.CellData,h._mouseDownTimeStamp=0,h._onLinuxMouseSelection=h.register(new u.EventEmitter),h._onRedrawRequest=h.register(new u.EventEmitter),h._onSelectionChange=h.register(new u.EventEmitter),h._onRequestScrollLines=h.register(new u.EventEmitter),h._mouseMoveListener=function(e){return h._onMouseMove(e)},h._mouseUpListener=function(e){return h._onMouseUp(e)},h._coreService.onUserInput((function(){h.hasSelection&&h.clearSelection()})),h._trimListener=h._bufferService.buffer.lines.onTrim((function(e){return h._onTrim(e)})),h.register(h._bufferService.buffers.onBufferActivate((function(e){return h._onBufferActivate(e)}))),h.enable(),h._model=new c.SelectionModel(h._bufferService),h._activeSelectionMode=0,h}return o(t,e),Object.defineProperty(t.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._removeMouseDownListeners()},t.prototype.reset=function(){this.clearSelection()},t.prototype.disable=function(){this.clearSelection(),this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelection",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionText",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";var n=this._bufferService.buffer,i=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";for(var o=e[1];o<=t[1];o++){var r=n.translateBufferLineToString(o,!0,e[0],t[0]);i.push(r)}}else{var s=e[1]===t[1]?t[0]:void 0;for(i.push(n.translateBufferLineToString(e[1],!0,e[0],s)),o=e[1]+1;o<=t[1]-1;o++){var c=n.lines.get(o);r=n.translateBufferLineToString(o,!0),c&&c.isWrapped?i[i.length-1]+=r:i.push(r)}e[1]!==t[1]&&(c=n.lines.get(t[1]),r=n.translateBufferLineToString(t[1],!0,0,t[0]),c&&c.isWrapped?i[i.length-1]+=r:i.push(r))}return i.map((function(e){return e.replace(_," ")})).join(a.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),t.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},t.prototype.refresh=function(e){var t=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame((function(){return t._refresh()}))),a.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},t.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},t.prototype.isClickInSelection=function(e){var t=this._getMouseBufferCoords(e),n=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!!(n&&i&&t)&&this._areCoordsInSelection(t,n,i)},t.prototype._areCoordsInSelection=function(e,t,n){return e[1]>t[1]&&e[1]<n[1]||t[1]===n[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<n[0]||t[1]<n[1]&&e[1]===n[1]&&e[0]<n[0]||t[1]<n[1]&&e[1]===t[1]&&e[0]>=t[0]},t.prototype.selectWordAtCursor=function(e){var t=this._getMouseBufferCoords(e);t&&(this._selectWordAt(t,!1),this._model.selectionEnd=void 0,this.refresh(!0))},t.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},t.prototype.selectLines=function(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()},t.prototype._onTrim=function(e){this._model.onTrim(e)&&this.refresh()},t.prototype._getMouseBufferCoords=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t},t.prototype._getMouseEventScrollAmount=function(e){var t=f.getCoordsRelativeToElement(e,this._screenElement)[1],n=this._renderService.dimensions.canvasHeight;return t>=0&&t<=n?0:(t>n&&(t-=n),t=Math.min(Math.max(t,-50),50),(t/=50)/Math.abs(t)+Math.round(14*t))},t.prototype.shouldForceSelection=function(e){return a.isMac?e.altKey&&this._optionsService.options.macOptionClickForcesSelection:e.shiftKey},t.prototype.onMouseDown=function(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._onIncrementalClick(e):1===e.detail?this._onSingleClick(e):2===e.detail?this._onDoubleClick(e):3===e.detail&&this._onTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}},t.prototype._addMouseDownListeners=function(){var e=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval((function(){return e._dragScroll()}),50)},t.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},t.prototype._onIncrementalClick=function(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))},t.prototype._onSingleClick=function(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),this._model.selectionStart){this._model.selectionEnd=void 0;var t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},t.prototype._onDoubleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=1,this._selectWordAt(t,!0))},t.prototype._onTripleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))},t.prototype.shouldColumnSelect=function(e){return e.altKey&&!(a.isMac&&this._optionsService.options.macOptionClickForcesSelection)},t.prototype._onMouseMove=function(e){if(e.stopImmediatePropagation(),this._model.selectionStart){var t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){var i=n.lines.get(this._model.selectionEnd[1]);i&&0===i.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},t.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}},t.prototype._onMouseUp=function(e){var t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500){if(e.altKey&&this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var n=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&void 0!==n[0]&&void 0!==n[1]){var i=p.moveToCellSequence(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(i,!0)}}}else this.hasSelection&&this._onSelectionChange.fire()},t.prototype._onBufferActivate=function(e){var t=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim((function(e){return t._onTrim(e)}))},t.prototype._convertViewportColToCharacterIndex=function(e,t){for(var n=t[0],i=0;t[0]>=i;i++){var o=e.loadCell(i,this._workCell).getChars().length;0===this._workCell.getWidth()?n--:o>1&&t[0]!==i&&(n+=o-1)}return n},t.prototype.setSelection=function(e,t,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=n,this.refresh()},t.prototype._getWordAt=function(e,t,n,i){if(void 0===n&&(n=!0),void 0===i&&(i=!0),!(e[0]>=this._bufferService.cols)){var o=this._bufferService.buffer,r=o.lines.get(e[1]);if(r){var s=o.translateBufferLineToString(e[1],!1),a=this._convertViewportColToCharacterIndex(r,e),c=a,l=e[0]-a,u=0,h=0,d=0,f=0;if(" "===s.charAt(a)){for(;a>0&&" "===s.charAt(a-1);)a--;for(;c<s.length&&" "===s.charAt(c+1);)c++}else{var p=e[0],v=e[0];0===r.getWidth(p)&&(u++,p--),2===r.getWidth(v)&&(h++,v++);var m=r.getString(v).length;for(m>1&&(f+=m-1,c+=m-1);p>0&&a>0&&!this._isCharWordSeparator(r.loadCell(p-1,this._workCell));){r.loadCell(p-1,this._workCell);var _=this._workCell.getChars().length;0===this._workCell.getWidth()?(u++,p--):_>1&&(d+=_-1,a-=_-1),a--,p--}for(;v<r.length&&c+1<s.length&&!this._isCharWordSeparator(r.loadCell(v+1,this._workCell));){r.loadCell(v+1,this._workCell);var g=this._workCell.getChars().length;2===this._workCell.getWidth()?(h++,v++):g>1&&(f+=g-1,c+=g-1),c++,v++}}c++;var y=a+l-u+d,b=Math.min(this._bufferService.cols,c-a+u+h-d-f);if(t||""!==s.slice(a,c).trim()){if(n&&0===y&&32!==r.getCodePoint(0)){var w=o.lines.get(e[1]-1);if(w&&r.isWrapped&&32!==w.getCodePoint(this._bufferService.cols-1)){var C=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(C){var S=this._bufferService.cols-C.start;y-=S,b+=S}}}if(i&&y+b===this._bufferService.cols&&32!==r.getCodePoint(this._bufferService.cols-1)){var k=o.lines.get(e[1]+1);if(k&&k.isWrapped&&32!==k.getCodePoint(0)){var E=this._getWordAt([0,e[1]+1],!1,!1,!0);E&&(b+=E.length)}}return{start:y,length:b}}}}},t.prototype._selectWordAt=function(e,t){var n=this._getWordAt(e,t);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[n.start,e[1]],this._model.selectionStartLength=n.length}},t.prototype._selectToWordAt=function(e){var t=this._getWordAt(e,!0);if(t){for(var n=e[1];t.start<0;)t.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,n]}},t.prototype._isCharWordSeparator=function(e){return 0!==e.getWidth()&&this._optionsService.options.wordSeparator.indexOf(e.getChars())>=0},t.prototype._selectLineAt=function(e){var t=this._bufferService.buffer.getWrappedRangeForLine(e);this._model.selectionStart=[0,t.first],this._model.selectionEnd=[this._bufferService.cols,t.last],this._model.selectionStartLength=0},r([s(2,d.IBufferService),s(3,d.ICoreService),s(4,h.IMouseService),s(5,d.IOptionsService),s(6,h.IRenderService)],t)}(v.Disposable);t.SelectionService=g},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0;var i=function(){function e(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}return e.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(e.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),e.prototype.areSelectionValuesReversed=function(){var e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])},e.prototype.onTrim=function(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},e}();t.SelectionModel=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;var i=n(12);function o(e,t,n,i){var o=e-r(n,e),a=t-r(n,t);return l(Math.abs(o-a)-function(e,t,n){for(var i=0,o=e-r(n,e),a=t-r(n,t),c=0;c<Math.abs(o-a);c++){var l="A"===s(e,t)?-1:1,u=n.buffer.lines.get(o+l*c);u&&u.isWrapped&&i++}return i}(e,t,n),c(s(e,t),i))}function r(e,t){for(var n=0,i=e.buffer.lines.get(t),o=i&&i.isWrapped;o&&t>=0&&t<e.rows;)n++,o=(i=e.buffer.lines.get(--t))&&i.isWrapped;return n}function s(e,t){return e>t?"A":"B"}function a(e,t,n,i,o,r){for(var s=e,a=t,c="";s!==n||a!==i;)s+=o?1:-1,o&&s>r.cols-1?(c+=r.buffer.translateBufferLineToString(a,!1,e,s),s=0,e=0,a++):!o&&s<0&&(c+=r.buffer.translateBufferLineToString(a,!1,0,e+1),e=s=r.cols-1,a--);return c+r.buffer.translateBufferLineToString(a,!1,e,s)}function c(e,t){var n=t?"O":"[";return i.C0.ESC+n+e}function l(e,t){e=Math.floor(e);for(var n="",i=0;i<e;i++)n+=t;return n}t.moveToCellSequence=function(e,t,n,i){var s,u=n.buffer.x,h=n.buffer.y;if(!n.buffer.hasScrollback)return function(e,t,n,i,s,u){return 0===o(t,i,s,u).length?"":l(a(e,t,e,t-r(s,t),!1,s).length,c("D",u))}(u,h,0,t,n,i)+o(h,t,n,i)+function(e,t,n,i,s,u){var h;h=o(t,i,s,u).length>0?i-r(s,i):t;var d=i,f=function(e,t,n,i,s,a){var c;return c=o(n,i,s,a).length>0?i-r(s,i):t,e<n&&c<=i||e>=n&&c<i?"C":"D"}(e,t,n,i,s,u);return l(a(e,h,n,d,"C"===f,s).length,c(f,u))}(u,h,e,t,n,i);if(h===t)return s=u>e?"D":"C",l(Math.abs(u-e),c(s,i));s=h>t?"D":"C";var d=Math.abs(h-t);return l(function(e,t){return t.cols-e}(h>t?e:u,n)+(d-1)*n.cols+1+((h>t?u:e)-1),c(s,i))}},function(e,t,n){var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SoundService=void 0;var r=n(1),s=function(){function e(e){this._optionsService=e}return Object.defineProperty(e,"audioContext",{get:function(){if(!e._audioContext){var t=window.AudioContext||window.webkitAudioContext;if(!t)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;e._audioContext=new t}return e._audioContext},enumerable:!1,configurable:!0}),e.prototype.playBellSound=function(){var t=e.audioContext;if(t){var n=t.createBufferSource();t.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),(function(e){n.buffer=e,n.connect(t.destination),n.start(0)}))}},e.prototype._base64ToArrayBuffer=function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=t.charCodeAt(o);return i.buffer},e.prototype._removeMimeType=function(e){return e.split(",")[1]},e=i([o(0,r.IOptionsService)],e)}();t.SoundService=s},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZoneManager=void 0;var a=n(2),c=n(7),l=n(5),u=n(1),h=function(e){function t(t,n,i,o,r,s){var a=e.call(this)||this;return a._element=t,a._screenElement=n,a._bufferService=i,a._mouseService=o,a._selectionService=r,a._optionsService=s,a._zones=[],a._areZonesActive=!1,a._lastHoverCoords=[void 0,void 0],a._initialSelectionLength=0,a.register(c.addDisposableDomListener(a._element,"mousedown",(function(e){return a._onMouseDown(e)}))),a._mouseMoveListener=function(e){return a._onMouseMove(e)},a._mouseLeaveListener=function(e){return a._onMouseLeave(e)},a._clickListener=function(e){return a._onClick(e)},a}return o(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(e,t){if(0!==this._zones.length){e&&t||(e=0,t=this._bufferService.rows-1);for(var n=0;n<this._zones.length;n++){var i=this._zones[n];(i.y1>e&&i.y1<=t+1||i.y2>e&&i.y2<=t+1||i.y1<e&&i.y2>t+1)&&(this._currentZone&&this._currentZone===i&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(n--,1))}0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var t=this,n=this._findZoneEventAt(e);n!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),n&&(this._currentZone=n,n.hoverCallback&&n.hoverCallback(e),this._tooltipTimeout=window.setTimeout((function(){return t._onTooltip(e)}),this._optionsService.options.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var t=this._findZoneEventAt(e);t&&t.tooltipCallback&&t.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var t=this._findZoneEventAt(e);(null==t?void 0:t.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var t=this._findZoneEventAt(e),n=this._getSelectionLength();t&&n===this._initialSelectionLength&&(t.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(t)for(var n=t[0],i=t[1],o=0;o<this._zones.length;o++){var r=this._zones[o];if(r.y1===r.y2){if(i===r.y1&&n>=r.x1&&n<r.x2)return r}else if(i===r.y1&&n>=r.x1||i===r.y2&&n<r.x2||i>r.y1&&i<r.y2)return r}},r([s(2,u.IBufferService),s(3,l.IMouseService),s(4,l.ISelectionService),s(5,u.IOptionsService)],t)}(a.Disposable);t.MouseZoneManager=h},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;var r=n(17),s=n(11),a=n(30),c=n(7),l=n(2),u=n(31),h=function(e){function t(t,n){var i=e.call(this)||this;i._terminal=t,i._renderService=n,i._liveRegionLineCount=0,i._charsToConsume=[],i._charsToAnnounce="",i._accessibilityTreeRoot=document.createElement("div"),i._accessibilityTreeRoot.classList.add("xterm-accessibility"),i._rowContainer=document.createElement("div"),i._rowContainer.classList.add("xterm-accessibility-tree"),i._rowContainer.setAttribute("role","list"),i._rowElements=[];for(var o=0;o<i._terminal.rows;o++)i._rowElements[o]=i._createAccessibilityTreeNode(),i._rowContainer.appendChild(i._rowElements[o]);if(i._topBoundaryFocusListener=function(e){return i._onBoundaryFocus(e,0)},i._bottomBoundaryFocusListener=function(e){return i._onBoundaryFocus(e,1)},i._rowElements[0].addEventListener("focus",i._topBoundaryFocusListener),i._rowElements[i._rowElements.length-1].addEventListener("focus",i._bottomBoundaryFocusListener),i._refreshRowsDimensions(),i._accessibilityTreeRoot.appendChild(i._rowContainer),i._renderRowsDebouncer=new a.RenderDebouncer(i._renderRows.bind(i)),i._refreshRows(),i._liveRegion=document.createElement("div"),i._liveRegion.classList.add("live-region"),i._liveRegion.setAttribute("aria-live","assertive"),i._accessibilityTreeRoot.appendChild(i._liveRegion),!i._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return i._terminal.element.insertAdjacentElement("afterbegin",i._accessibilityTreeRoot),i.register(i._renderRowsDebouncer),i.register(i._terminal.onResize((function(e){return i._onResize(e.rows)}))),i.register(i._terminal.onRender((function(e){return i._refreshRows(e.start,e.end)}))),i.register(i._terminal.onScroll((function(){return i._refreshRows()}))),i.register(i._terminal.onA11yChar((function(e){return i._onChar(e)}))),i.register(i._terminal.onLineFeed((function(){return i._onChar("\n")}))),i.register(i._terminal.onA11yTab((function(e){return i._onTab(e)}))),i.register(i._terminal.onKey((function(e){return i._onKey(e.key)}))),i.register(i._terminal.onBlur((function(){return i._clearLiveRegion()}))),i.register(i._renderService.onDimensionsChange((function(){return i._refreshRowsDimensions()}))),i._screenDprMonitor=new u.ScreenDprMonitor,i.register(i._screenDprMonitor),i._screenDprMonitor.setListener((function(){return i._refreshRowsDimensions()})),i.register(c.addDisposableDomListener(window,"resize",(function(){return i._refreshRowsDimensions()}))),i}return o(t,e),t.prototype.dispose=function(){var t;e.prototype.dispose.call(this),null===(t=this._terminal.element)||void 0===t||t.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(e,t){var n=e.target,i=this._rowElements[0===t?1:this._rowElements.length-2];if(n.getAttribute("aria-posinset")!==(0===t?"1":""+this._terminal.buffer.lines.length)&&e.relatedTarget===i){var o,r;if(0===t?(o=n,r=this._rowElements.pop(),this._rowContainer.removeChild(r)):(o=this._rowElements.shift(),r=n,this._rowContainer.removeChild(o)),o.removeEventListener("focus",this._topBoundaryFocusListener),r.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){var s=this._createAccessibilityTreeNode();this._rowElements.unshift(s),this._rowContainer.insertAdjacentElement("afterbegin",s)}else s=this._createAccessibilityTreeNode(),this._rowElements.push(s),this._rowContainer.appendChild(s);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}},t.prototype._onResize=function(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e},t.prototype._onTab=function(e){for(var t=0;t<e;t++)this._onChar(" ")},t.prototype._onChar=function(e){var t=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=r.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((function(){t._accessibilityTreeRoot.appendChild(t._liveRegion)}),0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},t.prototype._onKey=function(e){this._clearLiveRegion(),this._charsToConsume.push(e)},t.prototype._refreshRows=function(e,t){this._renderRowsDebouncer.refresh(e,t,this._terminal.rows)},t.prototype._renderRows=function(e,t){for(var n=this._terminal.buffer,i=n.lines.length.toString(),o=e;o<=t;o++){var r=n.translateBufferLineToString(n.ydisp+o,!0),s=(n.ydisp+o+1).toString(),a=this._rowElements[o];a&&(0===r.length?a.innerHTML="&nbsp;":a.textContent=r,a.setAttribute("aria-posinset",s),a.setAttribute("aria-setsize",i))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}},t.prototype._refreshRowDimensions=function(e){e.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(l.Disposable);t.AccessibilityManager=h},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;var a=n(57),c=n(9),l=n(2),u=n(5),h=n(1),d=n(0),f=n(10),p=1,v=function(e){function t(t,n,i,o,r,s,c,l,u){var h=e.call(this)||this;return h._colors=t,h._element=n,h._screenElement=i,h._viewportElement=o,h._linkifier=r,h._linkifier2=s,h._charSizeService=c,h._optionsService=l,h._bufferService=u,h._terminalClass=p++,h._rowElements=[],h._rowContainer=document.createElement("div"),h._rowContainer.classList.add("xterm-rows"),h._rowContainer.style.lineHeight="normal",h._rowContainer.setAttribute("aria-hidden","true"),h._refreshRowElements(h._bufferService.cols,h._bufferService.rows),h._selectionContainer=document.createElement("div"),h._selectionContainer.classList.add("xterm-selection"),h._selectionContainer.setAttribute("aria-hidden","true"),h.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},h._updateDimensions(),h._injectCss(),h._rowFactory=new a.DomRendererRowFactory(document,h._optionsService,h._colors),h._element.classList.add("xterm-dom-renderer-owner-"+h._terminalClass),h._screenElement.appendChild(h._rowContainer),h._screenElement.appendChild(h._selectionContainer),h._linkifier.onShowLinkUnderline((function(e){return h._onLinkHover(e)})),h._linkifier.onHideLinkUnderline((function(e){return h._onLinkLeave(e)})),h._linkifier2.onShowLinkUnderline((function(e){return h._onLinkHover(e)})),h._linkifier2.onHideLinkUnderline((function(e){return h._onLinkLeave(e)})),h}return o(t,e),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return(new d.EventEmitter).event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass),this._screenElement.removeChild(this._rowContainer),this._screenElement.removeChild(this._selectionContainer),this._screenElement.removeChild(this._themeStyleElement),this._screenElement.removeChild(this._dimensionsStyleElement),e.prototype.dispose.call(this)},t.prototype._updateDimensions=function(){var e=this;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this._rowElements.forEach((function(t){t.style.width=e.dimensions.canvasWidth+"px",t.style.height=e.dimensions.actualCellHeight+"px",t.style.lineHeight=e.dimensions.actualCellHeight+"px",t.style.overflow="hidden"})),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var t=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.innerHTML=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.setColors=function(e){this._colors=e,this._injectCss()},t.prototype._injectCss=function(){var e=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var t=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";t+=this._terminalSelector+" span:not(."+a.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+a.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+a.ITALIC_CLASS+" { font-style: italic;}",t+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",t+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",t+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+a.CURSOR_CLASS+"."+a.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+a.CURSOR_CLASS+"."+a.CURSOR_BLINK_CLASS+":not(."+a.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+a.CURSOR_CLASS+"."+a.CURSOR_BLINK_CLASS+"."+a.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+a.CURSOR_CLASS+"."+a.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+a.CURSOR_CLASS+"."+a.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+a.CURSOR_CLASS+"."+a.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",t+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selection.css+";}",this._colors.ansi.forEach((function(n,i){t+=e._terminalSelector+" .xterm-fg-"+i+" { color: "+n.css+"; }"+e._terminalSelector+" .xterm-bg-"+i+" { background-color: "+n.css+"; }"})),t+=this._terminalSelector+" .xterm-fg-"+c.INVERTED_DEFAULT_COLOR+" { color: "+f.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" .xterm-bg-"+c.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.innerHTML=t},t.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},t.prototype._refreshRowElements=function(e,t){for(var n=this._rowElements.length;n<=t;n++){var i=document.createElement("div");this._rowContainer.appendChild(i),this._rowElements.push(i)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())},t.prototype.onResize=function(e,t){this._refreshRowElements(e,t),this._updateDimensions()},t.prototype.onCharSizeChanged=function(){this._updateDimensions()},t.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")},t.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")},t.prototype.onSelectionChanged=function(e,t,n){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(e&&t){var i=e[1]-this._bufferService.buffer.ydisp,o=t[1]-this._bufferService.buffer.ydisp,r=Math.max(i,0),s=Math.min(o,this._bufferService.rows-1);if(!(r>=this._bufferService.rows||s<0)){var a=document.createDocumentFragment();if(n)a.appendChild(this._createSelectionElement(r,e[0],t[0],s-r+1));else{var c=i===r?e[0]:0,l=r===s?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(r,c,l));var u=s-r-1;if(a.appendChild(this._createSelectionElement(r+1,0,this._bufferService.cols,u)),r!==s){var h=o===s?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(s,0,h))}}this._selectionContainer.appendChild(a)}}},t.prototype._createSelectionElement=function(e,t,n,i){void 0===i&&(i=1);var o=document.createElement("div");return o.style.height=i*this.dimensions.actualCellHeight+"px",o.style.top=e*this.dimensions.actualCellHeight+"px",o.style.left=t*this.dimensions.actualCellWidth+"px",o.style.width=this.dimensions.actualCellWidth*(n-t)+"px",o},t.prototype.onCursorMove=function(){},t.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},t.prototype.clear=function(){this._rowElements.forEach((function(e){return e.innerHTML=""}))},t.prototype.renderRows=function(e,t){for(var n=this._bufferService.buffer.ybase+this._bufferService.buffer.y,i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._optionsService.options.cursorBlink,r=e;r<=t;r++){var s=this._rowElements[r];s.innerHTML="";var a=r+this._bufferService.buffer.ydisp,c=this._bufferService.buffer.lines.get(a),l=this._optionsService.options.cursorStyle;s.appendChild(this._rowFactory.createRow(c,a===n,l,i,o,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(t.prototype,"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!1,configurable:!0}),t.prototype.registerCharacterJoiner=function(e){return-1},t.prototype.deregisterCharacterJoiner=function(e){return!1},t.prototype._onLinkHover=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)},t.prototype._onLinkLeave=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)},t.prototype._setCellUnderline=function(e,t,n,i,o,r){for(;e!==t||n!==i;){var s=this._rowElements[n];if(!s)return;var a=s.children[e];a&&(a.style.textDecoration=r?"underline":"none"),++e>=o&&(e=0,n++)}},r([s(6,u.ICharSizeService),s(7,h.IOptionsService),s(8,h.IBufferService)],t)}(l.Disposable);t.DomRenderer=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=t.CURSOR_STYLE_UNDERLINE_CLASS=t.CURSOR_STYLE_BAR_CLASS=t.CURSOR_STYLE_BLOCK_CLASS=t.CURSOR_BLINK_CLASS=t.CURSOR_CLASS=t.UNDERLINE_CLASS=t.ITALIC_CLASS=t.DIM_CLASS=t.BOLD_CLASS=void 0;var i=n(9),o=n(3),r=n(4),s=n(10);t.BOLD_CLASS="xterm-bold",t.DIM_CLASS="xterm-dim",t.ITALIC_CLASS="xterm-italic",t.UNDERLINE_CLASS="xterm-underline",t.CURSOR_CLASS="xterm-cursor",t.CURSOR_BLINK_CLASS="xterm-cursor-blink",t.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",t.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",t.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var a=function(){function e(e,t,n){this._document=e,this._optionsService=t,this._colors=n,this._workCell=new r.CellData}return e.prototype.setColors=function(e){this._colors=e},e.prototype.createRow=function(e,n,r,a,l,u,h){for(var d=this._document.createDocumentFragment(),f=0,p=Math.min(e.length,h)-1;p>=0;p--)if(e.loadCell(p,this._workCell).getCode()!==o.NULL_CELL_CODE||n&&p===a){f=p+1;break}for(p=0;p<f;p++){e.loadCell(p,this._workCell);var v=this._workCell.getWidth();if(0!==v){var m=this._document.createElement("span");if(v>1&&(m.style.width=u*v+"px"),n&&p===a)switch(m.classList.add(t.CURSOR_CLASS),l&&m.classList.add(t.CURSOR_BLINK_CLASS),r){case"bar":m.classList.add(t.CURSOR_STYLE_BAR_CLASS);break;case"underline":m.classList.add(t.CURSOR_STYLE_UNDERLINE_CLASS);break;default:m.classList.add(t.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&m.classList.add(t.BOLD_CLASS),this._workCell.isItalic()&&m.classList.add(t.ITALIC_CLASS),this._workCell.isDim()&&m.classList.add(t.DIM_CLASS),this._workCell.isUnderline()&&m.classList.add(t.UNDERLINE_CLASS),this._workCell.isInvisible()?m.textContent=o.WHITESPACE_CELL_CHAR:m.textContent=this._workCell.getChars()||o.WHITESPACE_CELL_CHAR;var _=this._workCell.getFgColor(),g=this._workCell.getFgColorMode(),y=this._workCell.getBgColor(),b=this._workCell.getBgColorMode(),w=!!this._workCell.isInverse();if(w){var C=_;_=y,y=C;var S=g;g=b,b=S}switch(g){case 16777216:case 33554432:this._workCell.isBold()&&_<8&&this._optionsService.options.drawBoldTextInBrightColors&&(_+=8),this._applyMinimumContrast(m,this._colors.background,this._colors.ansi[_])||m.classList.add("xterm-fg-"+_);break;case 50331648:var k=s.rgba.toColor(_>>16&255,_>>8&255,255&_);this._applyMinimumContrast(m,this._colors.background,k)||this._addStyle(m,"color:#"+c(_.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(m,this._colors.background,this._colors.foreground)||w&&m.classList.add("xterm-fg-"+i.INVERTED_DEFAULT_COLOR)}switch(b){case 16777216:case 33554432:m.classList.add("xterm-bg-"+y);break;case 50331648:this._addStyle(m,"background-color:#"+c(y.toString(16),"0",6));break;case 0:default:w&&m.classList.add("xterm-bg-"+i.INVERTED_DEFAULT_COLOR)}d.appendChild(m)}}return d},e.prototype._applyMinimumContrast=function(e,t,n){if(1===this._optionsService.options.minimumContrastRatio)return!1;var i=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===i&&(i=s.color.ensureContrastRatio(t,n,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,null!=i?i:null)),!!i&&(this._addStyle(e,"color:"+i.css),!0)},e.prototype._addStyle=function(e,t){e.setAttribute("style",""+(e.getAttribute("style")||"")+t+";")},e}();function c(e,t,n){for(;e.length<n;)e=t+e;return e}t.DomRendererRowFactory=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;var i=n(12),o={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(e,t,n,r){var s={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?s.key=t?i.C0.ESC+"OA":i.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?s.key=t?i.C0.ESC+"OD":i.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?s.key=t?i.C0.ESC+"OC":i.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(s.key=t?i.C0.ESC+"OB":i.C0.ESC+"[B");break;case 8:if(e.shiftKey){s.key=i.C0.BS;break}if(e.altKey){s.key=i.C0.ESC+i.C0.DEL;break}s.key=i.C0.DEL;break;case 9:if(e.shiftKey){s.key=i.C0.ESC+"[Z";break}s.key=i.C0.HT,s.cancel=!0;break;case 13:s.key=e.altKey?i.C0.ESC+i.C0.CR:i.C0.CR,s.cancel=!0;break;case 27:s.key=i.C0.ESC,e.altKey&&(s.key=i.C0.ESC+i.C0.ESC),s.cancel=!0;break;case 37:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"D",s.key===i.C0.ESC+"[1;3D"&&(s.key=i.C0.ESC+(n?"b":"[1;5D"))):s.key=t?i.C0.ESC+"OD":i.C0.ESC+"[D";break;case 39:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"C",s.key===i.C0.ESC+"[1;3C"&&(s.key=i.C0.ESC+(n?"f":"[1;5C"))):s.key=t?i.C0.ESC+"OC":i.C0.ESC+"[C";break;case 38:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"A",n||s.key!==i.C0.ESC+"[1;3A"||(s.key=i.C0.ESC+"[1;5A")):s.key=t?i.C0.ESC+"OA":i.C0.ESC+"[A";break;case 40:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"B",n||s.key!==i.C0.ESC+"[1;3B"||(s.key=i.C0.ESC+"[1;5B")):s.key=t?i.C0.ESC+"OB":i.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(s.key=i.C0.ESC+"[2~");break;case 46:s.key=a?i.C0.ESC+"[3;"+(a+1)+"~":i.C0.ESC+"[3~";break;case 36:s.key=a?i.C0.ESC+"[1;"+(a+1)+"H":t?i.C0.ESC+"OH":i.C0.ESC+"[H";break;case 35:s.key=a?i.C0.ESC+"[1;"+(a+1)+"F":t?i.C0.ESC+"OF":i.C0.ESC+"[F";break;case 33:e.shiftKey?s.type=2:s.key=i.C0.ESC+"[5~";break;case 34:e.shiftKey?s.type=3:s.key=i.C0.ESC+"[6~";break;case 112:s.key=a?i.C0.ESC+"[1;"+(a+1)+"P":i.C0.ESC+"OP";break;case 113:s.key=a?i.C0.ESC+"[1;"+(a+1)+"Q":i.C0.ESC+"OQ";break;case 114:s.key=a?i.C0.ESC+"[1;"+(a+1)+"R":i.C0.ESC+"OR";break;case 115:s.key=a?i.C0.ESC+"[1;"+(a+1)+"S":i.C0.ESC+"OS";break;case 116:s.key=a?i.C0.ESC+"[15;"+(a+1)+"~":i.C0.ESC+"[15~";break;case 117:s.key=a?i.C0.ESC+"[17;"+(a+1)+"~":i.C0.ESC+"[17~";break;case 118:s.key=a?i.C0.ESC+"[18;"+(a+1)+"~":i.C0.ESC+"[18~";break;case 119:s.key=a?i.C0.ESC+"[19;"+(a+1)+"~":i.C0.ESC+"[19~";break;case 120:s.key=a?i.C0.ESC+"[20;"+(a+1)+"~":i.C0.ESC+"[20~";break;case 121:s.key=a?i.C0.ESC+"[21;"+(a+1)+"~":i.C0.ESC+"[21~";break;case 122:s.key=a?i.C0.ESC+"[23;"+(a+1)+"~":i.C0.ESC+"[23~";break;case 123:s.key=a?i.C0.ESC+"[24;"+(a+1)+"~":i.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(n&&!r||!e.altKey||e.metaKey)n&&!e.altKey&&!e.ctrlKey&&e.metaKey?65===e.keyCode&&(s.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?s.key=e.key:e.key&&e.ctrlKey&&"_"===e.key&&(s.key=i.C0.US);else{var c=o[e.keyCode],l=c&&c[e.shiftKey?1:0];if(l)s.key=i.C0.ESC+l;else if(e.keyCode>=65&&e.keyCode<=90){var u=e.ctrlKey?e.keyCode-64:e.keyCode+32;s.key=i.C0.ESC+String.fromCharCode(u)}}else e.keyCode>=65&&e.keyCode<=90?s.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?s.key=i.C0.NUL:e.keyCode>=51&&e.keyCode<=55?s.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?s.key=i.C0.DEL:219===e.keyCode?s.key=i.C0.ESC:220===e.keyCode?s.key=i.C0.FS:221===e.keyCode&&(s.key=i.C0.GS)}return s}},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;var a=n(30),c=n(0),l=n(2),u=n(31),h=n(7),d=n(1),f=n(5),p=function(e){function t(t,n,i,o,r,s){var l=e.call(this)||this;if(l._renderer=t,l._rowCount=n,l._isPaused=!1,l._needsFullRefresh=!1,l._isNextRenderRedrawOnly=!0,l._needsSelectionRefresh=!1,l._canvasWidth=0,l._canvasHeight=0,l._selectionState={start:void 0,end:void 0,columnSelectMode:!1},l._onDimensionsChange=new c.EventEmitter,l._onRender=new c.EventEmitter,l._onRefreshRequest=new c.EventEmitter,l._renderDebouncer=new a.RenderDebouncer((function(e,t){return l._renderRows(e,t)})),l.register(l._renderDebouncer),l._screenDprMonitor=new u.ScreenDprMonitor,l._screenDprMonitor.setListener((function(){return l.onDevicePixelRatioChange()})),l.register(l._screenDprMonitor),l.register(s.onResize((function(e){return l._fullRefresh()}))),l.register(o.onOptionChange((function(){return l._renderer.onOptionsChanged()}))),l.register(r.onCharSizeChange((function(){return l.onCharSizeChanged()}))),l._renderer.onRequestRedraw((function(e){return l.refreshRows(e.start,e.end,!0)})),l.register(h.addDisposableDomListener(window,"resize",(function(){return l.onDevicePixelRatioChange()}))),"IntersectionObserver"in window){var d=new IntersectionObserver((function(e){return l._onIntersectionChange(e[e.length-1])}),{threshold:0});d.observe(i),l.register({dispose:function(){return d.disconnect()}})}return l}return o(t,e),Object.defineProperty(t.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),t.prototype._onIntersectionChange=function(e){this._isPaused=0===e.intersectionRatio,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},t.prototype.refreshRows=function(e,t,n){void 0===n&&(n=!1),this._isPaused?this._needsFullRefresh=!0:(n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))},t.prototype._renderRows=function(e,t){this._renderer.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0},t.prototype.resize=function(e,t){this._rowCount=t,this._fireOnCanvasResize()},t.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},t.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},t.prototype.dispose=function(){this._renderer.dispose(),e.prototype.dispose.call(this)},t.prototype.setRenderer=function(e){var t=this;this._renderer.dispose(),this._renderer=e,this._renderer.onRequestRedraw((function(e){return t.refreshRows(e.start,e.end,!0)})),this._needsSelectionRefresh=!0,this._fullRefresh()},t.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},t.prototype.setColors=function(e){this._renderer.setColors(e),this._fullRefresh()},t.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},t.prototype.onResize=function(e,t){this._renderer.onResize(e,t),this._fullRefresh()},t.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},t.prototype.onBlur=function(){this._renderer.onBlur()},t.prototype.onFocus=function(){this._renderer.onFocus()},t.prototype.onSelectionChanged=function(e,t,n){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=n,this._renderer.onSelectionChanged(e,t,n)},t.prototype.onCursorMove=function(){this._renderer.onCursorMove()},t.prototype.clear=function(){this._renderer.clear()},t.prototype.registerCharacterJoiner=function(e){return this._renderer.registerCharacterJoiner(e)},t.prototype.deregisterCharacterJoiner=function(e){return this._renderer.deregisterCharacterJoiner(e)},r([s(3,d.IOptionsService),s(4,f.ICharSizeService),s(5,d.IBufferService)],t)}(l.Disposable);t.RenderService=p},function(e,t,n){var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;var r=n(1),s=n(0),a=function(){function e(e,t,n){this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=new s.EventEmitter,this._measureStrategy=new c(e,t,this._optionsService)}return Object.defineProperty(e.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),e.prototype.measure=function(){var e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())},i([o(2,r.IOptionsService)],e)}();t.CharSizeService=a;var c=function(){function e(e,t,n){this._document=e,this._parentElement=t,this._optionsService=n,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return e.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var e=this._measureElement.getBoundingClientRect();return 0!==e.width&&0!==e.height&&(this._result.width=e.width,this._result.height=Math.ceil(e.height)),this._result},e}()},function(e,t,n){var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;var r=n(5),s=n(29),a=function(){function e(e,t){this._renderService=e,this._charSizeService=t}return e.prototype.getCoords=function(e,t,n,i,o){return s.getCoords(e,t,n,i,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,o)},e.prototype.getRawByteCoords=function(e,t,n,i){var o=this.getCoords(e,t,n,i);return s.getRawByteCoords(o)},i([o(0,r.IRenderService),o(1,r.ICharSizeService)],e)}();t.MouseService=a},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;var a=n(1),c=n(0),l=n(2),u=n(7),h=function(e){function t(t){var n=e.call(this)||this;return n._bufferService=t,n._linkProviders=[],n._linkCacheDisposables=[],n._isMouseOut=!0,n._activeLine=-1,n._onShowLinkUnderline=n.register(new c.EventEmitter),n._onHideLinkUnderline=n.register(new c.EventEmitter),n.register(l.getDisposeArrayDisposable(n._linkCacheDisposables)),n}return o(t,e),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var t=this;return this._linkProviders.push(e),{dispose:function(){var n=t._linkProviders.indexOf(e);-1!==n&&t._linkProviders.splice(n,1)}}},t.prototype.attachToDom=function(e,t,n){var i=this;this._element=e,this._mouseService=t,this._renderService=n,this.register(u.addDisposableDomListener(this._element,"mouseleave",(function(){i._isMouseOut=!0,i._clearCurrentLink()}))),this.register(u.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this))),this.register(u.addDisposableDomListener(this._element,"click",this._onClick.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(t){this._isMouseOut=!1;for(var n=e.composedPath(),i=0;i<n.length;i++){var o=n[i];if(o.classList.contains("xterm"))break;if(o.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._onHover(t),this._lastBufferCell=t)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,t){var n=this;this._activeProviderReplies&&t||(this._activeProviderReplies=new Map,this._activeLine=e.y);var i=!1;this._linkProviders.forEach((function(o,r){var s;t?(null===(s=n._activeProviderReplies)||void 0===s?void 0:s.get(r))&&(i=n._checkLinkProviderResult(r,e,i)):o.provideLinks(e.y,(function(t){var o,s;if(!n._isMouseOut){var a=null==t?void 0:t.map((function(e){return{link:e}}));null===(o=n._activeProviderReplies)||void 0===o||o.set(r,a),i=n._checkLinkProviderResult(r,e,i),(null===(s=n._activeProviderReplies)||void 0===s?void 0:s.size)===n._linkProviders.length&&n._removeIntersectingLinks(e.y,n._activeProviderReplies)}}))}))},t.prototype._removeIntersectingLinks=function(e,t){for(var n=new Set,i=0;i<t.size;i++){var o=t.get(i);if(o)for(var r=0;r<o.length;r++)for(var s=o[r],a=s.link.range.start.y<e?0:s.link.range.start.x,c=s.link.range.end.y>e?this._bufferService.cols:s.link.range.end.x,l=a;l<=c;l++){if(n.has(l)){o.splice(r--,1);break}n.add(l)}}},t.prototype._checkLinkProviderResult=function(e,t,n){var i,o=this;if(!this._activeProviderReplies)return n;for(var r=this._activeProviderReplies.get(e),s=!1,a=0;a<e;a++)this._activeProviderReplies.has(a)&&!this._activeProviderReplies.get(a)||(s=!0);if(!s&&r){var c=r.find((function(e){return o._linkAtPosition(e.link,t)}));c&&(n=!0,this._handleNewLink(c))}if(this._activeProviderReplies.size===this._linkProviders.length&&!n)for(a=0;a<this._activeProviderReplies.size;a++){var l=null===(i=this._activeProviderReplies.get(a))||void 0===i?void 0:i.find((function(e){return o._linkAtPosition(e.link,t)}));if(l){n=!0,this._handleNewLink(l);break}}return n},t.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,t){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,l.disposeArray(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var t=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var n=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);n&&this._linkAtPosition(e.link,n)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var e,n;return null===(n=null===(e=t._currentLink)||void 0===e?void 0:e.state)||void 0===n?void 0:n.decorations.pointerCursor},set:function(e){var n,i;(null===(n=t._currentLink)||void 0===n?void 0:n.state)&&t._currentLink.state.decorations.pointerCursor!==e&&(t._currentLink.state.decorations.pointerCursor=e,t._currentLink.state.isHovered&&(null===(i=t._element)||void 0===i||i.classList.toggle("xterm-cursor-pointer",e)))}},underline:{get:function(){var e,n;return null===(n=null===(e=t._currentLink)||void 0===e?void 0:e.state)||void 0===n?void 0:n.decorations.underline},set:function(n){var i,o,r;(null===(i=t._currentLink)||void 0===i?void 0:i.state)&&(null===(r=null===(o=t._currentLink)||void 0===o?void 0:o.state)||void 0===r?void 0:r.decorations.underline)!==n&&(t._currentLink.state.decorations.underline=n,t._currentLink.state.isHovered&&t._fireUnderlineEvent(e.link,n))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange((function(e){var n=0===e.start?0:e.start+1+t._bufferService.buffer.ydisp;t._clearCurrentLink(n,e.end+1+t._bufferService.buffer.ydisp)}))))}},t.prototype._linkHover=function(e,t,n){var i;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(n,t.text)},t.prototype._fireUnderlineEvent=function(e,t){var n=e.range,i=this._bufferService.buffer.ydisp,o=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-i-1,n.end.x,n.end.y-i-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(o)},t.prototype._linkLeave=function(e,t,n){var i;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(n,t.text)},t.prototype._linkAtPosition=function(e,t){var n=e.range.start.y===e.range.end.y,i=e.range.start.y<t.y,o=e.range.end.y>t.y;return(n&&e.range.start.x<=t.x&&e.range.end.x>=t.x||i&&e.range.end.x>=t.x||o&&e.range.start.x<=t.x||i&&o)&&e.range.start.y<=t.y&&e.range.end.y>=t.y},t.prototype._positionFromMouseEvent=function(e,t,n){var i=n.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(i)return{x:i[0],y:i[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,t,n,i,o){return{x1:e,y1:t,x2:n,y2:i,cols:this._bufferService.cols,fg:o}},r([s(0,a.IBufferService)],t)}(l.Disposable);t.Linkifier2=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0;var i=function(){function e(e){this._textarea=e}return Object.defineProperty(e.prototype,"isFocused",{get:function(){return document.activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),e}();t.CoreBrowserService=i},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;var r=n(2),s=n(1),a=n(65),c=n(66),l=n(67),u=n(73),h=n(74),d=n(0),f=n(75),p=n(76),v=n(77),m=n(79),_=n(80),g=n(18),y=n(81),b=function(e){function t(t){var n=e.call(this)||this;return n._onBinary=new d.EventEmitter,n._onData=new d.EventEmitter,n._onLineFeed=new d.EventEmitter,n._onResize=new d.EventEmitter,n._onScroll=new d.EventEmitter,n._instantiationService=new a.InstantiationService,n.optionsService=new u.OptionsService(t),n._instantiationService.setService(s.IOptionsService,n.optionsService),n._bufferService=n.register(n._instantiationService.createInstance(l.BufferService)),n._instantiationService.setService(s.IBufferService,n._bufferService),n._logService=n._instantiationService.createInstance(c.LogService),n._instantiationService.setService(s.ILogService,n._logService),n._coreService=n.register(n._instantiationService.createInstance(h.CoreService,(function(){return n.scrollToBottom()}))),n._instantiationService.setService(s.ICoreService,n._coreService),n._coreMouseService=n._instantiationService.createInstance(f.CoreMouseService),n._instantiationService.setService(s.ICoreMouseService,n._coreMouseService),n._dirtyRowService=n._instantiationService.createInstance(p.DirtyRowService),n._instantiationService.setService(s.IDirtyRowService,n._dirtyRowService),n.unicodeService=n._instantiationService.createInstance(v.UnicodeService),n._instantiationService.setService(s.IUnicodeService,n.unicodeService),n._charsetService=n._instantiationService.createInstance(m.CharsetService),n._instantiationService.setService(s.ICharsetService,n._charsetService),n._inputHandler=new g.InputHandler(n._bufferService,n._charsetService,n._coreService,n._dirtyRowService,n._logService,n.optionsService,n._coreMouseService,n.unicodeService),n.register(d.forwardEvent(n._inputHandler.onLineFeed,n._onLineFeed)),n.register(n._inputHandler),n.register(d.forwardEvent(n._bufferService.onResize,n._onResize)),n.register(d.forwardEvent(n._coreService.onData,n._onData)),n.register(d.forwardEvent(n._coreService.onBinary,n._onBinary)),n.register(n.optionsService.onOptionChange((function(e){return n._updateOptions(e)}))),n._writeBuffer=new y.WriteBuffer((function(e){return n._inputHandler.parse(e)})),n}return o(t,e),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t;this._isDisposed||(e.prototype.dispose.call(this),null===(t=this._windowsMode)||void 0===t||t.dispose(),this._windowsMode=void 0)},t.prototype.write=function(e,t){this._writeBuffer.write(e,t)},t.prototype.writeSync=function(e){this._writeBuffer.writeSync(e)},t.prototype.resize=function(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,l.MINIMUM_COLS),t=Math.max(t,l.MINIMUM_ROWS),this._bufferService.resize(e,t))},t.prototype.scroll=function(e,t){void 0===t&&(t=!1);var n,i=this._bufferService.buffer;(n=this._cachedBlankLine)&&n.length===this.cols&&n.getFg(0)===e.fg&&n.getBg(0)===e.bg||(n=i.getBlankLine(e,t),this._cachedBlankLine=n),n.isWrapped=t;var o=i.ybase+i.scrollTop,r=i.ybase+i.scrollBottom;if(0===i.scrollTop){var s=i.lines.isFull;r===i.lines.length-1?s?i.lines.recycle().copyFrom(n):i.lines.push(n.clone()):i.lines.splice(r+1,0,n.clone()),s?this._bufferService.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this._bufferService.isUserScrolling||i.ydisp++)}else{var a=r-o+1;i.lines.shiftElements(o+1,a-1,-1),i.lines.set(r,n.clone())}this._bufferService.isUserScrolling||(i.ydisp=i.ybase),this._dirtyRowService.markRangeDirty(i.scrollTop,i.scrollBottom),this._onScroll.fire(i.ydisp)},t.prototype.scrollLines=function(e,t){var n=this._bufferService.buffer;if(e<0){if(0===n.ydisp)return;this._bufferService.isUserScrolling=!0}else e+n.ydisp>=n.ybase&&(this._bufferService.isUserScrolling=!1);var i=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+e,n.ybase),0),i!==n.ydisp&&(t||this._onScroll.fire(n.ydisp))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this._bufferService.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)},t.prototype.scrollToLine=function(e){var t=e-this._bufferService.buffer.ydisp;0!==t&&this.scrollLines(t)},t.prototype.addEscHandler=function(e,t){return this._inputHandler.addEscHandler(e,t)},t.prototype.addDcsHandler=function(e,t){return this._inputHandler.addDcsHandler(e,t)},t.prototype.addCsiHandler=function(e,t){return this._inputHandler.addCsiHandler(e,t)},t.prototype.addOscHandler=function(e,t){return this._inputHandler.addOscHandler(e,t)},t.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},t.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this._coreService.reset(),this._coreMouseService.reset()},t.prototype._updateOptions=function(e){var t;switch(e){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():(null===(t=this._windowsMode)||void 0===t||t.dispose(),this._windowsMode=void 0)}},t.prototype._enableWindowsMode=function(){var e=this;if(!this._windowsMode){var t=[];t.push(this.onLineFeed(_.updateWindowsModeWrappedState.bind(null,this._bufferService))),t.push(this.addCsiHandler({final:"H"},(function(){return _.updateWindowsModeWrappedState(e._bufferService),!1}))),this._windowsMode={dispose:function(){t.forEach((function(e){return e.dispose()}))}}}},t}(r.Disposable);t.CoreTerminal=b},function(e,t,n){var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;var o=n(1),r=n(14),s=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._entries=new Map;for(var n=0,i=e;n<i.length;n++){var o=i[n],r=o[0],s=o[1];this.set(r,s)}}return e.prototype.set=function(e,t){var n=this._entries.get(e);return this._entries.set(e,t),n},e.prototype.forEach=function(e){this._entries.forEach((function(t,n){return e(n,t)}))},e.prototype.has=function(e){return this._entries.has(e)},e.prototype.get=function(e){return this._entries.get(e)},e}();t.ServiceCollection=s;var a=function(){function e(){this._services=new s,this._services.set(o.IInstantiationService,this)}return e.prototype.setService=function(e,t){this._services.set(e,t)},e.prototype.getService=function(e){return this._services.get(e)},e.prototype.createInstance=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var o=r.getServiceDependencies(e).sort((function(e,t){return e.index-t.index})),s=[],a=0,c=o;a<c.length;a++){var l=c[a],u=this._services.get(l.id);if(!u)throw new Error("[createInstance] "+e.name+" depends on UNKNOWN service "+l.id+".");s.push(u)}var h=o.length>0?o[0].index:t.length;if(t.length!==h)throw new Error("[createInstance] First service dependency of "+e.name+" at position "+(h+1)+" conflicts with "+t.length+" static arguments");return new(e.bind.apply(e,i([void 0],i(t,s))))},e}();t.InstantiationService=a},function(e,t,n){var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=t.LogLevel=void 0;var s,a=n(1);!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.OFF=4]="OFF"}(s=t.LogLevel||(t.LogLevel={}));var c={debug:s.DEBUG,info:s.INFO,warn:s.WARN,error:s.ERROR,off:s.OFF},l=function(){function e(e){var t=this;this._optionsService=e,this._updateLogLevel(),this._optionsService.onOptionChange((function(e){"logLevel"===e&&t._updateLogLevel()}))}return e.prototype._updateLogLevel=function(){this._logLevel=c[this._optionsService.options.logLevel]},e.prototype._evalLazyOptionalParams=function(e){for(var t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())},e.prototype._log=function(e,t,n){this._evalLazyOptionalParams(n),e.call.apply(e,r([console,"xterm.js: "+t],n))},e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._logLevel<=s.DEBUG&&this._log(console.log,e,t)},e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._logLevel<=s.INFO&&this._log(console.info,e,t)},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._logLevel<=s.WARN&&this._log(console.warn,e,t)},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._logLevel<=s.ERROR&&this._log(console.error,e,t)},i([o(0,a.IOptionsService)],e)}();t.LogService=l},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;var a=n(1),c=n(68),l=n(0),u=n(2);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;var h=function(e){function n(n){var i=e.call(this)||this;return i._optionsService=n,i.isUserScrolling=!1,i._onResize=new l.EventEmitter,i.cols=Math.max(n.options.cols,t.MINIMUM_COLS),i.rows=Math.max(n.options.rows,t.MINIMUM_ROWS),i.buffers=new c.BufferSet(n,i),i}return o(n,e),Object.defineProperty(n.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){e.prototype.dispose.call(this),this.buffers.dispose()},n.prototype.resize=function(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:t})},n.prototype.reset=function(){this.buffers.dispose(),this.buffers=new c.BufferSet(this._optionsService,this),this.isUserScrolling=!1},r([s(0,a.IOptionsService)],n)}(u.Disposable);t.BufferService=h},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;var r=n(69),s=n(0),a=function(e){function t(t,n){var i=e.call(this)||this;return i._onBufferActivate=i.register(new s.EventEmitter),i._normal=new r.Buffer(!0,t,n),i._normal.fillViewportRows(),i._alt=new r.Buffer(!1,t,n),i._activeBuffer=i._normal,i.setupTabStops(),i}return o(t,e),Object.defineProperty(t.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),t.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},t.prototype.activateAltBuffer=function(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},t.prototype.resize=function(e,t){this._normal.resize(e,t),this._alt.resize(e,t)},t.prototype.setupTabStops=function(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)},t}(n(2).Disposable);t.BufferSet=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BufferStringIterator=t.Buffer=t.MAX_BUFFER_SIZE=void 0;var i=n(70),o=n(16),r=n(4),s=n(3),a=n(71),c=n(72),l=n(19),u=n(6);t.MAX_BUFFER_SIZE=4294967295;var h=function(){function e(e,t,n){this._hasScrollback=e,this._optionsService=t,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=r.CellData.fromCharData([0,s.NULL_CELL_CHAR,s.NULL_CELL_WIDTH,s.NULL_CELL_CODE]),this._whitespaceCell=r.CellData.fromCharData([0,s.WHITESPACE_CELL_CHAR,s.WHITESPACE_CELL_WIDTH,s.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new i.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return e.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell},e.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell},e.prototype.getBlankLine=function(e,t){return new o.BufferLine(this._bufferService.cols,this.getNullCell(e),t)},Object.defineProperty(e.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),e.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var n=e+this._optionsService.options.scrollback;return n>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:n},e.prototype.fillViewportRows=function(e){if(0===this.lines.length){void 0===e&&(e=o.DEFAULT_ATTR_DATA);for(var t=this._rows;t--;)this.lines.push(this.getBlankLine(e))}},e.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new i.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},e.prototype.resize=function(e,t){var n=this.getNullCell(o.DEFAULT_ATTR_DATA),i=this._getCorrectBufferLength(t);if(i>this.lines.maxLength&&(this.lines.maxLength=i),this.lines.length>0){if(this._cols<e)for(var r=0;r<this.lines.length;r++)this.lines.get(r).resize(e,n);var s=0;if(this._rows<t)for(var a=this._rows;a<t;a++)this.lines.length<t+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new o.BufferLine(e,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+s+1?(this.ybase--,s++,this.ydisp>0&&this.ydisp--):this.lines.push(new o.BufferLine(e,n)));else for(a=this._rows;a>t;a--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(i<this.lines.maxLength){var c=this.lines.length-i;c>0&&(this.lines.trimStart(c),this.ybase=Math.max(this.ybase-c,0),this.ydisp=Math.max(this.ydisp-c,0),this.savedY=Math.max(this.savedY-c,0)),this.lines.maxLength=i}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),s&&(this.y+=s),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(r=0;r<this.lines.length;r++)this.lines.get(r).resize(e,n);this._cols=e,this._rows=t},Object.defineProperty(e.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),e.prototype._reflow=function(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))},e.prototype._reflowLarger=function(e,t){var n=a.reflowLargerGetLinesToRemove(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(n.length>0){var i=a.reflowLargerCreateNewLayout(this.lines,n);a.reflowLargerApplyNewLayout(this.lines,i.layout),this._reflowLargerAdjustViewport(e,t,i.countRemoved)}},e.prototype._reflowLargerAdjustViewport=function(e,t,n){for(var i=this.getNullCell(o.DEFAULT_ATTR_DATA),r=n;r-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new o.BufferLine(e,i))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)},e.prototype._reflowSmaller=function(e,t){for(var n=this.getNullCell(o.DEFAULT_ATTR_DATA),i=[],r=0,s=this.lines.length-1;s>=0;s--){var c=this.lines.get(s);if(!(!c||!c.isWrapped&&c.getTrimmedLength()<=e)){for(var l=[c];c.isWrapped&&s>0;)c=this.lines.get(--s),l.unshift(c);var u=this.ybase+this.y;if(!(u>=s&&u<s+l.length)){var h,d=l[l.length-1].getTrimmedLength(),f=a.reflowSmallerGetNewLineLengths(l,this._cols,e),p=f.length-l.length;h=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+p):Math.max(0,this.lines.length-this.lines.maxLength+p);for(var v=[],m=0;m<p;m++){var _=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);v.push(_)}v.length>0&&(i.push({start:s+l.length+r,newLines:v}),r+=v.length),l.push.apply(l,v);var g=f.length-1,y=f[g];0===y&&(y=f[--g]);for(var b=l.length-p-1,w=d;b>=0;){var C=Math.min(w,y);if(l[g].copyCellsFrom(l[b],w-C,y-C,C,!0),0==(y-=C)&&(y=f[--g]),0==(w-=C)){b--;var S=Math.max(b,0);w=a.getWrappedLineTrimmedLength(l,S,this._cols)}}for(m=0;m<l.length;m++)f[m]<e&&l[m].setCell(f[m],n);for(var k=p-h;k-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+r)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+p,this.ybase+t-1)}}}if(i.length>0){var E=[],x=[];for(m=0;m<this.lines.length;m++)x.push(this.lines.get(m));var T=this.lines.length,L=T-1,R=0,M=i[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+r);var O=0;for(m=Math.min(this.lines.maxLength-1,T+r-1);m>=0;m--)if(M&&M.start>L+O){for(var A=M.newLines.length-1;A>=0;A--)this.lines.set(m--,M.newLines[A]);m++,E.push({index:L+1,amount:M.newLines.length}),O+=M.newLines.length,M=i[++R]}else this.lines.set(m,x[L--]);var $=0;for(m=E.length-1;m>=0;m--)E[m].index+=$,this.lines.onInsertEmitter.fire(E[m]),$+=E[m].amount;var D=Math.max(0,T+r-this.lines.maxLength);D>0&&this.lines.onTrimEmitter.fire(D)}},e.prototype.stringIndexToBufferIndex=function(e,t,n){for(void 0===n&&(n=!1);t;){var i=this.lines.get(e);if(!i)return[-1,-1];for(var o=n?i.getTrimmedLength():i.length,r=0;r<o;++r)if(i.get(r)[s.CHAR_DATA_WIDTH_INDEX]&&(t-=i.get(r)[s.CHAR_DATA_CHAR_INDEX].length||1),t<0)return[e,r];e++}return[e,0]},e.prototype.translateBufferLineToString=function(e,t,n,i){void 0===n&&(n=0);var o=this.lines.get(e);return o?o.translateToString(t,n,i):""},e.prototype.getWrappedRangeForLine=function(e){for(var t=e,n=e;t>0&&this.lines.get(t).isWrapped;)t--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:t,last:n}},e.prototype.setupTabStops=function(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},e.prototype.prevStop=function(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},e.prototype.nextStop=function(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},e.prototype.addMarker=function(e){var t=this,n=new c.Marker(e);return this.markers.push(n),n.register(this.lines.onTrim((function(e){n.line-=e,n.line<0&&n.dispose()}))),n.register(this.lines.onInsert((function(e){n.line>=e.index&&(n.line+=e.amount)}))),n.register(this.lines.onDelete((function(e){n.line>=e.index&&n.line<e.index+e.amount&&n.dispose(),n.line>e.index&&(n.line-=e.amount)}))),n.register(n.onDispose((function(){return t._removeMarker(n)}))),n},e.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},e.prototype.iterator=function(e,t,n,i,o){return new d(this,e,t,n,i,o)},e}();t.Buffer=h;var d=function(){function e(e,t,n,i,o,r){void 0===n&&(n=0),void 0===i&&(i=e.lines.length),void 0===o&&(o=0),void 0===r&&(r=0),this._buffer=e,this._trimRight=t,this._startIndex=n,this._endIndex=i,this._startOverscan=o,this._endOverscan=r,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return e.prototype.hasNext=function(){return this._current<this._endIndex},e.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var t="",n=e.first;n<=e.last;++n)t+=this._buffer.translateBufferLineToString(n,this._trimRight);return this._current=e.last+1,{range:e,content:t}},e}();t.BufferStringIterator=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;var i=n(0),o=function(){function e(e){this._maxLength=e,this.onDeleteEmitter=new i.EventEmitter,this.onInsertEmitter=new i.EventEmitter,this.onTrimEmitter=new i.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(e.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLength},set:function(e){if(this._maxLength!==e){for(var t=new Array(e),n=0;n<Math.min(e,this.length);n++)t[n]=this._array[this._getCyclicIndex(n)];this._array=t,this._maxLength=e,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(e){if(e>this._length)for(var t=this._length;t<e;t++)this._array[t]=void 0;this._length=e},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._array[this._getCyclicIndex(e)]},e.prototype.set=function(e,t){this._array[this._getCyclicIndex(e)]=t},e.prototype.push=function(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},e.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(e.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),e.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},e.prototype.splice=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(t){for(var o=e;o<this._length-t;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+t)];this._length-=t}for(o=this._length-1;o>=e;o--)this._array[this._getCyclicIndex(o+n.length)]=this._array[this._getCyclicIndex(o)];for(o=0;o<n.length;o++)this._array[this._getCyclicIndex(e+o)]=n[o];if(this._length+n.length>this._maxLength){var r=this._length+n.length-this._maxLength;this._startIndex+=r,this._length=this._maxLength,this.onTrimEmitter.fire(r)}else this._length+=n.length},e.prototype.trimStart=function(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)},e.prototype.shiftElements=function(e,t,n){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(var i=t-1;i>=0;i--)this.set(e+i+n,this.get(e+i));var o=e+t+n-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(i=0;i<t;i++)this.set(e+i+n,this.get(e+i))}},e.prototype._getCyclicIndex=function(e){return(this._startIndex+e)%this._maxLength},e}();t.CircularList=o},function(e,t,n){function i(e,t,n){if(t===e.length-1)return e[t].getTrimmedLength();var i=!e[t].hasContent(n-1)&&1===e[t].getWidth(n-1),o=2===e[t+1].getWidth(0);return i&&o?n-1:n}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,n,o,r){for(var s=[],a=0;a<e.length-1;a++){var c=a,l=e.get(++c);if(l.isWrapped){for(var u=[e.get(a)];c<e.length&&l.isWrapped;)u.push(l),l=e.get(++c);if(o>=a&&o<c)a+=u.length-1;else{for(var h=0,d=i(u,h,t),f=1,p=0;f<u.length;){var v=i(u,f,t),m=v-p,_=n-d,g=Math.min(m,_);u[h].copyCellsFrom(u[f],p,d,g,!1),(d+=g)===n&&(h++,d=0),(p+=g)===v&&(f++,p=0),0===d&&0!==h&&2===u[h-1].getWidth(n-1)&&(u[h].copyCellsFrom(u[h-1],n-1,d++,1,!1),u[h-1].setCell(n-1,r))}u[h].replaceCells(d,n,r);for(var y=0,b=u.length-1;b>0&&(b>h||0===u[b].getTrimmedLength());b--)y++;y>0&&(s.push(a+u.length-y),s.push(y)),a+=u.length-1}}}return s},t.reflowLargerCreateNewLayout=function(e,t){for(var n=[],i=0,o=t[i],r=0,s=0;s<e.length;s++)if(o===s){var a=t[++i];e.onDeleteEmitter.fire({index:s-r,amount:a}),s+=a-1,r+=a,o=t[++i]}else n.push(s);return{layout:n,countRemoved:r}},t.reflowLargerApplyNewLayout=function(e,t){for(var n=[],i=0;i<t.length;i++)n.push(e.get(t[i]));for(i=0;i<n.length;i++)e.set(i,n[i]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,n){for(var o=[],r=e.map((function(n,o){return i(e,o,t)})).reduce((function(e,t){return e+t})),s=0,a=0,c=0;c<r;){if(r-c<n){o.push(r-c);break}s+=n;var l=i(e,a,t);s>l&&(s-=l,a++);var u=2===e[a].getWidth(s-1);u&&s--;var h=u?n-1:n;o.push(h),c+=h}return o},t.getWrappedLineTrimmedLength=i},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;var r=n(0),s=function(e){function t(n){var i=e.call(this)||this;return i.line=n,i._id=t._nextId++,i.isDisposed=!1,i._onDispose=new r.EventEmitter,i}return o(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire())},t._nextId=1,t}(n(2).Disposable);t.Marker=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=t.DEFAULT_BELL_SOUND=void 0;var i=n(0),o=n(11),r=n(32);t.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",t.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:t.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:o.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",convertEol:!1,termName:"xterm",cancelEvents:!1});var s=["cols","rows"],a=function(){function e(e){var n=this;this._onOptionChange=new i.EventEmitter,this.options=r.clone(t.DEFAULT_OPTIONS),Object.keys(e).forEach((function(t){if(t in n.options){var i=e[t];n.options[t]=i}}))}return Object.defineProperty(e.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),e.prototype.setOption=function(e,n){if(!(e in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');if(-1!==s.indexOf(e))throw new Error('Option "'+e+'" can only be set in the constructor');this.options[e]!==n&&(n=this._sanitizeAndValidateOption(e,n),this.options[e]!==n&&(this.options[e]=n,this._onOptionChange.fire(e)))},e.prototype._sanitizeAndValidateOption=function(e,n){switch(e){case"bellStyle":case"cursorStyle":case"fontWeight":case"fontWeightBold":case"rendererType":case"wordSeparator":n||(n=t.DEFAULT_OPTIONS[e]);break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(e+" cannot be less than 1, value: "+n);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(e+" cannot be less than 0, value: "+n);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(e+" cannot be less than or equal to 0, value: "+n)}return n},e.prototype.getOption=function(e){if(!(e in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return this.options[e]},e}();t.OptionsService=a},function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;var a=n(1),c=n(0),l=n(32),u=n(2),h=Object.freeze({insertMode:!1}),d=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),f=function(e){function t(t,n,i,o){var r=e.call(this)||this;return r._bufferService=n,r._logService=i,r._optionsService=o,r.isCursorInitialized=!1,r.isCursorHidden=!1,r._onData=r.register(new c.EventEmitter),r._onUserInput=r.register(new c.EventEmitter),r._onBinary=r.register(new c.EventEmitter),r._scrollToBottom=t,r.register({dispose:function(){return r._scrollToBottom=void 0}}),r.modes=l.clone(h),r.decPrivateModes=l.clone(d),r}return o(t,e),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.modes=l.clone(h),this.decPrivateModes=l.clone(d)},t.prototype.triggerDataEvent=function(e,t){if(void 0===t&&(t=!1),!this._optionsService.options.disableStdin){var n=this._bufferService.buffer;n.ybase!==n.ydisp&&this._scrollToBottom(),t&&this._onUserInput.fire(),this._logService.debug('sending data "'+e+'"',(function(){return e.split("").map((function(e){return e.charCodeAt(0)}))})),this._onData.fire(e)}},t.prototype.triggerBinaryEvent=function(e){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+e+'"',(function(){return e.split("").map((function(e){return e.charCodeAt(0)}))})),this._onBinary.fire(e))},r([s(1,a.IBufferService),s(2,a.ILogService),s(3,a.IOptionsService)],t)}(u.Disposable);t.CoreService=f},function(e,t,n){var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;var r=n(1),s=n(0),a={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(e){return 4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)}},VT200:{events:19,restrict:function(e){return 32!==e.action}},DRAG:{events:23,restrict:function(e){return 32!==e.action||3!==e.button}},ANY:{events:31,restrict:function(e){return!0}}};function c(e,t){var n=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(n|=64,n|=e.action):(n|=3&e.button,4&e.button&&(n|=64),8&e.button&&(n|=128),32===e.action?n|=32:0!==e.action||t||(n|=3)),n}var l=String.fromCharCode,u={DEFAULT:function(e){var t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"[M"+l(t[0])+l(t[1])+l(t[2])},SGR:function(e){var t=0===e.action&&4!==e.button?"m":"M";return"[<"+c(e,!0)+";"+e.col+";"+e.row+t}},h=function(){function e(e,t){var n=this;this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new s.EventEmitter,this._lastEvent=null,Object.keys(a).forEach((function(e){return n.addProtocol(e,a[e])})),Object.keys(u).forEach((function(e){return n.addEncoding(e,u[e])})),this.reset()}return e.prototype.addProtocol=function(e,t){this._protocols[e]=t},e.prototype.addEncoding=function(e,t){this._encodings[e]=t},Object.defineProperty(e.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol "'+e+'"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding "'+e+'"');this._activeEncoding=e},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(e.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),e.prototype.triggerMouseEvent=function(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._compareEvents(this._lastEvent,e))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;var t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0},e.prototype.explainEvents=function(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}},e.prototype._compareEvents=function(e,t){return e.col===t.col&&e.row===t.row&&e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift},i([o(0,r.IBufferService),o(1,r.ICoreService)],e)}();t.CoreMouseService=h},function(e,t,n){var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirtyRowService=void 0;var r=n(1),s=function(){function e(e){this._bufferService=e,this.clearRange()}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),e.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},e.prototype.markDirty=function(e){e<this._start?this._start=e:e>this._end&&(this._end=e)},e.prototype.markRangeDirty=function(e,t){if(e>t){var n=e;e=t,t=n}e<this._start&&(this._start=e),t>this._end&&(this._end=t)},e.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},i([o(0,r.IBufferService)],e)}();t.DirtyRowService=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;var i=n(0),o=n(78),r=function(){function e(){this._providers=Object.create(null),this._active="",this._onChange=new i.EventEmitter;var e=new o.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._active},set:function(e){if(!this._providers[e])throw new Error('unknown Unicode version "'+e+'"');this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)},enumerable:!1,configurable:!0}),e.prototype.register=function(e){this._providers[e.version]=e},e.prototype.wcwidth=function(e){return this._activeProvider.wcwidth(e)},e.prototype.getStringCellWidth=function(e){for(var t=0,n=e.length,i=0;i<n;++i){var o=e.charCodeAt(i);if(55296<=o&&o<=56319){if(++i>=n)return t+this.wcwidth(o);var r=e.charCodeAt(i);56320<=r&&r<=57343?o=1024*(o-55296)+r-56320+65536:t+=this.wcwidth(r)}t+=this.wcwidth(o)}return t},e}();t.UnicodeService=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;var i,o=n(15),r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],s=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],a=function(){function e(){if(this.version="6",!i){i=new Uint8Array(65536),o.fill(i,1),i[0]=0,o.fill(i,0,1,32),o.fill(i,0,127,160),o.fill(i,2,4352,4448),i[9001]=2,i[9002]=2,o.fill(i,2,11904,42192),i[12351]=1,o.fill(i,2,44032,55204),o.fill(i,2,63744,64256),o.fill(i,2,65040,65050),o.fill(i,2,65072,65136),o.fill(i,2,65280,65377),o.fill(i,2,65504,65511);for(var e=0;e<r.length;++e)o.fill(i,0,r[e][0],r[e][1]+1)}}return e.prototype.wcwidth=function(e){return e<32?0:e<127?1:e<65536?i[e]:function(e,t){var n,i=0,o=t.length-1;if(e<t[0][0]||e>t[o][1])return!1;for(;o>=i;)if(e>t[n=i+o>>1][1])i=n+1;else{if(!(e<t[n][0]))return!0;o=n-1}return!1}(e,s)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1},e}();t.UnicodeV6=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0;var i=function(){function e(){this.glevel=0,this._charsets=[]}return e.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},e.prototype.setgLevel=function(e){this.glevel=e,this.charset=this._charsets[e]},e.prototype.setgCharset=function(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)},e}();t.CharsetService=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;var i=n(3);t.updateWindowsModeWrappedState=function(e){var t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),n=null==t?void 0:t.get(e.cols-1),o=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);o&&n&&(o.isWrapped=n[i.CHAR_DATA_CODE_INDEX]!==i.NULL_CELL_CODE&&n[i.CHAR_DATA_CODE_INDEX]!==i.WHITESPACE_CELL_CODE)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;var i=function(){function e(e){this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0}return e.prototype.writeSync=function(e){if(this._writeBuffer.length){for(var t=this._bufferOffset;t<this._writeBuffer.length;++t){var n=this._writeBuffer[t],i=this._callbacks[t];this._action(n),i&&i()}this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=2147483647}this._action(e)},e.prototype.write=function(e,t){var n=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout((function(){return n._innerWrite()}))),this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)},e.prototype._innerWrite=function(){for(var e=this,t=Date.now();this._writeBuffer.length>this._bufferOffset;){var n=this._writeBuffer[this._bufferOffset],i=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(n),this._pendingData-=n.length,i&&i(),Date.now()-t>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((function(){return e._innerWrite()}),0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},e}();t.WriteBuffer=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0;var i=function(){function e(){this._addons=[]}return e.prototype.dispose=function(){for(var e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()},e.prototype.loadAddon=function(e,t){var n=this,i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=function(){return n._wrappedAddonDispose(i)},t.activate(e)},e.prototype._wrappedAddonDispose=function(e){if(!e.isDisposed){for(var t=-1,n=0;n<this._addons.length;n++)if(this._addons[n]===e){t=n;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},e}();t.AddonManager=i}])})));class Ua{constructor(e){this.size=e,this.entries=[],this.cursor=0}push(e){if(""===e.trim())return;e!=this.entries[this.entries.length-1]&&(this.entries.push(e),this.entries.length>this.size&&this.entries.pop(0),this.cursor=this.entries.length)}rewind(){this.cursor=this.entries.length}getPrevious(){const e=Math.max(0,this.cursor-1);return this.cursor=e,this.entries[e]}getNext(){const e=Math.min(this.entries.length,this.cursor+1);return this.cursor=e,this.entries[e]}}for(var qa="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(",">>",">\\&","[&;()|<>]"].join("|")+")",za="",Ya=0;Ya<4;Ya++)za+=(Math.pow(16,8)*Math.random()).toString(16);var Va=function(e,t,n){var i=function(e,t,n){var i=new RegExp(["("+qa+")","((\\\\['\"|&;()<> \\t]|[^\\s'\"|&;()<> \\t])+|\"((\\\\\"|[^\"])*?)\"|'((\\\\'|[^'])*?)')*"].join("|"),"g"),o=e.match(i).filter(Boolean),r=!1;if(!o)return[];t||(t={});n||(n={});return o.map((function(e,i){if(!r){if(RegExp("^"+qa+"$").test(e))return{op:e};for(var s=n.escape||"\\",a=!1,c=!1,l="",u=!1,h=0,d=e.length;h<d;h++){var f=e.charAt(h);if(u=u||!a&&("*"===f||"?"===f),c)l+=f,c=!1;else if(a)f===a?a=!1:"'"==a?l+=f:f===s?(h+=1,l+='"'===(f=e.charAt(h))||f===s||"$"===f?f:s+f):l+="$"===f?p():f;else if('"'===f||"'"===f)a=f;else{if(RegExp("^"+qa+"$").test(f))return{op:e};if(RegExp("^#$").test(f))return r=!0,l.length?[l,{comment:e.slice(h+1)+o.slice(i+1).join(" ")}]:[{comment:e.slice(h+1)+o.slice(i+1).join(" ")}];f===s?c=!0:l+="$"===f?p():f}}return u?{op:"glob",pattern:l}:l}function p(){var n,i;if(h+=1,"{"===e.charAt(h)){if(h+=1,"}"===e.charAt(h))throw new Error("Bad substitution: "+e.substr(h-2,3));if((n=e.indexOf("}",h))<0)throw new Error("Bad substitution: "+e.substr(h));i=e.substr(h,n-h),h=n}else/[*@#?$!_\-]/.test(e.charAt(h))?(i=e.charAt(h),h+=1):(n=e.substr(h).match(/[^\w\d_]/))?(i=e.substr(h,n.index),h+=n.index-1):(i=e.substr(h),h=e.length);return function(e,n,i){var o="function"==typeof t?t(i):t[i];void 0===o&&""!=i?o="":void 0===o&&(o="$");return"object"==typeof o?n+za+JSON.stringify(o)+za:n+o}(0,"",i)}})).reduce((function(e,t){return void 0===t?e:e.concat(t)}),[])}(e,t,n);return"function"!=typeof t?i:i.reduce((function(e,t){if("object"==typeof t)return e.concat(t);var n=t.split(RegExp("("+za+".*?"+za+")","g"));return 1===n.length?e.concat(n[0]):e.concat(n.filter(Boolean).map((function(e){return RegExp("^"+za).test(e)?JSON.parse(e.split(za)[1]):e})))}),[])};function Ka(e,t=!0){let n;const i=[],o=/\w+/g;for(;n=o.exec(e);)t?i.push(n.index):i.push(n.index+n[0].length);return i}function Ga(e,t){const n=Ka(e,!0).reverse().find(e=>e<t);return null==n?0:n}function Za(e,t,n){let i=0,o=0;for(let r=0;r<t;++r){"\n"==e.charAt(r)?(o=0,i+=1):(o+=1,o>n&&(o=0,i+=1))}return{row:i,col:o}}function Xa(e,t){return Za(e,e.length,t).row+1}function Ja(e){return null!=e.match(/[^\\][ \t]$/m)}function Qa(e){if(""===e.trim())return"";if(Ja(e))return"";return Va(e).pop()||""}class ec{constructor(e,t={}){this.term=e,this._handleTermData=this.handleTermData.bind(this),this._handleTermResize=this.handleTermResize.bind(this),this.history=new Ua(t.historySize||10),this.maxAutocompleteEntries=t.maxAutocompleteEntries||100,this._autocompleteHandlers=[],this._active=!1,this._input="",this._cursor=0,this._activePrompt=null,this._activeCharPrompt=null,this._termSize={cols:this.term.cols,rows:this.term.rows},this.attach()}detach(){this.term.off("data",this._handleTermData),this.term.off("resize",this._handleTermResize)}attach(){this.term.onData(this._handleTermData),this.term.onResize(this._handleTermResize)}addAutocompleteHandler(e,...t){this._autocompleteHandlers.push({fn:e,args:t})}removeAutocompleteHandler(e){const t=this._autocompleteHandlers.findIndex(t=>t.fn===e);-1!==t&&this._autocompleteHandlers.splice(t,1)}read(e,t="> "){return new Promise((n,i)=>{this.term.write(e),this._activePrompt={prompt:e,continuationPrompt:t,resolve:n,reject:i},this._input="",this._cursor=0,this._active=!0})}readChar(e){return new Promise((t,n)=>{this.term.write(e),this._activeCharPrompt={prompt:e,resolve:t,reject:n}})}abortRead(e="aborted"){null==this._activePrompt&&null==this._activeCharPrompt||this.term.write("\r\n"),null!=this._activePrompt&&(this._activePrompt.reject(e),this._activePrompt=null),null!=this._activeCharPrompt&&(this._activeCharPrompt.reject(e),this._activeCharPrompt=null),this._active=!1}println(e){this.print(e+"\n")}print(e){const t=e.replace(/[\r\n]+/g,"\n");this.term.write(t.replace(/\n/g,"\r\n"))}printWide(e,t=2){if(0==e.length)return println("");const n=e.reduce((e,t)=>Math.max(e,t.length),0)+t,i=Math.floor(this._termSize.cols/n),o=Math.ceil(e.length/i);let r=0;for(let t=0;t<o;++t){let t="";for(let o=0;o<i;++o)if(r<e.length){let i=e[r++];i+=" ".repeat(n-i.length),t+=i}this.println(t)}}applyPrompts(e){const t=(this._activePrompt||{}).prompt||"",n=(this._activePrompt||{}).continuationPrompt||"";return t+e.replace(/\n/g,"\n"+n)}applyPromptOffset(e,t){return this.applyPrompts(e.substr(0,t)).length}clearInput(){const e=this.applyPrompts(this._input),t=Xa(e,this._termSize.cols),n=this.applyPromptOffset(this._input,this._cursor),{col:i,row:o}=Za(e,n,this._termSize.cols),r=t-o-1;for(var s=0;s<r;++s)this.term.write("[E");this.term.write("\r[K");for(s=1;s<t;++s)this.term.write("[F[K")}setInput(e,t=!0){t&&this.clearInput();const n=this.applyPrompts(e);this.print(n),this._cursor>e.length&&(this._cursor=e.length);const i=this.applyPromptOffset(e,this._cursor),o=Xa(n,this._termSize.cols),{col:r,row:s}=Za(n,i,this._termSize.cols),a=o-s-1;this.term.write("\r");for(var c=0;c<a;++c)this.term.write("[F");for(c=0;c<r;++c)this.term.write("[C");this._input=e}printAndRestartPrompt(e){const t=this._cursor;this.setCursor(this._input.length),this.term.write("\r\n");const n=()=>{this._cursor=t,this.setInput(this._input)},i=e();null==i?n():i.then(n)}setCursor(e){e<0&&(e=0),e>this._input.length&&(e=this._input.length);const t=this.applyPrompts(this._input),n=(Xa(t,this._termSize.cols),this.applyPromptOffset(this._input,this._cursor)),{col:i,row:o}=Za(t,n,this._termSize.cols),r=this.applyPromptOffset(this._input,e),{col:s,row:a}=Za(t,r,this._termSize.cols);if(a>o)for(let e=o;e<a;++e)this.term.write("[B");else for(let e=a;e<o;++e)this.term.write("[A");if(s>i)for(let e=i;e<s;++e)this.term.write("[C");else for(let e=s;e<i;++e)this.term.write("[D");this._cursor=e}handleCursorMove(e){if(e>0){const t=Math.min(e,this._input.length-this._cursor);this.setCursor(this._cursor+t)}else if(e<0){const t=Math.max(e,-this._cursor);this.setCursor(this._cursor+t)}}handleCursorErase(e){const{_cursor:t,_input:n}=this;if(e){if(t<=0)return;const e=n.substr(0,t-1)+n.substr(t);this.clearInput(),this._cursor-=1,this.setInput(e,!1)}else{const e=n.substr(0,t)+n.substr(t+1);this.setInput(e)}}handleCursorInsert(e){const{_cursor:t,_input:n}=this,i=n.substr(0,t)+e+n.substr(t);this._cursor+=e.length,this.setInput(i)}handleReadComplete(){this.history&&this.history.push(this._input),this._activePrompt&&(this._activePrompt.resolve(this._input),this._activePrompt=null),this.term.write("\r\n"),this._active=!1}handleTermResize(e){const{rows:t,cols:n}=e;this.clearInput(),this._termSize={cols:n,rows:t},this.setInput(this._input,!1)}handleTermData(e){if(this._active){if(null!=this._activeCharPrompt)return this._activeCharPrompt.resolve(e),this._activeCharPrompt=null,void this.term.write("\r\n");if(e.length>3&&27!==e.charCodeAt(0)){const t=e.replace(/[\r\n]+/g,"\r");Array.from(t).forEach(e=>this.handleData(e))}else this.handleData(e)}}handleData(e){if(!this._active)return;const t=e.charCodeAt(0);let n;if(27==t)switch(e.substr(1)){case"[A":if(this.history){let e=this.history.getPrevious();e&&(this.setInput(e),this.setCursor(e.length))}break;case"[B":if(this.history){let e=this.history.getNext();e||(e=""),this.setInput(e),this.setCursor(e.length)}break;case"[D":this.handleCursorMove(-1);break;case"[C":this.handleCursorMove(1);break;case"[3~":this.handleCursorErase(!1);break;case"[F":this.setCursor(this._input.length);break;case"[H":this.setCursor(0);break;case"b":n=Ga(this._input,this._cursor),null!=n&&this.setCursor(n);break;case"f":n=function(e,t){const n=Ka(e,!1).find(e=>e>t);return null==n?e.length:n}(this._input,this._cursor),null!=n&&this.setCursor(n);break;case"":n=Ga(this._input,this._cursor),null!=n&&(this.setInput(this._input.substr(0,n)+this._input.substr(this._cursor)),this.setCursor(n))}else if(t<32||127===t)switch(e){case"\r":""!=(i=this._input).trim()&&((i.match(/'/g)||[]).length%2!=0||(i.match(/"/g)||[]).length%2!=0||""==i.split(/(\|\||\||&&)/g).pop().trim()||i.endsWith("\\")&&!i.endsWith("\\\\"))?this.handleCursorInsert("\n"):this.handleReadComplete();break;case"":this.handleCursorErase(!0);break;case"\t":if(this._autocompleteHandlers.length>0){const e=this._input.substr(0,this._cursor),t=Ja(e),n=function(e,t){const n=Va(t);let i=n.length-1,o=n[i]||"";return""===t.trim()?(i=0,o=""):Ja(t)&&(i+=1,o=""),e.reduce((e,{fn:t,args:o})=>{try{return e.concat(t(i,n,...o))}catch(t){return console.error("Auto-complete error:",t),e}},[]).filter(e=>e.startsWith(o))}(this._autocompleteHandlers,e);if(n.sort(),0===n.length)t||this.handleCursorInsert(" ");else if(1===n.length){const t=Qa(e);this.handleCursorInsert(n[0].substr(t.length)+" ")}else if(n.length<=this.maxAutocompleteEntries){const t=function e(t,n){if(t.length>=n[0].length)return t;const i=t;t+=n[0].slice(t.length,t.length+1);for(let e=0;e<n.length;e++){if(!n[e].startsWith(i))return null;if(!n[e].startsWith(t))return i}return e(t,n)}(e,n);if(t){const n=Qa(e);this.handleCursorInsert(t.substr(n.length))}this.printAndRestartPrompt(()=>{this.printWide(n)})}else this.printAndRestartPrompt(()=>this.readChar(`Display all ${n.length} possibilities? (y or n)`).then(e=>{"y"!=e&&"Y"!=e||this.printWide(n)}))}else this.handleCursorInsert("    ");break;case"":this.setCursor(this._input.length),this.term.write("^C\r\n"+((this._activePrompt||{}).prompt||"")),this._input="",this._cursor=0,this.history&&this.history.rewind()}else this.handleCursorInsert(e);var i}}var tc=i((function(e,t){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0;var i=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var e=this._terminal._core,t=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(t.getPropertyValue("height")),i=Math.max(0,parseInt(t.getPropertyValue("width"))),o=window.getComputedStyle(this._terminal.element),r=n-(parseInt(o.getPropertyValue("padding-top"))+parseInt(o.getPropertyValue("padding-bottom"))),s=i-(parseInt(o.getPropertyValue("padding-right"))+parseInt(o.getPropertyValue("padding-left")))-e.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(s/e._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(r/e._renderService.dimensions.actualCellHeight))}}},e}();t.FitAddon=i}])})),nc=n(tc);tc.FitAddon;const ic={};function oc(e,t){let n,i=new Map,o="",r={},s={};i.enterRoom=t=>{r=t.room,e(t.message)},i.createCharacter=n=>{e(n.message),t&&t()},i.characterSelected=t=>{s=t.character,e(t.message)};const a=t=>{t.addEventListener("message",(function(t){var n=JSON.parse(t.data);if(i[n.type])i[n.type](n);else{let t=n.message;n.username&&(t=n.username+":  "+n.message),e(t)}})),t.addEventListener("close",(function(t){e("Connection Closed.")}))},c=t=>{n&&(n.readyState!=WebSocket.CLOSING&&n.readyState!=WebSocket.CLOSED||(n=new WebSocket(o),a(n),e("reconnecting ...\n")),n.send(JSON.stringify({message:t,type:"message"})))},l=async e=>""+e,u={onInput:async e=>{const t=await l(e);c(t)},setWSClient:async e=>{n=e,o=n.url,a(n)}};return q(ic,u),u}function rc(){return z(ic)}const sc="node_modules/svelte-feather-icons/src/icons/BookOpenIcon.svelte";function ac(e){let t,n,i,r;const s={c:function(){t=E("svg"),n=E("path"),i=E("path"),Se(n,"d","M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"),a(n,sc,12,234,490),Se(i,"d","M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"),a(i,sc,12,292,548),Se(t,"xmlns","http://www.w3.org/2000/svg"),Se(t,"width",e[0]),Se(t,"height",e[0]),Se(t,"fill","none"),Se(t,"viewBox","0 0 24 24"),Se(t,"stroke","currentColor"),Se(t,"stroke-width","2"),Se(t,"stroke-linecap","round"),Se(t,"stroke-linejoin","round"),Se(t,"class",r="feather feather-book-open "+e[1]),a(t,sc,12,0,256)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),ye(t,n),ye(t,i)},p:function(e,[n]){1&n&&Se(t,"width",e[0]),1&n&&Se(t,"height",e[0]),2&n&&r!==(r="feather feather-book-open "+e[1])&&Se(t,"class",r)},i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:s,id:ac.name,type:"component",source:"",ctx:e}),s}function cc(e,t,n){let{size:i="100%"}=t,{class:o=""}=t;"100%"!==i&&(i="x"===i.slice(-1)?i.slice(0,i.length-1)+"em":parseInt(i)+"px");const r=["size","class"];Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<BookOpenIcon> was created with unknown prop '${e}'`)});let{$$slots:s={},$$scope:a}=t;return Te("BookOpenIcon",s,[]),e.$set=e=>{"size"in e&&n(0,i=e.size),"class"in e&&n(1,o=e.class)},e.$capture_state=()=>({size:i,customClass:o}),e.$inject_state=e=>{"size"in e&&n(0,i=e.size),"customClass"in e&&n(1,o=e.customClass)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o]}class lc extends Le{constructor(e){super(e),_e(this,e,cc,ac,d,{size:0,class:1}),ge("SvelteRegisterComponent",{component:this,tagName:"BookOpenIcon",options:e,id:ac.name})}get size(){throw new Error("<BookOpenIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<BookOpenIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get class(){throw new Error("<BookOpenIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set class(e){throw new Error("<BookOpenIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const uc="node_modules/svelte-feather-icons/src/icons/EditIcon.svelte";function hc(e){let t,n,i,r;const s={c:function(){t=E("svg"),n=E("path"),i=E("path"),Se(n,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),a(n,uc,12,229,485),Se(i,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),a(i,uc,12,305,561),Se(t,"xmlns","http://www.w3.org/2000/svg"),Se(t,"width",e[0]),Se(t,"height",e[0]),Se(t,"fill","none"),Se(t,"viewBox","0 0 24 24"),Se(t,"stroke","currentColor"),Se(t,"stroke-width","2"),Se(t,"stroke-linecap","round"),Se(t,"stroke-linejoin","round"),Se(t,"class",r="feather feather-edit "+e[1]),a(t,uc,12,0,256)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),ye(t,n),ye(t,i)},p:function(e,[n]){1&n&&Se(t,"width",e[0]),1&n&&Se(t,"height",e[0]),2&n&&r!==(r="feather feather-edit "+e[1])&&Se(t,"class",r)},i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:s,id:hc.name,type:"component",source:"",ctx:e}),s}function dc(e,t,n){let{size:i="100%"}=t,{class:o=""}=t;"100%"!==i&&(i="x"===i.slice(-1)?i.slice(0,i.length-1)+"em":parseInt(i)+"px");const r=["size","class"];Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<EditIcon> was created with unknown prop '${e}'`)});let{$$slots:s={},$$scope:a}=t;return Te("EditIcon",s,[]),e.$set=e=>{"size"in e&&n(0,i=e.size),"class"in e&&n(1,o=e.class)},e.$capture_state=()=>({size:i,customClass:o}),e.$inject_state=e=>{"size"in e&&n(0,i=e.size),"customClass"in e&&n(1,o=e.customClass)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o]}class fc extends Le{constructor(e){super(e),_e(this,e,dc,hc,d,{size:0,class:1}),ge("SvelteRegisterComponent",{component:this,tagName:"EditIcon",options:e,id:hc.name})}get size(){throw new Error("<EditIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<EditIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get class(){throw new Error("<EditIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set class(e){throw new Error("<EditIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const pc="node_modules/svelte-feather-icons/src/icons/HashIcon.svelte";function vc(e){let t,n,i,r,s,c;const l={c:function(){t=E("svg"),n=E("line"),i=E("line"),r=E("line"),s=E("line"),Se(n,"x1","4"),Se(n,"y1","9"),Se(n,"x2","20"),Se(n,"y2","9"),a(n,pc,12,229,485),Se(i,"x1","4"),Se(i,"y1","15"),Se(i,"x2","20"),Se(i,"y2","15"),a(i,pc,12,271,527),Se(r,"x1","10"),Se(r,"y1","3"),Se(r,"x2","8"),Se(r,"y2","21"),a(r,pc,12,315,571),Se(s,"x1","16"),Se(s,"y1","3"),Se(s,"x2","14"),Se(s,"y2","21"),a(s,pc,12,358,614),Se(t,"xmlns","http://www.w3.org/2000/svg"),Se(t,"width",e[0]),Se(t,"height",e[0]),Se(t,"fill","none"),Se(t,"viewBox","0 0 24 24"),Se(t,"stroke","currentColor"),Se(t,"stroke-width","2"),Se(t,"stroke-linecap","round"),Se(t,"stroke-linejoin","round"),Se(t,"class",c="feather feather-hash "+e[1]),a(t,pc,12,0,256)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),ye(t,n),ye(t,i),ye(t,r),ye(t,s)},p:function(e,[n]){1&n&&Se(t,"width",e[0]),1&n&&Se(t,"height",e[0]),2&n&&c!==(c="feather feather-hash "+e[1])&&Se(t,"class",c)},i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:l,id:vc.name,type:"component",source:"",ctx:e}),l}function mc(e,t,n){let{size:i="100%"}=t,{class:o=""}=t;"100%"!==i&&(i="x"===i.slice(-1)?i.slice(0,i.length-1)+"em":parseInt(i)+"px");const r=["size","class"];Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<HashIcon> was created with unknown prop '${e}'`)});let{$$slots:s={},$$scope:a}=t;return Te("HashIcon",s,[]),e.$set=e=>{"size"in e&&n(0,i=e.size),"class"in e&&n(1,o=e.class)},e.$capture_state=()=>({size:i,customClass:o}),e.$inject_state=e=>{"size"in e&&n(0,i=e.size),"customClass"in e&&n(1,o=e.customClass)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o]}class _c extends Le{constructor(e){super(e),_e(this,e,mc,vc,d,{size:0,class:1}),ge("SvelteRegisterComponent",{component:this,tagName:"HashIcon",options:e,id:vc.name})}get size(){throw new Error("<HashIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<HashIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get class(){throw new Error("<HashIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set class(e){throw new Error("<HashIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const gc="node_modules/svelte-feather-icons/src/icons/PlayIcon.svelte";function yc(e){let t,n,i;const r={c:function(){t=E("svg"),n=E("polygon"),Se(n,"points","5 3 19 12 5 21 5 3"),a(n,gc,12,229,485),Se(t,"xmlns","http://www.w3.org/2000/svg"),Se(t,"width",e[0]),Se(t,"height",e[0]),Se(t,"fill","none"),Se(t,"viewBox","0 0 24 24"),Se(t,"stroke","currentColor"),Se(t,"stroke-width","2"),Se(t,"stroke-linecap","round"),Se(t,"stroke-linejoin","round"),Se(t,"class",i="feather feather-play "+e[1]),a(t,gc,12,0,256)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,[n]){1&n&&Se(t,"width",e[0]),1&n&&Se(t,"height",e[0]),2&n&&i!==(i="feather feather-play "+e[1])&&Se(t,"class",i)},i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:yc.name,type:"component",source:"",ctx:e}),r}function bc(e,t,n){let{size:i="100%"}=t,{class:o=""}=t;"100%"!==i&&(i="x"===i.slice(-1)?i.slice(0,i.length-1)+"em":parseInt(i)+"px");const r=["size","class"];Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<PlayIcon> was created with unknown prop '${e}'`)});let{$$slots:s={},$$scope:a}=t;return Te("PlayIcon",s,[]),e.$set=e=>{"size"in e&&n(0,i=e.size),"class"in e&&n(1,o=e.class)},e.$capture_state=()=>({size:i,customClass:o}),e.$inject_state=e=>{"size"in e&&n(0,i=e.size),"customClass"in e&&n(1,o=e.customClass)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o]}class wc extends Le{constructor(e){super(e),_e(this,e,bc,yc,d,{size:0,class:1}),ge("SvelteRegisterComponent",{component:this,tagName:"PlayIcon",options:e,id:yc.name})}get size(){throw new Error("<PlayIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<PlayIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get class(){throw new Error("<PlayIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set class(e){throw new Error("<PlayIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Cc="node_modules/svelte-feather-icons/src/icons/PlusIcon.svelte";function Sc(e){let t,n,i,r;const s={c:function(){t=E("svg"),n=E("line"),i=E("line"),Se(n,"x1","12"),Se(n,"y1","5"),Se(n,"x2","12"),Se(n,"y2","19"),a(n,Cc,12,229,485),Se(i,"x1","5"),Se(i,"y1","12"),Se(i,"x2","19"),Se(i,"y2","12"),a(i,Cc,12,273,529),Se(t,"xmlns","http://www.w3.org/2000/svg"),Se(t,"width",e[0]),Se(t,"height",e[0]),Se(t,"fill","none"),Se(t,"viewBox","0 0 24 24"),Se(t,"stroke","currentColor"),Se(t,"stroke-width","2"),Se(t,"stroke-linecap","round"),Se(t,"stroke-linejoin","round"),Se(t,"class",r="feather feather-plus "+e[1]),a(t,Cc,12,0,256)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),ye(t,n),ye(t,i)},p:function(e,[n]){1&n&&Se(t,"width",e[0]),1&n&&Se(t,"height",e[0]),2&n&&r!==(r="feather feather-plus "+e[1])&&Se(t,"class",r)},i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:s,id:Sc.name,type:"component",source:"",ctx:e}),s}function kc(e,t,n){let{size:i="100%"}=t,{class:o=""}=t;"100%"!==i&&(i="x"===i.slice(-1)?i.slice(0,i.length-1)+"em":parseInt(i)+"px");const r=["size","class"];Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<PlusIcon> was created with unknown prop '${e}'`)});let{$$slots:s={},$$scope:a}=t;return Te("PlusIcon",s,[]),e.$set=e=>{"size"in e&&n(0,i=e.size),"class"in e&&n(1,o=e.class)},e.$capture_state=()=>({size:i,customClass:o}),e.$inject_state=e=>{"size"in e&&n(0,i=e.size),"customClass"in e&&n(1,o=e.customClass)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o]}class Ec extends Le{constructor(e){super(e),_e(this,e,kc,Sc,d,{size:0,class:1}),ge("SvelteRegisterComponent",{component:this,tagName:"PlusIcon",options:e,id:Sc.name})}get size(){throw new Error("<PlusIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<PlusIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get class(){throw new Error("<PlusIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set class(e){throw new Error("<PlusIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const xc="node_modules/svelte-feather-icons/src/icons/ShieldIcon.svelte";function Tc(e){let t,n,i;const r={c:function(){t=E("svg"),n=E("path"),Se(n,"d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"),a(n,xc,12,231,487),Se(t,"xmlns","http://www.w3.org/2000/svg"),Se(t,"width",e[0]),Se(t,"height",e[0]),Se(t,"fill","none"),Se(t,"viewBox","0 0 24 24"),Se(t,"stroke","currentColor"),Se(t,"stroke-width","2"),Se(t,"stroke-linecap","round"),Se(t,"stroke-linejoin","round"),Se(t,"class",i="feather feather-shield "+e[1]),a(t,xc,12,0,256)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,[n]){1&n&&Se(t,"width",e[0]),1&n&&Se(t,"height",e[0]),2&n&&i!==(i="feather feather-shield "+e[1])&&Se(t,"class",i)},i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:Tc.name,type:"component",source:"",ctx:e}),r}function Lc(e,t,n){let{size:i="100%"}=t,{class:o=""}=t;"100%"!==i&&(i="x"===i.slice(-1)?i.slice(0,i.length-1)+"em":parseInt(i)+"px");const r=["size","class"];Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<ShieldIcon> was created with unknown prop '${e}'`)});let{$$slots:s={},$$scope:a}=t;return Te("ShieldIcon",s,[]),e.$set=e=>{"size"in e&&n(0,i=e.size),"class"in e&&n(1,o=e.class)},e.$capture_state=()=>({size:i,customClass:o}),e.$inject_state=e=>{"size"in e&&n(0,i=e.size),"customClass"in e&&n(1,o=e.customClass)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o]}class Rc extends Le{constructor(e){super(e),_e(this,e,Lc,Tc,d,{size:0,class:1}),ge("SvelteRegisterComponent",{component:this,tagName:"ShieldIcon",options:e,id:Tc.name})}get size(){throw new Error("<ShieldIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<ShieldIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get class(){throw new Error("<ShieldIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set class(e){throw new Error("<ShieldIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Mc="node_modules/svelte-feather-icons/src/icons/UserIcon.svelte";function Oc(e){let t,n,i,r;const s={c:function(){t=E("svg"),n=E("path"),i=E("circle"),Se(n,"d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"),a(n,Mc,12,229,485),Se(i,"cx","12"),Se(i,"cy","7"),Se(i,"r","4"),a(i,Mc,12,288,544),Se(t,"xmlns","http://www.w3.org/2000/svg"),Se(t,"width",e[0]),Se(t,"height",e[0]),Se(t,"fill","none"),Se(t,"viewBox","0 0 24 24"),Se(t,"stroke","currentColor"),Se(t,"stroke-width","2"),Se(t,"stroke-linecap","round"),Se(t,"stroke-linejoin","round"),Se(t,"class",r="feather feather-user "+e[1]),a(t,Mc,12,0,256)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),ye(t,n),ye(t,i)},p:function(e,[n]){1&n&&Se(t,"width",e[0]),1&n&&Se(t,"height",e[0]),2&n&&r!==(r="feather feather-user "+e[1])&&Se(t,"class",r)},i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:s,id:Oc.name,type:"component",source:"",ctx:e}),s}function Ac(e,t,n){let{size:i="100%"}=t,{class:o=""}=t;"100%"!==i&&(i="x"===i.slice(-1)?i.slice(0,i.length-1)+"em":parseInt(i)+"px");const r=["size","class"];Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<UserIcon> was created with unknown prop '${e}'`)});let{$$slots:s={},$$scope:a}=t;return Te("UserIcon",s,[]),e.$set=e=>{"size"in e&&n(0,i=e.size),"class"in e&&n(1,o=e.class)},e.$capture_state=()=>({size:i,customClass:o}),e.$inject_state=e=>{"size"in e&&n(0,i=e.size),"customClass"in e&&n(1,o=e.customClass)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o]}class $c extends Le{constructor(e){super(e),_e(this,e,Ac,Oc,d,{size:0,class:1}),ge("SvelteRegisterComponent",{component:this,tagName:"UserIcon",options:e,id:Oc.name})}get size(){throw new Error("<UserIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<UserIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get class(){throw new Error("<UserIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set class(e){throw new Error("<UserIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Dc="node_modules/svelte-feather-icons/src/icons/UsersIcon.svelte";function Ic(e){let t,n,i,r,s,c;const l={c:function(){t=E("svg"),n=E("path"),i=E("circle"),r=E("path"),s=E("path"),Se(n,"d","M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"),a(n,Dc,12,230,486),Se(i,"cx","9"),Se(i,"cy","7"),Se(i,"r","4"),a(i,Dc,12,289,545),Se(r,"d","M23 21v-2a4 4 0 0 0-3-3.87"),a(r,Dc,12,326,582),Se(s,"d","M16 3.13a4 4 0 0 1 0 7.75"),a(s,Dc,12,370,626),Se(t,"xmlns","http://www.w3.org/2000/svg"),Se(t,"width",e[0]),Se(t,"height",e[0]),Se(t,"fill","none"),Se(t,"viewBox","0 0 24 24"),Se(t,"stroke","currentColor"),Se(t,"stroke-width","2"),Se(t,"stroke-linecap","round"),Se(t,"stroke-linejoin","round"),Se(t,"class",c="feather feather-users "+e[1]),a(t,Dc,12,0,256)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),ye(t,n),ye(t,i),ye(t,r),ye(t,s)},p:function(e,[n]){1&n&&Se(t,"width",e[0]),1&n&&Se(t,"height",e[0]),2&n&&c!==(c="feather feather-users "+e[1])&&Se(t,"class",c)},i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:l,id:Ic.name,type:"component",source:"",ctx:e}),l}function Pc(e,t,n){let{size:i="100%"}=t,{class:o=""}=t;"100%"!==i&&(i="x"===i.slice(-1)?i.slice(0,i.length-1)+"em":parseInt(i)+"px");const r=["size","class"];Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<UsersIcon> was created with unknown prop '${e}'`)});let{$$slots:s={},$$scope:a}=t;return Te("UsersIcon",s,[]),e.$set=e=>{"size"in e&&n(0,i=e.size),"class"in e&&n(1,o=e.class)},e.$capture_state=()=>({size:i,customClass:o}),e.$inject_state=e=>{"size"in e&&n(0,i=e.size),"customClass"in e&&n(1,o=e.customClass)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o]}class Bc extends Le{constructor(e){super(e),_e(this,e,Pc,Ic,d,{size:0,class:1}),ge("SvelteRegisterComponent",{component:this,tagName:"UsersIcon",options:e,id:Ic.name})}get size(){throw new Error("<UsersIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<UsersIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get class(){throw new Error("<UsersIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set class(e){throw new Error("<UsersIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Hc(e,t,n){La.get("/api/user",{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>t(e.data)).catch(e=>n(e))}function jc(e,t,n){La.put("/api/user",t,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>n(e.data))}const{console:Wc}=ue,Fc="src/UserMenu.svelte";function Nc(e){let t,n,i,r,s,c;const l={c:function(){t=k("li"),n=k("p"),n.textContent="Signup",i=T(),r=k("li"),s=k("button"),s.textContent="Log in",Se(n,"class","btn-small userbutton green svelte-1ujdy1x"),a(n,Fc,71,4,1252),Se(t,"class","right-align"),a(t,Fc,70,2,1223),Se(s,"class","btn-small userbutton green svelte-1ujdy1x"),a(s,Fc,74,4,1368),Se(r,"class","right-align"),a(r,Fc,73,2,1339)},m:function(o,a,l){be(o,t,a),ye(t,n),be(o,i,a),be(o,r,a),ye(r,s),l&&u(c),c=[Ce(n,"click",e[14],!1,!1,!1),Ce(s,"click",e[15],!1,!1,!1)]},p:o,d:function(e){e&&we(t),e&&we(i),e&&we(r),u(c)}};return ge("SvelteRegisterBlock",{block:l,id:Nc.name,type:"if",source:"(70:28) ",ctx:e}),l}function Uc(e){let t;const n={c:function(){t=k("li"),t.textContent="...",Se(t,"class","right-align"),a(t,Fc,68,2,1159)},m:function(e,n){be(e,t,n)},p:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:n,id:Uc.name,type:"if",source:"(68:0) {#if $isLoading}",ctx:e}),n}function qc(e){let t,n,i,o;const r={c:function(){t=k("img"),i=T(),o=k("i"),o.textContent="arrow_drop_down",t.src!==(n=e[2].picture)&&Se(t,"src",n),Se(t,"alt",""),Se(t,"class","circle img  svelte-1ujdy1x"),a(t,Fc,85,8,1622),Se(o,"class","material-icons left"),a(o,Fc,86,8,1691)},m:function(e,n){be(e,t,n),be(e,i,n),be(e,o,n)},p:function(e,i){4&i&&t.src!==(n=e[2].picture)&&Se(t,"src",n)},d:function(e){e&&we(t),e&&we(i),e&&we(o)}};return ge("SvelteRegisterBlock",{block:r,id:qc.name,type:"if",source:"(85:6) {#if $isAuthenticated}",ctx:e}),r}function zc(e){let t,n,i,r,s,c,l,u,h,d,f,p;function v(e,t){return e[1]?Uc:e[0]?void 0:Nc}let m=v(e),_=m&&m(e),g=e[0]&&qc(e);const y={c:function(){t=k("ul"),n=k("li"),i=k("a"),i.textContent="logout",r=T(),s=k("li"),c=k("a"),c.textContent="profile",l=T(),_&&_.c(),u=T(),h=k("li"),d=k("a"),f=k("span"),g&&g.c(),Se(i,"href","#!"),a(i,Fc,60,4,1024),a(n,Fc,59,2,1015),Se(c,"href","account"),a(c,Fc,63,4,1095),a(s,Fc,62,2,1086),Se(t,"id","dropdown1"),Se(t,"class","dropdown-content"),a(t,Fc,58,0,968),Se(f,"class","valign-wrapper"),a(f,Fc,82,4,1554),Se(d,"class","dropdown-trigger"),Se(d,"href","#"),Se(d,"data-target","dropdown1"),a(d,Fc,81,2,1488),a(h,Fc,79,0,1480)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,a,v){be(o,t,a),ye(t,n),ye(n,i),ye(t,r),ye(t,s),ye(s,c),be(o,l,a),_&&_.m(o,a),be(o,u,a),be(o,h,a),ye(h,d),ye(d,f),g&&g.m(f,null),v&&p(),p=Ce(i,"click",e[13],!1,!1,!1)},p:function(e,[t]){m===(m=v(e))&&_?_.p(e,t):(_&&_.d(1),_=m&&m(e),_&&(_.c(),_.m(u.parentNode,u))),e[0]?g?g.p(e,t):(g=qc(e),g.c(),g.m(f,null)):g&&(g.d(1),g=null)},i:o,o:o,d:function(e){e&&we(t),e&&we(l),_&&_.d(e),e&&we(u),e&&we(h),g&&g.d(),p()}};return ge("SvelteRegisterBlock",{block:y,id:zc.name,type:"component",source:"",ctx:e}),y}function Yc(e,t,n){let i,o,r,s;const{isLoading:a,isAuthenticated:c,login:l,logout:u,authToken:h,authError:d,userInfo:p}=Us();async function m(){Hc(i,e=>{user.set(e)},e=>console.log(e))}async function _(){await l(),o&&await m()}f(a,"isLoading"),v(e,a,e=>n(1,r=e)),f(c,"isAuthenticated"),v(e,c,e=>n(0,o=e)),f(h,"authToken"),v(e,h,e=>n(10,i=e)),f(p,"userInfo"),v(e,p,e=>n(2,s=e)),W(()=>{document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(e)}))});const g=[];Object.keys(t).forEach(e=>{~g.indexOf(e)||"$$"===e.slice(0,2)||Wc.warn(`<UserMenu> was created with unknown prop '${e}'`)});let{$$slots:y={},$$scope:b}=t;Te("UserMenu",y,[]);return e.$capture_state=()=>({onMount:W,UserIcon:$c,getAuth:Us,getUser:Hc,updateUser:jc,isLoading:a,isAuthenticated:c,login:l,logout:u,authToken:h,authError:d,userInfo:p,loadUserData:m,signup:_,$authToken:i,$isAuthenticated:o,$isLoading:r,$userInfo:s}),[o,r,s,a,c,l,u,h,p,_,i,d,m,()=>u(),()=>_(),()=>l()]}class Vc extends Le{constructor(e){super(e),_e(this,e,Yc,zc,d,{}),ge("SvelteRegisterComponent",{component:this,tagName:"UserMenu",options:e,id:zc.name})}}const{console:Kc}=ue,Gc="src/game/Game.svelte";function Zc(e){let t,n,i,r;const s=new Fa({$$inline:!0}),c={c:function(){fe(s.$$.fragment),t=T(),n=k("div"),i=k("div"),Se(i,"id","terminal"),Se(i,"class","svelte-1egwjd3"),a(i,Gc,154,2,3693),Se(n,"id","terminalWindow"),Se(n,"class","svelte-1egwjd3"),a(n,Gc,153,0,3665)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){pe(s,e,o),be(e,t,o),be(e,n,o),ye(n,i),r=!0},p:o,i:function(e){r||(ce(s.$$.fragment,e),r=!0)},o:function(e){le(s.$$.fragment,e),r=!1},d:function(e){ve(s,e),e&&we(t),e&&we(n)}};return ge("SvelteRegisterBlock",{block:c,id:Zc.name,type:"component",source:"",ctx:e}),c}function Xc(e){return new Promise(t=>setTimeout(t,e))}function Jc(e,t){return 0==e?["north","east","south","west","say"]:[]}function Qc(e,t,n){let i,o,r,s,a;const{isAuthenticated:c,authToken:l}=Us();function u(e,t){e.read("~$ ").then(t=>{r.onInput(t),u(e)}).catch(e=>console.log("Error reading: "+e))}f(c,"isAuthenticated"),v(e,c,e=>n(6,i=e)),f(l,"authToken"),v(e,l,e=>n(7,o=e));const h=(e,t)=>n=>{t.clearInput(),e.writeln(n)},d=()=>{console.log("CREATE CHARACTER");var e=document.querySelector(".modal");M.Modal.init(e).open()};async function p(){s=new Na.Terminal;var e=new nc.FitAddon;s.loadAddon(e),s.setOption("cursorBlink",!0),s.setOption("convertEol",!0),s.open(document.getElementById("terminal")),e.fit();const t=new ec(s);t.addAutocompleteHandler(Jc),n(2,r=oc(h(s,t),d)),u(t)}W(async()=>{document.body.style.backgroundImage="url('/bg.jpg')",document.body.style.backdropFilter="blur(10px) saturate(30%) brightness(50%)";var e=document.querySelector("nav");e&&(e.style.backgroundColor="#00000000",p())}),N(async()=>{document.body.style.backgroundImage="",document.body.style.backdropFilter="";var e=document.querySelector("nav");e&&(e.style.backgroundColor="#00000055",p())});const m=[];Object.keys(t).forEach(e=>{~m.indexOf(e)||"$$"===e.slice(0,2)||Kc.warn(`<Game> was created with unknown prop '${e}'`)});let _,{$$slots:g={},$$scope:y}=t;return Te("Game",g,[]),e.$capture_state=()=>({MediaQuery:wt,CharacterCreator:Fa,onMount:W,onDestroy:N,createAuth:Ns,getAuth:Us,axios:La,xterm:Na,LocalEchoController:ec,fit:nc,createClient:oc,getClient:rc,wsbackend:"wss://talesofapirate.com/ws",UserMenu:Vc,client:r,term:s,ws:a,isAuthenticated:c,authToken:l,sleep:Xc,readLine:u,createRenderer:h,characterCreator:d,setupTerminal:p,autocompleteCommonCommands:Jc,state:_,$isAuthenticated:i,$authToken:o}),e.$inject_state=e=>{"client"in e&&n(2,r=e.client),"term"in e&&(s=e.term),"ws"in e&&n(4,a=e.ws),"state"in e&&(_=e.state)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{if(192&e.$$.dirty&&(_={isAuthenticated:i,authToken:o.slice(0,20)}),148&e.$$.dirty&&r&&!a){n(4,a=new WebSocket("wss://talesofapirate.com/ws?access_token="+o)),r.setWSClient(a)}},[c,l]}class el extends Le{constructor(e){super(e),_e(this,e,Qc,Zc,d,{}),ge("SvelteRegisterComponent",{component:this,tagName:"Game",options:e,id:Zc.name})}}function tl(e){let t;const n=e[1].default,i=m(n,e,e[2],null),o={c:function(){i&&i.c()},m:function(e,n){i&&i.m(e,n),t=!0},p:function(e,t){i&&i.p&&4&t&&i.p(_(n,e,e[2],null),g(n,e[2],t,null))},i:function(e){t||(ce(i,e),t=!0)},o:function(e){le(i,e),t=!1},d:function(e){i&&i.d(e)}};return ge("SvelteRegisterBlock",{block:o,id:tl.name,type:"slot",source:'(17:0) <Link to=\\"{to}\\" getProps=\\"{getProps}\\">',ctx:e}),o}function nl(e){let t;const n=new mt({props:{to:e[0],getProps:il,$$slots:{default:[tl]},$$scope:{ctx:e}},$$inline:!0}),i={c:function(){fe(n.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){pe(n,e,i),t=!0},p:function(e,[t]){const i={};1&t&&(i.to=e[0]),4&t&&(i.$$scope={dirty:t,ctx:e}),n.$set(i)},i:function(e){t||(ce(n.$$.fragment,e),t=!0)},o:function(e){le(n.$$.fragment,e),t=!1},d:function(e){ve(n,e)}};return ge("SvelteRegisterBlock",{block:i,id:nl.name,type:"component",source:"",ctx:e}),i}function il({location:e,href:t,isPartiallyCurrent:n,isCurrent:i}){return("/"===t?i:n||i)?{class:"active"}:{}}function ol(e,t,n){let{to:i=""}=t;const o=["to"];Object.keys(t).forEach(e=>{~o.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<NavLink> was created with unknown prop '${e}'`)});let{$$slots:r={},$$scope:s}=t;return Te("NavLink",r,["default"]),e.$set=e=>{"to"in e&&n(0,i=e.to),"$$scope"in e&&n(2,s=e.$$scope)},e.$capture_state=()=>({Link:mt,to:i,getProps:il}),e.$inject_state=e=>{"to"in e&&n(0,i=e.to)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,r,s]}class rl extends Le{constructor(e){super(e),_e(this,e,ol,nl,d,{to:0}),ge("SvelteRegisterComponent",{component:this,tagName:"NavLink",options:e,id:nl.name})}get to(){throw new Error("<NavLink>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set to(e){throw new Error("<NavLink>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:sl}=ue,al="src/Welcome.svelte";function cl(e){let t,n,i,r,s,c,l,u;const h={c:function(){t=k("div"),n=k("h4"),n.textContent="Welcome Stranger",i=T(),r=k("p"),s=x("Please\n        "),c=k("a"),c.textContent="log",l=x("\n        in or\n        "),u=k("a"),u.textContent="signup",a(n,al,91,6,1924),Se(c,"href","/login"),Se(c,"class","loginText svelte-8qrmfc"),a(c,al,94,8,1983),Se(u,"href","/signup"),Se(u,"class","loginText svelte-8qrmfc"),a(u,al,96,8,2048),a(r,al,92,6,1956),a(t,al,90,4,1912)},m:function(e,o){be(e,t,o),ye(t,n),ye(t,i),ye(t,r),ye(r,s),ye(r,c),ye(r,l),ye(r,u)},p:o,i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:h,id:cl.name,type:"if",source:"(90:30) ",ctx:e}),h}function ll(e){let t,n,i,o,r,s,c,l,u,h,d,f;const p=new rl({props:{to:"/play",$$slots:{default:[ul]},$$scope:{ctx:e}},$$inline:!0}),v=new rl({props:{to:"/creator",$$slots:{default:[hl]},$$scope:{ctx:e}},$$inline:!0}),m={c:function(){t=k("div"),n=k("h5"),i=x("Welcome back "),o=x(e[1]),r=T(),s=k("div"),fe(p.$$.fragment),c=x("\n        or try to create some\n        "),fe(v.$$.fragment),l=T(),u=k("div"),h=k("p"),d=k("a"),d.textContent="Create a new Character",a(n,al,73,6,1540),a(s,al,75,6,1581),Se(d,"class","modal-trigger"),Se(d,"href","#modal1"),a(d,al,84,10,1772),a(h,al,83,8,1758),a(u,al,82,6,1744),a(t,al,71,4,1527)},m:function(e,a){be(e,t,a),ye(t,n),ye(n,i),ye(n,o),ye(t,r),ye(t,s),pe(p,s,null),ye(s,c),pe(v,s,null),ye(t,l),ye(t,u),ye(u,h),ye(h,d),f=!0},p:function(e,t){(!f||2&t)&&Ee(o,e[1]);const n={};131072&t&&(n.$$scope={dirty:t,ctx:e}),p.$set(n);const i={};131072&t&&(i.$$scope={dirty:t,ctx:e}),v.$set(i)},i:function(e){f||(ce(p.$$.fragment,e),ce(v.$$.fragment,e),f=!0)},o:function(e){le(p.$$.fragment,e),le(v.$$.fragment,e),f=!1},d:function(e){e&&we(t),ve(p),ve(v)}};return ge("SvelteRegisterBlock",{block:m,id:ll.name,type:"if",source:"(71:2) {#if $isAuthenticated}",ctx:e}),m}function ul(e){let t;const n={c:function(){t=x("Start playing")},m:function(e,n){be(e,t,n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:n,id:ul.name,type:"slot",source:'(78:8) <NavLink to=\\"/play\\">',ctx:e}),n}function hl(e){let t;const n={c:function(){t=x("own content.")},m:function(e,n){be(e,t,n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:n,id:hl.name,type:"slot",source:'(80:8) <NavLink to=\\"/creator\\">',ctx:e}),n}function dl(e){let t;const n={c:function(){t=x("play")},m:function(e,n){be(e,t,n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:n,id:dl.name,type:"slot",source:'(128:6) <NavLink to=\\"/play\\">',ctx:e}),n}function fl(e){let t;const n={c:function(){t=x("See Credits")},m:function(e,n){be(e,t,n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:n,id:fl.name,type:"slot",source:'(159:4) <NavLink to=\\"/credits\\">',ctx:e}),n}function pl(e){let t,n,i,o,r,s,c,l,u,h,d,f,p,v,m,_,g,y,b,w,C,S,E,L,R,M,O,A,$,D,I,P,B,H,j,W,F,N,U,q,z,Y,V,K,G,Z,X,J,Q,ee,te,ne,ie,oe,re,ue,he;const de=[ll,cl],me=[];function _e(e,t){return e[0]?0:e[0]?-1:1}~(n=_e(e))&&(i=me[n]=de[n](e));const Ce=new rl({props:{to:"/play",$$slots:{default:[dl]},$$scope:{ctx:e}},$$inline:!0}),ke=new rl({props:{to:"/credits",$$slots:{default:[fl]},$$scope:{ctx:e}},$$inline:!0}),Ee=new Fa({$$inline:!0}),xe={c:function(){t=k("div"),i&&i.c(),o=T(),r=k("div"),s=k("h5"),s.textContent="TalesMUD",c=T(),l=k("p"),l.textContent="TalesMUD is a MUD/MUX game engine/game development platform. Using\n      TalesMud you can create your own MUD server, define your game content and\n      either use the existing web client or build a new one from scratch.",u=T(),h=k("p"),h.textContent="This is still a very early version with many more features planned. As\n      development progresses you can expect several updates to the developer\n      sandbox version running on this site.",d=x("\n    Implemented\n    "),f=k("ul"),p=k("li"),p.textContent="- Character creation",v=T(),m=k("li"),m.textContent="- Room creation, movement between rooms",_=x("\n    Planned\n    "),g=k("ul"),y=k("li"),y.textContent="- Items, Inventory Management",b=T(),w=k("li"),w.textContent="- NPCs, Enemies and Dialogs",C=T(),S=k("li"),S.textContent="- Combat System",E=T(),L=k("li"),L.textContent="- Quest System",R=T(),M=k("p"),O=x("Head over to\n      "),fe(Ce.$$.fragment),A=x("\n      create a character and try out the current set of commands by typing\n      [help]. List of all global commands:"),$=T(),D=k("ul"),I=k("li"),I.textContent="[shrug] shrug emote",P=T(),B=k("li"),B.textContent="[sc, selectcharacter] select a character, use: sc [charactername]",H=T(),j=k("li"),j.textContent="[lc, listcharacters] list all your characters",W=T(),F=k("li"),F.textContent="[h, help] are you really asking?",N=T(),U=k("li"),U.textContent="[who] list all online players",q=T(),z=k("li"),z.textContent="[inventory, i] Display your inventory",Y=T(),V=k("li"),V.textContent="[newcharacter, nc] Createa new character",K=T(),G=k("li"),G.textContent="[scream] scream through the room",Z=T(),X=k("div"),J=k("h5"),J.textContent="News",Q=T(),ee=k("ul"),te=k("li"),te.textContent="12.06.2020 - First minimalistic version live supporting room creation,\n        character creation (template picks)",ne=T(),ie=k("div"),oe=k("h5"),oe.textContent="Credits",re=x("\n    The application uses several assets througout the app and the backend, here\n    is a list of free and licensed art:\n    "),fe(ke.$$.fragment),ue=T(),fe(Ee.$$.fragment),a(s,al,102,4,2138),a(l,al,103,4,2160),a(h,al,108,4,2404),a(p,al,115,6,2646),a(m,al,116,6,2682),a(f,al,114,4,2635),a(y,al,120,6,2768),a(w,al,121,6,2813),a(S,al,122,6,2856),a(L,al,123,6,2887),a(g,al,119,4,2757),a(M,al,125,4,2925),a(I,al,133,6,3132),a(B,al,134,6,3167),a(j,al,135,6,3248),a(F,al,136,6,3309),a(U,al,137,6,3357),a(z,al,138,6,3402),a(V,al,139,6,3455),a(G,al,140,6,3511),a(D,al,131,4,3120),a(r,al,101,2,2128),a(J,al,146,4,3586),a(te,al,148,6,3615),a(ee,al,147,4,3604),a(X,al,145,2,3576),a(oe,al,155,4,3786),a(ie,al,154,2,3776),Se(t,"class","left"),a(t,al,69,0,1479)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){be(e,t,i),~n&&me[n].m(t,null),ye(t,o),ye(t,r),ye(r,s),ye(r,c),ye(r,l),ye(r,u),ye(r,h),ye(r,d),ye(r,f),ye(f,p),ye(f,v),ye(f,m),ye(r,_),ye(r,g),ye(g,y),ye(g,b),ye(g,w),ye(g,C),ye(g,S),ye(g,E),ye(g,L),ye(r,R),ye(r,M),ye(M,O),pe(Ce,M,null),ye(M,A),ye(r,$),ye(r,D),ye(D,I),ye(D,P),ye(D,B),ye(D,H),ye(D,j),ye(D,W),ye(D,F),ye(D,N),ye(D,U),ye(D,q),ye(D,z),ye(D,Y),ye(D,V),ye(D,K),ye(D,G),ye(t,Z),ye(t,X),ye(X,J),ye(X,Q),ye(X,ee),ye(ee,te),ye(t,ne),ye(t,ie),ye(ie,oe),ye(ie,re),pe(ke,ie,null),ye(t,ue),pe(Ee,t,null),he=!0},p:function(e,[r]){let s=n;n=_e(e),n===s?~n&&me[n].p(e,r):(i&&(se(),le(me[s],1,1,()=>{me[s]=null}),ae()),~n?(i=me[n],i||(i=me[n]=de[n](e),i.c()),ce(i,1),i.m(t,o)):i=null);const a={};131072&r&&(a.$$scope={dirty:r,ctx:e}),Ce.$set(a);const c={};131072&r&&(c.$$scope={dirty:r,ctx:e}),ke.$set(c)},i:function(e){he||(ce(i),ce(Ce.$$.fragment,e),ce(ke.$$.fragment,e),ce(Ee.$$.fragment,e),he=!0)},o:function(e){le(i),le(Ce.$$.fragment,e),le(ke.$$.fragment,e),le(Ee.$$.fragment,e),he=!1},d:function(e){e&&we(t),~n&&me[n].d(),ve(Ce),ve(ke),ve(Ee)}};return ge("SvelteRegisterBlock",{block:xe,id:pl.name,type:"component",source:"",ctx:e}),xe}function vl(e,t,n){let i,o,r,s,a,c;const l=He("stranger");f(l,"nickname"),v(e,l,e=>n(1,c=e));let u=!1;const{isLoading:h,isAuthenticated:d,login:p,logout:m,authToken:_,authError:g,userInfo:y}=Us();f(h,"isLoading"),v(e,h,e=>n(10,i=e)),f(d,"isAuthenticated"),v(e,d,e=>n(0,o=e)),f(_,"authToken"),v(e,_,e=>n(13,a=e)),f(g,"authError"),v(e,g,e=>n(11,r=e)),f(y,"userInfo"),v(e,y,e=>n(12,s=e));const b=async()=>{};W(async()=>{document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".modal");M.Modal.init(e,{})})),await b()});const w=[];Object.keys(t).forEach(e=>{~w.indexOf(e)||"$$"===e.slice(0,2)||sl.warn(`<Welcome> was created with unknown prop '${e}'`)});let C,{$$slots:S={},$$scope:k}=t;return Te("Welcome",S,[]),e.$capture_state=()=>({Sprites:Ae,NavLink:rl,CharacterCreator:Fa,onMount:W,createAuth:Ns,getAuth:Us,axios:La,onInterval:Ra,getUser:Hc,writable:He,nickname:l,loaded:u,isLoading:h,isAuthenticated:d,login:p,logout:m,authToken:_,authError:g,userInfo:y,loadUser:b,state:C,$isLoading:i,$isAuthenticated:o,$authError:r,$userInfo:s,$authToken:a,$nickname:c}),e.$inject_state=e=>{"loaded"in e&&n(8,u=e.loaded),"state"in e&&(C=e.state)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{15363&e.$$.dirty&&(C={isLoading:i,isAuthenticated:o,authError:r,userInfo:s?s.name:null,authToken:a.slice(0,20),nickname:c}),9473&e.$$.dirty&&(u||i||!o||(n(8,u=!0),Hc(a,e=>{l.set(e.nickname)},e=>console.log(e))))},[o,c,l,h,d,_,g,y]}class ml extends Le{constructor(e){super(e),_e(this,e,vl,pl,d,{}),ge("SvelteRegisterComponent",{component:this,tagName:"Welcome",options:e,id:pl.name})}}const _l="src/creator/ActionEditor.svelte";function gl(e){let t,n,i,r,s,c,l,h,d,f,p,v,m,_,g,y,b,w,C,S,E,L,R,M,O,$,D,I,P,B,H,j,W,F,N,U,q,z,Y,V,K,G,Z,X,J,Q,ee=e[0].name+"";const te={c:function(){t=k("li"),n=k("div"),i=k("i"),i.textContent="exit_to_app",r=T(),s=x(ee),c=T(),l=k("div"),h=k("div"),d=k("label"),f=k("input"),p=T(),v=k("span"),v.textContent="Hidden",m=T(),_=k("button"),_.textContent="Delete Exit",g=T(),y=k("div"),b=k("div"),w=k("input"),S=T(),E=k("label"),L=x("Name"),M=T(),O=k("div"),$=k("input"),I=T(),P=k("label"),B=x("Description"),j=T(),W=k("div"),F=k("input"),U=T(),q=k("label"),z=x("Target Room"),V=T(),K=k("div"),G=k("input"),X=T(),J=k("label"),J.textContent="Target Room",Se(i,"class","material-icons"),a(i,_l,26,4,336),Se(n,"class","collapsible-header svelte-1bo8y5f"),a(n,_l,25,2,299),Se(f,"type","checkbox"),Se(f,"class","svelte-1bo8y5f"),a(f,_l,34,8,482),a(v,_l,35,8,545),Se(d,"class","svelte-1bo8y5f"),a(d,_l,33,6,466),Se(_,"class","btn-small red right"),a(_,_l,37,6,586),Se(h,"class","row"),a(h,_l,31,4,441),Se(w,"placeholder","Placeholder"),Se(w,"id",C="name-"+e[0].name),Se(w,"type","text"),Se(w,"class","svelte-1bo8y5f"),a(w,_l,45,8,770),Se(E,"for",R="name-"+e[0].name),Se(E,"class","svelte-1bo8y5f"),a(E,_l,51,8,921),Se($,"placeholder","Placeholder"),Se($,"id",D="desc-"+e[0].description),Se($,"type","text"),Se($,"class","svelte-1bo8y5f"),a($,_l,54,10,1009),Se(P,"for",H="desc-"+e[0].description),Se(P,"class","svelte-1bo8y5f"),a(P,_l,60,10,1186),Se(F,"id",N="target-"+e[0].target),Se(F,"type","text"),Se(F,"class","svelte-1bo8y5f"),a(F,_l,62,12,1291),Se(q,"for",Y="target-"+e[0].target),Se(q,"class","svelte-1bo8y5f"),a(q,_l,67,12,1432),Se(W,"class","input-field"),a(W,_l,61,10,1253),Se(G,"type","text"),Se(G,"id",Z="autocomplete-input-"+e[0].name),Se(G,"class","autocomplete svelte-1bo8y5f"),a(G,_l,70,12,1551),Se(J,"for","autocomplete-input"),Se(J,"class","svelte-1bo8y5f"),a(J,_l,75,12,1696),Se(K,"class","input-field"),a(K,_l,69,10,1513),Se(O,"class","input-field"),a(O,_l,53,8,973),Se(b,"class","input-field"),a(b,_l,44,6,736),Se(y,"class","row"),a(y,_l,42,4,711),Se(l,"class","collapsible-body svelte-1bo8y5f"),a(l,_l,30,2,406),a(t,_l,24,0,292)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,a,C){be(o,t,a),ye(t,n),ye(n,i),ye(n,r),ye(n,s),ye(t,c),ye(t,l),ye(l,h),ye(h,d),ye(d,f),f.checked=e[0].hidden,ye(d,p),ye(d,v),ye(h,m),ye(h,_),ye(l,g),ye(l,y),ye(y,b),ye(b,w),A(w,e[0].name),ye(b,S),ye(b,E),ye(E,L),ye(b,M),ye(b,O),ye(O,$),A($,e[0].description),ye(O,I),ye(O,P),ye(P,B),ye(O,j),ye(O,W),ye(W,F),A(F,e[0].target),ye(W,U),ye(W,q),ye(q,z),ye(O,V),ye(O,K),ye(K,G),ye(K,X),ye(K,J),C&&u(Q),Q=[Ce(f,"change",e[2]),Ce(_,"click",e[3],!1,!1,!1),Ce(w,"input",e[4]),Ce($,"input",e[5]),Ce(F,"input",e[6])]},p:function(e,[t]){1&t&&ee!==(ee=e[0].name+"")&&Ee(s,ee),1&t&&(f.checked=e[0].hidden),1&t&&C!==(C="name-"+e[0].name)&&Se(w,"id",C),1&t&&w.value!==e[0].name&&A(w,e[0].name),1&t&&R!==(R="name-"+e[0].name)&&Se(E,"for",R),1&t&&D!==(D="desc-"+e[0].description)&&Se($,"id",D),1&t&&$.value!==e[0].description&&A($,e[0].description),1&t&&H!==(H="desc-"+e[0].description)&&Se(P,"for",H),1&t&&N!==(N="target-"+e[0].target)&&Se(F,"id",N),1&t&&F.value!==e[0].target&&A(F,e[0].target),1&t&&Y!==(Y="target-"+e[0].target)&&Se(q,"for",Y),1&t&&Z!==(Z="autocomplete-input-"+e[0].name)&&Se(G,"id",Z)},i:o,o:o,d:function(e){e&&we(t),u(Q)}};return ge("SvelteRegisterBlock",{block:te,id:gl.name,type:"component",source:"",ctx:e}),te}function yl(e,t,n){let{exit:i}=t,{deleteExit:o}=t;const r=["exit","deleteExit"];Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<ActionEditor> was created with unknown prop '${e}'`)});let{$$slots:s={},$$scope:a}=t;Te("ActionEditor",s,[]);return e.$set=e=>{"exit"in e&&n(0,i=e.exit),"deleteExit"in e&&n(1,o=e.deleteExit)},e.$capture_state=()=>({exit:i,deleteExit:o}),e.$inject_state=e=>{"exit"in e&&n(0,i=e.exit),"deleteExit"in e&&n(1,o=e.deleteExit)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o,function(){i.hidden=this.checked,n(0,i)},()=>o(i),function(){i.name=this.value,n(0,i)},function(){i.description=this.value,n(0,i)},function(){i.target=this.value,n(0,i)}]}class bl extends Le{constructor(e){super(e),_e(this,e,yl,gl,d,{exit:0,deleteExit:1}),ge("SvelteRegisterComponent",{component:this,tagName:"ActionEditor",options:e,id:gl.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"exit"in n||console.warn("<ActionEditor> was created without expected prop 'exit'"),void 0!==t[1]||"deleteExit"in n||console.warn("<ActionEditor> was created without expected prop 'deleteExit'")}get exit(){throw new Error("<ActionEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set exit(e){throw new Error("<ActionEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get deleteExit(){throw new Error("<ActionEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set deleteExit(e){throw new Error("<ActionEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:wl}=ue,Cl="src/creator/Toolbar.svelte";function Sl(e,t,n){const i=e.slice();return i[1]=t[n],i}function kl(e){let t,n,i=e[1].icon+"";const o={c:function(){t=k("i"),n=x(i),Se(t,"class","material-icons center"),a(t,Cl,56,12,994)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,t){1&t&&i!==(i=e[1].icon+"")&&Ee(n,i)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:o,id:kl.name,type:"if",source:"(56:32) ",ctx:e}),o}function El(e){let t,n,i=e[1].icon+"";const o={c:function(){t=k("i"),n=x(i),Se(t,"class","material-icons left"),a(t,Cl,54,12,900)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,t){1&t&&i!==(i=e[1].icon+"")&&Ee(n,i)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:o,id:El.name,type:"if",source:"(54:10) {#if action.icon && action.name}",ctx:e}),o}function xl(e){let t,n=e[1].name+"";const i={c:function(){t=x(n)},m:function(e,n){be(e,t,n)},p:function(e,i){1&i&&n!==(n=e[1].name+"")&&Ee(t,n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:i,id:xl.name,type:"if",source:"(59:10) {#if action.name}",ctx:e}),i}function Tl(e){let t,n,i,o,r,s;function c(e,t){return e[1].icon&&e[1].name?El:e[1].icon?kl:void 0}let l=c(e),u=l&&l(e),d=e[1].name&&xl(e);const f={c:function(){t=k("li"),n=k("button"),u&&u.c(),i=T(),d&&d.c(),r=T(),Se(n,"class",o="btn-flat "+e[1].color+" svelte-13bgm0"),a(n,Cl,51,8,777),Se(t,"class","svelte-13bgm0"),a(t,Cl,50,6,764)},m:function(o,a,c){be(o,t,a),ye(t,n),u&&u.m(n,null),ye(n,i),d&&d.m(n,null),ye(t,r),c&&s(),s=Ce(n,"click",(function(){h(e[1].fnc())&&e[1].fnc().apply(this,arguments)}),!1,!1,!1)},p:function(t,r){l===(l=c(e=t))&&u?u.p(e,r):(u&&u.d(1),u=l&&l(e),u&&(u.c(),u.m(n,i))),e[1].name?d?d.p(e,r):(d=xl(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null),1&r&&o!==(o="btn-flat "+e[1].color+" svelte-13bgm0")&&Se(n,"class",o)},d:function(e){e&&we(t),u&&u.d(),d&&d.d(),s()}};return ge("SvelteRegisterBlock",{block:f,id:Tl.name,type:"each",source:"(50:4) {#each toolbar.actions as action}",ctx:e}),f}function Ll(e){let t,n,i,r,s,c=e[0].title+"",l=e[0].actions;xe(l);let u=[];for(let t=0;t<l.length;t+=1)u[t]=Tl(Sl(e,l,t));const h={c:function(){t=k("div"),n=k("ul"),i=k("li"),r=x(c),s=T();for(let e=0;e<u.length;e+=1)u[e].c();Se(i,"class","header svelte-13bgm0"),a(i,Cl,48,4,680),Se(n,"class","svelte-13bgm0"),a(n,Cl,47,2,671),Se(t,"class","row"),a(t,Cl,46,0,651)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),ye(t,n),ye(n,i),ye(i,r),ye(n,s);for(let e=0;e<u.length;e+=1)u[e].m(n,null)},p:function(e,[t]){if(1&t&&c!==(c=e[0].title+"")&&Ee(r,c),1&t){let i;for(l=e[0].actions,xe(l),i=0;i<l.length;i+=1){const o=Sl(e,l,i);u[i]?u[i].p(o,t):(u[i]=Tl(o),u[i].c(),u[i].m(n,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=l.length}},i:o,o:o,d:function(e){e&&we(t),S(u,e)}};return ge("SvelteRegisterBlock",{block:h,id:Ll.name,type:"component",source:"",ctx:e}),h}function Rl(e,t,n){let{toolbar:i={title:"TODO",actions:[{name:"Change Me",color:"green",fnc:()=>console.log("ACTION")}]}}=t;const o=["toolbar"];Object.keys(t).forEach(e=>{~o.indexOf(e)||"$$"===e.slice(0,2)||wl.warn(`<Toolbar> was created with unknown prop '${e}'`)});let{$$slots:r={},$$scope:s}=t;return Te("Toolbar",r,[]),e.$set=e=>{"toolbar"in e&&n(0,i=e.toolbar)},e.$capture_state=()=>({toolbar:i}),e.$inject_state=e=>{"toolbar"in e&&n(0,i=e.toolbar)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i]}class Ml extends Le{constructor(e){super(e),_e(this,e,Rl,Ll,d,{toolbar:0}),ge("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:e,id:Ll.name})}get toolbar(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set toolbar(e){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Ol(){const{subscribe:e,set:t,update:n}=He({elements:[],selectedElement:null,filters:[],filterActive:!1});return{subscribe:e,set:t,addFilter:(e,t)=>{n(n=>{let i=n.filters;for(var o=0;o<i.length;o++)i[o].key===e&&i.splice(o,1);return i.push({key:e,val:t}),console.log("Added filter "+e+" "+t),n.filters=i,n})},removeFilter:e=>{n(t=>{let n=t.filters;for(var i=0;i<n.length;i++)n[i].key===e&&n.splice(i,1);return console.log("Removed filter "+e),t.filters=n,t})},toggleFilter:()=>{n(e=>(e.filterActive=!e.filterActive,e))},setSelectedElement:(e,t)=>{n(t=>(t.selectedElement=e,t)),t&&t()},setElements:e=>{n(t=>(t.elements=e,t))}}}const{console:Al}=ue,$l="src/creator/CRUDEditorStore.svelte",Dl=e=>({}),Il=e=>({}),Pl=e=>({}),Bl=e=>({});function Hl(e,t,n){const i=e.slice();return i[27]=t[n],i}function jl(e){let t,n,i=e[0].badge(e[27])+"";const o={c:function(){t=k("span"),n=x(i),Se(t,"class","new badge"),Se(t,"data-badge-caption",""),a(t,$l,239,12,4635)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,t){5&t&&i!==(i=e[0].badge(e[27])+"")&&Ee(n,i)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:o,id:jl.name,type:"if",source:"(239:10) {#if element.slot}",ctx:e}),o}function Wl(e){let t,n,i,o,r,s=e[27].name+"",c=e[27].slot&&jl(e);const l={c:function(){t=k("a"),c&&c.c(),n=T(),i=x(s),o=T(),Se(t,"href","#!"),Se(t,"class","collection-item svelte-gyvals"),a(t,$l,232,8,4480)},m:function(s,a,l){be(s,t,a),c&&c.m(t,null),ye(t,n),ye(t,i),ye(t,o),l&&r(),r=Ce(t,"click",(function(){h(e[7](e[27]))&&e[7](e[27]).apply(this,arguments)}),!1,!1,!1)},p:function(o,r){(e=o)[27].slot?c?c.p(e,r):(c=jl(e),c.c(),c.m(t,n)):c&&(c.d(1),c=null),4&r&&s!==(s=e[27].name+"")&&Ee(i,s)},d:function(e){e&&we(t),c&&c.d(),r()}};return ge("SvelteRegisterBlock",{block:l,id:Wl.name,type:"each",source:"(232:6) {#each $store.elements as element}",ctx:e}),l}function Fl(e){let t,n;const i={c:function(){t=k("div"),n=k("div"),Se(n,"class","chips chips-placeholder search svelte-gyvals"),a(n,$l,254,8,4957),Se(t,"class","card-panel white"),a(t,$l,253,6,4918)},m:function(e,i){be(e,t,i),ye(t,n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:i,id:Fl.name,type:"if",source:"(253:4) {#if $store.filterActive}",ctx:e}),i}function Nl(e){let t,n,i,o,r,s,c,l,h,d,f,p,v,y,b,w,C,S,E,L,R,M,O,$,D,I,P,B,H=e[2].selectedElement.name+"";const j=e[18].hero,W=m(j,e,e[17],Bl);function F(e,t){return e[2].selectedElement.isNew?ql:Ul}let N=F(e),U=N(e);function q(e,t){return e[2].selectedElement.isNew?Yl:zl}let z=q(e),Y=z(e);const V=e[18].content,K=m(V,e,e[17],Il),G={c:function(){t=k("div"),n=k("div"),W&&W.c(),i=T(),o=k("span"),r=x(H),s=T(),U.c(),c=T(),l=k("div"),h=k("div"),d=k("input"),f=T(),p=k("label"),p.textContent="Name",v=T(),Y.c(),y=T(),b=k("div"),w=k("div"),C=k("input"),S=T(),E=k("label"),E.textContent="Description",L=T(),R=k("div"),M=k("div"),O=k("input"),$=T(),D=k("label"),D.textContent="Detail (look)",I=T(),K&&K.c(),Se(o,"class","header svelte-gyvals"),a(o,$l,264,10,5218),Se(n,"class","row"),a(n,$l,262,8,5159),Se(d,"placeholder","Name"),Se(d,"id","itemTemplate_name"),Se(d,"type","text"),Se(d,"class","svelte-gyvals"),a(d,$l,291,12,6033),Se(p,"class","first_label svelte-gyvals"),Se(p,"for","itemTemplate_name"),a(p,$l,297,12,6220),Se(h,"class","no-padding input-field col s6 svelte-gyvals"),a(h,$l,290,10,5977),Se(l,"class","row"),a(l,$l,289,8,5949),Se(C,"placeholder","Item Description"),Se(C,"id","itemTemplate_description"),Se(C,"type","text"),Se(C,"class","materialize-textarea svelte-gyvals"),a(C,$l,327,12,7149),Se(E,"class","active svelte-gyvals"),Se(E,"for","itemTemplate_description"),a(E,$l,334,12,7405),Se(w,"class","input-field"),a(w,$l,326,10,7111),Se(b,"class","row"),a(b,$l,325,8,7083),Se(O,"placeholder","Item Details"),Se(O,"id","itemTemplate_detail"),Se(O,"type","text"),Se(O,"class","materialize-textarea svelte-gyvals"),a(O,$l,342,12,7613),Se(D,"class","active svelte-gyvals"),Se(D,"for","itemTemplate_detail"),a(D,$l,349,12,7855),Se(M,"class","input-field"),a(M,$l,341,10,7575),Se(R,"class","row"),a(R,$l,340,8,7547),Se(t,"class","card-panel cyan darken-4"),a(t,$l,260,6,5111)},m:function(a,m,_){be(a,t,m),ye(t,n),W&&W.m(n,null),ye(n,i),ye(n,o),ye(o,r),ye(n,s),U.m(n,null),ye(t,c),ye(t,l),ye(l,h),ye(h,d),A(d,e[2].selectedElement.name),ye(h,f),ye(h,p),ye(l,v),Y.m(l,null),ye(t,y),ye(t,b),ye(b,w),ye(w,C),A(C,e[2].selectedElement.description),ye(w,S),ye(w,E),ye(t,L),ye(t,R),ye(R,M),ye(M,O),A(O,e[2].selectedElement.detail),ye(M,$),ye(M,D),ye(t,I),K&&K.m(t,null),P=!0,_&&u(B),B=[Ce(d,"input",e[22]),Ce(C,"input",e[25]),Ce(O,"input",e[26])]},p:function(e,t){W&&W.p&&131072&t&&W.p(_(j,e,e[17],Bl),g(j,e[17],t,Pl)),(!P||4&t)&&H!==(H=e[2].selectedElement.name+"")&&Ee(r,H),N===(N=F(e))&&U?U.p(e,t):(U.d(1),U=N(e),U&&(U.c(),U.m(n,null))),4&t&&d.value!==e[2].selectedElement.name&&A(d,e[2].selectedElement.name),z===(z=q(e))&&Y?Y.p(e,t):(Y.d(1),Y=z(e),Y&&(Y.c(),Y.m(l,null))),4&t&&C.value!==e[2].selectedElement.description&&A(C,e[2].selectedElement.description),4&t&&O.value!==e[2].selectedElement.detail&&A(O,e[2].selectedElement.detail),K&&K.p&&131072&t&&K.p(_(V,e,e[17],Il),g(V,e[17],t,Dl))},i:function(e){P||(ce(W,e),ce(K,e),P=!0)},o:function(e){le(W,e),le(K,e),P=!1},d:function(e){e&&we(t),W&&W.d(e),U.d(),Y.d(),K&&K.d(e),u(B)}};return ge("SvelteRegisterBlock",{block:G,id:Nl.name,type:"if",source:"(260:4) {#if $store.selectedElement}",ctx:e}),G}function Ul(e){let t,n,i,r;const s={c:function(){t=k("button"),t.textContent="Update",n=T(),i=k("button"),i.textContent="Delete",Se(t,"class","waves-effect waves-light btn-small green right svelte-gyvals"),a(t,$l,274,12,5540),Se(i,"class","waves-effect waves-light btn-small red right svelte-gyvals"),a(i,$l,280,12,5728)},m:function(o,s,a){be(o,t,s),be(o,n,s),be(o,i,s),a&&u(r),r=[Ce(t,"click",e[20],!1,!1,!1),Ce(i,"click",e[21],!1,!1,!1)]},p:o,d:function(e){e&&we(t),e&&we(n),e&&we(i),u(r)}};return ge("SvelteRegisterBlock",{block:s,id:Ul.name,type:"else",source:"(274:10) {:else}",ctx:e}),s}function ql(e){let t,n;const i={c:function(){t=k("button"),t.textContent="Create",Se(t,"class","waves-effect waves-light btn-small green right svelte-gyvals"),a(t,$l,267,12,5334)},m:function(i,o,r){be(i,t,o),r&&n(),n=Ce(t,"click",e[19],!1,!1,!1)},p:o,d:function(e){e&&we(t),n()}};return ge("SvelteRegisterBlock",{block:i,id:ql.name,type:"if",source:"(267:10) {#if $store.selectedElement.isNew}",ctx:e}),i}function zl(e){let t,n,i,o,r;const s={c:function(){t=k("div"),n=k("input"),i=T(),o=k("label"),o.textContent="ID",Se(n,"placeholder","ID"),Se(n,"id","itemTemplate_id"),Se(n,"type","text"),n.disabled=!0,Se(n,"class","svelte-gyvals"),a(n,$l,312,14,6750),Se(o,"class","active svelte-gyvals"),Se(o,"for","itemTemplate_id"),a(o,$l,319,14,6968),Se(t,"class","input-field col s4"),a(t,$l,311,12,6703)},m:function(s,a,c){be(s,t,a),ye(t,n),A(n,e[2].selectedElement.id),ye(t,i),ye(t,o),c&&r(),r=Ce(n,"input",e[24])},p:function(e,t){4&t&&n.value!==e[2].selectedElement.id&&A(n,e[2].selectedElement.id)},d:function(e){e&&we(t),r()}};return ge("SvelteRegisterBlock",{block:s,id:zl.name,type:"else",source:"(311:10) {:else}",ctx:e}),s}function Yl(e){let t,n,i,o,r;const s={c:function(){t=k("div"),n=k("input"),i=T(),o=k("label"),o.textContent="ID",Se(n,"placeholder","ID"),Se(n,"id","itemTemplate_id"),Se(n,"type","text"),Se(n,"class","svelte-gyvals"),a(n,$l,302,14,6406),Se(o,"class","active svelte-gyvals"),Se(o,"for","itemTemplate_id"),a(o,$l,308,14,6599),Se(t,"class","input-field col s4"),a(t,$l,301,12,6359)},m:function(s,a,c){be(s,t,a),ye(t,n),A(n,e[2].selectedElement.id),ye(t,i),ye(t,o),c&&r(),r=Ce(n,"input",e[23])},p:function(e,t){4&t&&n.value!==e[2].selectedElement.id&&A(n,e[2].selectedElement.id)},d:function(e){e&&we(t),r()}};return ge("SvelteRegisterBlock",{block:s,id:Yl.name,type:"if",source:"(301:10) {#if $store.selectedElement.isNew}",ctx:e}),s}function Vl(e){let t,n,i,o,r,s,c,l;const u=new Ml({props:{toolbar:e[9]},$$inline:!0});let h=e[2].elements;xe(h);let d=[];for(let t=0;t<h.length;t+=1)d[t]=Wl(Hl(e,h,t));let f=e[2].filterActive&&Fl(e),p=e[2].selectedElement&&Nl(e);const v={c:function(){fe(u.$$.fragment),t=T(),n=k("div"),i=k("div"),o=k("div");for(let e=0;e<d.length;e+=1)d[e].c();r=T(),s=k("div"),f&&f.c(),c=T(),p&&p.c(),Se(o,"class","collection svelte-gyvals"),a(o,$l,230,4,4406),Se(i,"class","col s3"),a(i,$l,229,2,4381),Se(s,"class","col s9"),a(s,$l,250,2,4860),Se(n,"class","row"),a(n,$l,226,0,4321)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,a){pe(u,e,a),be(e,t,a),be(e,n,a),ye(n,i),ye(i,o);for(let e=0;e<d.length;e+=1)d[e].m(o,null);ye(n,r),ye(n,s),f&&f.m(s,null),ye(s,c),p&&p.m(s,null),l=!0},p:function(e,[t]){if(133&t){let n;for(h=e[2].elements,xe(h),n=0;n<h.length;n+=1){const i=Hl(e,h,n);d[n]?d[n].p(i,t):(d[n]=Wl(i),d[n].c(),d[n].m(o,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=h.length}e[2].filterActive?f||(f=Fl(e),f.c(),f.m(s,c)):f&&(f.d(1),f=null),e[2].selectedElement?p?(p.p(e,t),4&t&&ce(p,1)):(p=Nl(e),p.c(),ce(p,1),p.m(s,null)):p&&(se(),le(p,1,1,()=>{p=null}),ae())},i:function(e){l||(ce(u.$$.fragment,e),ce(p),l=!0)},o:function(e){le(u.$$.fragment,e),le(p),l=!1},d:function(e){ve(u,e),e&&we(t),e&&we(n),S(d,e),f&&f.d(),p&&p.d()}};return ge("SvelteRegisterBlock",{block:v,id:Vl.name,type:"component",source:"",ctx:e}),v}function Kl(e,t,n){let i,r,s,a=o,c=()=>(a(),a=p(u,e=>n(2,s=e)),u);e.$$.on_destroy.push(()=>a());let{config:l}=t,{store:u}=t;f(u,"store"),c();const{isAuthenticated:h,authToken:d}=Us();f(h,"isAuthenticated"),v(e,h,e=>n(11,i=e)),f(d,"authToken"),v(e,d,e=>n(12,r=e));const m=async e=>{i&&l.get(r,s.filters,t=>{u.setElements(t),e&&e()},e=>console.log(e))};W(async()=>{m(()=>{y(s.elements[0])})});const _=async()=>{l.delete(r,s.selectedElement.id,()=>{m(()=>{s.elements&&u.setSelectedElement(s.elements[0])})},()=>{console.log("create error.")})},g=async()=>{l.create(r,s.selectedElement,e=>{m(),y(e)},()=>{console.log("create error.")})},y=e=>{u.setSelectedElement(e,()=>{C()})},b=e=>{if(e.includes(":")){let t=e.split(":");u.addFilter(t[0],t[1]),m(()=>{y(s.elements[0])})}},w=e=>{if(e.includes(":")){let t=e.split(":");u.removeFilter(t[0]),m(()=>{y(s.elements[0])})}},C=()=>{setTimeout((function(){let e=document.querySelectorAll(".chips"),t=[];s.filters.forEach(e=>{t.push({tag:e.key+":"+e.val})}),M.Chips.init(e,{data:t,onChipAdd:(e,t)=>b(t.firstChild.nodeValue),onChipDelete:(e,t)=>w(t.firstChild.nodeValue)});var n=document.querySelectorAll("select");M.FormSelect.init(n,{}),l.refreshUI&&l.refreshUI()}),50)},S=()=>{l.update(r,s.selectedElement.id,s.selectedElement,()=>{console.log("update successful."),m()},()=>{console.log("update error.")})},k={title:l.title,actions:[{name:null,color:"",icon:"filter_alt",fnc:()=>{u.toggleFilter(),C()}},{name:null,icon:"add",color:"",fnc:()=>l.new(y)},...l.actions]},E=["config","store"];Object.keys(t).forEach(e=>{~E.indexOf(e)||"$$"===e.slice(0,2)||Al.warn(`<CRUDEditorStore> was created with unknown prop '${e}'`)});let{$$slots:x={},$$scope:T}=t;Te("CRUDEditorStore",x,["hero","content"]);let L;return e.$set=e=>{"config"in e&&n(0,l=e.config),"store"in e&&c(n(1,u=e.store)),"$$scope"in e&&n(17,T=e.$$scope)},e.$capture_state=()=>({ActionEditor:bl,Toolbar:Ml,createStore:Ol,PlusIcon:Ec,writable:He,onMount:W,createAuth:Ns,getAuth:Us,config:l,store:u,isAuthenticated:h,authToken:d,loadData:m,deleteElement:_,create:g,selectElement:y,addFilter:b,removeFilter:w,refreshUI:C,update:S,toolbarConfig:k,state:L,$isAuthenticated:i,$authToken:r,$store:s}),e.$inject_state=e=>{"config"in e&&n(0,l=e.config),"store"in e&&c(n(1,u=e.store)),"state"in e&&(L=e.state)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{6144&e.$$.dirty&&(L={isAuthenticated:i,authToken:r.slice(0,20)})},[l,u,s,h,d,_,g,y,S,k,L,i,r,m,b,w,C,T,x,()=>g(),()=>S(),()=>_(),function(){s.selectedElement.name=this.value,u.set(s)},function(){s.selectedElement.id=this.value,u.set(s)},function(){s.selectedElement.id=this.value,u.set(s)},function(){s.selectedElement.description=this.value,u.set(s)},function(){s.selectedElement.detail=this.value,u.set(s)}]}class Gl extends Le{constructor(e){super(e),_e(this,e,Kl,Vl,d,{config:0,store:1}),ge("SvelteRegisterComponent",{component:this,tagName:"CRUDEditorStore",options:e,id:Vl.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"config"in n||Al.warn("<CRUDEditorStore> was created without expected prop 'config'"),void 0!==t[1]||"store"in n||Al.warn("<CRUDEditorStore> was created without expected prop 'store'")}get config(){throw new Error("<CRUDEditorStore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set config(e){throw new Error("<CRUDEditorStore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get store(){throw new Error("<CRUDEditorStore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set store(e){throw new Error("<CRUDEditorStore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var Zl="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Xl=new Uint8Array(16);function Jl(){if(!Zl)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zl(Xl)}for(var Ql=[],eu=0;eu<256;++eu)Ql.push((eu+256).toString(16).substr(1));function tu(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||Jl)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){for(var o=n||0,r=0;r<16;++r)t[o+r]=i[r];return t}return function(e,t){var n=t||0,i=Ql;return(i[e[n+0]]+i[e[n+1]]+i[e[n+2]]+i[e[n+3]]+"-"+i[e[n+4]]+i[e[n+5]]+"-"+i[e[n+6]]+i[e[n+7]]+"-"+i[e[n+8]]+i[e[n+9]]+"-"+i[e[n+10]]+i[e[n+11]]+i[e[n+12]]+i[e[n+13]]+i[e[n+14]]+i[e[n+15]]).toLowerCase()}(i)}function nu(e,t,n,i){La.get("/api/items/"+t,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}function iu(e,t,n,i){La.delete("/api/items/"+t,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}function ou(e,t,n,i){let o="/api/items";t&&(o+="?",t.forEach(e=>{o+=e.key+"="+e.val})),La.get(o,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}function ru(e,t,n,i,o){La.put("/api/items/"+t,n,{mode:"no-cors",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then(e=>i(e.data)).catch(e=>o(e))}function su(e,t,n,i){La.post("/api/items",t,{mode:"no-cors",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}function au(e,t){La.get("/api/item-slots").then(t=>e(t.data)).catch(e=>t(e))}function cu(e,t){La.get("/api/item-qualities").then(t=>e(t.data)).catch(e=>t(e))}function lu(e,t){La.get("/api/item-types").then(t=>e(t.data)).catch(e=>t(e))}function uu(e,t){La.get("/api/item-subtypes").then(t=>e(t.data)).catch(e=>t(e))}function hu(e,t,n,i){La.get("/api/item-templates/"+t,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}function du(e,t,n,i){La.delete("/api/item-templates/"+t,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}function fu(e,t,n,i){let o="/api/item-templates";if(t){o+="?";let e=0;t.forEach(t=>{e>0&&(o+="&"),o+=t.key+"="+t.val,e++})}La.get(o,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}function pu(e,t,n,i,o){La.put("/api/item-templates/"+t,n,{mode:"no-cors",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then(e=>i(e.data)).catch(e=>o(e))}function vu(e,t,n,i){La.post("/api/item-templates",t,{mode:"no-cors",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}const mu="src/creator/ItemsEditor.svelte";function _u(e,t,n){const i=e.slice();return i[19]=t[n],i}function gu(e,t,n){const i=e.slice();return i[22]=t[n],i}function yu(e,t,n){const i=e.slice();return i[25]=t[n],i}function bu(e,t,n){const i=e.slice();return i[28]=t[n],i}function wu(e,t,n){const i=e.slice();return i[31]=t[n],i}function Cu(e){let t,n;const i=new Ae({props:{item:"weapon"},$$inline:!0}),r={c:function(){t=k("span"),fe(i.$$.fragment),Se(t,"slot","hero"),Se(t,"class","col s1 valign-wrapper"),a(t,mu,93,2,2121)},m:function(e,o){be(e,t,o),pe(i,t,null),n=!0},p:o,i:function(e){n||(ce(i.$$.fragment,e),n=!0)},o:function(e){le(i.$$.fragment,e),n=!1},d:function(e){e&&we(t),ve(i)}};return ge("SvelteRegisterBlock",{block:r,id:Cu.name,type:"slot",source:'(94:2) <span slot=\\"hero\\" class=\\"col s1 valign-wrapper\\">',ctx:e}),r}function Su(e){let t,n,i,r=e[31]+"";const s={c:function(){t=k("option"),n=x(r),t.__value=i=e[31],t.value=t.__value,a(t,mu,103,12,2423)},m:function(e,i){be(e,t,i),ye(t,n)},p:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:s,id:Su.name,type:"each",source:"(103:10) {#each levels as lvl}",ctx:e}),s}function ku(e){let t,n,i,o=e[28].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),t.__value=i=e[28],t.value=t.__value,a(t,mu,113,12,2772)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){2&r[0]&&o!==(o=e[28].capitalize()+"")&&Ee(n,o),2&r[0]&&i!==(i=e[28])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:ku.name,type:"each",source:"(113:10) {#each itemTypes as type}",ctx:e}),r}function Eu(e){let t,n,i,o=e[25].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),t.__value=i=e[25],t.value=t.__value,a(t,mu,123,12,3150)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){4&r[0]&&o!==(o=e[25].capitalize()+"")&&Ee(n,o),4&r[0]&&i!==(i=e[25])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:Eu.name,type:"each",source:"(123:10) {#each itemSubTypes as subType}",ctx:e}),r}function xu(e){let t,n,i,o=e[22].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),t.__value=i=e[22],t.value=t.__value,a(t,mu,136,12,3582)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){1&r[0]&&o!==(o=e[22].capitalize()+"")&&Ee(n,o),1&r[0]&&i!==(i=e[22])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:xu.name,type:"each",source:"(136:10) {#each itemQualities as quality}",ctx:e}),r}function Tu(e){let t,n,i,o=e[19].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),Se(t,"class","select"),t.__value=i=e[19],t.value=t.__value,a(t,mu,151,12,4017)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){8&r[0]&&o!==(o=e[19].capitalize()+"")&&Ee(n,o),8&r[0]&&i!==(i=e[19])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:Tu.name,type:"each",source:"(151:10) {#each itemSlots as slot}",ctx:e}),r}function Lu(e){let t,n,i,o,r,s,c,l,h,d,f,p,v,m,_,g,y,b,w,C,E,x,L,R,M,O,A,$,I,P,B,H,j=e[7];xe(j);let W=[];for(let t=0;t<j.length;t+=1)W[t]=Su(wu(e,j,t));let F=e[1];xe(F);let N=[];for(let t=0;t<F.length;t+=1)N[t]=ku(bu(e,F,t));let U=e[2];xe(U);let q=[];for(let t=0;t<U.length;t+=1)q[t]=Eu(yu(e,U,t));let z=e[0];xe(z);let Y=[];for(let t=0;t<z.length;t+=1)Y[t]=xu(gu(e,z,t));let V=e[3];xe(V);let K=[];for(let t=0;t<V.length;t+=1)K[t]=Tu(_u(e,V,t));const G={c:function(){t=k("div"),n=k("div"),i=k("div"),o=k("select");for(let e=0;e<W.length;e+=1)W[e].c();r=T(),s=k("label"),s.textContent="Level",c=T(),l=k("div"),h=k("select"),d=k("option"),d.textContent="Item Type";for(let e=0;e<N.length;e+=1)N[e].c();f=T(),p=k("label"),p.textContent="Select Item Type",v=T(),m=k("div"),_=k("select"),g=k("option"),g.textContent="Item Subtype";for(let e=0;e<q.length;e+=1)q[e].c();y=T(),b=k("label"),b.textContent="Select Item Sub Type",w=T(),C=k("div"),E=k("div"),x=k("select"),L=k("option"),L.textContent="Item Quality";for(let e=0;e<Y.length;e+=1)Y[e].c();R=T(),M=k("label"),M.textContent="Select Item Quality",O=T(),A=k("div"),$=k("select"),I=k("option"),I.textContent="Item Slot";for(let e=0;e<K.length;e+=1)K[e].c();P=T(),B=k("label"),B.textContent="Select Item Slot",void 0===e[4].selectedElement.level&&Q(()=>e[14].call(o)),a(o,mu,101,8,2316),a(s,mu,106,8,2504),Se(i,"class","margininput input-field col s1"),a(i,mu,100,6,2263),d.__value="",d.value=d.__value,d.disabled=!0,d.selected=!0,a(d,mu,111,10,2670),void 0===e[4].selectedElement.type&&Q(()=>e[15].call(h)),a(h,mu,110,8,2598),a(p,mu,116,8,2868),Se(l,"class","margininput input-field col s5"),a(l,mu,109,6,2545),g.__value="",g.value=g.__value,g.selected=!0,a(g,mu,121,10,3048),void 0===e[4].selectedElement.subType&&Q(()=>e[16].call(_)),a(_,mu,120,8,2973),a(b,mu,126,8,3252),Se(m,"class","margininput input-field col s5"),a(m,mu,119,6,2920),Se(n,"class","row"),a(n,mu,98,4,2238),L.__value="",L.value=L.__value,L.disabled=!0,L.selected=!0,a(L,mu,134,10,3470),void 0===e[4].selectedElement.quality&&Q(()=>e[17].call(x)),a(x,mu,133,8,3395),a(M,mu,140,8,3685),Se(E,"class","margininput input-field col s5"),a(E,mu,132,6,3342),I.__value="",I.value=I.__value,I.selected=!0,a(I,mu,149,10,3924),Se($,"class","margininput"),void 0===e[4].selectedElement.slot&&Q(()=>e[18].call($)),a($,mu,144,8,3793),a(B,mu,154,8,4128),Se(A,"class","margininput input-field col s5"),a(A,mu,143,6,3740),Se(C,"class","row"),a(C,mu,130,4,3317),Se(t,"slot","content"),a(t,mu,97,2,2213)},m:function(a,S,k){be(a,t,S),ye(t,n),ye(n,i),ye(i,o);for(let e=0;e<W.length;e+=1)W[e].m(o,null);D(o,e[4].selectedElement.level),ye(i,r),ye(i,s),ye(n,c),ye(n,l),ye(l,h),ye(h,d);for(let e=0;e<N.length;e+=1)N[e].m(h,null);D(h,e[4].selectedElement.type),ye(l,f),ye(l,p),ye(n,v),ye(n,m),ye(m,_),ye(_,g);for(let e=0;e<q.length;e+=1)q[e].m(_,null);D(_,e[4].selectedElement.subType),ye(m,y),ye(m,b),ye(t,w),ye(t,C),ye(C,E),ye(E,x),ye(x,L);for(let e=0;e<Y.length;e+=1)Y[e].m(x,null);D(x,e[4].selectedElement.quality),ye(E,R),ye(E,M),ye(C,O),ye(C,A),ye(A,$),ye($,I);for(let e=0;e<K.length;e+=1)K[e].m($,null);D($,e[4].selectedElement.slot),ye(A,P),ye(A,B),k&&u(H),H=[Ce(o,"change",e[14]),Ce(o,"change",e[13],!1,!1,!1),Ce(h,"change",e[15]),Ce(h,"change",e[12],!1,!1,!1),Ce(_,"change",e[16]),Ce(_,"change",e[11],!1,!1,!1),Ce(x,"change",e[17]),Ce(x,"change",e[10],!1,!1,!1),Ce($,"change",e[18]),Ce($,"change",e[9],!1,!1,!1)]},p:function(e,t){if(128&t[0]){let n;for(j=e[7],xe(j),n=0;n<j.length;n+=1){const i=wu(e,j,n);W[n]?W[n].p(i,t):(W[n]=Su(i),W[n].c(),W[n].m(o,null))}for(;n<W.length;n+=1)W[n].d(1);W.length=j.length}if(16&t[0]&&D(o,e[4].selectedElement.level),2&t[0]){let n;for(F=e[1],xe(F),n=0;n<F.length;n+=1){const i=bu(e,F,n);N[n]?N[n].p(i,t):(N[n]=ku(i),N[n].c(),N[n].m(h,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=F.length}if(16&t[0]&&D(h,e[4].selectedElement.type),4&t[0]){let n;for(U=e[2],xe(U),n=0;n<U.length;n+=1){const i=yu(e,U,n);q[n]?q[n].p(i,t):(q[n]=Eu(i),q[n].c(),q[n].m(_,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=U.length}if(16&t[0]&&D(_,e[4].selectedElement.subType),1&t[0]){let n;for(z=e[0],xe(z),n=0;n<z.length;n+=1){const i=gu(e,z,n);Y[n]?Y[n].p(i,t):(Y[n]=xu(i),Y[n].c(),Y[n].m(x,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=z.length}if(16&t[0]&&D(x,e[4].selectedElement.quality),8&t[0]){let n;for(V=e[3],xe(V),n=0;n<V.length;n+=1){const i=_u(e,V,n);K[n]?K[n].p(i,t):(K[n]=Tu(i),K[n].c(),K[n].m($,null))}for(;n<K.length;n+=1)K[n].d(1);K.length=V.length}16&t[0]&&D($,e[4].selectedElement.slot)},d:function(e){e&&we(t),S(W,e),S(N,e),S(q,e),S(Y,e),S(K,e),u(H)}};return ge("SvelteRegisterBlock",{block:G,id:Lu.name,type:"slot",source:'(98:2) <div slot=\\"content\\">',ctx:e}),G}function Ru(e){let t;const n={c:function(){t=T()},m:function(e,n){be(e,t,n)},p:o,i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:n,id:Ru.name,type:"slot",source:'(92:0) <CRUDEditorStore store=\\"{store}\\" config=\\"{config}\\">',ctx:e}),n}function Mu(e){let t;const n=new Gl({props:{store:e[6],config:e[5],$$slots:{default:[Ru],content:[Lu],hero:[Cu]},$$scope:{ctx:e}},$$inline:!0}),i={c:function(){fe(n.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){pe(n,e,i),t=!0},p:function(e,t){const i={};31&t[0]|8&t[1]&&(i.$$scope={dirty:t,ctx:e}),n.$set(i)},i:function(e){t||(ce(n.$$.fragment,e),t=!0)},o:function(e){le(n.$$.fragment,e),t=!1},d:function(e){ve(n,e)}};return ge("SvelteRegisterBlock",{block:i,id:Mu.name,type:"component",source:"",ctx:e}),i}function Ou(e,t,n){let i;const o={title:"Manage Items",actions:[],get:ou,getElement:nu,create:su,update:ru,delete:iu,refreshUI:()=>{var e=document.querySelectorAll("select");M.FormSelect.init(e,{});setTimeout((function(){var e=document.querySelectorAll("select");M.FormSelect.init(e,{})}),50)},new:e=>{e({id:tu(),name:"Unnamed Item",description:"",detail:"",type:"",slot:"inventory",quality:"normal",level:1,properties:new Map,attributes:new Map,noPickup:!1,tags:[],isNew:!0})},badge:e=>e.quality+" "+e.subType},r=Ol();f(r,"store"),v(e,r,e=>n(4,i=e));let s=[],a=[],c=[],l=[];for(var u=[],h=1;h<=50;h++)u.push(h);W(async()=>{cu(e=>n(0,s=e)),lu(e=>n(1,a=e)),uu(e=>n(2,c=e)),au(e=>n(3,l=e))});const d=[];Object.keys(t).forEach(e=>{~d.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<ItemsEditor> was created with unknown prop '${e}'`)});let{$$slots:p={},$$scope:m}=t;return Te("ItemsEditor",p,[]),e.$capture_state=()=>({Sprites:Ae,onMount:W,CRUDEditorStore:Gl,createStore:Ol,uuidv4:tu,getItem:nu,getItems:ou,createItem:su,updateItem:ru,deleteItem:iu,getItemQualities:cu,getItemTypes:lu,getItemSubTypes:uu,getItemSlots:au,config:o,store:r,itemQualities:s,itemTypes:a,itemSubTypes:c,itemSlots:l,levels:u,i:h,$store:i}),e.$inject_state=e=>{"itemQualities"in e&&n(0,s=e.itemQualities),"itemTypes"in e&&n(1,a=e.itemTypes),"itemSubTypes"in e&&n(2,c=e.itemSubTypes),"itemSlots"in e&&n(3,l=e.itemSlots),"levels"in e&&n(7,u=e.levels),"i"in e&&(h=e.i)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,a,c,l,i,o,r,u,h,function(t){Y(e,t)},function(t){Y(e,t)},function(t){Y(e,t)},function(t){Y(e,t)},function(t){Y(e,t)},function(){i.selectedElement.level=I(this),r.set(i),n(7,u)},function(){i.selectedElement.type=I(this),r.set(i),n(7,u)},function(){i.selectedElement.subType=I(this),r.set(i),n(7,u)},function(){i.selectedElement.quality=I(this),r.set(i),n(7,u)},function(){i.selectedElement.slot=I(this),r.set(i),n(7,u)}]}class Au extends Le{constructor(e){super(e),_e(this,e,Ou,Mu,d,{},[-1,-1]),ge("SvelteRegisterComponent",{component:this,tagName:"ItemsEditor",options:e,id:Mu.name})}}const{console:$u}=ue,Du="src/creator/SampleEditor.svelte";function Iu(e,t,n){const i=e.slice();return i[19]=t[n],i}function Pu(e,t,n){const i=e.slice();return i[22]=t[n],i}function Bu(e,t,n){const i=e.slice();return i[25]=t[n],i}function Hu(e,t,n){const i=e.slice();return i[28]=t[n],i}function ju(e,t,n){const i=e.slice();return i[31]=t[n],i}function Wu(e){let t,n;const i=new Ae({props:{item:"weapon"},$$inline:!0}),r={c:function(){t=k("span"),fe(i.$$.fragment),Se(t,"slot","hero"),Se(t,"class","col s1 valign-wrapper"),a(t,Du,101,2,2406)},m:function(e,o){be(e,t,o),pe(i,t,null),n=!0},p:o,i:function(e){n||(ce(i.$$.fragment,e),n=!0)},o:function(e){le(i.$$.fragment,e),n=!1},d:function(e){e&&we(t),ve(i)}};return ge("SvelteRegisterBlock",{block:r,id:Wu.name,type:"slot",source:'(102:2) <span slot=\\"hero\\" class=\\"col s1 valign-wrapper\\">',ctx:e}),r}function Fu(e){let t,n,i,r=e[31]+"";const s={c:function(){t=k("option"),n=x(r),t.__value=i=e[31],t.value=t.__value,a(t,Du,111,12,2708)},m:function(e,i){be(e,t,i),ye(t,n)},p:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:s,id:Fu.name,type:"each",source:"(111:10) {#each levels as lvl}",ctx:e}),s}function Nu(e){let t,n,i,o=e[28].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),t.__value=i=e[28],t.value=t.__value,a(t,Du,121,12,3057)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){2&r[0]&&o!==(o=e[28].capitalize()+"")&&Ee(n,o),2&r[0]&&i!==(i=e[28])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:Nu.name,type:"each",source:"(121:10) {#each itemTypes as type}",ctx:e}),r}function Uu(e){let t,n,i,o=e[25].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),t.__value=i=e[25],t.value=t.__value,a(t,Du,131,12,3435)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){4&r[0]&&o!==(o=e[25].capitalize()+"")&&Ee(n,o),4&r[0]&&i!==(i=e[25])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:Uu.name,type:"each",source:"(131:10) {#each itemSubTypes as subType}",ctx:e}),r}function qu(e){let t,n,i,o=e[22].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),t.__value=i=e[22],t.value=t.__value,a(t,Du,144,12,3867)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){1&r[0]&&o!==(o=e[22].capitalize()+"")&&Ee(n,o),1&r[0]&&i!==(i=e[22])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:qu.name,type:"each",source:"(144:10) {#each itemQualities as quality}",ctx:e}),r}function zu(e){let t,n,i,o=e[19].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),Se(t,"class","select"),t.__value=i=e[19],t.value=t.__value,a(t,Du,159,12,4302)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){8&r[0]&&o!==(o=e[19].capitalize()+"")&&Ee(n,o),8&r[0]&&i!==(i=e[19])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:zu.name,type:"each",source:"(159:10) {#each itemSlots as slot}",ctx:e}),r}function Yu(e){let t,n,i,o,r,s,c,l,h,d,f,p,v,m,_,g,y,b,w,C,E,x,L,R,M,O,A,$,I,P,B,H,j=e[7];xe(j);let W=[];for(let t=0;t<j.length;t+=1)W[t]=Fu(ju(e,j,t));let F=e[1];xe(F);let N=[];for(let t=0;t<F.length;t+=1)N[t]=Nu(Hu(e,F,t));let U=e[2];xe(U);let q=[];for(let t=0;t<U.length;t+=1)q[t]=Uu(Bu(e,U,t));let z=e[0];xe(z);let Y=[];for(let t=0;t<z.length;t+=1)Y[t]=qu(Pu(e,z,t));let V=e[3];xe(V);let K=[];for(let t=0;t<V.length;t+=1)K[t]=zu(Iu(e,V,t));const G={c:function(){t=k("div"),n=k("div"),i=k("div"),o=k("select");for(let e=0;e<W.length;e+=1)W[e].c();r=T(),s=k("label"),s.textContent="Level",c=T(),l=k("div"),h=k("select"),d=k("option"),d.textContent="Item Type";for(let e=0;e<N.length;e+=1)N[e].c();f=T(),p=k("label"),p.textContent="Select Item Type",v=T(),m=k("div"),_=k("select"),g=k("option"),g.textContent="Item Subtype";for(let e=0;e<q.length;e+=1)q[e].c();y=T(),b=k("label"),b.textContent="Select Item Sub Type",w=T(),C=k("div"),E=k("div"),x=k("select"),L=k("option"),L.textContent="Item Quality";for(let e=0;e<Y.length;e+=1)Y[e].c();R=T(),M=k("label"),M.textContent="Select Item Quality",O=T(),A=k("div"),$=k("select"),I=k("option"),I.textContent="Item Slot";for(let e=0;e<K.length;e+=1)K[e].c();P=T(),B=k("label"),B.textContent="Select Item Slot",void 0===e[4].selectedElement.level&&Q(()=>e[14].call(o)),a(o,Du,109,8,2601),a(s,Du,114,8,2789),Se(i,"class","margininput input-field col s1"),a(i,Du,108,6,2548),d.__value="",d.value=d.__value,d.disabled=!0,d.selected=!0,a(d,Du,119,10,2955),void 0===e[4].selectedElement.type&&Q(()=>e[15].call(h)),a(h,Du,118,8,2883),a(p,Du,124,8,3153),Se(l,"class","margininput input-field col s5"),a(l,Du,117,6,2830),g.__value="",g.value=g.__value,g.selected=!0,a(g,Du,129,10,3333),void 0===e[4].selectedElement.subType&&Q(()=>e[16].call(_)),a(_,Du,128,8,3258),a(b,Du,134,8,3537),Se(m,"class","margininput input-field col s5"),a(m,Du,127,6,3205),Se(n,"class","row"),a(n,Du,106,4,2523),L.__value="",L.value=L.__value,L.disabled=!0,L.selected=!0,a(L,Du,142,10,3755),void 0===e[4].selectedElement.quality&&Q(()=>e[17].call(x)),a(x,Du,141,8,3680),a(M,Du,148,8,3970),Se(E,"class","margininput input-field col s5"),a(E,Du,140,6,3627),I.__value="",I.value=I.__value,I.selected=!0,a(I,Du,157,10,4209),Se($,"class","margininput"),void 0===e[4].selectedElement.slot&&Q(()=>e[18].call($)),a($,Du,152,8,4078),a(B,Du,162,8,4413),Se(A,"class","margininput input-field col s5"),a(A,Du,151,6,4025),Se(C,"class","row"),a(C,Du,138,4,3602),Se(t,"slot","content"),a(t,Du,105,2,2498)},m:function(a,S,k){be(a,t,S),ye(t,n),ye(n,i),ye(i,o);for(let e=0;e<W.length;e+=1)W[e].m(o,null);D(o,e[4].selectedElement.level),ye(i,r),ye(i,s),ye(n,c),ye(n,l),ye(l,h),ye(h,d);for(let e=0;e<N.length;e+=1)N[e].m(h,null);D(h,e[4].selectedElement.type),ye(l,f),ye(l,p),ye(n,v),ye(n,m),ye(m,_),ye(_,g);for(let e=0;e<q.length;e+=1)q[e].m(_,null);D(_,e[4].selectedElement.subType),ye(m,y),ye(m,b),ye(t,w),ye(t,C),ye(C,E),ye(E,x),ye(x,L);for(let e=0;e<Y.length;e+=1)Y[e].m(x,null);D(x,e[4].selectedElement.quality),ye(E,R),ye(E,M),ye(C,O),ye(C,A),ye(A,$),ye($,I);for(let e=0;e<K.length;e+=1)K[e].m($,null);D($,e[4].selectedElement.slot),ye(A,P),ye(A,B),k&&u(H),H=[Ce(o,"change",e[14]),Ce(o,"change",e[13],!1,!1,!1),Ce(h,"change",e[15]),Ce(h,"change",e[12],!1,!1,!1),Ce(_,"change",e[16]),Ce(_,"change",e[11],!1,!1,!1),Ce(x,"change",e[17]),Ce(x,"change",e[10],!1,!1,!1),Ce($,"change",e[18]),Ce($,"change",e[9],!1,!1,!1)]},p:function(e,t){if(128&t[0]){let n;for(j=e[7],xe(j),n=0;n<j.length;n+=1){const i=ju(e,j,n);W[n]?W[n].p(i,t):(W[n]=Fu(i),W[n].c(),W[n].m(o,null))}for(;n<W.length;n+=1)W[n].d(1);W.length=j.length}if(16&t[0]&&D(o,e[4].selectedElement.level),2&t[0]){let n;for(F=e[1],xe(F),n=0;n<F.length;n+=1){const i=Hu(e,F,n);N[n]?N[n].p(i,t):(N[n]=Nu(i),N[n].c(),N[n].m(h,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=F.length}if(16&t[0]&&D(h,e[4].selectedElement.type),4&t[0]){let n;for(U=e[2],xe(U),n=0;n<U.length;n+=1){const i=Bu(e,U,n);q[n]?q[n].p(i,t):(q[n]=Uu(i),q[n].c(),q[n].m(_,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=U.length}if(16&t[0]&&D(_,e[4].selectedElement.subType),1&t[0]){let n;for(z=e[0],xe(z),n=0;n<z.length;n+=1){const i=Pu(e,z,n);Y[n]?Y[n].p(i,t):(Y[n]=qu(i),Y[n].c(),Y[n].m(x,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=z.length}if(16&t[0]&&D(x,e[4].selectedElement.quality),8&t[0]){let n;for(V=e[3],xe(V),n=0;n<V.length;n+=1){const i=Iu(e,V,n);K[n]?K[n].p(i,t):(K[n]=zu(i),K[n].c(),K[n].m($,null))}for(;n<K.length;n+=1)K[n].d(1);K.length=V.length}16&t[0]&&D($,e[4].selectedElement.slot)},d:function(e){e&&we(t),S(W,e),S(N,e),S(q,e),S(Y,e),S(K,e),u(H)}};return ge("SvelteRegisterBlock",{block:G,id:Yu.name,type:"slot",source:'(106:2) <div slot=\\"content\\">',ctx:e}),G}function Vu(e){let t;const n={c:function(){t=T()},m:function(e,n){be(e,t,n)},p:o,i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:n,id:Vu.name,type:"slot",source:'(100:0) <CRUDEditorStore store=\\"{store}\\" config=\\"{config}\\">',ctx:e}),n}function Ku(e){let t;const n=new Gl({props:{store:e[6],config:e[5],$$slots:{default:[Vu],content:[Yu],hero:[Wu]},$$scope:{ctx:e}},$$inline:!0}),i={c:function(){fe(n.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){pe(n,e,i),t=!0},p:function(e,t){const i={};31&t[0]|8&t[1]&&(i.$$scope={dirty:t,ctx:e}),n.$set(i)},i:function(e){t||(ce(n.$$.fragment,e),t=!0)},o:function(e){le(n.$$.fragment,e),t=!1},d:function(e){ve(n,e)}};return ge("SvelteRegisterBlock",{block:i,id:Ku.name,type:"component",source:"",ctx:e}),i}function Gu(e,t,n){let i;const o={title:"Manage Item Templates",actions:[{icon:"add",name:"Item from Template",color:"",fnc:()=>{console.log("Create new template for id "+i.selectedElement.id)}}],get:fu,getElement:hu,create:vu,update:pu,delete:du,refreshUI:()=>{var e=document.querySelectorAll("select");M.FormSelect.init(e,{});setTimeout((function(){var e=document.querySelectorAll("select");M.FormSelect.init(e,{})}),50)},new:e=>{e({id:tu(),name:"Unnamed Item",description:"",detail:"",type:"",slot:"inventory",quality:"normal",level:1,properties:new Map,attributes:new Map,noPickup:!1,tags:[],isNew:!0})},badge:e=>e.quality+" "+e.subType},r=Ol();f(r,"store"),v(e,r,e=>n(4,i=e));let s=[],a=[],c=[],l=[];for(var u=[],h=1;h<=50;h++)u.push(h);W(async()=>{cu(e=>n(0,s=e)),lu(e=>n(1,a=e)),uu(e=>n(2,c=e)),au(e=>n(3,l=e))});const d=[];Object.keys(t).forEach(e=>{~d.indexOf(e)||"$$"===e.slice(0,2)||$u.warn(`<SampleEditor> was created with unknown prop '${e}'`)});let{$$slots:p={},$$scope:m}=t;return Te("SampleEditor",p,[]),e.$capture_state=()=>({Sprites:Ae,onMount:W,CRUDEditorStore:Gl,createStore:Ol,uuidv4:tu,getItemTemplate:hu,getItemTemplates:fu,createItemTemplate:vu,updateItemTemplate:pu,deleteItemTemplate:du,getItemTypes:lu,getItemSubTypes:uu,getItemSlots:au,getItemQualities:cu,config:o,store:r,itemQualities:s,itemTypes:a,itemSubTypes:c,itemSlots:l,levels:u,i:h,$store:i}),e.$inject_state=e=>{"itemQualities"in e&&n(0,s=e.itemQualities),"itemTypes"in e&&n(1,a=e.itemTypes),"itemSubTypes"in e&&n(2,c=e.itemSubTypes),"itemSlots"in e&&n(3,l=e.itemSlots),"levels"in e&&n(7,u=e.levels),"i"in e&&(h=e.i)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,a,c,l,i,o,r,u,h,function(t){Y(e,t)},function(t){Y(e,t)},function(t){Y(e,t)},function(t){Y(e,t)},function(t){Y(e,t)},function(){i.selectedElement.level=I(this),r.set(i),n(7,u)},function(){i.selectedElement.type=I(this),r.set(i),n(7,u)},function(){i.selectedElement.subType=I(this),r.set(i),n(7,u)},function(){i.selectedElement.quality=I(this),r.set(i),n(7,u)},function(){i.selectedElement.slot=I(this),r.set(i),n(7,u)}]}class Zu extends Le{constructor(e){super(e),_e(this,e,Gu,Ku,d,{},[-1,-1]),ge("SvelteRegisterComponent",{component:this,tagName:"SampleEditor",options:e,id:Ku.name})}}const Xu="src/creator/ItemsToolbar.svelte";function Ju(e){let t,n,i,r,s,c,l,d,f,p;const v={c:function(){t=k("div"),n=k("ul"),i=k("li"),i.textContent="Manage Item Templates",r=T(),s=k("li"),c=k("button"),c.textContent="Create Item Template",l=T(),d=k("li"),f=k("button"),f.textContent="Create Item From template",Se(i,"class","header svelte-13xq72"),a(i,Xu,39,4,520),Se(c,"class","btn-flat green svelte-13xq72"),a(c,Xu,41,6,581),Se(s,"class","svelte-13xq72"),a(s,Xu,40,4,570),Se(f,"class","btn-flat blue svelte-13xq72"),a(f,Xu,46,6,705),Se(d,"class","svelte-13xq72"),a(d,Xu,45,4,694),Se(n,"class","svelte-13xq72"),a(n,Xu,38,2,511),Se(t,"class","row"),a(t,Xu,37,0,491)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,a,v){be(o,t,a),ye(t,n),ye(n,i),ye(n,r),ye(n,s),ye(s,c),ye(n,l),ye(n,d),ye(d,f),v&&u(p),p=[Ce(c,"click",(function(){h(e[0]())&&e[0]().apply(this,arguments)}),!1,!1,!1),Ce(f,"click",(function(){h(e[1]())&&e[1]().apply(this,arguments)}),!1,!1,!1)]},p:function(t,[n]){e=t},i:o,o:o,d:function(e){e&&we(t),u(p)}};return ge("SvelteRegisterBlock",{block:v,id:Ju.name,type:"component",source:"",ctx:e}),v}function Qu(e,t,n){let{create:i}=t,{createFromTemplate:o}=t;const r=["create","createFromTemplate"];Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<ItemsToolbar> was created with unknown prop '${e}'`)});let{$$slots:s={},$$scope:a}=t;return Te("ItemsToolbar",s,[]),e.$set=e=>{"create"in e&&n(0,i=e.create),"createFromTemplate"in e&&n(1,o=e.createFromTemplate)},e.$capture_state=()=>({create:i,createFromTemplate:o}),e.$inject_state=e=>{"create"in e&&n(0,i=e.create),"createFromTemplate"in e&&n(1,o=e.createFromTemplate)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o]}class eh extends Le{constructor(e){super(e),_e(this,e,Qu,Ju,d,{create:0,createFromTemplate:1}),ge("SvelteRegisterComponent",{component:this,tagName:"ItemsToolbar",options:e,id:Ju.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"create"in n||console.warn("<ItemsToolbar> was created without expected prop 'create'"),void 0!==t[1]||"createFromTemplate"in n||console.warn("<ItemsToolbar> was created without expected prop 'createFromTemplate'")}get create(){throw new Error("<ItemsToolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set create(e){throw new Error("<ItemsToolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get createFromTemplate(){throw new Error("<ItemsToolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set createFromTemplate(e){throw new Error("<ItemsToolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const th=function(){const{subscribe:e,set:t,update:n}=He({items:[],itemTemplates:[],selectedItemTemplate:null,selectedItem:null,filter:""});return{subscribe:e,set:t,setSelectedItemTemplate:(e,t)=>{n(t=>(t.selectedItemTemplate=e,t)),t&&t()},setSelectedItem:(e,t)=>{n(t=>(t.selectedItem=e,t)),t&&t()},setItemTemplates:e=>{n(t=>(t.itemTemplates=e,t))},setItems:e=>{n(t=>(t.items=e,t))}}}(),{console:nh}=ue,ih="src/creator/ItemTemplatesEditor.svelte";function oh(e,t,n){const i=e.slice();return i[45]=t[n],i}function rh(e,t,n){const i=e.slice();return i[48]=t[n],i}function sh(e,t,n){const i=e.slice();return i[51]=t[n],i}function ah(e,t,n){const i=e.slice();return i[54]=t[n],i}function ch(e,t,n){const i=e.slice();return i[57]=t[n],i}function lh(e,t,n){const i=e.slice();return i[60]=t[n],i}function uh(e){let t,n,i,o,r=e[60].quality+"",s=e[60].subType+"";const c={c:function(){t=k("span"),n=x(r),i=T(),o=x(s),Se(t,"class","new badge"),Se(t,"data-badge-caption",""),a(t,ih,244,12,5024)},m:function(e,r){be(e,t,r),ye(t,n),ye(t,i),ye(t,o)},p:function(e,t){16&t[0]&&r!==(r=e[60].quality+"")&&Ee(n,r),16&t[0]&&s!==(s=e[60].subType+"")&&Ee(o,s)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:c,id:uh.name,type:"if",source:"(244:10) {#if item.slot}",ctx:e}),c}function hh(e){let t,n,i,o,r,s=e[60].name+"",c=e[60].slot&&uh(e);const l={c:function(){t=k("a"),c&&c.c(),n=T(),i=x(s),o=T(),Se(t,"href","#!"),Se(t,"class","collection-item svelte-16uu6ev"),a(t,ih,238,8,4871)},m:function(s,a,l){be(s,t,a),c&&c.m(t,null),ye(t,n),ye(t,i),ye(t,o),l&&r(),r=Ce(t,"click",(function(){h(e[14](e[60]))&&e[14](e[60]).apply(this,arguments)}),!1,!1,!1)},p:function(o,r){(e=o)[60].slot?c?c.p(e,r):(c=uh(e),c.c(),c.m(t,n)):c&&(c.d(1),c=null),16&r[0]&&s!==(s=e[60].name+"")&&Ee(i,s)},d:function(e){e&&we(t),c&&c.d(),r()}};return ge("SvelteRegisterBlock",{block:l,id:hh.name,type:"each",source:"(238:6) {#each $store.itemTemplates as item}",ctx:e}),l}function dh(e){let t,n,i,o,r,s,c,l,h,d,f,p,v,m,_,g,y,b,w,C,E,L,R,M,O,$,I,P,B,H,j,W,F,N,U,q,z,Y,V,K,G,Z,X,J,ee,te,ne,ie,oe,re,se,ae,ce,le,ue,he,de,fe,pe,ve=e[4].selectedItemTemplate.name+"";function me(e,t){return e[4].selectedItemTemplate.isNew?ph:fh}let _e=me(e),ke=_e(e),Te=e[5];xe(Te);let Le=[];for(let t=0;t<Te.length;t+=1)Le[t]=vh(ch(e,Te,t));function Re(e,t){return e[4].selectedItemTemplate.isNew?_h:mh}let Me=Re(e),Oe=Me(e),Ae=e[1];xe(Ae);let $e=[];for(let t=0;t<Ae.length;t+=1)$e[t]=gh(ah(e,Ae,t));let De=e[2];xe(De);let Ie=[];for(let t=0;t<De.length;t+=1)Ie[t]=yh(sh(e,De,t));let Pe=e[0];xe(Pe);let Be=[];for(let t=0;t<Pe.length;t+=1)Be[t]=bh(rh(e,Pe,t));let He=e[3];xe(He);let je=[];for(let t=0;t<He.length;t+=1)je[t]=wh(oh(e,He,t));const We={c:function(){t=k("div"),n=k("div"),i=k("div"),o=k("span"),r=x(ve),s=T(),ke.c(),c=T(),l=k("div"),h=T(),d=k("div"),f=k("div"),p=k("input"),v=T(),m=k("label"),m.textContent="Name",_=T(),g=k("div"),y=k("select");for(let e=0;e<Le.length;e+=1)Le[e].c();b=T(),w=k("label"),w.textContent="Level",C=T(),Oe.c(),E=T(),L=k("div"),R=k("div"),M=k("input"),O=T(),$=k("label"),$.textContent="Description",I=T(),P=k("div"),B=k("div"),H=k("input"),j=T(),W=k("label"),W.textContent="Detail (look)",F=T(),N=k("div"),U=k("div"),q=k("select"),z=k("option"),z.textContent="Item Type";for(let e=0;e<$e.length;e+=1)$e[e].c();Y=T(),V=k("label"),V.textContent="Select Item Type",K=T(),G=k("div"),Z=k("select"),X=k("option"),X.textContent="Item Subtype";for(let e=0;e<Ie.length;e+=1)Ie[e].c();J=T(),ee=k("label"),ee.textContent="Select Item Sub Type",te=T(),ne=k("div"),ie=k("div"),oe=k("select"),re=k("option"),re.textContent="Item Quality";for(let e=0;e<Be.length;e+=1)Be[e].c();se=T(),ae=k("label"),ae.textContent="Select Item Quality",ce=T(),le=k("div"),ue=k("select"),he=k("option"),he.textContent="Item Slot";for(let e=0;e<je.length;e+=1)je[e].c();de=T(),fe=k("label"),fe.textContent="Select Item Slot",Se(o,"class","header svelte-16uu6ev"),a(o,ih,261,10,5366),Se(i,"class","row"),a(i,ih,259,8,5337),Se(l,"id","general"),a(l,ih,286,8,6109),Se(p,"placeholder","Name"),Se(p,"id","itemTemplate_name"),Se(p,"type","text"),Se(p,"class","svelte-16uu6ev"),a(p,ih,290,12,6227),Se(m,"class","first_label svelte-16uu6ev"),Se(m,"for","itemTemplate_name"),a(m,ih,296,12,6419),Se(f,"class","no-padding input-field col s6 svelte-16uu6ev"),a(f,ih,289,10,6171),void 0===e[4].selectedItemTemplate.level&&Q(()=>e[36].call(y)),a(y,ih,300,12,6568),Se(w,"class","svelte-16uu6ev"),a(w,ih,305,12,6781),Se(g,"class","margininput input-field col s1 svelte-16uu6ev"),a(g,ih,299,10,6511),Se(d,"class","row"),a(d,ih,288,8,6143),Se(M,"placeholder","Item Description"),Se(M,"id","itemTemplate_description"),Se(M,"type","text"),Se(M,"class","materialize-textarea svelte-16uu6ev"),a(M,ih,335,12,7682),Se($,"class","active svelte-16uu6ev"),Se($,"for","itemTemplate_description"),a($,ih,342,12,7943),Se(R,"class","input-field"),a(R,ih,334,10,7644),Se(L,"class","row"),a(L,ih,333,8,7616),Se(H,"placeholder","Item Details"),Se(H,"id","itemTemplate_detail"),Se(H,"type","text"),Se(H,"class","materialize-textarea svelte-16uu6ev"),a(H,ih,350,12,8151),Se(W,"class","active svelte-16uu6ev"),Se(W,"for","itemTemplate_detail"),a(W,ih,357,12,8398),Se(B,"class","input-field"),a(B,ih,349,10,8113),Se(P,"class","row"),a(P,ih,348,8,8085),z.__value="",z.value=z.__value,z.disabled=!0,z.selected=!0,a(z,ih,367,14,8704),void 0===e[4].selectedItemTemplate.type&&Q(()=>e[41].call(q)),a(q,ih,366,12,8623),Se(V,"class","svelte-16uu6ev"),a(V,ih,372,12,8922),Se(U,"class","margininput input-field col s5 svelte-16uu6ev"),a(U,ih,365,10,8566),X.__value="",X.value=X.__value,X.selected=!0,a(X,ih,380,14,9164),void 0===e[4].selectedItemTemplate.subType&&Q(()=>e[42].call(Z)),a(Z,ih,376,12,9039),Se(ee,"class","svelte-16uu6ev"),a(ee,ih,385,12,9388),Se(G,"class","margininput input-field col s5 svelte-16uu6ev"),a(G,ih,375,10,8982),Se(N,"class","row"),a(N,ih,363,8,8537),re.__value="",re.value=re.__value,re.disabled=!0,re.selected=!0,a(re,ih,396,14,9676),void 0===e[4].selectedItemTemplate.quality&&Q(()=>e[43].call(oe)),a(oe,ih,392,12,9551),Se(ae,"class","svelte-16uu6ev"),a(ae,ih,402,12,9911),Se(ie,"class","margininput input-field col s5 svelte-16uu6ev"),a(ie,ih,391,10,9494),he.__value="",he.value=he.__value,he.selected=!0,a(he,ih,411,14,10187),Se(ue,"class","margininput svelte-16uu6ev"),void 0===e[4].selectedItemTemplate.slot&&Q(()=>e[44].call(ue)),a(ue,ih,406,12,10031),Se(fe,"class","svelte-16uu6ev"),a(fe,ih,418,12,10447),Se(le,"class","margininput input-field col s5 svelte-16uu6ev"),a(le,ih,405,10,9974),Se(ne,"class","row"),a(ne,ih,389,8,9465),Se(n,"class","card-panel cyan darken-4"),a(n,ih,257,6,5289),Se(t,"class","col s9"),a(t,ih,255,4,5261)},m:function(a,S,k){be(a,t,S),ye(t,n),ye(n,i),ye(i,o),ye(o,r),ye(i,s),ke.m(i,null),ye(n,c),ye(n,l),ye(n,h),ye(n,d),ye(d,f),ye(f,p),A(p,e[4].selectedItemTemplate.name),ye(f,v),ye(f,m),ye(d,_),ye(d,g),ye(g,y);for(let e=0;e<Le.length;e+=1)Le[e].m(y,null);D(y,e[4].selectedItemTemplate.level),ye(g,b),ye(g,w),ye(d,C),Oe.m(d,null),ye(n,E),ye(n,L),ye(L,R),ye(R,M),A(M,e[4].selectedItemTemplate.description),ye(R,O),ye(R,$),ye(n,I),ye(n,P),ye(P,B),ye(B,H),A(H,e[4].selectedItemTemplate.detail),ye(B,j),ye(B,W),ye(n,F),ye(n,N),ye(N,U),ye(U,q),ye(q,z);for(let e=0;e<$e.length;e+=1)$e[e].m(q,null);D(q,e[4].selectedItemTemplate.type),ye(U,Y),ye(U,V),ye(N,K),ye(N,G),ye(G,Z),ye(Z,X);for(let e=0;e<Ie.length;e+=1)Ie[e].m(Z,null);D(Z,e[4].selectedItemTemplate.subType),ye(G,J),ye(G,ee),ye(n,te),ye(n,ne),ye(ne,ie),ye(ie,oe),ye(oe,re);for(let e=0;e<Be.length;e+=1)Be[e].m(oe,null);D(oe,e[4].selectedItemTemplate.quality),ye(ie,se),ye(ie,ae),ye(ne,ce),ye(ne,le),ye(le,ue),ye(ue,he);for(let e=0;e<je.length;e+=1)je[e].m(ue,null);D(ue,e[4].selectedItemTemplate.slot),ye(le,de),ye(le,fe),k&&u(pe),pe=[Ce(p,"input",e[35]),Ce(y,"change",e[36]),Ce(y,"change",e[31],!1,!1,!1),Ce(M,"input",e[39]),Ce(H,"input",e[40]),Ce(q,"change",e[41]),Ce(q,"change",e[30],!1,!1,!1),Ce(Z,"change",e[42]),Ce(Z,"change",e[29],!1,!1,!1),Ce(oe,"change",e[43]),Ce(oe,"change",e[28],!1,!1,!1),Ce(ue,"change",e[44]),Ce(ue,"change",e[27],!1,!1,!1)]},p:function(e,t){if(16&t[0]&&ve!==(ve=e[4].selectedItemTemplate.name+"")&&Ee(r,ve),_e===(_e=me(e))&&ke?ke.p(e,t):(ke.d(1),ke=_e(e),ke&&(ke.c(),ke.m(i,null))),16&t[0]&&p.value!==e[4].selectedItemTemplate.name&&A(p,e[4].selectedItemTemplate.name),32&t[0]){let n;for(Te=e[5],xe(Te),n=0;n<Te.length;n+=1){const i=ch(e,Te,n);Le[n]?Le[n].p(i,t):(Le[n]=vh(i),Le[n].c(),Le[n].m(y,null))}for(;n<Le.length;n+=1)Le[n].d(1);Le.length=Te.length}if(16&t[0]&&D(y,e[4].selectedItemTemplate.level),Me===(Me=Re(e))&&Oe?Oe.p(e,t):(Oe.d(1),Oe=Me(e),Oe&&(Oe.c(),Oe.m(d,null))),16&t[0]&&M.value!==e[4].selectedItemTemplate.description&&A(M,e[4].selectedItemTemplate.description),16&t[0]&&H.value!==e[4].selectedItemTemplate.detail&&A(H,e[4].selectedItemTemplate.detail),2&t[0]){let n;for(Ae=e[1],xe(Ae),n=0;n<Ae.length;n+=1){const i=ah(e,Ae,n);$e[n]?$e[n].p(i,t):($e[n]=gh(i),$e[n].c(),$e[n].m(q,null))}for(;n<$e.length;n+=1)$e[n].d(1);$e.length=Ae.length}if(16&t[0]&&D(q,e[4].selectedItemTemplate.type),4&t[0]){let n;for(De=e[2],xe(De),n=0;n<De.length;n+=1){const i=sh(e,De,n);Ie[n]?Ie[n].p(i,t):(Ie[n]=yh(i),Ie[n].c(),Ie[n].m(Z,null))}for(;n<Ie.length;n+=1)Ie[n].d(1);Ie.length=De.length}if(16&t[0]&&D(Z,e[4].selectedItemTemplate.subType),1&t[0]){let n;for(Pe=e[0],xe(Pe),n=0;n<Pe.length;n+=1){const i=rh(e,Pe,n);Be[n]?Be[n].p(i,t):(Be[n]=bh(i),Be[n].c(),Be[n].m(oe,null))}for(;n<Be.length;n+=1)Be[n].d(1);Be.length=Pe.length}if(16&t[0]&&D(oe,e[4].selectedItemTemplate.quality),8&t[0]){let n;for(He=e[3],xe(He),n=0;n<He.length;n+=1){const i=oh(e,He,n);je[n]?je[n].p(i,t):(je[n]=wh(i),je[n].c(),je[n].m(ue,null))}for(;n<je.length;n+=1)je[n].d(1);je.length=He.length}16&t[0]&&D(ue,e[4].selectedItemTemplate.slot)},d:function(e){e&&we(t),ke.d(),S(Le,e),Oe.d(),S($e,e),S(Ie,e),S(Be,e),S(je,e),u(pe)}};return ge("SvelteRegisterBlock",{block:We,id:dh.name,type:"if",source:"(255:2) {#if $store.selectedItemTemplate}",ctx:e}),We}function fh(e){let t,n,i,r;const s={c:function(){t=k("button"),t.textContent="Update",n=T(),i=k("button"),i.textContent="Delete",Se(t,"class","waves-effect waves-light btn-small green right svelte-16uu6ev"),a(t,ih,271,12,5698),Se(i,"class","waves-effect waves-light btn-small red right svelte-16uu6ev"),a(i,ih,277,12,5886)},m:function(o,s,a){be(o,t,s),be(o,n,s),be(o,i,s),a&&u(r),r=[Ce(t,"click",e[33],!1,!1,!1),Ce(i,"click",e[34],!1,!1,!1)]},p:o,d:function(e){e&&we(t),e&&we(n),e&&we(i),u(r)}};return ge("SvelteRegisterBlock",{block:s,id:fh.name,type:"else",source:"(271:10) {:else}",ctx:e}),s}function ph(e){let t,n;const i={c:function(){t=k("button"),t.textContent="Create",Se(t,"class","waves-effect waves-light btn-small green right svelte-16uu6ev"),a(t,ih,264,12,5492)},m:function(i,o,r){be(i,t,o),r&&n(),n=Ce(t,"click",e[32],!1,!1,!1)},p:o,d:function(e){e&&we(t),n()}};return ge("SvelteRegisterBlock",{block:i,id:ph.name,type:"if",source:"(264:10) {#if $store.selectedItemTemplate.isNew}",ctx:e}),i}function vh(e){let t,n,i,r=e[57]+"";const s={c:function(){t=k("option"),n=x(r),t.__value=i=e[57],t.value=t.__value,a(t,ih,302,16,6688)},m:function(e,i){be(e,t,i),ye(t,n)},p:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:s,id:vh.name,type:"each",source:"(302:14) {#each levels as lvl}",ctx:e}),s}function mh(e){let t,n,i,o,r;const s={c:function(){t=k("div"),n=k("input"),i=T(),o=k("label"),o.textContent="ID",Se(n,"placeholder","ID"),Se(n,"id","itemTemplate_id"),Se(n,"type","text"),n.disabled=!0,Se(n,"class","svelte-16uu6ev"),a(n,ih,320,14,7278),Se(o,"class","active svelte-16uu6ev"),Se(o,"for","itemTemplate_id"),a(o,ih,327,14,7501),Se(t,"class","input-field col s4"),a(t,ih,319,12,7231)},m:function(s,a,c){be(s,t,a),ye(t,n),A(n,e[4].selectedItemTemplate.id),ye(t,i),ye(t,o),c&&r(),r=Ce(n,"input",e[38])},p:function(e,t){16&t[0]&&n.value!==e[4].selectedItemTemplate.id&&A(n,e[4].selectedItemTemplate.id)},d:function(e){e&&we(t),r()}};return ge("SvelteRegisterBlock",{block:s,id:mh.name,type:"else",source:"(319:10) {:else}",ctx:e}),s}function _h(e){let t,n,i,o,r;const s={c:function(){t=k("div"),n=k("input"),i=T(),o=k("label"),o.textContent="ID",Se(n,"placeholder","ID"),Se(n,"id","itemTemplate_id"),Se(n,"type","text"),Se(n,"class","svelte-16uu6ev"),a(n,ih,310,14,6929),Se(o,"class","active svelte-16uu6ev"),Se(o,"for","itemTemplate_id"),a(o,ih,316,14,7127),Se(t,"class","input-field col s4"),a(t,ih,309,12,6882)},m:function(s,a,c){be(s,t,a),ye(t,n),A(n,e[4].selectedItemTemplate.id),ye(t,i),ye(t,o),c&&r(),r=Ce(n,"input",e[37])},p:function(e,t){16&t[0]&&n.value!==e[4].selectedItemTemplate.id&&A(n,e[4].selectedItemTemplate.id)},d:function(e){e&&we(t),r()}};return ge("SvelteRegisterBlock",{block:s,id:_h.name,type:"if",source:"(309:10) {#if $store.selectedItemTemplate.isNew}",ctx:e}),s}function gh(e){let t,n,i,o=e[54].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),t.__value=i=e[54],t.value=t.__value,a(t,ih,369,16,8814)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){2&r[0]&&o!==(o=e[54].capitalize()+"")&&Ee(n,o),2&r[0]&&i!==(i=e[54])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:gh.name,type:"each",source:"(369:14) {#each itemTypes as type}",ctx:e}),r}function yh(e){let t,n,i,o=e[51].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),t.__value=i=e[51],t.value=t.__value,a(t,ih,382,16,9274)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){4&r[0]&&o!==(o=e[51].capitalize()+"")&&Ee(n,o),4&r[0]&&i!==(i=e[51])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:yh.name,type:"each",source:"(382:14) {#each itemSubTypes as subType}",ctx:e}),r}function bh(e){let t,n,i,o=e[48].capitalize()+"";const r={c:function(){t=k("option"),n=x(o),t.__value=i=e[48],t.value=t.__value,a(t,ih,398,16,9796)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,r){1&r[0]&&o!==(o=e[48].capitalize()+"")&&Ee(n,o),1&r[0]&&i!==(i=e[48])&&ke(t,"__value",i),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:r,id:bh.name,type:"each",source:"(398:14) {#each itemQualities as quality}",ctx:e}),r}function wh(e){let t,n,i,o,r=e[45].capitalize()+"";const s={c:function(){t=k("option"),n=x(r),i=T(),Se(t,"class","select"),t.__value=o=e[45],t.value=t.__value,a(t,ih,413,16,10288)},m:function(e,o){be(e,t,o),ye(t,n),ye(t,i)},p:function(e,i){8&i[0]&&r!==(r=e[45].capitalize()+"")&&Ee(n,r),8&i[0]&&o!==(o=e[45])&&ke(t,"__value",o),t.value=t.__value},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:s,id:wh.name,type:"each",source:"(413:14) {#each itemSlots as slot}",ctx:e}),s}function Ch(e){let t,n,i,o,r,s;const c=new eh({props:{create:e[11]},$$inline:!0});let l=e[4].itemTemplates;xe(l);let u=[];for(let t=0;t<l.length;t+=1)u[t]=hh(lh(e,l,t));let h=e[4].selectedItemTemplate&&dh(e);const d={c:function(){fe(c.$$.fragment),t=T(),n=k("div"),i=k("div"),o=k("div");for(let e=0;e<u.length;e+=1)u[e].c();r=T(),h&&h.c(),Se(o,"class","collection svelte-16uu6ev"),a(o,ih,236,4,4795),Se(i,"class","col s3"),a(i,ih,235,2,4770),Se(n,"class","row"),a(n,ih,233,0,4749)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,a){pe(c,e,a),be(e,t,a),be(e,n,a),ye(n,i),ye(i,o);for(let e=0;e<u.length;e+=1)u[e].m(o,null);ye(n,r),h&&h.m(n,null),s=!0},p:function(e,t){if(16400&t[0]){let n;for(l=e[4].itemTemplates,xe(l),n=0;n<l.length;n+=1){const i=lh(e,l,n);u[n]?u[n].p(i,t):(u[n]=hh(i),u[n].c(),u[n].m(o,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=l.length}e[4].selectedItemTemplate?h?h.p(e,t):(h=dh(e),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},i:function(e){s||(ce(c.$$.fragment,e),s=!0)},o:function(e){le(c.$$.fragment,e),s=!1},d:function(e){ve(c,e),e&&we(t),e&&we(n),S(u,e),h&&h.d()}};return ge("SvelteRegisterBlock",{block:d,id:Ch.name,type:"component",source:"",ctx:e}),d}function Sh(e,t,n){let i,o,r,s,a,c;f(th,"store"),v(e,th,e=>n(4,c=e));let{location:l}=t,u=[],h=[],d=[],p=[];for(var m=[],_=1;_<=50;_++)m.push(_);const{isLoading:g,isAuthenticated:y,login:b,logout:C,authToken:S,authError:k,userInfo:E}=Us();f(g,"isLoading"),v(e,g,e=>n(19,i=e)),f(y,"isAuthenticated"),v(e,y,e=>n(20,o=e)),f(S,"authToken"),v(e,S,e=>n(23,a=e)),f(k,"authError"),v(e,k,e=>n(21,r=e)),f(E,"userInfo"),v(e,E,e=>n(22,s=e));const x=async e=>{i&&!o||fu(a,t=>{th.setItemTemplates(t),e&&e()},e=>console.log(e))};W(async()=>{cu(e=>n(0,u=e)),lu(e=>n(1,h=e)),uu(e=>n(2,d=e)),au(e=>n(3,p=e)),x(()=>{O(c.itemTemplates[0])})});const T=()=>{let e={id:tu(),name:"Unnamed Item",description:"",detail:"",type:"",slot:"inventory",quality:"normal",level:1,properties:new Map,attributes:new Map,noPickup:!1,tags:[],isNew:!0};O(e)},L=async()=>{du(a,c.selectedItemTemplate.id,()=>{console.log("delete successful."),x(()=>{c.itemTemplates&&th.setSelectedItemTemplate(c.itemTemplates[0])})},()=>{console.log("create error.")})},R=async()=>{vu(a,c.selectedItemTemplate,e=>{console.log("create successful."),x(),w(th,c.selectedItemTemplate=e,c)},()=>{console.log("create error.")})},O=e=>{th.setSelectedItemTemplate(e,()=>{var e=document.querySelectorAll("select");M.FormSelect.init(e,{});setTimeout((function(){var e=document.querySelectorAll("select");M.FormSelect.init(e,{})}),50)})},A=()=>{pu(a,c.selectedItemTemplate.id,c.selectedItemTemplate,()=>{console.log("update successful."),x()},()=>{console.log("update error.")})},$=["location"];Object.keys(t).forEach(e=>{~$.indexOf(e)||"$$"===e.slice(0,2)||nh.warn(`<ItemTemplatesEditor> was created with unknown prop '${e}'`)});let{$$slots:D={},$$scope:P}=t;Te("ItemTemplatesEditor",D,[]);let B;return e.$set=e=>{"location"in e&&n(16,l=e.location)},e.$capture_state=()=>({ItemsToolbar:eh,store:th,PlusIcon:Ec,writable:He,onMount:W,createAuth:Ns,getAuth:Us,uuidv4:tu,axios:La,getItemTemplate:hu,getItemTemplates:fu,createItemTemplate:vu,updateItemTemplate:pu,deleteItemTemplate:du,getItemTypes:lu,getItemSubTypes:uu,getItemSlots:au,getItemQualities:cu,location:l,itemQualities:u,itemTypes:h,itemSubTypes:d,itemSlots:p,levels:m,i:_,isLoading:g,isAuthenticated:y,login:b,logout:C,authToken:S,authError:k,userInfo:E,loadData:x,newItem:T,delItemTemplate:L,create:R,selectItemTemplate:O,update:A,state:B,$isLoading:i,$isAuthenticated:o,$authError:r,$userInfo:s,$authToken:a,$store:c}),e.$inject_state=e=>{"location"in e&&n(16,l=e.location),"itemQualities"in e&&n(0,u=e.itemQualities),"itemTypes"in e&&n(1,h=e.itemTypes),"itemSubTypes"in e&&n(2,d=e.itemSubTypes),"itemSlots"in e&&n(3,p=e.itemSlots),"levels"in e&&n(5,m=e.levels),"i"in e&&(_=e.i),"state"in e&&(B=e.state)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{16252928&e.$$.dirty[0]&&(B={isLoading:i,isAuthenticated:o,authError:r,userInfo:s?s.name:null,authToken:a.slice(0,20)})},[u,h,d,p,c,m,g,y,S,k,E,T,L,R,O,A,l,_,B,i,o,r,s,a,b,C,x,function(t){Y(e,t)},function(t){Y(e,t)},function(t){Y(e,t)},function(t){Y(e,t)},function(t){Y(e,t)},()=>R(),()=>A(),()=>L(),function(){c.selectedItemTemplate.name=this.value,th.set(c),n(5,m)},function(){c.selectedItemTemplate.level=I(this),th.set(c),n(5,m)},function(){c.selectedItemTemplate.id=this.value,th.set(c),n(5,m)},function(){c.selectedItemTemplate.id=this.value,th.set(c),n(5,m)},function(){c.selectedItemTemplate.description=this.value,th.set(c),n(5,m)},function(){c.selectedItemTemplate.detail=this.value,th.set(c),n(5,m)},function(){c.selectedItemTemplate.type=I(this),th.set(c),n(5,m)},function(){c.selectedItemTemplate.subType=I(this),th.set(c),n(5,m)},function(){c.selectedItemTemplate.quality=I(this),th.set(c),n(5,m)},function(){c.selectedItemTemplate.slot=I(this),th.set(c),n(5,m)}]}class kh extends Le{constructor(e){super(e),_e(this,e,Sh,Ch,d,{location:16},[-1,-1,-1]),ge("SvelteRegisterComponent",{component:this,tagName:"ItemTemplatesEditor",options:e,id:Ch.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[16]||"location"in n||nh.warn("<ItemTemplatesEditor> was created without expected prop 'location'")}get location(){throw new Error("<ItemTemplatesEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set location(e){throw new Error("<ItemTemplatesEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Eh(e,t,n){La.get("/api/world/map",{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>t(e.data)).catch(e=>n(e))}const{console:xh}=ue,Th="src/creator/WorldEditor.svelte";function Lh(e){let t,n;const i={c:function(){t=k("img"),Se(t,"class","responsive-img z-depth-3"),t.src!==(n=e[0])&&Se(t,"src",n),Se(t,"alt","world map"),a(t,Th,52,4,940)},m:function(e,n){be(e,t,n)},p:function(e,i){1&i&&t.src!==(n=e[0])&&Se(t,"src",n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:i,id:Lh.name,type:"if",source:"(52:2) {#if $isAuthenticated}",ctx:e}),i}function Rh(e){let t,n,i,r=e[1]&&Lh(e);const s={c:function(){t=k("div"),n=k("h4"),n.textContent="Map of Rooms",i=T(),r&&r.c(),a(n,Th,50,2,889),Se(t,"class","row"),a(t,Th,49,0,869)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),ye(t,n),ye(t,i),r&&r.m(t,null)},p:function(e,[n]){e[1]?r?r.p(e,n):(r=Lh(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i:o,o:o,d:function(e){e&&we(t),r&&r.d()}};return ge("SvelteRegisterBlock",{block:s,id:Rh.name,type:"component",source:"",ctx:e}),s}function Mh(e,t,n){let i,o,r,s,a,c,{location:l}=t;const{isLoading:u,isAuthenticated:h,login:d,logout:p,authToken:m,authError:_,userInfo:g}=Us();f(u,"isLoading"),v(e,u,e=>n(9,i=e)),f(h,"isAuthenticated"),v(e,h,e=>n(1,o=e)),f(m,"authToken"),v(e,m,e=>n(12,a=e)),f(_,"authError"),v(e,_,e=>n(10,r=e)),f(g,"userInfo"),v(e,g,e=>n(11,s=e)),W(async()=>{});const y=["location"];Object.keys(t).forEach(e=>{~y.indexOf(e)||"$$"===e.slice(0,2)||xh.warn(`<WorldEditor> was created with unknown prop '${e}'`)});let b,{$$slots:w={},$$scope:C}=t;return Te("WorldEditor",w,[]),e.$set=e=>{"location"in e&&n(7,l=e.location)},e.$capture_state=()=>({writable:He,onMount:W,createAuth:Ns,getAuth:Us,getWorldMap:Eh,axios:La,location:l,img:c,isLoading:u,isAuthenticated:h,login:d,logout:p,authToken:m,authError:_,userInfo:g,state:b,$isLoading:i,$isAuthenticated:o,$authError:r,$userInfo:s,$authToken:a}),e.$inject_state=e=>{"location"in e&&n(7,l=e.location),"img"in e&&n(0,c=e.img),"state"in e&&(b=e.state)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{7682&e.$$.dirty&&(b={isLoading:i,isAuthenticated:o,authError:r,userInfo:s?s.name:null,authToken:a.slice(0,20)}),4610&e.$$.dirty&&!i&&o&&m&&Eh(a,e=>{n(0,c=e)},e=>console.log(e))},[c,o,u,h,m,_,g,l]}class Oh extends Le{constructor(e){super(e),_e(this,e,Mh,Rh,d,{location:7}),ge("SvelteRegisterComponent",{component:this,tagName:"WorldEditor",options:e,id:Rh.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[7]||"location"in n||xh.warn("<WorldEditor> was created without expected prop 'location'")}get location(){throw new Error("<WorldEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set location(e){throw new Error("<WorldEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ah="src/creator/RoomsToolbar.svelte";function $h(e){let t,n,i,r,s,c,l,d,f,p,v,m,_;const g={c:function(){t=k("div"),n=k("ul"),i=k("li"),i.textContent="Manage Rooms",r=T(),s=k("li"),c=k("button"),c.textContent="Create New Room",l=T(),d=k("li"),f=k("button"),f.textContent="Create Exit",p=T(),v=k("li"),m=k("button"),m.textContent="Create Action",Se(i,"class","header svelte-13xq72"),a(i,Ah,40,4,537),Se(c,"class","btn-flat green svelte-13xq72"),a(c,Ah,42,6,589),Se(s,"class","svelte-13xq72"),a(s,Ah,41,4,578),Se(f,"class","btn-flat blue svelte-13xq72"),a(f,Ah,47,6,712),Se(d,"class","svelte-13xq72"),a(d,Ah,46,4,701),Se(m,"class","btn-flat blue svelte-13xq72"),a(m,Ah,50,6,811),Se(v,"class","svelte-13xq72"),a(v,Ah,49,4,800),Se(n,"class","svelte-13xq72"),a(n,Ah,39,2,528),Se(t,"class","row"),a(t,Ah,38,0,508)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,a,g){be(o,t,a),ye(t,n),ye(n,i),ye(n,r),ye(n,s),ye(s,c),ye(n,l),ye(n,d),ye(d,f),ye(n,p),ye(n,v),ye(v,m),g&&u(_),_=[Ce(c,"click",(function(){h(e[0]())&&e[0]().apply(this,arguments)}),!1,!1,!1),Ce(f,"click",(function(){h(e[1]())&&e[1]().apply(this,arguments)}),!1,!1,!1),Ce(m,"click",(function(){h(e[2]())&&e[2]().apply(this,arguments)}),!1,!1,!1)]},p:function(t,[n]){e=t},i:o,o:o,d:function(e){e&&we(t),u(_)}};return ge("SvelteRegisterBlock",{block:g,id:$h.name,type:"component",source:"",ctx:e}),g}function Dh(e,t,n){let{createRoom:i}=t,{addExit:o}=t,{addAction:r}=t;const s=["createRoom","addExit","addAction"];Object.keys(t).forEach(e=>{~s.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<RoomsToolbar> was created with unknown prop '${e}'`)});let{$$slots:a={},$$scope:c}=t;return Te("RoomsToolbar",a,[]),e.$set=e=>{"createRoom"in e&&n(0,i=e.createRoom),"addExit"in e&&n(1,o=e.addExit),"addAction"in e&&n(2,r=e.addAction)},e.$capture_state=()=>({createRoom:i,addExit:o,addAction:r}),e.$inject_state=e=>{"createRoom"in e&&n(0,i=e.createRoom),"addExit"in e&&n(1,o=e.addExit),"addAction"in e&&n(2,r=e.addAction)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o,r]}class Ih extends Le{constructor(e){super(e),_e(this,e,Dh,$h,d,{createRoom:0,addExit:1,addAction:2}),ge("SvelteRegisterComponent",{component:this,tagName:"RoomsToolbar",options:e,id:$h.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"createRoom"in n||console.warn("<RoomsToolbar> was created without expected prop 'createRoom'"),void 0!==t[1]||"addExit"in n||console.warn("<RoomsToolbar> was created without expected prop 'addExit'"),void 0!==t[2]||"addAction"in n||console.warn("<RoomsToolbar> was created without expected prop 'addAction'")}get createRoom(){throw new Error("<RoomsToolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set createRoom(e){throw new Error("<RoomsToolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get addExit(){throw new Error("<RoomsToolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set addExit(e){throw new Error("<RoomsToolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get addAction(){throw new Error("<RoomsToolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set addAction(e){throw new Error("<RoomsToolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ph=function(){const{subscribe:e,set:t,update:n}=He({rooms:[],filteredRooms:[],selectedRoom:null,filter:""});return{subscribe:e,setSelectedRoom:(e,t)=>{n(t=>(t.selectedRoom=e,t)),t&&t()},deleteExit:e=>n(t=>(t.selectedRoom.exits=t.selectedRoom.exits.filter(t=>t.name!=e.name),t)),createExit:()=>{n(e=>(null==e.selectedRoom.exits&&(e.selectedRoom.exits=[]),e.selectedRoom.exits.push({name:"New Exit",description:"todo",target:"select target"}),e))},setFilter:e=>{n(t=>(t.filter=e,t.filteredRooms=rooms.filter(t=>t.name.includes(e)),t))},setRooms:e=>{n(t=>(console.log("SET ROOMS: COUNT "+e.length),t.rooms=e,t.filteredRooms=e,t))}}}();function Bh(e,t,n,i){La.get("/api/rooms/"+t,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}function Hh(e,t,n,i){La.delete("/api/rooms/"+t,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}function jh(e,t,n){La.get("/api/rooms",{mode:"no-cors",credentials:"same-origin",headers:{Authorization:"Bearer "+e}}).then(e=>t(e.data)).catch(e=>n(e))}function Wh(e,t,n,i,o){La.put("/api/rooms/"+t,n,{mode:"no-cors",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then(e=>i(e.data)).catch(e=>o(e))}function Fh(e,t,n,i){La.post("/api/rooms",t,{mode:"no-cors",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then(e=>n(e.data)).catch(e=>i(e))}const{console:Nh}=ue,Uh="src/creator/RoomsEditor.svelte";function qh(e,t,n){const i=e.slice();return i[29]=t[n],i}function zh(e,t,n){const i=e.slice();return i[32]=t[n],i}function Yh(e){let t,n,i=e[32].area+"";const o={c:function(){t=k("span"),n=x(i),Se(t,"class","new badge"),Se(t,"data-badge-caption",""),a(t,Uh,228,12,4789)},m:function(e,i){be(e,t,i),ye(t,n)},p:function(e,t){1&t[0]&&i!==(i=e[32].area+"")&&Ee(n,i)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:o,id:Yh.name,type:"if",source:"(228:10) {#if room.area}",ctx:e}),o}function Vh(e){let t,n,i,o,r,s=e[32].name+"",c=e[32].area&&Yh(e);const l={c:function(){t=k("a"),c&&c.c(),n=T(),i=x(s),o=T(),Se(t,"href","#!"),Se(t,"class","collection-item svelte-175a01r"),a(t,Uh,226,8,4683)},m:function(s,a,l){be(s,t,a),c&&c.m(t,null),ye(t,n),ye(t,i),ye(t,o),l&&r(),r=Ce(t,"click",(function(){h(e[8](e[32]))&&e[8](e[32]).apply(this,arguments)}),!1,!1,!1)},p:function(o,r){(e=o)[32].area?c?c.p(e,r):(c=Yh(e),c.c(),c.m(t,n)):c&&(c.d(1),c=null),1&r[0]&&s!==(s=e[32].name+"")&&Ee(i,s)},d:function(e){e&&we(t),c&&c.d(),r()}};return ge("SvelteRegisterBlock",{block:l,id:Vh.name,type:"each",source:"(226:6) {#each $store.rooms as room}",ctx:e}),l}function Kh(e){let t,n,i,o,r,s,c,l,h,d,f,p,v,m,_,g,y,b,w,C,S,E,L,R,M,O,$,D,I,P,B,H,j,W,F,N,U,q,z,Y,V,K,G,Z,X,J,Q,ee=e[0].selectedRoom.name+"";function te(e,t){return e[0].selectedRoom.isNew?Zh:Gh}let ne=te(e),ie=ne(e);function oe(e,t){return e[0].selectedRoom.isNew?Jh:Xh}let re=oe(e),ue=re(e),he=e[0].selectedRoom.coords&&Qh(e),de=e[0].selectedRoom.exits&&ed(e);const fe={c:function(){t=k("div"),n=k("div"),i=k("div"),o=k("span"),r=x(ee),s=T(),ie.c(),c=T(),l=k("div"),h=T(),d=k("div"),f=k("div"),p=k("input"),v=T(),m=k("label"),m.textContent="Name",_=T(),ue.c(),g=T(),y=k("div"),b=k("div"),w=k("textarea"),C=T(),S=k("label"),S.textContent="Description",E=T(),L=k("div"),R=k("div"),M=k("textarea"),O=T(),$=k("label"),$.textContent="Detail (look)",D=T(),I=k("div"),P=k("div"),B=k("input"),H=T(),j=k("label"),j.textContent="Area",W=T(),F=k("div"),N=k("input"),U=T(),q=k("label"),q.textContent="Area Type",z=T(),Y=k("div"),V=k("input"),K=T(),G=k("label"),G.textContent="Room Type",Z=T(),he&&he.c(),X=T(),de&&de.c(),Se(o,"class","header svelte-175a01r"),a(o,Uh,243,10,5077),Se(i,"class","row"),a(i,Uh,241,8,5048),Se(l,"id","general"),a(l,Uh,268,8,5796),Se(p,"placeholder","Name"),Se(p,"id","room_name"),Se(p,"type","text"),Se(p,"class","svelte-175a01r"),a(p,Uh,272,12,5914),Se(m,"class","first_label svelte-175a01r"),Se(m,"for","room_name"),a(m,Uh,278,12,6090),Se(f,"class","no-padding input-field col s6 svelte-175a01r"),a(f,Uh,271,10,5858),Se(d,"class","row"),a(d,Uh,270,8,5830),Se(w,"placeholder","Room Description"),Se(w,"id","room_description"),Se(w,"rows","8"),Se(w,"class","materialize-textarea svelte-175a01r"),a(w,Uh,307,12,6969),Se(S,"class","active svelte-175a01r"),Se(S,"for","room_description"),a(S,Uh,314,12,7224),Se(b,"class","input-field"),a(b,Uh,306,10,6931),Se(y,"class","row"),a(y,Uh,305,8,6903),Se(M,"placeholder","Room Details"),Se(M,"id","room_detail"),Se(M,"rows","4"),Se(M,"class","materialize-textarea svelte-175a01r"),a(M,Uh,320,12,7396),Se($,"class","active svelte-175a01r"),Se($,"for","room_detail"),a($,Uh,327,12,7637),Se(R,"class","input-field"),a(R,Uh,319,10,7358),Se(L,"class","row"),a(L,Uh,318,8,7330),Se(B,"placeholder","Area"),Se(B,"id","area"),Se(B,"type","text"),Se(B,"class","svelte-175a01r"),a(B,Uh,334,12,7825),Se(j,"class","active first_label svelte-175a01r"),Se(j,"for","area"),a(j,Uh,340,12,7996),Se(P,"class","no-padding input-field col s4 svelte-175a01r"),a(P,Uh,333,10,7769),Se(N,"placeholder","Area Type"),Se(N,"id","area_type"),Se(N,"type","text"),Se(N,"class","svelte-175a01r"),a(N,Uh,344,12,8127),Se(q,"class","active svelte-175a01r"),Se(q,"for","area_type"),a(q,Uh,350,12,8312),Se(F,"class","input-field col s4"),a(F,Uh,343,10,8082),Se(V,"placeholder","Room Type"),Se(V,"id","room_type"),Se(V,"type","text"),Se(V,"class","svelte-175a01r"),a(V,Uh,354,12,8441),Se(G,"class","active svelte-175a01r"),Se(G,"for","room_type"),a(G,Uh,360,12,8626),Se(Y,"class","input-field col s4"),a(Y,Uh,353,10,8396),Se(I,"class","row"),a(I,Uh,331,8,7740),Se(n,"class","card-panel cyan darken-4"),a(n,Uh,239,6,5e3),Se(t,"class","col s9"),a(t,Uh,237,4,4972)},m:function(a,k,x){be(a,t,k),ye(t,n),ye(n,i),ye(i,o),ye(o,r),ye(i,s),ie.m(i,null),ye(n,c),ye(n,l),ye(n,h),ye(n,d),ye(d,f),ye(f,p),A(p,e[0].selectedRoom.name),ye(f,v),ye(f,m),ye(d,_),ue.m(d,null),ye(n,g),ye(n,y),ye(y,b),ye(b,w),A(w,e[0].selectedRoom.description),ye(b,C),ye(b,S),ye(n,E),ye(n,L),ye(L,R),ye(R,M),A(M,e[0].selectedRoom.detail),ye(R,O),ye(R,$),ye(n,D),ye(n,I),ye(I,P),ye(P,B),A(B,e[0].selectedRoom.area),ye(P,H),ye(P,j),ye(I,W),ye(I,F),ye(F,N),A(N,e[0].selectedRoom.areaType),ye(F,U),ye(F,q),ye(I,z),ye(I,Y),ye(Y,V),A(V,e[0].selectedRoom.roomType),ye(Y,K),ye(Y,G),ye(n,Z),he&&he.m(n,null),ye(t,X),de&&de.m(t,null),J=!0,x&&u(Q),Q=[Ce(p,"input",e[18]),Ce(w,"input",e[21]),Ce(M,"input",e[22]),Ce(B,"input",e[23]),Ce(N,"input",e[24]),Ce(V,"input",e[25])]},p:function(e,o){(!J||1&o[0])&&ee!==(ee=e[0].selectedRoom.name+"")&&Ee(r,ee),ne===(ne=te(e))&&ie?ie.p(e,o):(ie.d(1),ie=ne(e),ie&&(ie.c(),ie.m(i,null))),1&o[0]&&p.value!==e[0].selectedRoom.name&&A(p,e[0].selectedRoom.name),re===(re=oe(e))&&ue?ue.p(e,o):(ue.d(1),ue=re(e),ue&&(ue.c(),ue.m(d,null))),1&o[0]&&A(w,e[0].selectedRoom.description),1&o[0]&&A(M,e[0].selectedRoom.detail),1&o[0]&&B.value!==e[0].selectedRoom.area&&A(B,e[0].selectedRoom.area),1&o[0]&&N.value!==e[0].selectedRoom.areaType&&A(N,e[0].selectedRoom.areaType),1&o[0]&&V.value!==e[0].selectedRoom.roomType&&A(V,e[0].selectedRoom.roomType),e[0].selectedRoom.coords?he?he.p(e,o):(he=Qh(e),he.c(),he.m(n,null)):he&&(he.d(1),he=null),e[0].selectedRoom.exits?de?(de.p(e,o),1&o[0]&&ce(de,1)):(de=ed(e),de.c(),ce(de,1),de.m(t,null)):de&&(se(),le(de,1,1,()=>{de=null}),ae())},i:function(e){J||(ce(de),J=!0)},o:function(e){le(de),J=!1},d:function(e){e&&we(t),ie.d(),ue.d(),he&&he.d(),de&&de.d(),u(Q)}};return ge("SvelteRegisterBlock",{block:fe,id:Kh.name,type:"if",source:"(237:2) {#if $store.selectedRoom}",ctx:e}),fe}function Gh(e){let t,n,i,r;const s={c:function(){t=k("button"),t.textContent="Update",n=T(),i=k("button"),i.textContent="Delete",Se(t,"class","waves-effect waves-light btn-small green right svelte-175a01r"),a(t,Uh,253,12,5393),Se(i,"class","waves-effect waves-light btn-small red right svelte-175a01r"),a(i,Uh,259,12,5581)},m:function(o,s,a){be(o,t,s),be(o,n,s),be(o,i,s),a&&u(r),r=[Ce(t,"click",e[16],!1,!1,!1),Ce(i,"click",e[17],!1,!1,!1)]},p:o,d:function(e){e&&we(t),e&&we(n),e&&we(i),u(r)}};return ge("SvelteRegisterBlock",{block:s,id:Gh.name,type:"else",source:"(253:10) {:else}",ctx:e}),s}function Zh(e){let t,n;const i={c:function(){t=k("button"),t.textContent="Create",Se(t,"class","waves-effect waves-light btn-small green right svelte-175a01r"),a(t,Uh,246,12,5187)},m:function(i,o,r){be(i,t,o),r&&n(),n=Ce(t,"click",e[15],!1,!1,!1)},p:o,d:function(e){e&&we(t),n()}};return ge("SvelteRegisterBlock",{block:i,id:Zh.name,type:"if",source:"(246:10) {#if $store.selectedRoom.isNew}",ctx:e}),i}function Xh(e){let t,n,i,o,r;const s={c:function(){t=k("div"),n=k("input"),i=T(),o=k("label"),o.textContent="ID",Se(n,"placeholder","ID"),Se(n,"id","room_id"),Se(n,"type","text"),n.disabled=!0,Se(n,"class","svelte-175a01r"),a(n,Uh,293,14,6590),Se(o,"class","active svelte-175a01r"),Se(o,"for","room_id"),a(o,Uh,300,14,6797),Se(t,"class","input-field col s6"),a(t,Uh,292,12,6543)},m:function(s,a,c){be(s,t,a),ye(t,n),A(n,e[0].selectedRoom.id),ye(t,i),ye(t,o),c&&r(),r=Ce(n,"input",e[20])},p:function(e,t){1&t[0]&&n.value!==e[0].selectedRoom.id&&A(n,e[0].selectedRoom.id)},d:function(e){e&&we(t),r()}};return ge("SvelteRegisterBlock",{block:s,id:Xh.name,type:"else",source:"(292:10) {:else}",ctx:e}),s}function Jh(e){let t,n,i,o,r;const s={c:function(){t=k("div"),n=k("input"),i=T(),o=k("label"),o.textContent="ID",Se(n,"placeholder","ID"),Se(n,"id","room_id"),Se(n,"type","text"),Se(n,"class","svelte-175a01r"),a(n,Uh,283,14,6265),Se(o,"class","active svelte-175a01r"),Se(o,"for","room_id"),a(o,Uh,289,14,6447),Se(t,"class","input-field col s6"),a(t,Uh,282,12,6218)},m:function(s,a,c){be(s,t,a),ye(t,n),A(n,e[0].selectedRoom.id),ye(t,i),ye(t,o),c&&r(),r=Ce(n,"input",e[19])},p:function(e,t){1&t[0]&&n.value!==e[0].selectedRoom.id&&A(n,e[0].selectedRoom.id)},d:function(e){e&&we(t),r()}};return ge("SvelteRegisterBlock",{block:s,id:Jh.name,type:"if",source:"(282:10) {#if $store.selectedRoom.isNew}",ctx:e}),s}function Qh(e){let t,n,i,o,r,s,c,l,h,d,f,p,v,m,_,g;const y={c:function(){t=k("div"),n=k("div"),i=k("input"),o=T(),r=k("label"),r.textContent="X",s=T(),c=k("div"),l=k("input"),h=T(),d=k("label"),d.textContent="Y",f=T(),p=k("div"),v=k("input"),m=T(),_=k("label"),_.textContent="Z",Se(i,"placeholder","X"),Se(i,"id","x"),Se(i,"type","text"),Se(i,"class","svelte-175a01r"),a(i,Uh,368,14,8855),Se(r,"class","first_label svelte-175a01r"),Se(r,"for","x"),a(r,Uh,374,14,9036),Se(n,"class","no-padding input-field col s2 svelte-175a01r"),a(n,Uh,367,12,8797),Se(l,"placeholder","Y"),Se(l,"id","y"),Se(l,"type","text"),Se(l,"class","svelte-175a01r"),a(l,Uh,378,14,9160),Se(d,"class","active svelte-175a01r"),Se(d,"for","y"),a(d,Uh,384,14,9341),Se(c,"class","input-field col s2"),a(c,Uh,377,12,9113),Se(v,"placeholder","Z"),Se(v,"id","z"),Se(v,"type","text"),Se(v,"class","svelte-175a01r"),a(v,Uh,388,14,9460),Se(_,"class","active svelte-175a01r"),Se(_,"for","z"),a(_,Uh,394,14,9641),Se(p,"class","input-field col s2"),a(p,Uh,387,12,9413),Se(t,"class","row"),a(t,Uh,365,10,8766)},m:function(a,y,b){be(a,t,y),ye(t,n),ye(n,i),A(i,e[0].selectedRoom.coords.x),ye(n,o),ye(n,r),ye(t,s),ye(t,c),ye(c,l),A(l,e[0].selectedRoom.coords.y),ye(c,h),ye(c,d),ye(t,f),ye(t,p),ye(p,v),A(v,e[0].selectedRoom.coords.z),ye(p,m),ye(p,_),b&&u(g),g=[Ce(i,"input",e[26]),Ce(l,"input",e[27]),Ce(v,"input",e[28])]},p:function(e,t){1&t[0]&&i.value!==e[0].selectedRoom.coords.x&&A(i,e[0].selectedRoom.coords.x),1&t[0]&&l.value!==e[0].selectedRoom.coords.y&&A(l,e[0].selectedRoom.coords.y),1&t[0]&&v.value!==e[0].selectedRoom.coords.z&&A(v,e[0].selectedRoom.coords.z)},d:function(e){e&&we(t),u(g)}};return ge("SvelteRegisterBlock",{block:y,id:Qh.name,type:"if",source:"(365:8) {#if $store.selectedRoom.coords}",ctx:e}),y}function ed(e){let t,n,i,o,r=e[0].selectedRoom.exits;xe(r);let s=[];for(let t=0;t<r.length;t+=1)s[t]=td(qh(e,r,t));const c=e=>le(s[e],1,1,()=>{s[e]=null}),l={c:function(){t=k("h6"),t.textContent="Exits",n=T(),i=k("ul");for(let e=0;e<s.length;e+=1)s[e].c();a(t,Uh,401,8,9791),Se(i,"class","collapsible"),a(i,Uh,402,8,9814)},m:function(e,r){be(e,t,r),be(e,n,r),be(e,i,r);for(let e=0;e<s.length;e+=1)s[e].m(i,null);o=!0},p:function(e,t){if(65&t[0]){let n;for(r=e[0].selectedRoom.exits,xe(r),n=0;n<r.length;n+=1){const o=qh(e,r,n);s[n]?(s[n].p(o,t),ce(s[n],1)):(s[n]=td(o),s[n].c(),ce(s[n],1),s[n].m(i,null))}for(se(),n=r.length;n<s.length;n+=1)c(n);ae()}},i:function(e){if(!o){for(let e=0;e<r.length;e+=1)ce(s[e]);o=!0}},o:function(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)le(s[e]);o=!1},d:function(e){e&&we(t),e&&we(n),e&&we(i),S(s,e)}};return ge("SvelteRegisterBlock",{block:l,id:ed.name,type:"if",source:"(401:6) {#if $store.selectedRoom.exits}",ctx:e}),l}function td(e){let t;const n=new bl({props:{exit:e[29],deleteExit:e[6]},$$inline:!0}),i={c:function(){fe(n.$$.fragment)},m:function(e,i){pe(n,e,i),t=!0},p:function(e,t){const i={};1&t[0]&&(i.exit=e[29]),n.$set(i)},i:function(e){t||(ce(n.$$.fragment,e),t=!0)},o:function(e){le(n.$$.fragment,e),t=!1},d:function(e){ve(n,e)}};return ge("SvelteRegisterBlock",{block:i,id:td.name,type:"each",source:"(404:10) {#each $store.selectedRoom.exits as exit}",ctx:e}),i}function nd(e){let t,n,i,o,r,s;const c=new Ih({props:{createRoom:e[3],addExit:e[7]},$$inline:!0});let l=e[0].rooms;xe(l);let u=[];for(let t=0;t<l.length;t+=1)u[t]=Vh(zh(e,l,t));let h=e[0].selectedRoom&&Kh(e);const d={c:function(){fe(c.$$.fragment),t=T(),n=k("div"),i=k("div"),o=k("div");for(let e=0;e<u.length;e+=1)u[e].c();r=T(),h&&h.c(),Se(o,"class","collection svelte-175a01r"),a(o,Uh,224,4,4615),Se(i,"class","col s3"),a(i,Uh,223,2,4590),Se(n,"class","row"),a(n,Uh,221,0,4569)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,a){pe(c,e,a),be(e,t,a),be(e,n,a),ye(n,i),ye(i,o);for(let e=0;e<u.length;e+=1)u[e].m(o,null);ye(n,r),h&&h.m(n,null),s=!0},p:function(e,t){if(257&t[0]){let n;for(l=e[0].rooms,xe(l),n=0;n<l.length;n+=1){const i=zh(e,l,n);u[n]?u[n].p(i,t):(u[n]=Vh(i),u[n].c(),u[n].m(o,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=l.length}e[0].selectedRoom?h?(h.p(e,t),1&t[0]&&ce(h,1)):(h=Kh(e),h.c(),ce(h,1),h.m(n,null)):h&&(se(),le(h,1,1,()=>{h=null}),ae())},i:function(e){s||(ce(c.$$.fragment,e),ce(h),s=!0)},o:function(e){le(c.$$.fragment,e),le(h),s=!1},d:function(e){ve(c,e),e&&we(t),e&&we(n),S(u,e),h&&h.d()}};return ge("SvelteRegisterBlock",{block:d,id:nd.name,type:"component",source:"",ctx:e}),d}function id(e,t,n){let i,o,r;f(Ph,"store"),v(e,Ph,e=>n(0,r=e));let{location:s}=t;const{isAuthenticated:a,authToken:c}=Us();f(a,"isAuthenticated"),v(e,a,e=>n(12,i=e)),f(c,"authToken"),v(e,c,e=>n(13,o=e));const l=async e=>{i&&jh(o,t=>{Ph.setRooms(t),e&&e()},e=>console.log(e))};W(async()=>{document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".collapsible");M.Collapsible.init(e)})),l(()=>{_(r.rooms[0])})});const u=()=>{let e={name:"New Room",description:"",detail:"",areaType:"",area:"",id:tu(),isNew:!0,exits:[],actions:[]};_(e)},h=async e=>{Hh(o,r.selectedRoom.id,()=>{console.log("delete successful."),l(()=>{Ph.setSelectedRoom(r.rooms[0])})},()=>{console.log("create error.")})},d=async()=>{Fh(o,r.selectedRoom,e=>{console.log("create successful."),l(),w(Ph,r.selectedRoom=e,r)},()=>{console.log("create error.")})},p=e=>{Ph.deleteExit(e)},m=()=>{Ph.createExit(),M.updateTextFields();var e=document.querySelectorAll(".collapsible");if(null!=e)M.Collapsible.init(e,{})},_=e=>{Ph.setSelectedRoom(e,()=>{M.updateTextFields();var e=document.querySelectorAll(".collapsible");if(null!=e)M.Collapsible.init(e,{});M.updateTextFields(),setTimeout((function(){var e=document.querySelectorAll(".collapsible");if(null!=e)M.Collapsible.init(e,{});M.updateTextFields(),document.querySelectorAll(".materialize-textarea").forEach(e=>{M.textareaAutoResize(e)})}),50);var t=document.querySelectorAll(".tabs");M.Tabs.init(t,{})});var t=document.querySelectorAll(".autocomplete");const n={data:{},onAutocomplete(e){console.log(e)}};r.rooms.forEach(e=>{n.data[e.name]=null});M.Autocomplete.init(t,n)},g=()=>{Wh(o,r.selectedRoom.id,r.selectedRoom,()=>{console.log("update successful."),l()},()=>{console.log("update error.")})},y=["location"];Object.keys(t).forEach(e=>{~y.indexOf(e)||"$$"===e.slice(0,2)||Nh.warn(`<RoomsEditor> was created with unknown prop '${e}'`)});let{$$slots:b={},$$scope:C}=t;Te("RoomsEditor",b,[]);let S;return e.$set=e=>{"location"in e&&n(10,s=e.location)},e.$capture_state=()=>({ActionEditor:bl,RoomsToolbar:Ih,store:Ph,PlusIcon:Ec,writable:He,onMount:W,getAuth:Us,uuidv4:tu,axios:La,getRoom:Bh,deleteRoom:Hh,getRooms:jh,updateRoom:Wh,createRoom:Fh,location:s,isAuthenticated:a,authToken:c,loadData:l,newRoom:u,delRoom:h,create:d,deleteExit:p,createExit:m,selectRoom:_,update:g,state:S,$isAuthenticated:i,$authToken:o,$store:r}),e.$inject_state=e=>{"location"in e&&n(10,s=e.location),"state"in e&&(S=e.state)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{12288&e.$$.dirty[0]&&(S={isAuthenticated:i,authToken:o.slice(0,20)})},[r,a,c,u,h,d,p,m,_,g,s,S,i,o,l,()=>d(),()=>g(),()=>h(),function(){r.selectedRoom.name=this.value,Ph.set(r)},function(){r.selectedRoom.id=this.value,Ph.set(r)},function(){r.selectedRoom.id=this.value,Ph.set(r)},function(){r.selectedRoom.description=this.value,Ph.set(r)},function(){r.selectedRoom.detail=this.value,Ph.set(r)},function(){r.selectedRoom.area=this.value,Ph.set(r)},function(){r.selectedRoom.areaType=this.value,Ph.set(r)},function(){r.selectedRoom.roomType=this.value,Ph.set(r)},function(){r.selectedRoom.coords.x=this.value,Ph.set(r)},function(){r.selectedRoom.coords.y=this.value,Ph.set(r)},function(){r.selectedRoom.coords.z=this.value,Ph.set(r)}]}class od extends Le{constructor(e){super(e),_e(this,e,id,nd,d,{location:10},[-1,-1]),ge("SvelteRegisterComponent",{component:this,tagName:"RoomsEditor",options:e,id:nd.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[10]||"location"in n||Nh.warn("<RoomsEditor> was created without expected prop 'location'")}get location(){throw new Error("<RoomsEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set location(e){throw new Error("<RoomsEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const rd=function(){const{subscribe:e,set:t,update:n}=He({name:"marcus",loggedIn:!1});return{subscribe:e,logIn:()=>n(e=>(e.loggedIn=!0,e)),logOut:()=>n(e=>(e.loggedIn=!1,e))}}(),sd=function(){const{subscribe:e,set:t,update:n}=He({active:!1,entries:[{name:"Item1"}]});return{subscribe:e,show:()=>n(e=>(e.active=!0,e)),hide:()=>n(e=>(e.active=!1,e)),setItems:e=>{n(t=>(t.entries=e,t))}}}();function ad(e){let t,n,i,r,s;const c=new ft({props:{path:"rooms",component:od},$$inline:!0}),l=new ft({props:{path:"items",component:Au},$$inline:!0}),u=new ft({props:{path:"world",component:Oh},$$inline:!0}),h=new ft({props:{path:"item-templates",component:Zu},$$inline:!0}),d={c:function(){t=k("row"),fe(c.$$.fragment),n=T(),fe(l.$$.fragment),i=T(),fe(u.$$.fragment),r=T(),fe(h.$$.fragment),a(t,"src/creator/Creator.svelte",53,2,1135)},m:function(e,o){be(e,t,o),pe(c,t,null),ye(t,n),pe(l,t,null),ye(t,i),pe(u,t,null),ye(t,r),pe(h,t,null),s=!0},p:o,i:function(e){s||(ce(c.$$.fragment,e),ce(l.$$.fragment,e),ce(u.$$.fragment,e),ce(h.$$.fragment,e),s=!0)},o:function(e){le(c.$$.fragment,e),le(l.$$.fragment,e),le(u.$$.fragment,e),le(h.$$.fragment,e),s=!1},d:function(e){e&&we(t),ve(c),ve(l),ve(u),ve(h)}};return ge("SvelteRegisterBlock",{block:d,id:ad.name,type:"slot",source:"(53:0) <Router>",ctx:e}),d}function cd(e){let t;const n=new rt({props:{$$slots:{default:[ad]},$$scope:{ctx:e}},$$inline:!0}),i={c:function(){fe(n.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){pe(n,e,i),t=!0},p:function(e,[t]){const i={};1&t&&(i.$$scope={dirty:t,ctx:e}),n.$set(i)},i:function(e){t||(ce(n.$$.fragment,e),t=!0)},o:function(e){le(n.$$.fragment,e),t=!1},d:function(e){ve(n,e)}};return ge("SvelteRegisterBlock",{block:i,id:cd.name,type:"component",source:"",ctx:e}),i}function ld(e,t,n){W(async()=>{var e=document.querySelectorAll(".tabs");M.Tabs.init(e);document.body.style.backgroundImage="",sd.setItems([{name:"ROOMS",nav:"creator/rooms"},{name:"ITEMS",nav:"creator/items"},{name:"ITEM TEMPLATES",nav:"creator/item-templates"},{name:"WORLD",nav:"creator/world"}]),sd.show()}),N(async()=>{sd.hide()});const i=[];Object.keys(t).forEach(e=>{~i.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Creator> was created with unknown prop '${e}'`)});let{$$slots:o={},$$scope:r}=t;return Te("Creator",o,[]),e.$capture_state=()=>({ItemsEditor:Au,SampleEditor:Zu,ItemTemplatesEditor:kh,WorldEditor:Oh,RoomsEditor:od,Router:rt,Route:ft,writable:He,onMount:W,onDestroy:N,subMenu:sd,axios:La}),[]}class ud extends Le{constructor(e){super(e),_e(this,e,ld,cd,d,{}),ge("SvelteRegisterComponent",{component:this,tagName:"Creator",options:e,id:cd.name})}}const hd="src/characters/CharacterScore.svelte";function dd(e){let t,n,i,r,s,c,l,u,h,d,f,p,v,m,_,g,y,b=e[2].name+"";const w={c:function(){t=k("div"),n=k("div"),i=k("img"),s=T(),c=k("span"),l=x(e[3]),u=x(" XP"),h=T(),d=k("span"),f=x("LVL "),p=x(e[1]),v=x(" - "),m=x(b),_=T(),g=k("span"),y=x(e[0]),i.src!==(r=e[4]())&&Se(i,"src",r),Se(i,"alt",""),Se(i,"class","circle img z-depth-2 svelte-1elv10p"),a(i,hd,40,4,784),Se(c,"class","card-title svelte-1elv10p"),a(c,hd,42,4,850),Se(d,"class","card-title svelte-1elv10p"),a(d,hd,43,4,894),Se(g,"class","card-content"),a(g,hd,44,4,958),Se(n,"class","card-content white-text"),a(n,hd,38,2,741),Se(t,"class","card cyan darken-3 hoverable characterCard center-align svelte-1elv10p"),a(t,hd,37,0,669)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),ye(t,n),ye(n,i),ye(n,s),ye(n,c),ye(c,l),ye(c,u),ye(n,h),ye(n,d),ye(d,f),ye(d,p),ye(d,v),ye(d,m),ye(n,_),ye(n,g),ye(g,y)},p:function(e,[t]){8&t&&Ee(l,e[3]),2&t&&Ee(p,e[1]),4&t&&b!==(b=e[2].name+"")&&Ee(m,b),1&t&&Ee(y,e[0])},i:o,o:o,d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:w,id:dd.name,type:"component",source:"",ctx:e}),w}function fd(e,t,n){let{name:i}=t,{level:o}=t,{cclass:r}=t,{xp:s}=t;function a(){return Lt(created).format("MMMM Do YYYY, h:mm:ss a")}function c(){return"img/avatars/"+(1+Math.abs(i.hashCode()%12))+"p.png"}const l=["name","level","cclass","xp"];Object.keys(t).forEach(e=>{~l.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<CharacterScore> was created with unknown prop '${e}'`)});let{$$slots:u={},$$scope:h}=t;return Te("CharacterScore",u,[]),e.$set=e=>{"name"in e&&n(0,i=e.name),"level"in e&&n(1,o=e.level),"cclass"in e&&n(2,r=e.cclass),"xp"in e&&n(3,s=e.xp)},e.$capture_state=()=>({MediaQuery:xt,fade:Tt,moment:Lt,name:i,level:o,cclass:r,xp:s,formattedDate:a,avatar:c}),e.$inject_state=e=>{"name"in e&&n(0,i=e.name),"level"in e&&n(1,o=e.level),"cclass"in e&&n(2,r=e.cclass),"xp"in e&&n(3,s=e.xp)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,o,r,s,c]}class pd extends Le{constructor(e){super(e),_e(this,e,fd,dd,d,{name:0,level:1,cclass:2,xp:3}),ge("SvelteRegisterComponent",{component:this,tagName:"CharacterScore",options:e,id:dd.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"name"in n||console.warn("<CharacterScore> was created without expected prop 'name'"),void 0!==t[1]||"level"in n||console.warn("<CharacterScore> was created without expected prop 'level'"),void 0!==t[2]||"cclass"in n||console.warn("<CharacterScore> was created without expected prop 'cclass'"),void 0!==t[3]||"xp"in n||console.warn("<CharacterScore> was created without expected prop 'xp'")}get name(){throw new Error("<CharacterScore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(e){throw new Error("<CharacterScore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get level(){throw new Error("<CharacterScore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set level(e){throw new Error("<CharacterScore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get cclass(){throw new Error("<CharacterScore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set cclass(e){throw new Error("<CharacterScore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get xp(){throw new Error("<CharacterScore>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set xp(e){throw new Error("<CharacterScore>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:vd}=ue,md="src/characters/Characters.svelte";function _d(e,t,n){const i=e.slice();return i[16]=t[n],i}function gd(e,t,n){const i=e.slice();return i[16]=t[n],i}function yd(e){let t,n,i;const o=new pd({props:{name:e[16].name,level:e[16].level,xp:e[16].xp,cclass:e[16].class},$$inline:!0}),r={c:function(){t=k("div"),fe(o.$$.fragment),n=T(),Se(t,"class","col s3"),a(t,md,57,6,1127)},m:function(e,r){be(e,t,r),pe(o,t,null),ye(t,n),i=!0},p:function(e,t){const n={};2&t&&(n.name=e[16].name),2&t&&(n.level=e[16].level),2&t&&(n.xp=e[16].xp),2&t&&(n.cclass=e[16].class),o.$set(n)},i:function(e){i||(ce(o.$$.fragment,e),i=!0)},o:function(e){le(o.$$.fragment,e),i=!1},d:function(e){e&&we(t),ve(o)}};return ge("SvelteRegisterBlock",{block:r,id:yd.name,type:"each",source:"(57:4) {#each topTen as character}",ctx:e}),r}function bd(e){let t,n,i,o,r,s,c,l,u,h,d,f,p,v,m,_,g=e[16].level+"",y=e[16].name+"",b=e[16].class.name+"",w=e[16].description+"",C=e[16].xp+"";const S={c:function(){t=k("tr"),n=k("td"),i=x(g),o=T(),r=k("td"),s=x(y),c=T(),l=k("td"),u=x(b),h=T(),d=k("td"),f=x(w),p=T(),v=k("td"),m=x(C),_=T(),a(n,md,84,12,1635),a(r,md,85,12,1674),a(l,md,86,12,1712),a(d,md,87,12,1756),a(v,md,88,12,1801),a(t,md,83,10,1618)},m:function(e,a){be(e,t,a),ye(t,n),ye(n,i),ye(t,o),ye(t,r),ye(r,s),ye(t,c),ye(t,l),ye(l,u),ye(t,h),ye(t,d),ye(d,f),ye(t,p),ye(t,v),ye(v,m),ye(t,_)},p:function(e,t){1&t&&g!==(g=e[16].level+"")&&Ee(i,g),1&t&&y!==(y=e[16].name+"")&&Ee(s,y),1&t&&b!==(b=e[16].class.name+"")&&Ee(u,b),1&t&&w!==(w=e[16].description+"")&&Ee(f,w),1&t&&C!==(C=e[16].xp+"")&&Ee(m,C)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:S,id:bd.name,type:"each",source:"(83:8) {#each data as character}",ctx:e}),S}function wd(e){let t,n,i,o,r,s,c,l,u,h,d,f,p,v,m,_,g,y,b,w=e[1];xe(w);let C=[];for(let t=0;t<w.length;t+=1)C[t]=yd(gd(e,w,t));const E=e=>le(C[e],1,1,()=>{C[e]=null});let x=e[0];xe(x);let L=[];for(let t=0;t<x.length;t+=1)L[t]=bd(_d(e,x,t));const R={c:function(){t=k("div"),n=k("div");for(let e=0;e<C.length;e+=1)C[e].c();i=T(),o=k("div"),r=k("table"),s=k("thead"),c=k("tr"),l=k("th"),l.textContent="Level",u=T(),h=k("th"),h.textContent="Name",d=T(),f=k("th"),f.textContent="Class",p=T(),v=k("th"),v.textContent="Description",m=T(),_=k("th"),_.textContent="XP",g=T(),y=k("tbody");for(let e=0;e<L.length;e+=1)L[e].c();Se(n,"class","row"),a(n,md,54,2,1070),a(l,md,73,10,1413),a(h,md,74,10,1438),a(f,md,75,10,1462),a(v,md,76,10,1487),a(_,md,77,10,1518),a(c,md,72,8,1398),a(s,md,71,6,1382),a(y,md,81,6,1566),a(r,md,70,4,1368),a(o,md,68,2,1357),a(t,md,52,0,1061)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,a){be(e,t,a),ye(t,n);for(let e=0;e<C.length;e+=1)C[e].m(n,null);ye(t,i),ye(t,o),ye(o,r),ye(r,s),ye(s,c),ye(c,l),ye(c,u),ye(c,h),ye(c,d),ye(c,f),ye(c,p),ye(c,v),ye(c,m),ye(c,_),ye(r,g),ye(r,y);for(let e=0;e<L.length;e+=1)L[e].m(y,null);b=!0},p:function(e,[t]){if(2&t){let i;for(w=e[1],xe(w),i=0;i<w.length;i+=1){const o=gd(e,w,i);C[i]?(C[i].p(o,t),ce(C[i],1)):(C[i]=yd(o),C[i].c(),ce(C[i],1),C[i].m(n,null))}for(se(),i=w.length;i<C.length;i+=1)E(i);ae()}if(1&t){let n;for(x=e[0],xe(x),n=0;n<x.length;n+=1){const i=_d(e,x,n);L[n]?L[n].p(i,t):(L[n]=bd(i),L[n].c(),L[n].m(y,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=x.length}},i:function(e){if(!b){for(let e=0;e<w.length;e+=1)ce(C[e]);b=!0}},o:function(e){C=C.filter(Boolean);for(let e=0;e<C.length;e+=1)le(C[e]);b=!1},d:function(e){e&&we(t),S(C,e),S(L,e)}};return ge("SvelteRegisterBlock",{block:R,id:wd.name,type:"component",source:"",ctx:e}),R}function Cd(e,t,n){let i,o,r,s,a,c=[],l=[];const{isLoading:u,isAuthenticated:h,login:d,logout:p,authToken:m,authError:_,userInfo:g}=Us();f(u,"isLoading"),v(e,u,e=>n(8,i=e)),f(h,"isAuthenticated"),v(e,h,e=>n(9,o=e)),f(m,"authToken"),v(e,m,e=>n(12,a=e)),f(_,"authError"),v(e,_,e=>n(10,r=e)),f(g,"userInfo"),v(e,g,e=>n(11,s=e));const y=async()=>{i&&!o||Oa(a,e=>{n(0,c=e.slice(0,100)),n(1,l=e.slice(0,8))},e=>console.log(e))};W(async()=>{await y(),console.log("Finished loading characters")});const b=[];Object.keys(t).forEach(e=>{~b.indexOf(e)||"$$"===e.slice(0,2)||vd.warn(`<Characters> was created with unknown prop '${e}'`)});let w,{$$slots:C={},$$scope:S}=t;return Te("Characters",C,[]),e.$capture_state=()=>({CharacterScore:pd,onMount:W,createAuth:Ns,getAuth:Us,axios:La,onInterval:Ra,getCharacters:Oa,data:c,topTen:l,isLoading:u,isAuthenticated:h,login:d,logout:p,authToken:m,authError:_,userInfo:g,loadData:y,state:w,$isLoading:i,$isAuthenticated:o,$authError:r,$userInfo:s,$authToken:a}),e.$inject_state=e=>{"data"in e&&n(0,c=e.data),"topTen"in e&&n(1,l=e.topTen),"state"in e&&(w=e.state)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{7936&e.$$.dirty&&(w={isLoading:i,isAuthenticated:o,authError:r,userInfo:s?s.name:null,authToken:a.slice(0,20)})},[c,l,u,h,m,_,g]}class Sd extends Le{constructor(e){super(e),_e(this,e,Cd,wd,d,{}),ge("SvelteRegisterComponent",{component:this,tagName:"Characters",options:e,id:wd.name})}}const{console:kd}=ue,Ed="src/UserForm.svelte";function xd(e){let t,n,i,r,s,c,l,h,d,f,p,v,m,_,g,y,b,w,C,S,E,L,R,M,O,$,D,I,P,B,H,j,W,F;const N={c:function(){t=k("div"),n=k("h3"),n.textContent="Your Account data",i=T(),r=k("form"),s=k("div"),c=k("div"),l=k("input"),h=T(),d=k("label"),d.textContent="Reference ID",f=T(),p=k("div"),v=k("div"),m=k("input"),_=T(),g=k("label"),g.textContent="Name",y=T(),b=k("div"),w=k("div"),C=k("input"),S=T(),E=k("label"),E.textContent="Nickname",L=T(),R=k("div"),M=k("div"),O=k("input"),$=T(),D=k("label"),D.textContent="E-Mail",I=T(),P=k("div"),B=k("div"),H=k("button"),j=x("Submit\n        "),W=k("i"),W.textContent="send",a(n,Ed,69,2,1186),Se(l,"id","refid"),Se(l,"type","text"),l.disabled=!0,Se(l,"class","svelte-10o4r89"),a(l,Ed,74,8,1309),Se(d,"id","refidlabel"),Se(d,"for","refid"),Se(d,"class","active svelte-10o4r89"),a(d,Ed,75,8,1386),Se(c,"class","input-field col s12"),a(c,Ed,73,6,1267),Se(s,"class","row"),a(s,Ed,72,4,1243),Se(m,"id","username"),Se(m,"type","text"),Se(m,"class","validate svelte-10o4r89"),a(m,Ed,81,8,1552),Se(g,"for","username"),Se(g,"class","active"),a(g,Ed,87,8,1687),Se(v,"class","input-field col s12"),a(v,Ed,80,6,1510),Se(p,"class","row"),a(p,Ed,79,4,1486),Se(C,"id","usernickname"),Se(C,"type","text"),Se(C,"class","validate svelte-10o4r89"),a(C,Ed,92,8,1831),Se(E,"for","usernickname"),Se(E,"class","active"),a(E,Ed,98,8,1974),Se(w,"class","input-field col s12"),a(w,Ed,91,6,1789),Se(b,"class","row"),a(b,Ed,90,4,1765),Se(O,"id","useremail"),Se(O,"type","text"),Se(O,"class","validate svelte-10o4r89"),a(O,Ed,103,8,2126),Se(D,"for","useremail"),Se(D,"class","active"),a(D,Ed,109,8,2263),Se(M,"class","input-field col s12"),a(M,Ed,102,6,2084),Se(R,"class","row"),a(R,Ed,101,4,2060),Se(r,"class","col s12"),a(r,Ed,70,2,1215),Se(W,"class","material-icons right"),a(W,Ed,121,8,2541),Se(H,"class","btn waves-effect waves-light"),a(H,Ed,116,6,2415),Se(B,"class","input-field col s12"),a(B,Ed,115,4,2375),Se(P,"class","row"),a(P,Ed,114,2,2353),Se(t,"class","row"),a(t,Ed,68,0,1166)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,a,k){be(o,t,a),ye(t,n),ye(t,i),ye(t,r),ye(r,s),ye(s,c),ye(c,l),A(l,e[0].refid),ye(c,h),ye(c,d),ye(r,f),ye(r,p),ye(p,v),ye(v,m),A(m,e[0].name),ye(v,_),ye(v,g),ye(r,y),ye(r,b),ye(b,w),ye(w,C),A(C,e[0].nickname),ye(w,S),ye(w,E),ye(r,L),ye(r,R),ye(R,M),ye(M,O),A(O,e[0].email),ye(M,$),ye(M,D),ye(t,I),ye(t,P),ye(P,B),ye(B,H),ye(H,j),ye(H,W),k&&u(F),F=[Ce(l,"input",e[16]),Ce(m,"input",e[17]),Ce(C,"input",e[18]),Ce(O,"input",e[19]),Ce(H,"click",e[20],!1,!1,!1)]},p:function(e,[t]){1&t&&l.value!==e[0].refid&&A(l,e[0].refid),1&t&&m.value!==e[0].name&&A(m,e[0].name),1&t&&C.value!==e[0].nickname&&A(C,e[0].nickname),1&t&&O.value!==e[0].email&&A(O,e[0].email)},i:o,o:o,d:function(e){e&&we(t),u(F)}};return ge("SvelteRegisterBlock",{block:N,id:xd.name,type:"component",source:"",ctx:e}),N}function Td(e,t,n){let i,o,r,s,a,c,l=He({});f(l,"user"),v(e,l,e=>n(0,c=e));const{isLoading:u,isAuthenticated:h,login:d,logout:p,authToken:m,authError:_,userInfo:g}=Us();async function y(e){o&&jc(a,c,()=>{console.log("user updated ")})}f(u,"isLoading"),v(e,u,e=>n(9,i=e)),f(h,"isAuthenticated"),v(e,h,e=>n(10,o=e)),f(m,"authToken"),v(e,m,e=>n(13,a=e)),f(_,"authError"),v(e,_,e=>n(11,r=e)),f(g,"userInfo"),v(e,g,e=>n(12,s=e));const b=[];Object.keys(t).forEach(e=>{~b.indexOf(e)||"$$"===e.slice(0,2)||kd.warn(`<UserForm> was created with unknown prop '${e}'`)});let{$$slots:w={},$$scope:C}=t;Te("UserForm",w,[]);let S;return e.$capture_state=()=>({writable:He,onMount:W,createAuth:Ns,getAuth:Us,axios:La,onInterval:Ra,getUser:Hc,updateUser:jc,user:l,isLoading:u,isAuthenticated:h,login:d,logout:p,authToken:m,authError:_,userInfo:g,handleSubmit:y,state:S,$isLoading:i,$isAuthenticated:o,$authError:r,$userInfo:s,$authToken:a,$user:c}),e.$inject_state=e=>{"user"in e&&n(1,l=e.user),"state"in e&&(S=e.state)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{15872&e.$$.dirty&&(S={isLoading:i,isAuthenticated:o,authError:r,userInfo:s?s.name:null,authToken:a.slice(0,20),user:l}),8192&e.$$.dirty&&Hc(a,e=>{l.set(e)},e=>console.log(e))},[c,l,u,h,m,_,g,y,S,i,o,r,s,a,d,p,function(){c.refid=this.value,l.set(c)},function(){c.name=this.value,l.set(c)},function(){c.nickname=this.value,l.set(c)},function(){c.email=this.value,l.set(c)},()=>y()]}class Ld extends Le{constructor(e){super(e),_e(this,e,Td,xd,d,{}),ge("SvelteRegisterComponent",{component:this,tagName:"UserForm",options:e,id:xd.name})}}function Rd(e){let t;const n=new el({$$inline:!0}),i={c:function(){fe(n.$$.fragment)},m:function(e,i){pe(n,e,i),t=!0},i:function(e){t||(ce(n.$$.fragment,e),t=!0)},o:function(e){le(n.$$.fragment,e),t=!1},d:function(e){ve(n,e)}};return ge("SvelteRegisterBlock",{block:i,id:Rd.name,type:"slot",source:'(21:0) <Route path=\\"play\\" component=\\"{Game}\\">',ctx:e}),i}function Md(e){let t;const n=new ml({$$inline:!0}),i={c:function(){fe(n.$$.fragment)},m:function(e,i){pe(n,e,i),t=!0},i:function(e){t||(ce(n.$$.fragment,e),t=!0)},o:function(e){le(n.$$.fragment,e),t=!1},d:function(e){ve(n,e)}};return ge("SvelteRegisterBlock",{block:i,id:Md.name,type:"slot",source:'(24:0) <Route path=\\"/\\">',ctx:e}),i}function Od(e){let t,n,i,o,r,s;const a=new ft({props:{path:"account",component:Ld},$$inline:!0}),c=new ft({props:{path:"creator/*",component:ud},$$inline:!0}),l=new ft({props:{path:"list",component:Sd},$$inline:!0}),u=new ft({props:{path:"credits",component:Pe},$$inline:!0}),h=new ft({props:{path:"play",component:el,$$slots:{default:[Rd]},$$scope:{ctx:e}},$$inline:!0}),d=new ft({props:{path:"/",$$slots:{default:[Md]},$$scope:{ctx:e}},$$inline:!0}),f={c:function(){fe(a.$$.fragment),t=T(),fe(c.$$.fragment),n=T(),fe(l.$$.fragment),i=T(),fe(u.$$.fragment),o=T(),fe(h.$$.fragment),r=T(),fe(d.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,f){pe(a,e,f),be(e,t,f),pe(c,e,f),be(e,n,f),pe(l,e,f),be(e,i,f),pe(u,e,f),be(e,o,f),pe(h,e,f),be(e,r,f),pe(d,e,f),s=!0},p:function(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),h.$set(n);const i={};1&t&&(i.$$scope={dirty:t,ctx:e}),d.$set(i)},i:function(e){s||(ce(a.$$.fragment,e),ce(c.$$.fragment,e),ce(l.$$.fragment,e),ce(u.$$.fragment,e),ce(h.$$.fragment,e),ce(d.$$.fragment,e),s=!0)},o:function(e){le(a.$$.fragment,e),le(c.$$.fragment,e),le(l.$$.fragment,e),le(u.$$.fragment,e),le(h.$$.fragment,e),le(d.$$.fragment,e),s=!1},d:function(e){ve(a,e),e&&we(t),ve(c,e),e&&we(n),ve(l,e),e&&we(i),ve(u,e),e&&we(o),ve(h,e),e&&we(r),ve(d,e)}};return ge("SvelteRegisterBlock",{block:f,id:Od.name,type:"component",source:"",ctx:e}),f}function Ad(e,t,n){const i=[];Object.keys(t).forEach(e=>{~i.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<AppContent> was created with unknown prop '${e}'`)});let{$$slots:o={},$$scope:r}=t;return Te("AppContent",o,[]),e.$capture_state=()=>({Credits:Pe,Router:rt,Link:mt,Route:ft,navigate:qe,Game:el,Welcome:ml,Creator:ud,Characters:Sd,UserForm:Ld}),[]}class $d extends Le{constructor(e){super(e),_e(this,e,Ad,Od,d,{}),ge("SvelteRegisterComponent",{component:this,tagName:"AppContent",options:e,id:Od.name})}}const Dd="src/App.svelte";function Id(e,t,n){const i=e.slice();return i[9]=t[n],i}function Pd(e,t,n){const i=e.slice();return i[9]=t[n],i}function Bd(e){let t;const n={c:function(){t=x("Tales")},m:function(e,n){be(e,t,n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:n,id:Bd.name,type:"slot",source:'(144:12) <NavLink to=\\"/\\">',ctx:e}),n}function Hd(e){let t,n,i,r;const s=new wc({props:{size:"18"},$$inline:!0}),c={c:function(){t=k("span"),n=k("span"),fe(s.$$.fragment),i=x("\n                Play"),Se(n,"class","iconspacing valign-wrapper svelte-1sie3jl"),a(n,Dd,152,16,3533),Se(t,"class","valign-wrapper"),a(t,Dd,151,14,3487)},m:function(e,o){be(e,t,o),ye(t,n),pe(s,n,null),ye(t,i),r=!0},p:o,i:function(e){r||(ce(s.$$.fragment,e),r=!0)},o:function(e){le(s.$$.fragment,e),r=!1},d:function(e){e&&we(t),ve(s)}};return ge("SvelteRegisterBlock",{block:c,id:Hd.name,type:"slot",source:'(151:12) <NavLink to=\\"/play\\">',ctx:e}),c}function jd(e){let t,n,i,o;const r=new rl({props:{to:"/list",$$slots:{default:[Wd]},$$scope:{ctx:e}},$$inline:!0}),s=new rl({props:{to:"/creator/rooms",$$slots:{default:[Fd]},$$scope:{ctx:e}},$$inline:!0}),c={c:function(){t=k("li"),fe(r.$$.fragment),n=T(),i=k("li"),fe(s.$$.fragment),a(t,Dd,161,12,3768),a(i,Dd,171,12,4096)},m:function(e,a){be(e,t,a),pe(r,t,null),be(e,n,a),be(e,i,a),pe(s,i,null),o=!0},i:function(e){o||(ce(r.$$.fragment,e),ce(s.$$.fragment,e),o=!0)},o:function(e){le(r.$$.fragment,e),le(s.$$.fragment,e),o=!1},d:function(e){e&&we(t),ve(r),e&&we(n),e&&we(i),ve(s)}};return ge("SvelteRegisterBlock",{block:c,id:jd.name,type:"if",source:"(161:10) {#if $isAuthenticated}",ctx:e}),c}function Wd(e){let t,n,i,r;const s=new Bc({props:{size:"18"},$$inline:!0}),c={c:function(){t=k("span"),n=k("span"),fe(s.$$.fragment),i=x("\n                  Top Characters"),Se(n,"class","iconspacing valign-wrapper svelte-1sie3jl"),a(n,Dd,164,18,3872),Se(t,"class","valign-wrapper"),a(t,Dd,163,16,3824)},m:function(e,o){be(e,t,o),ye(t,n),pe(s,n,null),ye(t,i),r=!0},p:o,i:function(e){r||(ce(s.$$.fragment,e),r=!0)},o:function(e){le(s.$$.fragment,e),r=!1},d:function(e){e&&we(t),ve(s)}};return ge("SvelteRegisterBlock",{block:c,id:Wd.name,type:"slot",source:'(163:14) <NavLink to=\\"/list\\">',ctx:e}),c}function Fd(e){let t,n,i,r;const s=new fc({props:{size:"18"},$$inline:!0}),c={c:function(){t=k("span"),n=k("span"),fe(s.$$.fragment),i=x("\n                  Creator"),Se(n,"class","iconspacing valign-wrapper svelte-1sie3jl"),a(n,Dd,174,18,4209),Se(t,"class","valign-wrapper"),a(t,Dd,173,16,4161)},m:function(e,o){be(e,t,o),ye(t,n),pe(s,n,null),ye(t,i),r=!0},p:o,i:function(e){r||(ce(s.$$.fragment,e),r=!0)},o:function(e){le(s.$$.fragment,e),r=!1},d:function(e){e&&we(t),ve(s)}};return ge("SvelteRegisterBlock",{block:c,id:Fd.name,type:"slot",source:'(173:14) <NavLink to=\\"/creator/rooms\\">',ctx:e}),c}function Nd(e){let t;const n={c:function(){t=x("News")},m:function(e,n){be(e,t,n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:n,id:Nd.name,type:"slot",source:'(184:12) <NavLink to=\\"signup\\">',ctx:e}),n}function Ud(e){let t;const n=new wt({props:{query:"(max-width: 1280px)",$$slots:{default:[Zd,({matches:e})=>({8:e}),({matches:e})=>e?256:0]},$$scope:{ctx:e}},$$inline:!0}),i={c:function(){fe(n.$$.fragment)},m:function(e,i){pe(n,e,i),t=!0},p:function(e,t){const i={};16644&t&&(i.$$scope={dirty:t,ctx:e}),n.$set(i)},i:function(e){t||(ce(n.$$.fragment,e),t=!0)},o:function(e){le(n.$$.fragment,e),t=!1},d:function(e){ve(n,e)}};return ge("SvelteRegisterBlock",{block:i,id:Ud.name,type:"if",source:"(190:6) {#if $subMenu.active}",ctx:e}),i}function qd(e){let t,n,i,o=e[2].entries;xe(o);let r=[];for(let t=0;t<o.length;t+=1)r[t]=Vd(Id(e,o,t));const s=e=>le(r[e],1,1,()=>{r[e]=null}),c={c:function(){t=k("div"),n=k("ul");for(let e=0;e<r.length;e+=1)r[e].c();Se(n,"class","tabs tabs-transparent"),a(n,Dd,203,14,5080),Se(t,"class","nav-content container"),a(t,Dd,202,12,5030)},m:function(e,o){be(e,t,o),ye(t,n);for(let e=0;e<r.length;e+=1)r[e].m(n,null);i=!0},p:function(e,t){if(4&t){let i;for(o=e[2].entries,xe(o),i=0;i<o.length;i+=1){const s=Id(e,o,i);r[i]?(r[i].p(s,t),ce(r[i],1)):(r[i]=Vd(s),r[i].c(),ce(r[i],1),r[i].m(n,null))}for(se(),i=o.length;i<r.length;i+=1)s(i);ae()}},i:function(e){if(!i){for(let e=0;e<o.length;e+=1)ce(r[e]);i=!0}},o:function(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)le(r[e]);i=!1},d:function(e){e&&we(t),S(r,e)}};return ge("SvelteRegisterBlock",{block:c,id:qd.name,type:"else",source:"(202:10) {:else}",ctx:e}),c}function zd(e){let t,n,i,o=e[2].entries;xe(o);let r=[];for(let t=0;t<o.length;t+=1)r[t]=Gd(Pd(e,o,t));const s=e=>le(r[e],1,1,()=>{r[e]=null}),c={c:function(){t=k("div"),n=k("ul");for(let e=0;e<r.length;e+=1)r[e].c();Se(n,"class","tabs tabs-transparent"),a(n,Dd,193,14,4724),Se(t,"class","nav-content"),a(t,Dd,192,12,4684)},m:function(e,o){be(e,t,o),ye(t,n);for(let e=0;e<r.length;e+=1)r[e].m(n,null);i=!0},p:function(e,t){if(4&t){let i;for(o=e[2].entries,xe(o),i=0;i<o.length;i+=1){const s=Pd(e,o,i);r[i]?(r[i].p(s,t),ce(r[i],1)):(r[i]=Gd(s),r[i].c(),ce(r[i],1),r[i].m(n,null))}for(se(),i=o.length;i<r.length;i+=1)s(i);ae()}},i:function(e){if(!i){for(let e=0;e<o.length;e+=1)ce(r[e]);i=!0}},o:function(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)le(r[e]);i=!1},d:function(e){e&&we(t),S(r,e)}};return ge("SvelteRegisterBlock",{block:c,id:zd.name,type:"if",source:"(192:10) {#if matches}",ctx:e}),c}function Yd(e){let t,n=e[9].name+"";const i={c:function(){t=x(n)},m:function(e,n){be(e,t,n)},p:function(e,i){4&i&&n!==(n=e[9].name+"")&&Ee(t,n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:i,id:Yd.name,type:"slot",source:'(207:20) <NavLink to=\\"{entry.nav}\\">',ctx:e}),i}function Vd(e){let t,n,i;const o=new rl({props:{to:e[9].nav,$$slots:{default:[Yd]},$$scope:{ctx:e}},$$inline:!0}),r={c:function(){t=k("li"),fe(o.$$.fragment),n=T(),Se(t,"class","tab"),a(t,Dd,205,18,5183)},m:function(e,r){be(e,t,r),pe(o,t,null),ye(t,n),i=!0},p:function(e,t){const n={};4&t&&(n.to=e[9].nav),16388&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n)},i:function(e){i||(ce(o.$$.fragment,e),i=!0)},o:function(e){le(o.$$.fragment,e),i=!1},d:function(e){e&&we(t),ve(o)}};return ge("SvelteRegisterBlock",{block:r,id:Vd.name,type:"each",source:"(205:16) {#each $subMenu.entries as entry}",ctx:e}),r}function Kd(e){let t,n=e[9].name+"";const i={c:function(){t=x(n)},m:function(e,n){be(e,t,n)},p:function(e,i){4&i&&n!==(n=e[9].name+"")&&Ee(t,n)},d:function(e){e&&we(t)}};return ge("SvelteRegisterBlock",{block:i,id:Kd.name,type:"slot",source:'(197:20) <NavLink to=\\"{entry.nav}\\">',ctx:e}),i}function Gd(e){let t,n,i;const o=new rl({props:{to:e[9].nav,$$slots:{default:[Kd]},$$scope:{ctx:e}},$$inline:!0}),r={c:function(){t=k("li"),fe(o.$$.fragment),n=T(),Se(t,"class","tab"),a(t,Dd,195,18,4827)},m:function(e,r){be(e,t,r),pe(o,t,null),ye(t,n),i=!0},p:function(e,t){const n={};4&t&&(n.to=e[9].nav),16388&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n)},i:function(e){i||(ce(o.$$.fragment,e),i=!0)},o:function(e){le(o.$$.fragment,e),i=!1},d:function(e){e&&we(t),ve(o)}};return ge("SvelteRegisterBlock",{block:r,id:Gd.name,type:"each",source:"(195:16) {#each $subMenu.entries as entry}",ctx:e}),r}function Zd(e){let t,n,i,o;const r=[zd,qd],s=[];function a(e,t){return e[8]?0:1}t=a(e),n=s[t]=r[t](e);const c={c:function(){n.c(),i=L()},m:function(e,n){s[t].m(e,n),be(e,i,n),o=!0},p:function(e,o){let c=t;t=a(e),t===c?s[t].p(e,o):(se(),le(s[c],1,1,()=>{s[c]=null}),ae(),n=s[t],n||(n=s[t]=r[t](e),n.c()),ce(n,1),n.m(i.parentNode,i))},i:function(e){o||(ce(n),o=!0)},o:function(e){le(n),o=!1},d:function(e){s[t].d(e),e&&we(i)}};return ge("SvelteRegisterBlock",{block:c,id:Zd.name,type:"slot",source:'(191:8) <MediaQuery query=\\"(max-width: 1280px)\\" let:matches>',ctx:e}),c}function Xd(e){let t,n;const i=new $d({$$inline:!0}),o={c:function(){t=k("main"),fe(i.$$.fragment),a(t,Dd,224,8,5593)},m:function(e,o){be(e,t,o),pe(i,t,null),n=!0},i:function(e){n||(ce(i.$$.fragment,e),n=!0)},o:function(e){le(i.$$.fragment,e),n=!1},d:function(e){e&&we(t),ve(i)}};return ge("SvelteRegisterBlock",{block:o,id:Xd.name,type:"else",source:"(224:6) {:else}",ctx:e}),o}function Jd(e){let t,n;const i=new $d({$$inline:!0}),o={c:function(){t=k("main"),fe(i.$$.fragment),Se(t,"class","container"),a(t,Dd,219,8,5504)},m:function(e,o){be(e,t,o),pe(i,t,null),n=!0},i:function(e){n||(ce(i.$$.fragment,e),n=!0)},o:function(e){le(i.$$.fragment,e),n=!1},d:function(e){e&&we(t),ve(i)}};return ge("SvelteRegisterBlock",{block:o,id:Jd.name,type:"if",source:"(219:6) {#if matches}",ctx:e}),o}function Qd(e){let t,n,i,o;const r=[Jd,Xd],s=[];function a(e,t){return e[8]?0:1}t=a(e),n=s[t]=r[t](e);const c={c:function(){n.c(),i=L()},m:function(e,n){s[t].m(e,n),be(e,i,n),o=!0},p:function(e,o){let c=t;t=a(e),t!==c&&(se(),le(s[c],1,1,()=>{s[c]=null}),ae(),n=s[t],n||(n=s[t]=r[t](e),n.c()),ce(n,1),n.m(i.parentNode,i))},i:function(e){o||(ce(n),o=!0)},o:function(e){le(n),o=!1},d:function(e){s[t].d(e),e&&we(i)}};return ge("SvelteRegisterBlock",{block:c,id:Qd.name,type:"slot",source:'(218:4) <MediaQuery query=\\"(min-width: 1281px)\\" let:matches>',ctx:e}),c}function ef(e){let t,n,i,o,r,s,c,l,u,h,d,f,p,v,m,_;const g=new lc({props:{size:"24"},$$inline:!0}),y=new rl({props:{to:"/",$$slots:{default:[Bd]},$$scope:{ctx:e}},$$inline:!0}),b=new rl({props:{to:"/play",$$slots:{default:[Hd]},$$scope:{ctx:e}},$$inline:!0});let w=e[1]&&jd(e);const C=new rl({props:{to:"signup",$$slots:{default:[Nd]},$$scope:{ctx:e}},$$inline:!0}),S=new Vc({$$inline:!0});let E=e[2].active&&Ud(e);const x=new wt({props:{query:"(min-width: 1281px)",$$slots:{default:[Qd,({matches:e})=>({8:e}),({matches:e})=>e?256:0]},$$scope:{ctx:e}},$$inline:!0}),L={c:function(){t=k("nav"),n=k("div"),i=k("a"),o=k("span"),r=k("span"),fe(g.$$.fragment),s=T(),fe(y.$$.fragment),c=T(),l=k("ul"),u=k("li"),fe(b.$$.fragment),h=T(),w&&w.c(),d=T(),f=k("li"),fe(C.$$.fragment),p=T(),fe(S.$$.fragment),v=T(),E&&E.c(),m=T(),fe(x.$$.fragment),Se(r,"class","iconspacing svelte-1sie3jl"),a(r,Dd,139,12,3201),Se(o,"class","valign-wrapper italic"),a(o,Dd,138,10,3152),Se(i,"href","#"),Se(i,"class","brand-logo svelte-1sie3jl"),a(i,Dd,137,8,3110),a(u,Dd,149,10,3435),a(f,Dd,182,10,4439),Se(l,"class","right hide-on-small-only"),a(l,Dd,147,8,3386),Se(n,"class","nav-wrapper container"),a(n,Dd,136,6,3066),Se(t,"class","nav-extended svelte-1sie3jl"),a(t,Dd,135,4,3033)},m:function(e,a){be(e,t,a),ye(t,n),ye(n,i),ye(i,o),ye(o,r),pe(g,r,null),ye(o,s),pe(y,o,null),ye(n,c),ye(n,l),ye(l,u),pe(b,u,null),ye(l,h),w&&w.m(l,null),ye(l,d),ye(l,f),pe(C,f,null),ye(l,p),pe(S,l,null),ye(t,v),E&&E.m(t,null),be(e,m,a),pe(x,e,a),_=!0},p:function(e,n){const i={};16384&n&&(i.$$scope={dirty:n,ctx:e}),y.$set(i);const o={};16384&n&&(o.$$scope={dirty:n,ctx:e}),b.$set(o),e[1]?w?2&n&&ce(w,1):(w=jd(e),w.c(),ce(w,1),w.m(l,d)):w&&(se(),le(w,1,1,()=>{w=null}),ae());const r={};16384&n&&(r.$$scope={dirty:n,ctx:e}),C.$set(r),e[2].active?E?(E.p(e,n),4&n&&ce(E,1)):(E=Ud(e),E.c(),ce(E,1),E.m(t,null)):E&&(se(),le(E,1,1,()=>{E=null}),ae());const s={};16640&n&&(s.$$scope={dirty:n,ctx:e}),x.$set(s)},i:function(e){_||(ce(g.$$.fragment,e),ce(y.$$.fragment,e),ce(b.$$.fragment,e),ce(w),ce(C.$$.fragment,e),ce(S.$$.fragment,e),ce(E),ce(x.$$.fragment,e),_=!0)},o:function(e){le(g.$$.fragment,e),le(y.$$.fragment,e),le(b.$$.fragment,e),le(w),le(C.$$.fragment,e),le(S.$$.fragment,e),le(E),le(x.$$.fragment,e),_=!1},d:function(e){e&&we(t),ve(g),ve(y),ve(b),w&&w.d(),ve(C),ve(S),E&&E.d(),e&&we(m),ve(x,e)}};return ge("SvelteRegisterBlock",{block:L,id:ef.name,type:"slot",source:'(135:2) <Router url=\\"{url}\\">',ctx:e}),L}function tf(e){let t,n,i,o,r,s,c,l,u;const h=new rt({props:{url:e[0],$$slots:{default:[ef]},$$scope:{ctx:e}},$$inline:!0}),d={c:function(){t=k("script"),i=k("link"),o=k("script"),s=k("link"),c=T(),l=k("div"),fe(h.$$.fragment),t.src!==(n="https://cdn.auth0.com/js/auth0/9.0/auth0.min.js")&&Se(t,"src","https://cdn.auth0.com/js/auth0/9.0/auth0.min.js"),a(t,Dd,114,2,2540),Se(i,"rel","stylesheet"),Se(i,"href","https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"),a(i,Dd,117,2,2618),o.src!==(r="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js")&&Se(o,"src","https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"),a(o,Dd,121,2,2744),Se(s,"rel","stylesheet"),Se(s,"href","https://fonts.googleapis.com/icon?family=Material+Icons"),a(s,Dd,125,2,2862),Se(l,"class","root default"),a(l,Dd,132,0,2978)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,n){ye(document.head,t),ye(document.head,i),ye(document.head,o),ye(document.head,s),be(e,c,n),be(e,l,n),pe(h,l,null),u=!0},p:function(e,[t]){const n={};1&t&&(n.url=e[0]),16390&t&&(n.$$scope={dirty:t,ctx:e}),h.$set(n)},i:function(e){u||(ce(h.$$.fragment,e),u=!0)},o:function(e){le(h.$$.fragment,e),u=!1},d:function(e){we(t),we(i),we(o),we(s),e&&we(c),e&&we(l),ve(h)}};return ge("SvelteRegisterBlock",{block:d,id:tf.name,type:"component",source:"",ctx:e}),d}function nf(e,t,n){let i,o,r;f(sd,"subMenu"),v(e,sd,e=>n(2,r=e));const s={domain:"owndnd.eu.auth0.com",client_id:"mxcEqTuAUOzrL798mbVTpqFxpGGVp3gI",audience:"http://talesofapirate.com/dnd/api"},{isAuthenticated:a,authToken:c}=Ns(s);f(a,"isAuthenticated"),v(e,a,e=>n(1,i=e)),f(c,"authToken"),v(e,c,e=>n(6,o=e)),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},W(async()=>{});let{url:l=""}=t;const u=["url"];Object.keys(t).forEach(e=>{~u.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<App> was created with unknown prop '${e}'`)});let h,{$$slots:d={},$$scope:p}=t;return Te("App",d,[]),e.$set=e=>{"url"in e&&n(0,l=e.url)},e.$capture_state=()=>({Sprites:Ae,AppContent:$d,MediaQuery:wt,HashIcon:_c,ShieldIcon:Rc,BookOpenIcon:lc,EditIcon:fc,PlayIcon:wc,UsersIcon:Bc,Router:rt,Link:mt,Route:ft,navigate:qe,Game:el,Welcome:ml,Creator:ud,Characters:Sd,UserForm:Ld,afterUpdate:F,onMount:W,NavLink:rl,user:rd,subMenu:sd,fade:Tt,UserMenu:Vc,createAuth:Ns,config:s,isAuthenticated:a,authToken:c,url:l,state:h,$isAuthenticated:i,$authToken:o,$subMenu:r}),e.$inject_state=e=>{"url"in e&&n(0,l=e.url),"state"in e&&(h=e.state)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{66&e.$$.dirty&&(h={isAuthenticated:i,authToken:o.slice(0,20)})},[l,i,r,a,c]}Object.defineProperty(String.prototype,"hashCode",{value:function(){var e,t=0;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t}});const of=new class extends Le{constructor(e){super(e),_e(this,e,nf,tf,d,{url:0}),ge("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:tf.name})}get url(){throw new Error("<App>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set url(e){throw new Error("<App>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}({target:document.body,props:{}});return M.AutoInit(),of}();
//# sourceMappingURL=bundle.js.map
